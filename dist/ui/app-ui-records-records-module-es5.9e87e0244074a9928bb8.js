!function(){function e(e,i){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t,i){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=u(e);if(t){var a=u(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return c(this,i)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/Gkq":function(t,n,l){"use strict";l.r(n),l.d(n,"RecordsModule",(function(){return wt}));var c=l("iInd"),b=l("IbW5"),f=l("XDzf"),d=l("LoRy"),g=l("Jc6/"),h=l("uuU0"),p=l("ObUu"),v=l("XIp8"),m=l("8Y7J"),y=l("3qho"),P=l("SVse"),x=l("I0FJ"),F=l("s7LF"),I=l("UXR7"),w=l("OTwK"),S=l("s7Af"),k=l("AH7H"),O=l("Y+zs");function C(e,t){if(1&e&&(m.Ob(0),m.Lb(1,"user-info",9),m.Lb(2,"hr"),m.Nb()),2&e){var i=m.Zb(2);m.xb(1),m.gc("user",i.data.user)}}function L(e,t){1&e&&m.Lb(0,"hr",12)}function R(e,t){if(1&e&&(m.Ob(0),m.Lb(1,"rich-text-container",10),m.Bc(2,L,1,0,"hr",11),m.Nb()),2&e){var i=m.Zb(2);m.xb(1),m.gc("value",i.data.type.informationText),m.xb(1),m.gc("ngIf",i.data.fields)}}var T=function(e,t,i){return{"mb-0":e,"mb-2":t,"border-top-0":i}};function B(e,t){if(1&e&&(m.Qb(0,"h2",13),m.Dc(1),m.Pb()),2&e){var i=m.Zb(2);m.gc("ngClass",m.lc(2,T,"above"===i.labelPosition,"above"!==i.labelPosition,!i.data.type.informationText)),m.xb(1),m.Fc(" ",i.i18n.record.fields," ")}}function Z(e,t){if(1&e&&m.Lb(0,"custom-field-input",14),2&e){var i=t.$implicit,n=m.Zb(2);m.zb(n.resolveColumnClass(i)),m.gc("labelPosition",n.labelPosition)("field",i)("formControl",n.form.get("customValues").get(i.internalName))("binaryValues",n.binaryValues)}}function D(e,t){if(1&e&&m.Lb(0,"custom-field-input",14),2&e){var i=t.$implicit,n=m.Zb(3);m.zb(n.resolveColumnClass(i)),m.gc("labelPosition",n.labelPosition)("field",i)("formControl",n.form.get("customValues").get(i.internalName))("binaryValues",n.binaryValues)}}var $=function(e,t,i,n){return{"mb-0":e,"mb-2":t,"mt-4":i,"border-top-0":n}};function Q(e,t){if(1&e&&(m.Ob(0),m.Qb(1,"h2",13),m.Dc(2),m.Pb(),m.Bc(3,D,1,6,"custom-field-input",6),m.Nb()),2&e){var i=t.$implicit,n=t.first,a=m.Zb(2);m.xb(1),m.gc("ngClass",m.mc(3,$,"above"===a.labelPosition,"above"!==a.labelPosition,a.fieldsWithoutSection.length>0,n&&0==a.fieldsWithoutSection.length)),m.xb(1),m.Fc(" ",i.name," "),m.xb(1),m.gc("ngForOf",a.fieldsWithSection.get(i))}}var N=function(e){return{"mr-n3":e}};function V(e,t){if(1&e){var i=m.Rb();m.Qb(0,"page-content",2),m.Bc(1,C,3,1,"ng-container",3),m.Qb(2,"form",4),m.Bc(3,R,3,2,"ng-container",3),m.Bc(4,B,2,6,"h2",5),m.Bc(5,Z,1,6,"custom-field-input",6),m.Bc(6,Q,4,8,"ng-container",7),m.Pb(),m.Qb(7,"actions"),m.Qb(8,"action-button",8),m.Xb("action",(function(){return m.sc(i),m.Zb().save()})),m.ac(9,"async"),m.Pb(),m.Pb(),m.Pb()}if(2&e){var n=m.Zb();m.gc("heading",n.create?n.i18n.record.title.new(n.data.type.name):n.i18n.record.title.edit(n.data.type.name))("mobileHeading",n.create?n.i18n.record.mobileTitle.new(n.data.type.name):n.i18n.record.mobileTitle.edit(n.data.type.name)),m.xb(1),m.gc("ngIf",n.data.user&&!n.authHelper.isSelf(n.data.user)),m.xb(1),m.gc("formGroup",n.form)("ngClass",m.jc(13,N,n.columnLayout)),m.xb(1),m.gc("ngIf",n.data.type.informationText),m.xb(1),m.gc("ngIf",n.fieldsWithoutSection.length>0),m.xb(1),m.gc("ngForOf",n.fieldsWithoutSection),m.xb(1),m.gc("ngForOf",n.fieldsWithSection.keys()),m.xb(2),m.gc("disabled",m.bc(9,11,n.requesting$))("label",n.i18n.general.save)}}var A,M=((A=function(t){o(l,t);var n=s(l);function l(e,t,a){var r;return i(this,l),(r=n.call(this,e)).recordsService=t,r.recordsHelper=a,r.fieldsWithSection=new Map,r}return a(l,[{key:"ngOnInit",value:function(){var e=this;r(u(l.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.owner,this.type=this.route.snapshot.params.type,this.create=null!=this.param,this.id=this.route.snapshot.paramMap.get("id");var t=this.create?this.recordsService.getRecordDataForNew({owner:this.param,type:this.type}):this.recordsService.getRecordDataForEdit({id:this.id});this.addSub(t.subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;this.columnLayout=this.recordsHelper.isColumnLayout(e.type),this.fieldsWithoutSection=e.fields.filter((function(e){return null==e.section}))||[],(e.type.sections||[]).forEach((function(i){var n=e.fields.filter((function(e){return null!=e.section&&e.section.id===i.id}));Object(p.h)(n)||t.fieldsWithSection.set(i,n)})),this.form=this.formBuilder.group({}),this.form.setControl("customValues",this.fieldHelper.customValuesFormGroup(e.fields,{currentValues:e.record.customValues,disabledProvider:function(i){return!t.create&&-1===(e.editableFields||[]).indexOf(i.internalName)}}))}},{key:"resolveColumnClass",value:function(e){return this.recordsHelper.resolveColumnClass(e,this.data.type)}},{key:"resolveMenu",value:function(e){return this.menu.menuForRecordType(e.user,e.type)}},{key:"save",value:function(){var t=this;if(Object(p.F)(this.form),this.form.valid){var i=Object(v.a)(this.data.record);i.customValues=this.form.value.customValues;var n=this.create?this.recordsService.createRecord({owner:this.param,type:this.type,body:i}):this.recordsService.updateRecord({id:this.id,body:i});this.addSub(n.subscribe((function(i){t.notification.snackBar(t.create?t.i18n.record.created(t.data.type.name):t.i18n.record.saved(t.data.type.name));var n=null==t.id;if(n&&t.data.type.layout===f.eb.SINGLE){var a,r=e(t.recordsHelper.recordPermissions(null==t.data.user));try{for(r.s();!(a=r.n()).done;){var o=a.value;o.type.id===t.data.type.id&&(o.singleRecordId=i)}}catch(l){r.e(l)}finally{r.f()}}t.router.navigate(["/records","view",i||t.id],{replaceUrl:n})})))}}},{key:"binaryValues",get:function(){return this.data.binaryValues}},{key:"labelPosition",get:function(){return this.columnLayout?"above":"auto"}}]),l}(h.a)).\u0275fac=function(e){return new(e||A)(m.Kb(m.r),m.Kb(d.a),m.Kb(g.a))},A.\u0275cmp=m.Eb({type:A,selectors:[["record-form"]],features:[m.ub],decls:3,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading",4,"ngIf"],[3,"heading","mobileHeading"],[4,"ngIf"],[3,"formGroup","ngClass"],[3,"ngClass",4,"ngIf"],[3,"labelPosition","field","formControl","class","binaryValues",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"disabled","label","action"],[3,"user"],[3,"value"],["class","border-0",4,"ngIf"],[1,"border-0"],[3,"ngClass"],[3,"labelPosition","field","formControl","binaryValues"]],template:function(e,t){1&e&&(m.Qb(0,"page-layout",0),m.ac(1,"async"),m.Bc(2,V,10,15,"page-content",1),m.Pb()),2&e&&(m.gc("ready",m.bc(1,2,t.data$)),m.xb(2),m.gc("ngIf",t.data))},directives:[y.a,P.t,x.a,F.I,F.w,F.n,P.q,P.s,I.a,w.a,S.a,k.a,O.a,F.v,F.k],pipes:[P.b],encapsulation:2,changeDetection:0}),A),E=l("tAww"),H=l("rCAV"),j=l("v4xg"),z=l("DIHi"),W=l("JbOn"),_=l("Zilp"),G=l("IbGL"),K=l("Ae/X"),U=l("JFlR"),X=l("Ls5z"),q=l("4APx"),J=l("chz4"),Y=l("6g1M"),ee=l("uao2"),te=l("fe3a"),ie=l("iM3x"),ne=l("5Wk5"),ae=l("978R"),re=l("H4pW"),oe=l("/kmK");function le(e,t){1&e&&m.Lb(0,"div",5)}function se(e,t){if(1&e&&(m.Ob(0),m.Qb(1,"div",5),m.Qb(2,"label-value",12),m.Lb(3,"user-link",13),m.Pb(),m.Pb(),m.Bc(4,le,1,0,"div",14),m.Nb()),2&e){var i=m.Zb(2);m.xb(2),m.gc("label",i.i18n.general.user),m.xb(1),m.gc("user",i.user),m.xb(1),m.gc("ngIf",i.layout.gtsm$)}}function ce(e,t){if(1&e&&m.Lb(0,"field-option",19),2&e){var i=t.$implicit,n=m.Zb(4);m.gc("value",n.ApiHelper.internalNameOrId(i))("internalName",i.internalName)("id",i.id)("text",i.name)("parent",i.groupSet)}}function ue(e,t){if(1&e&&(m.Qb(0,"div",5),m.Qb(1,"multi-selection-field",17),m.Bc(2,ce,1,5,"field-option",18),m.Pb(),m.Pb()),2&e){var i=m.Zb(3);m.xb(1),m.gc("label",i.i18n.user.groups),m.xb(1),m.gc("ngForOf",i.groups)}}var be=function(){return["broker"]},fe=function(e){return{roles:e}};function de(e,t){if(1&e&&(m.Ob(0),m.Bc(1,ue,3,2,"div",14),m.Qb(2,"div",5),m.Lb(3,"user-field",15),m.Pb(),m.Qb(4,"div",5),m.Lb(5,"user-field",16),m.Pb(),m.Nb()),2&e){var i=m.Zb(2);m.xb(1),m.gc("ngIf",i.groups.length>1),m.xb(2),m.gc("label",i.i18n.user.broker)("filters",m.jc(5,fe,m.ic(4,be))),m.xb(2),m.gc("label",i.i18n.general.user)}}function ge(e,t){if(1&e&&(m.Ob(0),m.Lb(1,"div",20),m.Qb(2,"div",5),m.Lb(3,"date-field",21),m.Pb(),m.Qb(4,"div",5),m.Lb(5,"date-field",22),m.Pb(),m.Nb()),2&e){var i=m.Zb(2);m.xb(3),m.gc("label",i.i18n.general.beginDate),m.xb(2),m.gc("label",i.i18n.general.endDate)}}function he(e,t){if(1&e&&(m.Qb(0,"div",5),m.Lb(1,"custom-field-filter",23),m.Pb()),2&e){var i=t.$implicit,n=m.Zb(2);m.xb(1),m.gc("field",i)("formControl",n.form.get("customValues").get(i.internalName))}}function pe(e,t){if(1&e&&(m.Qb(0,"div",5),m.Lb(1,"basic-profile-field-filter",23),m.Pb()),2&e){var i=t.$implicit,n=m.Zb(3);m.xb(1),m.gc("field",i)("formControl",n.form.get("profileFields").get(i.field))}}function ve(e,t){if(1&e&&(m.Qb(0,"div",5),m.Lb(1,"custom-field-filter",23),m.Pb()),2&e){var i=t.$implicit,n=m.Zb(3);m.xb(1),m.gc("field",i)("formControl",n.form.get("profileFields").get(i.internalName))}}function me(e,t){if(1&e&&(m.Ob(0),m.Bc(1,pe,2,2,"div",8),m.Bc(2,ve,2,2,"div",8),m.Nb()),2&e){var i=m.Zb(2);m.xb(1),m.gc("ngForOf",i.basicProfileFields),m.xb(1),m.gc("ngForOf",i.customProfileFields)}}function ye(e,t){if(1&e&&(m.Qb(0,"label-value",30),m.Dc(1),m.ac(2,"dateTime"),m.Pb()),2&e){var i=m.Zb().$implicit,n=m.Zb(2);m.gc("label",n.i18n.general.creationDate),m.xb(1),m.Fc(" ",m.bc(2,2,i.creationDate)," ")}}function Pe(e,t){if(1&e&&(m.Qb(0,"label-value",30),m.Dc(1),m.Pb()),2&e){var i=m.Zb().$implicit,n=m.Zb(2);m.gc("label",n.i18n.general.user),m.xb(1),m.Fc(" ",n.recordOwner(i)," ")}}function xe(e,t){if(1&e&&(m.Qb(0,"label-value",30),m.Lb(1,"format-field-value",31),m.Pb()),2&e){var i=t.$implicit,n=m.Zb().$implicit,a=m.Zb(2);m.gc("label",i.name),m.xb(1),m.gc("fields",a.data.customFields)("plainText",!0)("fieldName",i.internalName)("object",n)("customValues",n.customValues)}}function Fe(e,t){if(1&e){var i=m.Rb();m.Qb(0,"button",32),m.Xb("click",(function(e){m.sc(i);var t=m.Zb().$implicit,n=m.Zb(2);return n.router.navigate(n.editPath(t)),e.stopPropagation(),e.preventDefault()})),m.Lb(1,"icon",33),m.Pb()}if(2&e){var n=m.Zb(3);m.gc("tooltip",n.i18n.general.edit)}}var Ie=function(e){return{"mt-2":e}};function we(e,t){if(1&e){var i=m.Rb();m.Qb(0,"button",34),m.Xb("click",(function(e){m.sc(i);var t=m.Zb().$implicit;return m.Zb(2).remove(t),e.stopPropagation(),e.preventDefault()})),m.Lb(1,"icon",35),m.Pb()}if(2&e){var n=m.Zb(3);m.gc("tooltip",n.i18n.general.remove)("ngClass",m.jc(2,Ie,n.data.edit))}}function Se(e,t){if(1&e&&(m.Qb(0,"mobile-result"),m.Qb(1,"div",24),m.Qb(2,"div"),m.Bc(3,ye,3,4,"label-value",25),m.Bc(4,Pe,2,2,"label-value",25),m.Bc(5,xe,2,6,"label-value",26),m.Pb(),m.Qb(6,"div",27),m.Bc(7,Fe,2,1,"button",28),m.Bc(8,we,2,4,"button",29),m.Pb(),m.Pb(),m.Pb()),2&e){var i=m.Zb(2);m.xb(3),m.gc("ngIf",!i.data.hideDateOnList),m.xb(1),m.gc("ngIf",i.generalSearch),m.xb(1),m.gc("ngForOf",i.fieldsInList),m.xb(2),m.gc("ngIf",i.data.edit),m.xb(1),m.gc("ngIf",i.data.remove)}}function ke(e,t){if(1&e&&(m.Qb(0,"th"),m.Dc(1),m.Pb()),2&e){var i=m.Zb(3);m.xb(1),m.Fc("",i.i18n.general.creationDate," ")}}function Oe(e,t){if(1&e&&(m.Qb(0,"th"),m.Dc(1),m.Pb()),2&e){var i=m.Zb(3);m.xb(1),m.Ec(i.i18n.general.user)}}function Ce(e,t){if(1&e&&(m.Qb(0,"th"),m.Dc(1),m.Pb()),2&e){var i=t.$implicit,n=m.Zb(3);m.xb(1),m.Fc(" ",n.fieldName(i.internalName)," ")}}function Le(e,t){if(1&e&&(m.Qb(0,"td"),m.Dc(1),m.ac(2,"dateTime"),m.Pb()),2&e){var i=m.Zb().$implicit;m.xb(1),m.Fc("",m.bc(2,1,i.creationDate)," ")}}function Re(e,t){if(1&e&&(m.Qb(0,"td"),m.Dc(1),m.Pb()),2&e){var i=m.Zb().$implicit,n=m.Zb(3);m.xb(1),m.Ec(n.recordOwner(i))}}function Te(e,t){if(1&e&&(m.Qb(0,"td"),m.Lb(1,"format-field-value",31),m.Pb()),2&e){var i=t.$implicit,n=m.Zb().$implicit,a=m.Zb(3);m.xb(1),m.gc("fields",a.data.customFields)("plainText",!0)("fieldName",i.internalName)("object",n)("customValues",n.customValues)}}function Be(e,t){if(1&e){var i=m.Rb();m.Qb(0,"button",32),m.Xb("click",(function(e){m.sc(i);var t=m.Zb().$implicit,n=m.Zb(3);return n.router.navigate(n.editPath(t)),e.stopPropagation()})),m.Lb(1,"icon",33),m.Pb()}if(2&e){var n=m.Zb(4);m.gc("tooltip",n.i18n.general.edit)}}function Ze(e,t){if(1&e){var i=m.Rb();m.Qb(0,"button",34),m.Xb("click",(function(e){m.sc(i);var t=m.Zb().$implicit;return m.Zb(3).remove(t),e.stopPropagation()})),m.Lb(1,"icon",35),m.Pb()}if(2&e){var n=m.Zb(4);m.gc("tooltip",n.i18n.general.remove)("ngClass",n.data.edit?"ml-3":"")}}function De(e,t){if(1&e){var i=m.Rb();m.Qb(0,"tr",40),m.Xb("click",(function(){m.sc(i);var e=t.$implicit,n=m.Zb(3);return n.router.navigate(n.viewPath(e))})),m.Bc(1,Le,3,3,"td",1),m.Bc(2,Re,2,1,"td",1),m.Bc(3,Te,2,5,"td",37),m.Qb(4,"td",41),m.Bc(5,Be,2,1,"button",28),m.Bc(6,Ze,2,2,"button",29),m.Pb(),m.Pb()}if(2&e){var n=m.Zb(3);m.xb(1),m.gc("ngIf",!n.data.hideDateOnList),m.xb(1),m.gc("ngIf",n.generalSearch),m.xb(1),m.gc("ngForOf",n.fieldsInList),m.xb(2),m.gc("ngIf",n.data.edit),m.xb(1),m.gc("ngIf",n.data.remove)}}function $e(e,t){if(1&e&&(m.Qb(0,"table",36),m.Qb(1,"thead"),m.Bc(2,ke,2,1,"th",1),m.Bc(3,Oe,2,1,"th",1),m.Bc(4,Ce,2,1,"th",37),m.Lb(5,"th",38),m.Pb(),m.Qb(6,"tbody"),m.Bc(7,De,7,5,"tr",39),m.ac(8,"async"),m.Pb(),m.Pb()),2&e){var i,n=m.Zb(2);m.xb(2),m.gc("ngIf",!n.data.hideDateOnList),m.xb(1),m.gc("ngIf",n.generalSearch),m.xb(1),m.gc("ngForOf",n.fieldsInList),m.xb(3),m.gc("ngForOf",null==(i=m.bc(8,4,n.results$))?null:i.results)}}function Qe(e,t){if(1&e){var i=m.Rb();m.Ob(0),m.Qb(1,"page-content",2),m.ac(2,"async"),m.Qb(3,"form",3),m.Qb(4,"div",4),m.Bc(5,se,5,3,"ng-container",1),m.Qb(6,"div",5),m.Lb(7,"input-field",6),m.Pb(),m.Bc(8,de,6,7,"ng-container",1),m.Qb(9,"div",5),m.Lb(10,"user-field",7),m.Pb(),m.Bc(11,ge,6,2,"ng-container",1),m.Bc(12,he,2,2,"div",8),m.Bc(13,me,3,2,"ng-container",1),m.Pb(),m.Pb(),m.Pb(),m.Qb(14,"results-layout",9),m.Xb("update",(function(e){return m.sc(i),m.Zb().update(e)})),m.ac(15,"async"),m.Bc(16,Se,9,5,"mobile-result",10),m.Bc(17,$e,9,6,"table",11),m.Pb(),m.Nb()}if(2&e){var n=m.Zb();m.xb(1),m.gc("heading",n.data.type.pluralName)("mobileHeading",n.data.type.pluralName)("headingActions",m.bc(2,14,n.headingActions$)),m.xb(2),m.gc("formGroup",n.form),m.xb(2),m.gc("ngIf",n.user&&!n.authHelper.isSelf(n.user)),m.xb(2),m.gc("label",n.i18n.general.keywords),m.xb(1),m.gc("ngIf",n.generalSearch),m.xb(2),m.gc("label",n.i18n.record.createdBy),m.xb(1),m.gc("ngIf",!n.data.hideDateOnList),m.xb(1),m.gc("ngForOf",n.fieldsInSearch),m.xb(1),m.gc("ngIf",n.generalSearch),m.xb(1),m.gc("results",m.bc(15,16,n.results$))("rendering$",n.rendering$)("toLink",n.toLink)}}var Ne,Ve=((Ne=function(e){o(n,e);var t=s(n);function n(e,a){var r;return i(this,n),(r=t.call(this,e)).recordsService=a,r}return a(n,[{key:"ngOnInit",value:function(){var e=this;r(u(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.owner,this.type=this.route.snapshot.params.type,this.addSub(this.generalSearch?this.recordsService.getRecordDataForGeneralSearch({type:this.type}).subscribe((function(t){return e.data=t})):this.recordsService.getRecordDataForOwnerSearch({owner:this.param,type:this.type}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;if(!this.generalSearch&&e.type.layout!==f.eb.LIST)throw new Error("Invalid record layout: "+e.type.layout);if(this.fieldsInSearch=e.customFields.filter((function(t){return e.fieldsInSearch.includes(t.internalName)})),this.fieldsInList=e.customFields.filter((function(t){return e.fieldsInList.includes(t.internalName)})),this.form.setControl("customValues",this.fieldHelper.customFieldsForSearchFormGroup(this.fieldsInSearch)),this.generalSearch){var i=e;this.basicProfileFields=i.basicProfileFields,this.customProfileFields=i.customProfileFields,this.groups=i.groups||[],this.form.setControl("profileFields",this.fieldHelper.profileFieldsForSearchFormGroup(this.basicProfileFields,this.customProfileFields))}this.form.patchValue(e.query);var a=[];!this.generalSearch&&e.create&&a.push(new E.c("add",this.i18n.general.addNew,(function(){return t.router.navigate(["/records",t.param,t.type,"new"])}),!0)),this.exportHelper.headingActions(e.exportFormats,(function(e){var i=Object.assign({format:e.internalName},t.toSearchParams(t.form.value));return t.generalSearch?t.recordsService.exportGeneralRecords$Response(i):t.recordsService.exportOwnerRecords$Response(i)})),this.headingActions=a,r(u(n.prototype),"onDataInitialized",this).call(this,e)}},{key:"doSearch",value:function(e){return this.generalSearch?this.recordsService.searchGeneralRecords$Response(e):this.recordsService.searchOwnerRecords$Response(e)}},{key:"remove",value:function(e){var t=this;this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:function(){return t.doRemove(e)}})}},{key:"doRemove",value:function(e){var t=this;this.addSub(this.recordsService.deleteRecord({id:e.id}).subscribe((function(){t.notification.snackBar(t.i18n.general.removeItemDone),t.update()})))}},{key:"recordOwner",value:function(e){return this.generalSearch?e.user.display:""}},{key:"fieldName",value:function(e){return this.fieldHelper.fieldDisplay(e,this.data.customFields)}},{key:"viewPath",value:function(e){return["/records","view",e.id]}},{key:"editPath",value:function(e){return["/records","edit",e.id]}},{key:"toSearchParams",value:function(e){var t=Object.assign({},e);if(t.customFields=this.fieldHelper.toCustomValuesFilter(e.customValues),t.profileFields=this.fieldHelper.toProfileFieldsFilter(e.profileFields),t.creationPeriod=H.a.dateRangeFilter(e.beginDate,e.endDate),this.generalSearch){var i=t;i.brokers=e.broker?[e.broker]:[],delete i.broker}else t.owner=this.param;return t.type=this.type,t}},{key:"getFormControlNames",value:function(){return["keywords","customValues","createdBy","beginDate","endDate","broker","groups","user","profileFields"]}},{key:"resolveMenu",value:function(e){return this.menu.menuForRecordType(this.generalSearch?null:e.user,e.type)}},{key:"toLink",get:function(){var e=this;return function(t){return e.viewPath(t)}}},{key:"user",get:function(){return this.data?this.data.user:null}},{key:"generalSearch",get:function(){return this.param===g.a.GENERAL_SEARCH}}]),n}(j.a)).\u0275fac=function(e){return new(e||Ne)(m.Kb(m.r),m.Kb(d.a))},Ne.\u0275cmp=m.Eb({type:Ne,selectors:[["search-records"]],features:[m.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","keywords","fieldSize","full",3,"label"],["labelPosition","side","formControlName","createdBy",3,"label"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],["resultType","list",3,"results","rendering$","toLink","update"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","kind","fieldView",3,"label"],[3,"user"],["class","col-12 col-md-6",4,"ngIf"],["labelPosition","side","formControlName","broker",3,"label","filters"],["labelPosition","side","formControlName","user",3,"label"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","groups",3,"label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],[1,"w-100"],["labelPosition","side","formControlName","beginDate","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","endDate","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side",3,"field","formControl"],[1,"d-flex"],["labelPosition","above",3,"label",4,"ngIf"],["labelPosition","above",3,"label",4,"ngFor","ngForOf"],[1,"ml-auto","text-right","d-flex","flex-column"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],["class","btn btn-icon",3,"tooltip","ngClass","click",4,"ngIf"],["labelPosition","above",3,"label"],[3,"fields","plainText","fieldName","object","customValues"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","edit"],[1,"btn","btn-icon",3,"tooltip","ngClass","click"],["icon","clear"],[1,"table","table-hover","cursor-pointer"],[4,"ngFor","ngForOf"],[1,"actions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"actions","actions-multiple"]],template:function(e,t){1&e&&(m.Qb(0,"page-layout",0),m.ac(1,"async"),m.Bc(2,Qe,18,18,"ng-container",1),m.Pb()),2&e&&(m.gc("ready",m.bc(1,2,t.data$)),m.xb(2),m.gc("ngIf",t.data))},directives:[y.a,P.t,x.a,F.I,F.w,F.n,z.a,F.v,F.l,W.a,P.s,_.a,G.a,K.a,U.a,X.a,q.a,J.a,Y.a,ee.a,F.k,te.a,ie.a,ne.a,ae.b,re.a,P.q],pipes:[P.b,oe.a],encapsulation:2,changeDetection:0}),Ne),Ae=l("2Vo4");function Me(e,t){if(1&e&&(m.Ob(0),m.Lb(1,"user-info",4),m.Lb(2,"hr"),m.Nb()),2&e){var i=m.Zb(2);m.xb(1),m.gc("user",i.data.user)}}function Ee(e,t){1&e&&m.Lb(0,"hr")}function He(e,t){if(1&e&&(m.Qb(0,"label-value",5),m.Dc(1),m.ac(2,"dateTime"),m.Pb()),2&e){var i=m.Zb().$implicit,n=m.Zb(2);m.gc("label",n.i18n.record.lastModificationDate),m.xb(1),m.Fc(" ",m.bc(2,2,i.lastModificationDate)," ")}}function je(e,t){if(1&e&&(m.Qb(0,"label-value",5),m.Dc(1),m.Pb()),2&e){var i=m.Zb().$implicit,n=m.Zb(2);m.gc("label",n.i18n.record.lastModifiedBy),m.xb(1),m.Fc(" ",i.lastModifiedBy.display," ")}}function ze(e,t){if(1&e&&(m.Qb(0,"label-value",5),m.Lb(1,"format-field-value",12),m.Pb()),2&e){var i=t.$implicit,n=m.Zb().$implicit,a=m.Zb(2);m.gc("label",i.name),m.xb(1),m.gc("fields",a.data.customFields)("plainText",!0)("fieldName",i.internalName)("object",n)("customValues",n.customValues)}}function We(e,t){if(1&e){var i=m.Rb();m.Qb(0,"action-button",10),m.Xb("action",(function(){m.sc(i);var e=m.Zb().$implicit,t=m.Zb(2);return t.router.navigate(t.editPath(e))})),m.ac(1,"async"),m.Pb()}if(2&e){var n=m.Zb(3);m.gc("disabled",m.bc(1,2,n.requesting$))("label",n.i18n.general.edit)}}function _e(e,t){if(1&e){var i=m.Rb();m.Qb(0,"action-button",13),m.Xb("action",(function(){m.sc(i);var e=m.Zb().$implicit;return m.Zb(2).remove(e)})),m.ac(1,"async"),m.Pb()}if(2&e){var n=m.Zb(3);m.gc("disabled",m.bc(1,2,n.requesting$))("label",n.i18n.general.remove)}}function Ge(e,t){if(1&e){var i=m.Rb();m.Ob(0),m.Bc(1,Ee,1,0,"hr",1),m.Qb(2,"label-value",5),m.Dc(3),m.ac(4,"dateTime"),m.Pb(),m.Qb(5,"label-value",5),m.Dc(6),m.Pb(),m.Bc(7,He,3,4,"label-value",6),m.Bc(8,je,2,2,"label-value",6),m.Bc(9,ze,2,6,"label-value",7),m.Qb(10,"actions",8),m.Bc(11,We,2,4,"action-button",9),m.Qb(12,"action-button",10),m.Xb("action",(function(){m.sc(i);var e=t.$implicit,n=m.Zb(2);return n.router.navigate(n.viewPath(e))})),m.ac(13,"async"),m.Pb(),m.Bc(14,_e,2,4,"action-button",11),m.Pb(),m.Nb()}if(2&e){var n=t.$implicit,a=t.first,r=m.Zb(2);m.xb(1),m.gc("ngIf",!a),m.xb(1),m.gc("label",r.i18n.general.creationDate),m.xb(1),m.Fc(" ",m.bc(4,12,n.creationDate)," "),m.xb(2),m.gc("label",r.i18n.record.createdBy),m.xb(1),m.Fc(" ",n.createdBy.display," "),m.xb(1),m.gc("ngIf",n.lastModifiedBy),m.xb(1),m.gc("ngIf",n.lastModifiedBy),m.xb(1),m.gc("ngForOf",r.fieldsInList),m.xb(2),m.gc("ngIf",r.data.edit),m.xb(1),m.gc("disabled",m.bc(13,14,r.requesting$))("label",r.i18n.general.view),m.xb(2),m.gc("ngIf",r.data.remove)}}function Ke(e,t){if(1&e&&(m.Ob(0),m.Qb(1,"page-content",2),m.ac(2,"async"),m.Bc(3,Me,3,1,"ng-container",1),m.Bc(4,Ge,15,16,"ng-container",3),m.ac(5,"async"),m.Pb(),m.Nb()),2&e){var i=m.Zb();m.xb(1),m.gc("heading",i.data.type.pluralName)("mobileHeading",i.data.type.pluralName)("headingActions",m.bc(2,5,i.headingActions$)),m.xb(2),m.gc("ngIf",i.data.user&&!i.authHelper.isSelf(i.data.user)),m.xb(1),m.gc("ngForOf",m.bc(5,7,i.results$))}}var Ue,Xe=((Ue=function(e){o(n,e);var t=s(n);function n(e,a){var r;return i(this,n),(r=t.call(this,e)).recordsService=a,r.results$=new Ae.a(null),r}return a(n,[{key:"ngOnInit",value:function(){var e=this;r(u(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.owner,this.type=this.route.snapshot.params.type,this.addSub(this.recordsService.getRecordDataForOwnerSearch({owner:this.param,type:this.type}).subscribe((function(t){if(t.type.layout!==f.eb.TILED)throw new Error("Invalid record layout: "+t.type.layout);e.fieldsInList=t.customFields.filter((function(e){return t.fieldsInList.includes(e.internalName)})),e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this,i=[];e.create&&i.push(new E.c("add",this.i18n.general.addNew,(function(){return t.router.navigate(["/records",t.param,t.type,"new"])}),!0)),this.headingActions=i,this.addSub(this.doSearch(this.toSearchParams()).subscribe((function(e){t.results$.next(e.body)})))}},{key:"editPath",value:function(e){return["/records","edit",e.id]}},{key:"viewPath",value:function(e){return["/records","view",e.id]}},{key:"remove",value:function(e){var t=this;this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:function(){return t.doRemove(e)}})}},{key:"doRemove",value:function(e){var t=this;this.addSub(this.recordsService.deleteRecord({id:e.id}).subscribe((function(){t.notification.snackBar(t.i18n.general.removeItemDone),t.reload()})))}},{key:"toSearchParams",value:function(){return{pageSize:2147483647,owner:this.param,type:this.type}}},{key:"doSearch",value:function(e){return this.recordsService.searchOwnerRecords$Response(e)}},{key:"getFormControlNames",value:function(){return[]}},{key:"resolveMenu",value:function(e){return this.menu.menuForRecordType(e.user,e.type)}}]),n}(h.a)).\u0275fac=function(e){return new(e||Ue)(m.Kb(m.r),m.Kb(d.a))},Ue.\u0275cmp=m.Eb({type:Ue,selectors:[["tiled-records"]],features:[m.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[4,"ngFor","ngForOf"],[3,"user"],[3,"label"],[3,"label",4,"ngIf"],[3,"label",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"disabled","label","action",4,"ngIf"],[3,"disabled","label","action"],["outline","",3,"disabled","label","action",4,"ngIf"],[3,"fields","plainText","fieldName","object","customValues"],["outline","",3,"disabled","label","action"]],template:function(e,t){1&e&&(m.Qb(0,"page-layout",0),m.ac(1,"async"),m.Bc(2,Ke,6,9,"ng-container",1),m.Pb()),2&e&&(m.gc("ready",m.bc(1,2,t.data$)),m.xb(2),m.gc("ngIf",t.data))},directives:[y.a,P.t,x.a,P.s,S.a,U.a,I.a,w.a,ne.a],pipes:[P.b,oe.a],encapsulation:2,changeDetection:0}),Ue),qe=l("Ewue"),Je=l("Pm8L"),Ye=l("nznZ");function et(e,t){if(1&e&&(m.Qb(0,"label-value",9),m.Lb(1,"user-link",10),m.Pb()),2&e){var i=m.Zb(2);m.zb(i.resolveColumnClass()),m.gc("labelPosition",i.labelPosition)("label",i.i18n.general.user),m.xb(1),m.gc("user",i.data.user)}}function tt(e,t){if(1&e&&(m.Qb(0,"label-value",9),m.Dc(1),m.ac(2,"dateTime"),m.Pb()),2&e){var i=m.Zb(2);m.zb(i.resolveColumnClass()),m.gc("labelPosition",i.labelPosition)("label",i.i18n.general.creationDate),m.xb(1),m.Fc(" ",m.bc(2,5,i.data.creationDate)," ")}}function it(e,t){if(1&e&&(m.Qb(0,"label-value",9),m.Dc(1),m.Pb()),2&e){var i=m.Zb(2);m.zb(i.resolveColumnClass()),m.gc("labelPosition",i.labelPosition)("label",i.i18n.record.createdBy),m.xb(1),m.Fc(" ",i.data.createdBy.display," ")}}function nt(e,t){if(1&e&&(m.Qb(0,"label-value",9),m.Dc(1),m.ac(2,"dateTime"),m.Pb()),2&e){var i=m.Zb(2);m.zb(i.resolveColumnClass()),m.gc("labelPosition",i.labelPosition)("label",i.i18n.record.lastModificationDate),m.xb(1),m.Fc(" ",m.bc(2,5,i.data.lastModificationDate)," ")}}function at(e,t){if(1&e&&(m.Qb(0,"label-value",9),m.Dc(1),m.Pb()),2&e){var i=m.Zb(2);m.zb(i.resolveColumnClass()),m.gc("labelPosition",i.labelPosition)("label",i.i18n.record.lastModifiedBy),m.xb(1),m.Fc(" ",i.data.lastModifiedBy.display," ")}}function rt(e,t){1&e&&m.Lb(0,"hr")}function ot(e,t){1&e&&m.Lb(0,"hr")}function lt(e,t){if(1&e&&(m.Ob(0),m.Bc(1,rt,1,0,"hr",5),m.Lb(2,"rich-text-container",11),m.Bc(3,ot,1,0,"hr",5),m.Nb()),2&e){var i=m.Zb(2);m.xb(1),m.gc("ngIf",i.hasPreviousFields),m.xb(1),m.gc("value",i.data.type.informationText),m.xb(1),m.gc("ngIf",i.data.customValues)}}var st=function(e,t,i){return{"mt-2 pt-0 border-0":e,"mb-0":t,"mb-2":i}};function ct(e,t){if(1&e&&(m.Qb(0,"h2",3),m.Dc(1),m.Pb()),2&e){var i=m.Zb(2);m.gc("ngClass",m.lc(2,st,i.data.type.informationText,"above"===i.labelPosition,"above"!==i.labelPosition)),m.xb(1),m.Fc(" ",i.i18n.record.fields," ")}}var ut=function(e){return{"mt-0":e}};function bt(e,t){if(1&e&&m.Lb(0,"custom-field-value",12),2&e){var i=t.$implicit,n=m.Zb(2);m.zb(n.resolveColumnClass(i)),m.gc("labelPosition",n.labelPosition)("fieldValue",i)("ngClass",m.jc(5,ut,!(n.hasPreviousFields&&n.valuesWithoutSection.length>0)))}}function ft(e,t){if(1&e&&m.Lb(0,"custom-field-value",14),2&e){var i=t.$implicit,n=m.Zb(3);m.zb(n.resolveColumnClass(i)),m.gc("labelPosition",n.labelPosition)("fieldValue",i)}}var dt=function(e,t,i,n){return{"mt-4":e,"mb-0":t,"mb-2":i,"border-top-0":n}};function gt(e,t){if(1&e&&(m.Ob(0),m.Qb(1,"h2",3),m.Dc(2),m.Pb(),m.Bc(3,ft,1,4,"custom-field-value",13),m.Nb()),2&e){var i=t.$implicit,n=t.first,a=m.Zb(2);m.xb(1),m.gc("ngClass",m.mc(3,dt,a.valuesWithoutSection.length>0,"above"===a.labelPosition,"above"!==a.labelPosition,n&&0==a.valuesWithoutSection.length&&(!a.hasPreviousFields||a.data.type.informationText))),m.xb(1),m.Fc(" ",i.name," "),m.xb(1),m.gc("ngForOf",a.valuesWithSection.get(i))}}var ht=function(e,t){return{"d-flex flex-row-reverse":e,"mt-n3":t}},pt=function(e,t){return{"d-flex flex-grow-1 flex-column":e,"mr-n3":t}};function vt(e,t){if(1&e&&(m.Qb(0,"page-content",2),m.ac(1,"async"),m.Qb(2,"div",3),m.Qb(3,"div",3),m.Bc(4,et,2,5,"label-value",4),m.Bc(5,tt,3,7,"label-value",4),m.Bc(6,it,2,5,"label-value",4),m.Bc(7,nt,3,7,"label-value",4),m.Bc(8,at,2,5,"label-value",4),m.Bc(9,lt,4,3,"ng-container",5),m.Bc(10,ct,2,6,"h2",6),m.Bc(11,bt,1,7,"custom-field-value",7),m.Bc(12,gt,4,8,"ng-container",8),m.Pb(),m.Pb(),m.Pb()),2&e){var i=m.Zb();m.gc("heading",i.i18n.record.title.details(i.title))("mobileHeading",i.i18n.record.mobileTitle.details(i.title))("headingActions",m.bc(1,14,i.headingActions$)),m.xb(2),m.gc("ngClass",m.kc(16,ht,!i.columnLayout,i.hasPreviousFields&&i.columnLayout)),m.xb(1),m.gc("ngClass",m.kc(19,pt,!i.columnLayout,i.columnLayout)),m.xb(1),m.gc("ngIf",!i.isOwner()),m.xb(1),m.gc("ngIf",i.data.creationDate),m.xb(1),m.gc("ngIf",i.data.createdBy),m.xb(1),m.gc("ngIf",i.data.lastModificationDate),m.xb(1),m.gc("ngIf",i.data.lastModifiedBy),m.xb(1),m.gc("ngIf",i.data.type.informationText),m.xb(1),m.gc("ngIf",i.hasPreviousFields&&i.valuesWithoutSection.length>0),m.xb(1),m.gc("ngForOf",i.valuesWithoutSection),m.xb(1),m.gc("ngForOf",i.valuesWithSection.keys())}}var mt,yt,Pt,xt=[{path:":owner/:type/list",component:Ve,canActivate:[b.a]},{path:":owner/:type/tiled",component:Xe,canActivate:[b.a]},{path:"view/:id",component:(mt=function(t){o(l,t);var n=s(l);function l(e,t,a,r){var o;return i(this,l),(o=n.call(this,e)).recordsService=t,o.recordsHelper=a,o.operationHelper=r,o.valuesWithSection=new Map,o}return a(l,[{key:"ngOnInit",value:function(){var e=this;r(u(l.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot.paramMap.get("id");this.addSub(this.recordsService.viewRecord({id:t}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(t){var i=this;this.headingActions=[],this.title=Object(p.h)(t.display)?t.type.name:t.display,this.columnLayout=this.recordsHelper.isColumnLayout(t.type);var n=t.customValues||[];this.valuesWithoutSection=n.filter((function(e){return null==e.field.section}))||[],(t.type.sections||[]).forEach((function(e){var t=n.filter((function(t){return null!=t.field.section&&t.field.section.id===e.id}));t&&i.valuesWithSection.set(e,t)})),t.canEdit&&this.headingActions.push(new E.c("edit",this.i18n.general.edit,(function(){i.router.navigate(["/records","edit",t.id])}),!0));var a,r=e(t.operations||[]);try{for(r.s();!(a=r.n()).done;){var o=a.value;this.headingActions.push(this.operationHelper.headingAction(o,t.id))}}catch(l){r.e(l)}finally{r.f()}}},{key:"resolveColumnClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.recordsHelper.resolveColumnClass(null==e?null:e.field,this.data.type)}},{key:"isOwner",value:function(){return this.authHelper.isSelf(this.data.user)}},{key:"resolveMenu",value:function(e){return this.menu.menuForRecordType(e.user,e.type)}},{key:"labelPosition",get:function(){return this.columnLayout?"above":"auto"}},{key:"hasPreviousFields",get:function(){return this.data.createdBy||this.data.lastModifiedBy}}]),l}(Je.a),mt.\u0275fac=function(e){return new(e||mt)(m.Kb(m.r),m.Kb(d.a),m.Kb(g.a),m.Kb(qe.a))},mt.\u0275cmp=m.Eb({type:mt,selectors:[["view-record"]],features:[m.ub],decls:3,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[3,"ngClass"],[3,"labelPosition","class","label",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"labelPosition","fieldValue","class","ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"labelPosition","label"],[3,"user"],[3,"value"],[3,"labelPosition","fieldValue","ngClass"],[3,"labelPosition","fieldValue","class",4,"ngFor","ngForOf"],[3,"labelPosition","fieldValue"]],template:function(e,t){1&e&&(m.Qb(0,"page-layout",0),m.ac(1,"async"),m.Bc(2,vt,13,22,"page-content",1),m.Pb()),2&e&&(m.gc("ready",m.bc(1,2,t.data$)),m.xb(2),m.gc("ngIf",t.data))},directives:[y.a,P.t,x.a,P.q,P.s,U.a,X.a,k.a,Ye.a],pipes:[P.b,oe.a],encapsulation:2,changeDetection:0}),mt),canActivate:[b.a]},{path:":owner/:type/new",component:M,canActivate:[b.a]},{path:"edit/:id",component:M,canActivate:[b.a]}],Ft=((yt=function e(){i(this,e)}).\u0275mod=m.Ib({type:yt}),yt.\u0275inj=m.Hb({factory:function(e){return new(e||yt)},imports:[[c.i.forChild(xt)],c.i]}),yt),It=l("Se2V"),wt=((Pt=function e(){i(this,e)}).\u0275mod=m.Ib({type:Pt}),Pt.\u0275inj=m.Hb({factory:function(e){return new(e||Pt)},imports:[[Ft,It.a]]}),Pt)},v4xg:function(t,n,l){"use strict";l.d(n,"a",(function(){return x}));var c=l("s7LF"),b=l("mwYl"),f=l("tAww"),d=l("rCAV"),g=l("uuU0"),h=l("Ky6R"),p=l("TFmz"),v=l("Muja"),m=l("2Vo4"),y=l("Kj3r"),P=l("8Y7J"),x=function(){var t=function(t){o(l,t);var n=s(l);function l(t){var a;i(this,l),(a=n.call(this,t)).ResultType=p.a,a.resultType$=new m.a(null),a.resultTypeControl=new c.j(null),a.results$=new m.a(null),a.allowedResultTypes$=new m.a([p.a.LIST]),a.rendering$=new m.a(!1),a.moreFilters$=new m.a(!1),a.ignoreNextUpdate=!1,a.nextRequestState=t.get(b.a);var r={page:0};r.resultType=a.getInitialResultType();var o,s=e(a.getFormControlNames()||[]);try{for(s.s();!(o=s.n()).done;){r[o.value]=null}}catch(u){s.e(u)}finally{s.f()}return a.form=a.formBuilder.group(r),a}return a(l,[{key:"getInitialFormValue",value:function(e){return e.query||{}}},{key:"onDataInitialized",value:function(e){var t=this;this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe((function(e){var i=t.previousResultType;t.previousResultType=e,t.resultType$.next(e),t.shouldUpdateOnResultTypeChange(e,i)&&t.update(),null!=i&&i===e||(t.rendering=!0,t.stateManager.set("resultType",e),t.onResultTypeChanged(e,i))}))),setTimeout((function(){t.addSub(t.form.valueChanges.pipe(Object(y.a)(d.a.DEBOUNCE_TIME)).subscribe((function(e){t.shouldUpdateOnChange(e)&&t.update(),t.previousValue=e})),!0),t.previousResultType!==p.a.CATEGORIES&&t.update()}),1)}},{key:"shouldUpdateOnResultTypeChange",value:function(e,t){return e!==p.a.CATEGORIES&&([p.a.LIST,p.a.TILES].includes(t)!==[p.a.LIST,p.a.TILES].includes(e)||t===p.a.MAP!=(e===p.a.MAP))}},{key:"shouldUpdateOnChange",value:function(e){return!Object(v.a)(this.previousValue,e)}},{key:"ngOnInit",value:function(){r(u(l.prototype),"ngOnInit",this).call(this),this.resultType=this.getInitialResultType()}},{key:"showMoreFiltersLabel",value:function(){return this.i18n.general.showMoreFilters}},{key:"showLessFiltersLabel",value:function(){return this.i18n.general.showLessFilters}},{key:"showMoreFiltersIcon",value:function(){return"filter_list"}},{key:"showLessFiltersIcon",value:function(){return"filter_list"}},{key:"onResultTypeChanged",value:function(e,t){}},{key:"getInitialResultType",value:function(){return p.a.LIST}},{key:"update",value:function(e){var t=this;if(!this.ignoreNextUpdate){e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;var i=this.form.value;i.pageSize=this.uiLayout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(i)).subscribe((function(e){t.resultType===p.a.CATEGORIES&&(t.resultType=t.allowedResultTypes.find((function(e){return e!==p.a.CATEGORIES}))),t.results=h.a.from(e)})))}}},{key:"resetPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.form.patchValue({page:0},{emitEvent:e})}},{key:"doIgnoringUpdate",value:function(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}},{key:"results",get:function(){return this.results$.value},set:function(e){this.results$.next(e)}},{key:"rendering",get:function(){return this.rendering$.value},set:function(e){this.rendering$.next(e)}},{key:"allowedResultTypes",get:function(){return this.allowedResultTypes$.value},set:function(e){this.allowedResultTypes$.next(e)}},{key:"moreFilters",get:function(){return this.moreFilters$.value},set:function(e){this.moreFilters$.next(e)}},{key:"pageData",get:function(){var e=this.form.value;return{page:e.page,pageSize:e.pageSize}},set:function(e){this.form.patchValue(e)}},{key:"resultType",get:function(){return this.resultTypeControl.value},set:function(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}},{key:"moreFiltersAction",get:function(){var e=this;return this._moreFiltersAction||(this._moreFiltersAction=new f.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),(function(){e.moreFilters=!e.moreFilters,e._moreFiltersAction.icon=e.moreFilters?e.showLessFiltersIcon():e.showMoreFiltersIcon(),e._moreFiltersAction.label=e.moreFilters?e.showLessFiltersLabel():e.showMoreFiltersLabel()}),!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}}]),l}(g.a);return t.\u0275fac=function(e){return new(e||t)(P.Kb(P.r))},t.\u0275dir=P.Fb({type:t,features:[P.ub]}),t}()}}])}();