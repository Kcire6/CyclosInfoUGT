(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/QoZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return me})),i.d(t,"b",(function(){return pe}));var s=i("XDzf"),n=i("oWwz"),a=i("dt5f"),r=i("a/z7"),o=i("c/3O"),c=i("Ewue"),l=i("Jc6/"),u=i("tzq7"),h=i("tAww"),g=i("rCAV"),b=i("Pm8L"),m=i("ObUu"),p=i("QH++"),f=i("2Vo4"),d=i("u1E5"),v=i("8Y7J"),w=i("3qho"),y=i("SVse"),A=i("I0FJ"),P=i("eNTF"),x=i("Kiu2"),I=i("JFlR"),k=i("Ls5z"),T=i("H4pW"),S=i("nznZ"),F=i("iInd"),L=i("vOpc"),O=i("sifq"),E=i("5Wk5"),R=i("BUNh"),B=i("yL40");function _(e,t){1&e&&v.Mb(0)}const U=function(e){return{$implicit:e}};function D(e,t){if(1&e&&(v.Ob(0),v.Bc(1,_,1,0,"ng-container",19),v.Nb()),2&e){const e=t.$implicit;v.Zb(4);const i=v.qc(4);v.xb(1),v.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",v.jc(2,U,e))}}function Q(e,t){if(1&e&&(v.Qb(0,"div",16),v.Qb(1,"h2",17),v.Dc(2),v.Pb(),v.Bc(3,D,2,4,"ng-container",18),v.Pb()),2&e){const e=v.Zb(3);v.xb(2),v.Ec(e.i18n.user.profile.banking),v.xb(1),v.gc("ngForOf",e.bankingActions)}}function M(e,t){1&e&&v.Mb(0)}function C(e,t){if(1&e&&(v.Ob(0),v.Bc(1,M,1,0,"ng-container",19),v.Nb()),2&e){const e=t.$implicit;v.Zb(4);const i=v.qc(4);v.xb(1),v.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",v.jc(2,U,e))}}function N(e,t){if(1&e&&(v.Qb(0,"div",16),v.Qb(1,"h2",17),v.Dc(2),v.Pb(),v.Bc(3,C,2,4,"ng-container",18),v.Pb()),2&e){const e=v.Zb(3);v.xb(2),v.Ec(e.i18n.user.profile.management),v.xb(1),v.gc("ngForOf",e.managementActions)}}function $(e,t){if(1&e&&(v.Ob(0),v.Qb(1,"div",14),v.Bc(2,Q,4,2,"div",15),v.Bc(3,N,4,2,"div",15),v.Pb(),v.Lb(4,"hr"),v.Nb()),2&e){const e=v.Zb(2);v.xb(2),v.gc("ngIf",e.bankingActions.length>0),v.xb(1),v.gc("ngIf",e.managementActions.length>0)}}function Z(e,t){if(1&e&&v.Lb(0,"profile-images",20),2&e){const e=v.Zb(2);v.gc("image",e.user.image)("additionalImages",e.user.additionalImages)}}function V(e,t){if(1&e&&v.Lb(0,"profile-images",21),2&e){const e=v.Zb(2);v.gc("image",e.user.image)("additionalImages",e.user.additionalImages)}}function z(e,t){if(1&e&&(v.Qb(0,"label-value",22),v.Lb(1,"user-link",23),v.Pb()),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.operatorOwner),v.xb(1),v.gc("user",e.user.user)}}function H(e,t){if(1&e&&v.Lb(0,"label-value",24),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.groupSet)("value",e.user.groupSet.name)}}function q(e,t){if(1&e&&v.Lb(0,"label-value",24),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.group)("value",e.user.group.name)}}function K(e,t){if(1&e&&v.Lb(0,"label-value",24),2&e){const e=v.Zb(2);v.gc("label",e.i18n.general.status)("value",e.userHelper.userStatus(e.user.status))}}function j(e,t){if(1&e&&v.Lb(0,"label-value",24),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.name)("value",e.user.name)}}function G(e,t){if(1&e&&v.Lb(0,"label-value",24),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.username)("value",e.user.username)}}function W(e,t){if(1&e&&(v.Lb(0,"label-value",24),v.ac(1,"date")),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.registrationDate)("value",v.bc(1,2,e.user.registrationDate))}}function Y(e,t){if(1&e&&(v.Lb(0,"label-value",24),v.ac(1,"date")),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.activationDate)("value",v.bc(1,2,e.user.activationDate))}}function J(e,t){if(1&e&&(v.Qb(0,"label-value",22),v.Qb(1,"a",25),v.Lb(2,"icon",26),v.Qb(3,"span"),v.Dc(4),v.Pb(),v.Pb(),v.Pb()),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.email),v.xb(1),v.gc("href","mailto:"+e.user.email,v.uc),v.xb(3),v.Ec(e.user.email)}}function X(e,t){if(1&e&&(v.Qb(0,"label-value",22),v.Qb(1,"a",25),v.Lb(2,"icon",27),v.Qb(3,"span"),v.Dc(4),v.Pb(),v.Pb(),v.Pb()),2&e){const e=v.Zb(2);v.gc("label",e.i18n.phone.mobile),v.xb(1),v.gc("href","tel:"+e.mobilePhone.normalizedNumber,v.uc),v.xb(3),v.Ec(e.mobilePhone.number)}}function ee(e,t){if(1&e&&(v.Qb(0,"label-value",22),v.Qb(1,"a",25),v.Lb(2,"icon",27),v.Qb(3,"span"),v.Dc(4),v.Pb(),v.Pb(),v.Pb()),2&e){const e=t.$implicit;v.gc("label",e.name),v.xb(1),v.gc("href","tel:"+e.normalizedNumber,v.uc),v.xb(3),v.Ec(e.number)}}function te(e,t){if(1&e&&(v.Qb(0,"label-value",22),v.Qb(1,"a",25),v.Lb(2,"icon",28),v.Qb(3,"span"),v.Dc(4),v.Pb(),v.Pb(),v.Pb()),2&e){const e=v.Zb(2);v.gc("label",e.i18n.phone.landLine),v.xb(1),v.gc("href","tel:"+e.landLinePhone.normalizedNumber,v.uc),v.xb(3),v.Ec(e.landLinePhone.number)}}function ie(e,t){if(1&e&&(v.Qb(0,"label-value",22),v.Qb(1,"a",25),v.Lb(2,"icon",28),v.Qb(3,"span"),v.Dc(4),v.Pb(),v.Pb(),v.Pb()),2&e){const e=t.$implicit;v.gc("label",e.name),v.xb(1),v.gc("href","tel:"+e.normalizedNumber,v.uc),v.xb(3),v.Ec(e.number)}}function se(e,t){1&e&&v.Lb(0,"custom-field-value",29),2&e&&v.gc("fieldValue",t.$implicit)}function ne(e,t){if(1&e&&v.Lb(0,"rating-stats",32),2&e){const e=v.Zb(3);v.gc("score",e.data.references.score)("textRight",e.data.references.count>1?e.i18n.reference.count.multi(e.data.references.count):e.i18n.reference.count.single)}}function ae(e,t){if(1&e&&(v.Ob(0),v.Dc(1),v.Nb()),2&e){const e=v.Zb(3);v.xb(1),v.Fc(" ",e.i18n.reference.notGiven,"")}}function re(e,t){if(1&e&&(v.Qb(0,"label-value",22),v.Qb(1,"a",30),v.Bc(2,ne,1,2,"rating-stats",31),v.Bc(3,ae,2,1,"ng-container",4),v.Pb(),v.Pb()),2&e){const e=v.Zb(2);v.gc("label",e.i18n.user.profile.references),v.xb(1),v.gc("routerLink",e.referencesPath()),v.xb(1),v.gc("ngIf",e.data.references.count>0),v.xb(1),v.gc("ngIf",0===e.data.references.count)}}function oe(e,t){if(1&e&&(v.Qb(0,"a",39),v.Dc(1),v.Pb()),2&e){const e=v.Zb().$implicit;v.gc("href","mailto:"+e.email,v.uc),v.xb(1),v.Fc(" ",e.email," ")}}function ce(e,t){if(1&e&&(v.Qb(0,"div"),v.Lb(1,"format-field-value",29),v.Pb()),2&e){const e=t.$implicit;v.xb(1),v.gc("fieldValue",e)}}function le(e,t){if(1&e&&(v.Qb(0,"div",41),v.Qb(1,"span",42),v.Dc(2),v.Pb(),v.Dc(3),v.Pb()),2&e){const e=v.Zb().$implicit,t=v.Zb(3);v.xb(2),v.Ec(t.i18n.user.contactInfoAtAddress),v.xb(1),v.Fc(" ",e.address.name," ")}}function ue(e,t){if(1&e&&(v.Qb(0,"div",35),v.Lb(1,"avatar",36),v.Qb(2,"div",37),v.Dc(3),v.Pb(),v.Bc(4,oe,2,2,"a",38),v.Qb(5,"a",39),v.Dc(6),v.Pb(),v.Qb(7,"a",39),v.Dc(8),v.Pb(),v.Bc(9,ce,2,1,"div",18),v.Bc(10,le,4,2,"div",40),v.Pb()),2&e){const e=t.$implicit;v.xb(1),v.gc("image",e.image),v.xb(2),v.Ec(e.name),v.xb(1),v.gc("ngIf",e.email),v.xb(1),v.gc("href","tel:"+e.normalizedMobilePhone,v.uc),v.xb(1),v.Fc(" ",e.mobilePhone," "),v.xb(1),v.gc("href","tel:"+e.normalizedLandLinePhone,v.uc),v.xb(1),v.Fc(" ",e.landLinePhone," "),v.xb(1),v.gc("ngForOf",e.customValues),v.xb(1),v.gc("ngIf",e.address)}}function he(e,t){if(1&e&&(v.Ob(0),v.Qb(1,"h2",33),v.Dc(2),v.Pb(),v.Qb(3,"div",14),v.Bc(4,ue,11,9,"div",34),v.Pb(),v.Nb()),2&e){const e=v.Zb(2);v.xb(2),v.Ec(e.i18n.user.contactInfo),v.xb(2),v.gc("ngForOf",e.user.contactInfos)}}function ge(e,t){if(1&e&&(v.Qb(0,"page-content",3),v.ac(1,"async"),v.Bc(2,$,5,2,"ng-container",4),v.ac(3,"async"),v.Bc(4,Z,1,2,"profile-images",5),v.ac(5,"async"),v.Qb(6,"div",6),v.Bc(7,V,1,2,"profile-images",7),v.ac(8,"async"),v.Qb(9,"div",8),v.Bc(10,z,2,2,"label-value",9),v.Bc(11,H,1,2,"label-value",10),v.Bc(12,q,1,2,"label-value",10),v.Bc(13,K,1,2,"label-value",10),v.Bc(14,j,1,2,"label-value",10),v.Bc(15,G,1,2,"label-value",10),v.Bc(16,W,2,4,"label-value",10),v.Bc(17,Y,2,4,"label-value",10),v.Bc(18,J,5,3,"label-value",9),v.Bc(19,X,5,3,"label-value",9),v.Bc(20,ee,5,3,"label-value",11),v.Bc(21,te,5,3,"label-value",9),v.Bc(22,ie,5,3,"label-value",11),v.Bc(23,se,1,1,"custom-field-value",12),v.Bc(24,re,4,4,"label-value",9),v.Pb(),v.Pb(),v.Qb(25,"div",8),v.Lb(26,"profile-addresses",13),v.Bc(27,he,5,2,"ng-container",4),v.Pb(),v.Pb()),2&e){const e=v.Zb();v.gc("heading",e.title)("mobileHeading",e.mobileTitle)("headingActions",v.bc(1,23,e.headingActions$)),v.xb(2),v.gc("ngIf",v.bc(3,25,e.showActions$)),v.xb(2),v.gc("ngIf",e.imageEnabled&&e.user.image&&v.bc(5,27,e.layout.ltsm$)),v.xb(3),v.gc("ngIf",e.imageEnabled&&v.bc(8,29,e.layout.gtxs$)),v.xb(3),v.gc("ngIf",e.showOperatorOwner),v.xb(1),v.gc("ngIf",e.user.groupSet),v.xb(1),v.gc("ngIf",e.user.group),v.xb(1),v.gc("ngIf",e.user.status),v.xb(1),v.gc("ngIf",e.user.name),v.xb(1),v.gc("ngIf",e.user.username),v.xb(1),v.gc("ngIf",e.user.registrationDate),v.xb(1),v.gc("ngIf",e.showActivationDate),v.xb(1),v.gc("ngIf",e.user.email),v.xb(1),v.gc("ngIf",e.mobilePhone),v.xb(1),v.gc("ngForOf",e.mobilePhones),v.xb(1),v.gc("ngIf",e.landLinePhone),v.xb(1),v.gc("ngForOf",e.landLinePhones),v.xb(1),v.gc("ngForOf",e.user.customValues),v.xb(1),v.gc("ngIf",e.data.references),v.xb(2),v.gc("addresses",e.user.addresses),v.xb(1),v.gc("ngIf",(null==e.user.contactInfos?null:e.user.contactInfos.length)>0)}}function be(e,t){if(1&e&&(v.Qb(0,"div",43),v.Lb(1,"heading-action-button",44),v.Pb()),2&e){const e=t.$implicit;v.xb(1),v.gc("action",e)}}const me=25;let pe=(()=>{class e extends b.a{constructor(e,t,i,s,n,a,r,o){super(e),this.usersService=t,this.contactsService=i,this.operationHelper=s,this.wizardHelper=n,this.recordHelper=a,this.maps=r,this.userHelper=o,this.showActions$=new f.a(!1),this.bankingActions=[],this.managementActions=[]}get user(){return this.data}ngOnInit(){super.ngOnInit(),this.stateManager.manageValue(this.showActions$,"showActions"),this.param=this.route.snapshot.params.user||g.a.SELF,this.errorHandler.requestWithCustomErrorHandler(e=>{this.addSub(this.usersService.viewUser({user:this.param}).subscribe(e=>{this.data=e},t=>{[r.a.FORBIDDEN,r.a.UNAUTHORIZED].includes(t.status)?(this.notification.error(this.i18n.user.profile.noPermission),this.breadcrumb.back(),this.data={}):e(t)}))})}onDataInitialized(e){var t,i;this.shortName=Object(m.G)(e.name||e.display,me);const n=e.enabledProfileFields;this.imageEnabled=null==n||n.includes(s.j.IMAGE),this.mobilePhones=e.phones.filter(e=>e.type===s.Z.MOBILE),this.landLinePhones=e.phones.filter(e=>e.type===s.Z.LAND_LINE),1===this.mobilePhones.length&&(this.mobilePhone=this.mobilePhones[0],this.mobilePhones=[]),1===this.landLinePhones.length&&(this.landLinePhone=this.landLinePhones[0],this.landLinePhones=[]);const a=e.role===s.kb.OPERATOR,r=e.permissions||{},o=r.profile||{},c=r.passwords||{},l=r.identityProviders||{},u=(r.accounts||[]).map(e=>e.type),b=r.contact||{},p=r.payment||{},f=r.paymentRequests||{},d=r.scheduledPayments||{},v=r.authorizedPayments||{},w=r.marketplace||{},y=w.simple||{},A=w.webshop||{},P=r.notificationSettings||{},x=r.status||{},I=r.group||{},k=r.agreements||{},T=r.operators||{},S=r.brokering||{},F=r.vouchers||{},L=r.documents||{},O=r.tokens||[],E=r.products||{};if(e.relationship===s.Mb.SELF){if(o.editProfile){const e=new h.c("edit",this.i18n.general.edit,()=>{this.router.navigateByUrl(this.router.url+"/edit")},!0);this.headingActions=[e]}}else{for(const e of u)this.bankingActions.push(new h.c("account_balance",this.i18n.user.profile.viewAccount(e.name),()=>{this.router.navigate(["/banking",this.param,"account",g.a.internalNameOrId(e)])}));p.systemToUser&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.paySystemToUser,()=>{this.router.navigate(["/banking",g.a.SYSTEM,"payment",this.param])})),p.asUserToUser&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.payAsUserToUser,()=>{this.router.navigate(["/banking",this.param,"payment"])})),p.asUserToSelf&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.payAsUserToSelf,()=>{this.router.navigate(["/banking",this.param,"payment",g.a.SELF])})),p.asUserToSystem&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.payAsUserToSystem,()=>{this.router.navigate(["/banking",this.param,"payment",g.a.SYSTEM])})),f.sendFromSystem&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.requestPaymentFromSystem,()=>{this.router.navigate(["/banking",g.a.SYSTEM,"payment-request",this.param])})),f.sendFromUser&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.requestPaymentFromUser,()=>{this.router.navigate(["/banking",g.a.SELF,"payment-request",this.param])})),f.sendAsUserToUser&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.requestPaymentAsUserFromUser,()=>{this.router.navigate(["/banking",this.param,"payment-request"])})),f.sendAsUserToSystem&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.requestPaymentAsUserFromSystem,()=>{this.router.navigate(["/banking",this.param,"payment-request",g.a.SYSTEM])})),f.view&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.viewPaymentRequests,()=>{this.router.navigate(["/banking",this.param,"payment-requests"])})),d.view&&this.bankingActions.push(new h.c("schedule",this.i18n.user.profile.viewScheduledPayments,()=>{this.router.navigate(["/banking",this.param,"installments"])})),(r.balanceLimits||{}).view&&this.bankingActions.push(new h.c("swap_vert",this.i18n.user.profile.accountsBalanceLimits,()=>{this.router.navigate(["/banking",this.param,"account-balance-limits"])})),(r.paymentLimits||{}).view&&this.bankingActions.push(new h.c("swap_vert",this.i18n.user.profile.accountsPaymentLimits,()=>{this.router.navigate(["/banking",this.param,"account-payment-limits"])})),v.view&&this.bankingActions.push(new h.c("assignment_turned_in",this.i18n.user.profile.viewAuthorizedPayments,()=>{this.router.navigate(["/banking",this.param,"authorized-payments"])})),F.viewBought&&this.bankingActions.push(new h.c("local_play",this.i18n.user.profile.viewBoughtVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","bought"])})),F.buy&&this.bankingActions.push(new h.c("confirmation_number",this.i18n.user.profile.buyVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","buy"])})),F.viewRedeemed&&this.bankingActions.push(new h.c("search",this.i18n.user.profile.viewRedeemedVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","redeemed"])})),F.redeem&&this.bankingActions.push(new h.c("payment",this.i18n.user.profile.redeemVoucher,()=>{this.router.navigate(["/banking",this.param,"vouchers","redeem"])})),o.editProfile&&this.managementActions.push(new h.c("edit",this.i18n.user.profile.edit,()=>{this.router.navigateByUrl(this.router.url+"/edit")})),c.manage&&this.managementActions.push(new h.c("vpn_key",this.i18n.user.profile.managePasswords,()=>{this.router.navigate(["/users",this.param,"passwords"])})),l.view&&this.managementActions.push(new h.c("perm_identity",this.i18n.user.profile.viewIdentityProviders,()=>{this.router.navigate(["/users",this.param,"identity-providers"])})),x.view&&this.managementActions.push(new h.c("how_to_reg",a?this.i18n.user.profile.statusOperator:this.i18n.user.profile.statusUser,()=>{this.router.navigate(["/users",this.param,"status"])})),I.view&&this.managementActions.push(new h.c("supervised_user_circle",a?this.i18n.user.profile.groupOperator:this.i18n.user.profile.groupUser,()=>{this.router.navigate(["/users",this.param,"group"])})),k.view&&this.managementActions.push(new h.c("ballot",this.i18n.user.profile.agreements,()=>{this.router.navigate(["/users",this.param,"agreements"])})),S.viewMembers&&this.managementActions.push(new h.c("assignment_ind",this.i18n.user.profile.viewBrokerings,()=>{this.router.navigate(["/users",this.param,"brokerings"])})),S.viewBrokers&&this.managementActions.push(new h.c("assignment_ind",this.i18n.user.profile.viewBrokers,()=>{this.router.navigate(["/users",this.param,"brokers"])})),T.viewOperators&&this.managementActions.push(new h.c("supervisor_account",this.i18n.user.profile.viewOperators,()=>{this.router.navigate(["/users",this.param,"operators"])})),E.view&&this.managementActions.push(new h.c("admin_panel_settings",this.i18n.user.profile.products,()=>{this.router.navigate(["/users",this.param,"product-assignment"])})),b.add&&this.managementActions.push(new h.c("add_circle_outline",this.i18n.user.profile.addContact,()=>{this.addContact()})),b.remove&&this.managementActions.push(new h.c("remove_circle_outline",this.i18n.user.profile.removeContact,()=>{this.removeContact()})),p.userToUser&&this.managementActions.push(new h.c("payment",this.i18n.user.profile.pay,()=>{this.router.navigate(["/banking",g.a.SELF,"payment",this.param])})),y.view&&this.managementActions.push(new h.c("shopping_basket",this.i18n.user.profile.viewAds,()=>{this.router.navigate(["/marketplace",this.param,s.c.SIMPLE,"list"])})),A.view&&this.managementActions.push(new h.c("shopping_basket",this.i18n.user.profile.viewWebshop,()=>{this.router.navigate(["/marketplace",this.param,s.c.WEBSHOP,"list"])})),A.viewPurchases&&this.managementActions.push(new h.c("shop_two",this.i18n.user.profile.purchases,()=>{this.router.navigate(["/marketplace",this.param,"purchases"])})),A.viewSales&&this.managementActions.push(new h.c("local_offer",this.i18n.user.profile.sales,()=>{this.router.navigate(["/marketplace",this.param,"sales"])})),w.viewInterests&&this.managementActions.push(new h.c("star",this.i18n.user.profile.adInterests,()=>{this.router.navigate(["/marketplace",this.param,"ad-interests"])})),A.viewSettings&&(this.managementActions.push(new h.c("local_shipping",this.i18n.user.profile.deliveryMethods,()=>{this.router.navigate(["/marketplace",this.param,"delivery-methods"])})),this.managementActions.push(new h.c("store",this.i18n.user.profile.webshopSettings,()=>{this.router.navigate(["/marketplace",this.param,"webshop-settings","view"])})));for(const e of O)this.managementActions.push(new h.c("vpn_key",e.type.pluralName,()=>{this.router.navigate(["/users",this.param,"tokens",e.type.id])}));P.view&&this.managementActions.push(new h.c("notifications_off",this.i18n.user.profile.notificationSettings,()=>{this.router.navigate(["/users",this.param,"notification-settings"])})),(null===(t=r.privacySettings)||void 0===t?void 0:t.view)&&this.managementActions.push(new h.c("settings",this.i18n.user.profile.privacySettings,()=>{this.router.navigate(["/users",this.param,"privacy-settings"])})),(null===(i=r.references)||void 0===i?void 0:i.view)&&this.managementActions.push(new h.c("stars",this.i18n.user.profile.references,()=>{this.router.navigate(["/users",this.param,"references","search"])})),L.view&&this.managementActions.push(new h.c("library_books",this.i18n.document.title.list,()=>{this.router.navigate(["/users",this.param,"documents","search"])}));for(const e of r.records||[]){const t=e.type,i=t.userProfileSection===s.Kb.BANKING?this.bankingActions:this.managementActions,n=this.recordHelper.icon(t);i.push(new h.c(n,this.i18n.record.action({type:t.pluralName,count:e.count}),()=>{this.router.navigateByUrl(this.recordHelper.resolvePath(e,this.param))}))}for(const t of r.operations||[])(t.userProfileSection===s.Kb.BANKING?this.bankingActions:this.managementActions).push(this.operationHelper.headingAction(t,e.id));for(const t of r.wizards||[])(t.userProfileSection===s.Kb.BANKING?this.bankingActions:this.managementActions).push(this.wizardHelper.headingAction(t,e.id));let n=Object(m.h)(this.bankingActions)?0:this.bankingActions.length;n+=Object(m.h)(this.managementActions)?0:this.managementActions.length,n>0&&(n<6?this.headingActions=(this.bankingActions||[]).concat(this.managementActions||[]):this.updateHeadingActions())}}referencesPath(){return["/users",this.param,"references","search"]}updateHeadingActions(){const e=!this.showActions$.value,t=new h.c(e?"play_circle_outline":"clear",e?this.i18n.user.profile.showActions:this.i18n.user.profile.hideActions,()=>{this.showActions$.next(e),this.updateHeadingActions()},!0);this.headingActions=[t]}addContact(){this.addSub(this.contactsService.createContact({user:g.a.SELF,body:{contact:this.user.id}}).subscribe(()=>{this.notification.snackBar(this.i18n.user.profile.addContactDone(this.shortName)),this.reload()}))}removeContact(){this.addSub(this.contactsService.deleteContact({id:this.user.contact.id}).subscribe(()=>{this.notification.snackBar(this.i18n.user.profile.removeContactDone(this.shortName)),this.reload()}))}get myProfile(){return!!this.user&&(this.login.user||{}).id===this.user.id}get title(){return this.myProfile?this.i18n.user.title.myProfile:this.shortName}get mobileTitle(){return this.myProfile?this.i18n.user.mobileTitle.myProfile:this.i18n.user.mobileTitle.userProfile}get showActivationDate(){return this.user.activationDate&&this.format.formatAsDate(this.user.activationDate)!==this.format.formatAsDate(this.user.registrationDate)}get showOperatorOwner(){return this.user.role===s.kb.OPERATOR&&![s.Mb.OWNER,s.Mb.SAME_OWNER].includes(this.user.relationship)}resolveMenu(e){switch(e.relationship){case s.Mb.OWNER:case s.Mb.SAME_OWNER:return p.b.MY_OPERATORS;case s.Mb.BROKER:return p.b.MY_BROKERED_USERS;default:return this.login.user?p.b.SEARCH_USERS:p.b.PUBLIC_DIRECTORY}}}return e.\u0275fac=function(t){return new(t||e)(v.Kb(v.r),v.Kb(a.a),v.Kb(n.a),v.Kb(c.a),v.Kb(d.a),v.Kb(l.a),v.Kb(o.a),v.Kb(u.a))},e.\u0275cmp=v.Eb({type:e,selectors:[["view-profile"]],features:[v.ub],decls:5,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["actionTpl",""],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["icon","user",3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],[3,"label",4,"ngIf"],[3,"label","value",4,"ngIf"],[3,"label",4,"ngFor","ngForOf"],[3,"fieldValue",4,"ngFor","ngForOf"],[3,"addresses"],[1,"row","no-gutters"],["class","col-12 col-sm-6",4,"ngIf"],[1,"col-12","col-sm-6"],[1,"border-0"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"image","additionalImages"],["icon","user",3,"image","additionalImages"],[3,"label"],[3,"user"],[3,"label","value"],[1,"link-with-icon",3,"href"],["icon","email"],["icon","smartphone"],["icon","phone"],[3,"fieldValue"],[3,"routerLink"],[3,"score","textRight",4,"ngIf"],[3,"score","textRight"],[1,"mt-3"],["class","text-center col-12 col-sm-6 col-md-4 col-lg-3 pb-3",4,"ngFor","ngForOf"],[1,"text-center","col-12","col-sm-6","col-md-4","col-lg-3","pb-3"],["size","140","useLightbox","",1,"mb-2",3,"image"],[1,"font-weight-bold"],["class","d-block",3,"href",4,"ngIf"],[1,"d-block",3,"href"],["class","text-accent",4,"ngIf"],[1,"text-accent"],[1,"inline-label"],[1,"profile-action"],[1,"heading-action-button",3,"action"]],template:function(e,t){1&e&&(v.Qb(0,"page-layout",0),v.ac(1,"async"),v.Bc(2,ge,28,31,"page-content",1),v.Pb(),v.Bc(3,be,2,1,"ng-template",null,2,v.Cc)),2&e&&(v.gc("ready",v.bc(1,2,t.data$)),v.xb(2),v.gc("ngIf",t.data))},directives:[w.a,y.t,A.a,y.s,P.a,y.A,x.a,I.a,k.a,T.a,S.a,F.h,L.a,O.a,E.a,R.a],pipes:[y.b,B.a],encapsulation:2,changeDetection:0}),e})()},v4xg:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var s=i("s7LF"),n=i("mwYl"),a=i("tAww"),r=i("rCAV"),o=i("uuU0"),c=i("Ky6R"),l=i("TFmz"),u=i("Muja"),h=i("2Vo4"),g=i("Kj3r"),b=i("8Y7J");let m=(()=>{class e extends o.a{constructor(e){super(e),this.ResultType=l.a,this.resultType$=new h.a(null),this.resultTypeControl=new s.j(null),this.results$=new h.a(null),this.allowedResultTypes$=new h.a([l.a.LIST]),this.rendering$=new h.a(!1),this.moreFilters$=new h.a(!1),this.ignoreNextUpdate=!1,this.nextRequestState=e.get(n.a);const t={page:0};t.resultType=this.getInitialResultType();for(const i of this.getFormControlNames()||[])t[i]=null;this.form=this.formBuilder.group(t)}getInitialFormValue(e){return e.query||{}}onDataInitialized(e){this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe(e=>{const t=this.previousResultType;this.previousResultType=e,this.resultType$.next(e),this.shouldUpdateOnResultTypeChange(e,t)&&this.update(),null!=t&&t===e||(this.rendering=!0,this.stateManager.set("resultType",e),this.onResultTypeChanged(e,t))})),setTimeout(()=>{this.addSub(this.form.valueChanges.pipe(Object(g.a)(r.a.DEBOUNCE_TIME)).subscribe(e=>{this.shouldUpdateOnChange(e)&&this.update(),this.previousValue=e}),!0),this.previousResultType!==l.a.CATEGORIES&&this.update()},1)}shouldUpdateOnResultTypeChange(e,t){return e!==l.a.CATEGORIES&&([l.a.LIST,l.a.TILES].includes(t)!==[l.a.LIST,l.a.TILES].includes(e)||t===l.a.MAP!=(e===l.a.MAP))}shouldUpdateOnChange(e){return!Object(u.a)(this.previousValue,e)}get results(){return this.results$.value}set results(e){this.results$.next(e)}get rendering(){return this.rendering$.value}set rendering(e){this.rendering$.next(e)}get allowedResultTypes(){return this.allowedResultTypes$.value}set allowedResultTypes(e){this.allowedResultTypes$.next(e)}get moreFilters(){return this.moreFilters$.value}set moreFilters(e){this.moreFilters$.next(e)}get pageData(){const e=this.form.value;return{page:e.page,pageSize:e.pageSize}}set pageData(e){this.form.patchValue(e)}get resultType(){return this.resultTypeControl.value}set resultType(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}ngOnInit(){super.ngOnInit(),this.resultType=this.getInitialResultType()}get moreFiltersAction(){return this._moreFiltersAction||(this._moreFiltersAction=new a.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),()=>{this.moreFilters=!this.moreFilters,this._moreFiltersAction.icon=this.moreFilters?this.showLessFiltersIcon():this.showMoreFiltersIcon(),this._moreFiltersAction.label=this.moreFilters?this.showLessFiltersLabel():this.showMoreFiltersLabel()},!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}showMoreFiltersLabel(){return this.i18n.general.showMoreFilters}showLessFiltersLabel(){return this.i18n.general.showLessFilters}showMoreFiltersIcon(){return"filter_list"}showLessFiltersIcon(){return"filter_list"}onResultTypeChanged(e,t){}getInitialResultType(){return l.a.LIST}update(e){if(this.ignoreNextUpdate)return;e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;const t=this.form.value;t.pageSize=this.uiLayout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(t)).subscribe(e=>{this.resultType===l.a.CATEGORIES&&(this.resultType=this.allowedResultTypes.find(e=>e!==l.a.CATEGORIES)),this.results=c.a.from(e)}))}resetPage(e=!1){this.form.patchValue({page:0},{emitEvent:e})}doIgnoringUpdate(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(b.r))},e.\u0275dir=b.Fb({type:e,features:[b.ub]}),e})()}}]);