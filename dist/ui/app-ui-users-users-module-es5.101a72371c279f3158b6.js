!function(){function e(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(c){a=!0,r=c}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RsAj:function(i,a,o){"use strict";o.r(a),o.d(a,"UsersModule",(function(){return Qf}));var u=o("Se2V"),d=o("iInd"),g=o("bkl+"),m=o("IbW5"),p=o("q8SF"),h=o("rCAV"),v=o("uuU0"),y=o("ObUu"),x=o("QH++"),P=o("XIp8"),I=o("8Y7J"),k=o("3qho"),E=o("I0FJ"),A=o("SVse"),C=o("s7LF"),D=o("yHfF"),O=o("UXR7"),S=o("OTwK"),Q=o("s7Af"),N=o("978R");function w(e,t){if(1&e&&(I.Qb(0,"li"),I.Dc(1),I.Pb()),2&e){var n=t.$implicit;I.xb(1),I.Ec(n)}}function F(e,t){if(1&e&&I.Lb(0,"user-info",9),2&e){var n=I.Zb(2);I.gc("user",n.data.user)}}function L(e,t){if(1&e&&I.Lb(0,"boolean-field",11),2&e){var n=t.$implicit;I.gc("formControlName",n.id)("label",n.name)("tooltip",n.informationText)("placement","left")}}function B(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2"),I.Dc(2),I.Pb(),I.Bc(3,L,1,4,"boolean-field",10),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Ec(n.i18n.privacySettings.controlsSection),I.xb(1),I.gc("ngForOf",n.data.availableControls)}}function R(e,t){if(1&e){var n=I.Rb();I.Ob(0,2),I.Qb(1,"div"),I.Dc(2),I.Pb(),I.Qb(3,"div"),I.Dc(4),I.Pb(),I.Qb(5,"ul"),I.Bc(6,w,2,1,"li",3),I.Pb(),I.Bc(7,F,1,1,"user-info",4),I.Lb(8,"boolean-field",5,6),I.Bc(10,B,4,2,"ng-container",7),I.Qb(11,"actions"),I.Qb(12,"action-button",8),I.Xb("action",(function(){return I.sc(n),I.Zb().save()})),I.ac(13,"async"),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=I.qc(9),a=I.Zb();I.gc("formGroup",a.form),I.xb(2),I.Ec(a.i18n.privacySettings.information),I.xb(2),I.Ec(a.i18n.privacySettings.dataSubjectToControls),I.xb(2),I.gc("ngForOf",a.fields()),I.xb(1),I.gc("ngIf",a.data.user&&!a.authHelper.isSelf(a.data.user)),I.xb(1),I.gc("formControlName","enabled")("label",a.i18n.general.enabled),I.xb(2),I.gc("ngIf",i.value),I.xb(2),I.gc("label",a.i18n.general.save)("disabled",I.bc(13,10,a.requesting$))}}var T,Z=((T=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).privacySettingsService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user,this.addSub(this.privacySettingsService.getPrivacySettingsData({user:this.user?this.user:h.a.SELF}).subscribe((function(t){return e.data=t})))}},{key:"fields",value:function(){var e=this;return this.data.controlledFields.map((function(t){return e.fieldHelper.fieldDisplay(t,e.data.customFields)}))}},{key:"onDataInitialized",value:function(e){var t=this;this.form=this.formBuilder.group({enabled:e.enabled}),e.availableControls.forEach((function(n){return t.form.addControl(n.id,t.formBuilder.control({value:e.selectedControls.includes(n.id)||n.fieldsAlwaysVisible,disabled:n.fieldsAlwaysVisible}))}))}},{key:"save",value:function(){var e=this;if(Object(y.F)(this.form),this.form.valid){var t=Object(P.a)(this.form.value),n=t.enabled;delete t.enabled;var i={enabled:n,selectedControls:[]};this.data.availableControls.forEach((function(e){t[e.id]&&i.selectedControls.push(e.id)})),this.addSub(this.privacySettingsService.savePrivacySettings({user:this.user?this.user:h.a.SELF,body:i}).subscribe((function(){return e.notification.snackBar(e.i18n.privacySettings.saved)})))}}},{key:"resolveMenu",value:function(){return this.authHelper.isSelf(this.user)?x.b.PRIVACY_SETTINGS:this.menu.searchUsersMenu()}}]),n}(v.a)).\u0275fac=function(e){return new(e||T)(I.Kb(I.r),I.Kb(p.a))},T.\u0275cmp=I.Eb({type:T,selectors:[["edit-privacy-settings"]],features:[I.ub],decls:5,vars:8,consts:[[3,"heading","mobileHeading","headingActions"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[4,"ngFor","ngForOf"],[3,"user",4,"ngIf"],[3,"formControlName","label"],["enabled",""],[4,"ngIf"],[3,"label","disabled","action"],[3,"user"],[3,"formControlName","label","tooltip","placement",4,"ngFor","ngForOf"],[3,"formControlName","label","tooltip","placement"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout"),I.Qb(1,"page-content",0),I.ac(2,"async"),I.Bc(3,R,14,12,"ng-container",1),I.ac(4,"async"),I.Pb(),I.Pb()),2&e&&(I.xb(1),I.gc("heading",t.i18n.privacySettings.title)("mobileHeading",t.i18n.privacySettings.mobileTitle)("headingActions",I.bc(2,4,t.headingActions$)),I.xb(2),I.gc("ngIf",I.bc(4,6,t.data$)))},directives:[k.a,E.a,A.t,C.w,C.n,A.s,D.a,C.v,C.l,O.a,S.a,Q.a,N.b],pipes:[A.b],encapsulation:2,changeDetection:0}),T),_=o("JFlR");function M(e,t){if(1&e&&(I.Qb(0,"li"),I.Dc(1),I.Pb()),2&e){var n=t.$implicit;I.xb(1),I.Ec(n)}}function $(e,t){if(1&e&&I.Lb(0,"user-info",5),2&e){var n=I.Zb(2);I.gc("user",n.data.user)}}function U(e,t){if(1&e&&(I.Qb(0,"label-value",7),I.Dc(1),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("label",n.name)("tooltip",n.informationText)("placement","left"),I.xb(1),I.Fc(" ",n.fieldsAlwaysVisible||i.data.selectedControls.includes(n.id)?i.i18n.general.yes:i.i18n.general.no," ")}}function H(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2"),I.Dc(2),I.Pb(),I.Bc(3,U,2,4,"label-value",6),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Ec(n.i18n.privacySettings.controlsSection),I.xb(1),I.gc("ngForOf",n.data.availableControls)}}function G(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div"),I.Dc(2),I.Pb(),I.Qb(3,"div"),I.Dc(4),I.Pb(),I.Qb(5,"ul"),I.Bc(6,M,2,1,"li",2),I.Pb(),I.Bc(7,$,1,1,"user-info",3),I.Qb(8,"label-value",4),I.Dc(9),I.Pb(),I.Bc(10,H,4,2,"ng-container",1),I.Nb()),2&e){var n=I.Zb();I.xb(2),I.Ec(n.i18n.privacySettings.information),I.xb(2),I.Ec(n.i18n.privacySettings.dataSubjectToControls),I.xb(2),I.gc("ngForOf",n.fields()),I.xb(1),I.gc("ngIf",n.data.user&&!n.authHelper.isSelf(n.data.user)),I.xb(1),I.gc("label",n.i18n.general.enabled),I.xb(1),I.Fc(" ",n.data.enabled?n.i18n.general.yes:n.i18n.general.no,""),I.xb(1),I.gc("ngIf",n.data.enabled)}}var q,K=((q=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).privacySettingsService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user,this.addSub(this.privacySettingsService.getPrivacySettingsData({user:this.user?this.user:h.a.SELF}).subscribe((function(t){t.canEdit&&e.router.navigate(["/users",e.user,"privacy-settings","edit"],{replaceUrl:!0}),e.data=t})))}},{key:"fields",value:function(){var e=this;return this.data.controlledFields.map((function(t){return e.fieldHelper.fieldDisplay(t,e.data.customFields)}))}},{key:"resolveMenu",value:function(){return this.authHelper.isSelf(this.user)?x.b.PRIVACY_SETTINGS:this.menu.searchUsersMenu()}}]),n}(v.a)).\u0275fac=function(e){return new(e||q)(I.Kb(I.r),I.Kb(p.a))},q.\u0275cmp=I.Eb({type:q,selectors:[["view-privacy-settings"]],features:[I.ub],decls:5,vars:8,consts:[[3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"user",4,"ngIf"],[3,"label"],[3,"user"],[3,"label","tooltip","placement",4,"ngFor","ngForOf"],[3,"label","tooltip","placement"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout"),I.Qb(1,"page-content",0),I.ac(2,"async"),I.Bc(3,G,11,7,"ng-container",1),I.ac(4,"async"),I.Pb(),I.Pb()),2&e&&(I.xb(1),I.gc("heading",t.i18n.privacySettings.title)("mobileHeading",t.i18n.privacySettings.mobileTitle)("headingActions",I.bc(2,4,t.headingActions$)),I.xb(2),I.gc("ngIf",I.bc(4,6,t.data$)))},directives:[k.a,E.a,A.t,A.s,_.a,Q.a,N.b],pipes:[A.b],encapsulation:2,changeDetection:0}),q),V=o("cutz"),j=o("tzq7"),z=o("ugYG"),X=o("Pm8L"),J=o("LqlI"),Y=o("Zilp"),W=o("IbGL"),ee=o("Ae/X"),te=o("iM3x"),ne=o("H4pW"),ie=o("yL40"),ae=o("/kmK"),re=o("kmyw");function oe(e,t){1&e&&I.Mb(0)}function se(e,t){if(1&e&&I.Lb(0,"user-info",8),2&e){var n=I.Zb(2);I.gc("user",n.data.user)}}function ce(e,t){if(1&e&&(I.Qb(0,"del"),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Fc(" ",n.agreement.name," ")}}function le(e,t){if(1&e&&I.Dc(0),2&e){var n=I.Zb().$implicit;I.Fc(" ",n.agreement.name," ")}}function ue(e,t){if(1&e&&(I.Qb(0,"mobile-result"),I.Qb(1,"div"),I.Qb(2,"div",9),I.Dc(3),I.ac(4,"date"),I.Pb(),I.Qb(5,"div",10),I.Bc(6,ce,2,1,"del",11),I.Bc(7,le,1,1,"ng-template",null,12,I.Cc),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.qc(8);I.xb(3),I.Fc(" ",I.bc(4,3,n.date)," "),I.xb(3),I.gc("ngIf",!n.accepted)("ngIfElse",i)}}function be(e,t){if(1&e&&(I.Qb(0,"th"),I.Dc(1),I.Pb()),2&e){var n=I.Zb(3);I.xb(1),I.Ec(n.i18n.agreements.accepted)}}function de(e,t){if(1&e&&(I.Qb(0,"th",18),I.Dc(1),I.Pb()),2&e){var n=I.Zb(3);I.xb(1),I.Fc(" ",n.i18n.general.remoteAddress,"")}}function fe(e,t){if(1&e&&(I.Qb(0,"td"),I.Dc(1),I.ac(2,"boolean"),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Ec(I.bc(2,1,n.accepted))}}function ge(e,t){if(1&e&&(I.Qb(0,"td",18),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Fc(" ",n.remoteAddress,"")}}function me(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",21),I.Xb("click",(function(){I.sc(n);var e=I.Zb().$implicit;return I.Zb(3).showAgreement(e)})),I.Lb(1,"icon",22),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("tooltip",i.i18n.general.view)}}var pe=function(e){return{"cursor-pointer":e}};function he(e,t){if(1&e&&(I.Qb(0,"tr",19),I.Qb(1,"td"),I.Dc(2),I.ac(3,"dateTime"),I.Pb(),I.Qb(4,"td"),I.Dc(5),I.Pb(),I.Bc(6,fe,3,3,"td",14),I.Bc(7,ge,2,1,"td",15),I.Qb(8,"td",16),I.Bc(9,me,2,1,"button",20),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("ngClass",I.jc(8,pe,n.accepted)),I.xb(2),I.Ec(I.bc(3,6,n.date)),I.xb(3),I.Ec(n.agreement.name),I.xb(1),I.gc("ngIf",i.hasAccepted),I.xb(1),I.gc("ngIf",i.hasRemoteAddress),I.xb(2),I.gc("ngIf",n.accepted)}}function ve(e,t){if(1&e&&(I.Qb(0,"table",13),I.Qb(1,"thead"),I.Qb(2,"th"),I.Dc(3),I.Pb(),I.Qb(4,"th"),I.Dc(5),I.Pb(),I.Bc(6,be,2,1,"th",14),I.Bc(7,de,2,1,"th",15),I.Lb(8,"th",16),I.Pb(),I.Qb(9,"tbody"),I.Bc(10,he,10,10,"tr",17),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(3),I.Ec(n.i18n.general.date),I.xb(2),I.Ec(n.i18n.agreements.agreement),I.xb(1),I.gc("ngIf",n.hasAccepted),I.xb(1),I.gc("ngIf",n.hasRemoteAddress),I.xb(3),I.gc("ngForOf",n.data.history)}}function ye(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.Bc(1,se,1,1,"user-info",4),I.Pb(),I.Qb(2,"results-layout",5),I.Bc(3,ue,9,5,"mobile-result",6),I.Bc(4,ve,11,5,"table",7),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.i18n.agreements.title.history)("mobileHeading",n.i18n.agreements.mobileTitle.history)("mode",n.self?"empty":"normal"),I.xb(1),I.gc("ngIf",!n.self),I.xb(1),I.gc("results",n.data.history)("onClick",n.showAgreement)}}var xe,Pe=((xe=function(e){l(n,e);var t=b(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e)).agreementsService=i,s.userHelper=a,s.modal=o,s}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.agreementsService.getUserAgreements({user:this.param,fields:["user","history"]}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){this.self=this.authHelper.isSelf(e.user);var t=e.history||[];this.hasAccepted=t.findIndex((function(e){return!e.accepted}))>=0,this.hasRemoteAddress=t.findIndex((function(e){return e.remoteAddress}))>=0}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.AGREEMENTS)}},{key:"operator",get:function(){return this.userHelper.isOperator(this.data.user)}},{key:"showAgreement",get:function(){var e=this;return function(t){t.accepted&&e.modal.show(z.a,{ignoreBackdropClick:!0,class:"modal-form modal-form-large",initialState:{agreement:t.agreement,version:t.acceptedVersion}})}}}]),n}(X.a)).\u0275fac=function(e){return new(e||xe)(I.Kb(I.r),I.Kb(V.a),I.Kb(j.a),I.Kb(J.b))},xe.\u0275cmp=I.Eb({type:xe,selectors:[["view-agreements-history"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading","mode"],[3,"user",4,"ngIf"],[3,"results","onClick"],[4,"mobileResult"],["class","table table-hover",4,"resultTable"],[3,"user"],[1,"cell-text","float-left"],[1,"cell-main","float-right"],[4,"ngIf","ngIfElse"],["accepted",""],[1,"table","table-hover"],[4,"ngIf"],["class","align-center",4,"ngIf"],[1,"actions"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"align-center"],[3,"ngClass"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","search"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,oe,1,0,"ng-container",1),I.Pb(),I.Bc(3,ye,5,6,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,Y.a,W.a,ee.a,Q.a,te.a,A.s,A.q,N.b,ne.a],pipes:[A.b,ie.a,ae.a,re.a],encapsulation:2,changeDetection:0}),xe),Ie=o("tAww"),ke=o("T6RQ"),Ee=o("U4Kh");function Ae(e,t){if(1&e&&I.Lb(0,"user-info",9),2&e){var n=I.Zb(2);I.gc("user",n.data.user)}}function Ce(e,t){if(1&e&&I.Lb(0,"accept-agreements",10),2&e){var n=I.Zb(2);I.gc("label",n.i18n.agreements.optional)("formControl",n.optionalControl)("agreements",n.allOptional)}}function De(e,t){1&e&&I.Mb(0)}var Oe=function(e){return{$implicit:e}};function Se(e,t){if(1&e&&(I.Qb(0,"label-value",11),I.Bc(1,De,1,0,"ng-container",12),I.Pb()),2&e){var n=I.Zb(3),i=I.qc(4);I.gc("label",n.i18n.agreements.optional),I.xb(1),I.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",I.jc(3,Oe,n.acceptedOptional))}}function Qe(e,t){if(1&e&&I.Bc(0,Se,2,5,"label-value",7),2&e){var n=I.Zb(2);I.gc("ngIf",(null==n.acceptedOptional?null:n.acceptedOptional.length)>0)}}function Ne(e,t){1&e&&I.Mb(0)}function we(e,t){if(1&e&&(I.Qb(0,"label-value",11),I.Bc(1,Ne,1,0,"ng-container",12),I.Pb()),2&e){var n=I.Zb(2),i=I.qc(4);I.gc("label",n.i18n.agreements.required),I.xb(1),I.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",I.jc(3,Oe,n.acceptedRequired))}}function Fe(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"hr"),I.Dc(2),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Fc(" ",n.i18n.agreements.noAccepted," ")}}function Le(e,t){if(1&e){var n=I.Rb();I.Qb(0,"actions"),I.Qb(1,"action-button",13),I.Xb("action",(function(){return I.sc(n),I.Zb(2).save()})),I.ac(2,"async"),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(2);I.xb(1),I.gc("disabled",I.bc(2,2,i.requesting$))("label",i.i18n.general.save)}}function Be(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.ac(1,"async"),I.Bc(2,Ae,1,1,"user-info",4),I.Bc(3,Ce,1,3,"accept-agreements",5),I.Bc(4,Qe,1,1,"ng-template",null,6,I.Cc),I.Bc(6,we,2,5,"label-value",7),I.Bc(7,Fe,3,1,"ng-container",8),I.Bc(8,Le,3,4,"actions",8),I.Pb()),2&e){var n=I.qc(5),i=I.Zb();I.gc("heading",i.i18n.agreements.title.accepted)("mobileHeading",i.i18n.agreements.mobileTitle.accepted)("headingActions",I.bc(1,9,i.headingActions$)),I.xb(2),I.gc("ngIf",!i.self),I.xb(1),I.gc("ngIf",i.optionalControl)("ngIfElse",n),I.xb(3),I.gc("ngIf",(null==i.acceptedRequired?null:i.acceptedRequired.length)>0),I.xb(1),I.gc("ngIf",i.noAgreements),I.xb(1),I.gc("ngIf",i.optionalControl)}}var Re=function(e){return{"mt-2":e}};function Te(e,t){if(1&e&&(I.Qb(0,"div",15),I.Lb(1,"agreement-link",16),I.Pb()),2&e){var n=t.$implicit,i=t.first,a=I.Zb(2);I.gc("ngClass",I.jc(3,Re,!i)),I.xb(1),I.gc("agreement",n)("version",null==a.data.accepted[n.id]?null:a.data.accepted[n.id].acceptedVersion)}}function Ze(e,t){1&e&&I.Bc(0,Te,2,5,"div",14),2&e&&I.gc("ngForOf",t.$implicit)}var _e,Me=((_e=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).agreementsService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.agreementsService.getUserAgreements({user:this.param,fields:["-history"]}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;this.self=this.authHelper.isSelf(e.user);var n=Object.keys(e.accepted||{}),i=(e.agreements||[]).filter((function(e){return n.includes(e.id)}));this.allOptional=(e.agreements||[]).filter((function(e){return!e.required})),this.acceptedOptional=i.filter((function(e){return!e.required})),this.acceptedRequired=i.filter((function(e){return e.required})),e.canEdit?this.optionalControl=this.formBuilder.control(this.acceptedOptional.map((function(e){return e.id}))):this.noAgreements=0===i.length,this.noAgreements||(this.headingActions=[new Ie.c("history",this.i18n.general.viewHistory,(function(){return t.router.navigate(["users",t.param,"agreements","history"])}),!0)])}},{key:"save",value:function(){var e=this;Object(y.F)(this.optionalControl)&&this.addSub(this.agreementsService.acceptOptionalAgreements({agreements:this.optionalControl.value}).subscribe((function(){e.notification.snackBar(e.i18n.agreements.optionalSaved),e.reload()})))}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.AGREEMENTS)}}]),n}(X.a)).\u0275fac=function(e){return new(e||_e)(I.Kb(I.r),I.Kb(V.a))},_e.\u0275cmp=I.Eb({type:_e,selectors:[["view-user-agreements"]],features:[I.ub],decls:5,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions",4,"ngIf"],["agreementLinks",""],[3,"heading","mobileHeading","headingActions"],[3,"user",4,"ngIf"],[3,"label","formControl","agreements",4,"ngIf","ngIfElse"],["optionalNotEditable",""],[3,"label",4,"ngIf"],[4,"ngIf"],[3,"user"],[3,"label","formControl","agreements"],[3,"label"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"disabled","label","action"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["ignoreRequired","",3,"agreement","version"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Be,9,11,"page-content",1),I.Pb(),I.Bc(3,Ze,1,1,"ng-template",null,2,I.Cc)),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,Q.a,ke.a,C.v,C.k,_.a,A.A,O.a,S.a,A.s,A.q,Ee.a],pipes:[A.b],encapsulation:2,changeDetection:0}),_e),$e=o("hQUc"),Ue=o("v4xg"),He=o("6g1M"),Ge=o("WYBn"),qe=o("chz4"),Ke=o("JbOn"),Ve=o("sifq");function je(e,t){if(1&e&&(I.Qb(0,"mobile-result",25),I.Qb(1,"div",26),I.Dc(2),I.Pb(),I.Qb(3,"div",27),I.Dc(4),I.ac(5,"dateTime"),I.Pb(),I.Qb(6,"div",28),I.Dc(7),I.Pb(),I.Pb()),2&e){var n=t.$implicit;I.gc("avatarImage",null==n.user?null:n.user.image),I.xb(1),I.gc("tooltip",n.user.display),I.xb(1),I.Fc(" ",n.user.display,""),I.xb(2),I.Fc(" ",I.bc(5,5,n.date)," "),I.xb(3),I.Ec(n.text)}}var ze=function(e,t){return{"pb-0":e,"border-0":t}};function Xe(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"tr"),I.Qb(2,"td",32),I.ac(3,"async"),I.ac(4,"async"),I.Lb(5,"avatar",33),I.Pb(),I.Qb(6,"td"),I.Dc(7),I.Pb(),I.Qb(8,"td"),I.Dc(9),I.Pb(),I.Qb(10,"td"),I.Dc(11),I.ac(12,"dateTime"),I.Pb(),I.Pb(),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(2);I.xb(2),I.gc("ngClass",I.kc(12,ze,I.bc(3,6,i.layout.xxs$),I.bc(4,8,i.layout.xxs$))),I.xb(3),I.gc("image",null==n.user?null:n.user.image)("tooltip",null==n.user?null:n.user.display),I.xb(2),I.Ec(n.user.display),I.xb(2),I.Ec(n.text),I.xb(2),I.Ec(I.bc(12,10,n.date))}}function Je(e,t){if(1&e&&(I.Qb(0,"table",29),I.Qb(1,"thead"),I.Lb(2,"th",30),I.Qb(3,"th"),I.Dc(4),I.Pb(),I.Qb(5,"th"),I.Dc(6),I.Pb(),I.Qb(7,"th"),I.Dc(8),I.Pb(),I.Pb(),I.Qb(9,"tbody"),I.Bc(10,Xe,13,15,"ng-container",31),I.ac(11,"async"),I.Pb(),I.Pb()),2&e){var n,i=I.Zb();I.xb(4),I.Ec(i.i18n.general.user),I.xb(2),I.Ec(i.i18n.userAlert.text),I.xb(2),I.Ec(i.i18n.general.date),I.xb(2),I.gc("ngForOf",null==(n=I.bc(11,4,i.results$))?null:n.results)}}var Ye,We=((Ye=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).alertsService=i,a}return s(n,[{key:"ngOnInit",value:function(){c(f(n.prototype),"ngOnInit",this).call(this),this.data={}}},{key:"getFormControlNames",value:function(){return["types","user","beginDate","endDate"]}},{key:"toSearchParams",value:function(e){return{datePeriod:h.a.dateRangeFilter(e.beginDate,e.endDate),page:e.page,pageSize:e.pageSize,types:e.types,user:e.user}}},{key:"doSearch",value:function(e){return this.alertsService.searchUserAlerts$Response(e)}},{key:"resolveMenu",value:function(){return x.b.USER_ALERTS}}]),n}(Ue.a)).\u0275fac=function(e){return new(e||Ye)(I.Kb(I.r),I.Kb($e.a))},Ye.\u0275cmp=I.Eb({type:Ye,selectors:[["search-user-alerts"]],features:[I.ub],decls:30,vars:28,consts:[[3,"ready"],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","beginDate","minDate","past5","maxDate","today","fieldSize","full",3,"label"],["labelPosition","side","formControlName","endDate","minDate","past5","maxDate","today","fieldSize","full",3,"label"],["labelPosition","side","formControlName","types",3,"label","emptyOption"],["value","custom",3,"text"],["value","givenVeryBadRefs",3,"text"],["value","insufficientBalanceForInitialCredit",3,"text"],["value","maxDeviceActivationAttemptsReached",3,"text"],["value","maxDeviceConfirmationCheckAttemptsReached",3,"text"],["value","maxTokenActivationAttemptsReached",3,"text"],["value","maxUserLocalizationAttemptsReached",3,"text"],["value","maxVoucherRedeemAttemptsReached",3,"text"],["value","moveUserAutomaticallyFailed",3,"text"],["value","passwordDisabledByTries",3,"text"],["value","passwordTemporarilyBlocked",3,"text"],["value","receivedVeryBadRefs",3,"text"],["value","scheduledPaymentFailed",3,"text"],["labelPosition","side","formControlName","user",3,"label"],["resultType","list",3,"results","rendering$","update"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["avatarIcon","user",3,"avatarImage"],[1,"cell-main",3,"tooltip"],[1,"cell-cell-date"],[1,"cell-text"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[4,"ngFor","ngForOf"],[1,"avatar",3,"ngClass"],["icon","user",3,"image","tooltip"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Qb(2,"page-content",1),I.Qb(3,"form",2),I.Qb(4,"div",3),I.Qb(5,"div",4),I.Lb(6,"date-field",5),I.Pb(),I.Qb(7,"div",4),I.Lb(8,"date-field",6),I.Pb(),I.Qb(9,"div",4),I.Qb(10,"single-selection-field",7),I.Lb(11,"field-option",8),I.Lb(12,"field-option",9),I.Lb(13,"field-option",10),I.Lb(14,"field-option",11),I.Lb(15,"field-option",12),I.Lb(16,"field-option",13),I.Lb(17,"field-option",14),I.Lb(18,"field-option",15),I.Lb(19,"field-option",16),I.Lb(20,"field-option",17),I.Lb(21,"field-option",18),I.Lb(22,"field-option",19),I.Lb(23,"field-option",20),I.Pb(),I.Pb(),I.Qb(24,"div",4),I.Lb(25,"user-field",21),I.Pb(),I.Pb(),I.Pb(),I.Pb(),I.Qb(26,"results-layout",22),I.Xb("update",(function(e){return t.update(e)})),I.ac(27,"async"),I.Bc(28,je,8,7,"mobile-result",23),I.Bc(29,Je,12,6,"table",24),I.Pb(),I.Pb()),2&e&&(I.gc("ready",I.bc(1,24,t.data$)),I.xb(2),I.gc("heading",t.i18n.userAlert.title)("mobileHeading",t.i18n.userAlert.mobileTitle),I.xb(1),I.gc("formGroup",t.form),I.xb(3),I.gc("label",t.i18n.general.beginDate),I.xb(2),I.gc("label",t.i18n.general.endDate),I.xb(2),I.gc("label",t.i18n.userAlert.type.title)("emptyOption",t.i18n.general.notApplied),I.xb(1),I.gc("text",t.i18n.userAlert.type.custom),I.xb(1),I.gc("text",t.i18n.userAlert.type.givenVeryBadRefs),I.xb(1),I.gc("text",t.i18n.userAlert.type.insufficientBalanceForInitialCredit),I.xb(1),I.gc("text",t.i18n.userAlert.type.maxDeviceActivationAttemptsReached),I.xb(1),I.gc("text",t.i18n.userAlert.type.maxDeviceConfirmationCheckAttemptsReached),I.xb(1),I.gc("text",t.i18n.userAlert.type.maxTokenActivationAttemptsReached),I.xb(1),I.gc("text",t.i18n.userAlert.type.maxUserLocalizationAttemptsReached),I.xb(1),I.gc("text",t.i18n.userAlert.type.maxVoucherRedeemAttemptsReached),I.xb(1),I.gc("text",t.i18n.userAlert.type.moveUserAutomaticallyFailed),I.xb(1),I.gc("text",t.i18n.userAlert.type.passwordDisabledByTries),I.xb(1),I.gc("text",t.i18n.userAlert.type.passwordTemporarilyBlocked),I.xb(1),I.gc("text",t.i18n.userAlert.type.receivedVeryBadRefs),I.xb(1),I.gc("text",t.i18n.userAlert.type.receivedVeryBadRefs),I.xb(2),I.gc("label",t.i18n.general.user),I.xb(1),I.gc("results",I.bc(27,26,t.results$))("rendering$",t.rendering$))},directives:[k.a,E.a,C.I,C.w,C.n,He.a,C.v,C.l,Ge.a,qe.a,Ke.a,Y.a,W.a,ee.a,te.a,N.b,A.s,A.q,Ve.a],pipes:[A.b,ae.a],encapsulation:2,changeDetection:0}),Ye),et=o("XDzf"),tt=o("Dhej");function nt(e,t){if(1&e&&I.Lb(0,"boolean-field",7),2&e){var n=I.Zb(2);I.gc("label",n.i18n.brokers.mainBroker)}}function it(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"page-content",2),I.Qb(2,"form",3),I.Lb(3,"user-field",4),I.Bc(4,nt,1,1,"boolean-field",5),I.Pb(),I.Qb(5,"actions"),I.Qb(6,"action-button",6),I.Xb("action",(function(){return I.sc(n),I.Zb().save()})),I.ac(7,"async"),I.Pb(),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=I.Zb();I.xb(1),I.gc("heading",i.i18n.brokers.title.new)("mobileHeading",i.i18n.brokers.mobileTitle.new),I.xb(1),I.gc("formGroup",i.form),I.xb(1),I.gc("filters",i.userQuery)("allowContacts",!1)("label",i.i18n.brokers.broker),I.xb(1),I.gc("ngIf",i.data.brokers),I.xb(2),I.gc("disabled",I.bc(7,9,i.requesting$))("label",i.i18n.general.save)}}var at,rt=((at=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).brokeringService=i,a.form=a.formBuilder.group({}),a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user,this.addSub(this.brokeringService.getBrokerDataForAdd({user:this.user}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){this.userQuery={roles:[et.kb.BROKER],usersToExclude:e.brokers.map((function(e){return e.id})),groups:e.brokerGroups.map((function(e){return e.id}))},e.brokers&&this.form.setControl("mainBroker",this.formBuilder.control(!1)),this.form.setControl("broker",this.formBuilder.control(null,C.G.required))}},{key:"save",value:function(){var e=this;if(Object(y.F)(this.form),this.form.valid){var t=this.form.value;this.addSub(this.brokeringService.addBroker({broker:t.broker,user:this.user,main:t.mainBroker}).subscribe((function(){e.notification.snackBar(e.i18n.brokers.brokerAdded),e.router.navigate(["/users",e.user,"brokers"])})))}}},{key:"resolveMenu",value:function(){return this.menu.searchUsersMenu()}}]),n}(v.a)).\u0275fac=function(e){return new(e||at)(I.Kb(I.r),I.Kb(tt.a))},at.\u0275cmp=I.Eb({type:at,selectors:[["broker-form"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading"],[3,"formGroup"],["formControlName","broker",3,"filters","allowContacts","label"],["formControlName","mainBroker",3,"label",4,"ngIf"],[3,"disabled","label","action"],["formControlName","mainBroker",3,"label"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,it,8,11,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,C.I,C.w,C.n,Ke.a,C.v,C.l,O.a,S.a,D.a],pipes:[A.b],encapsulation:2,changeDetection:0}),at);function ot(e,t){if(1&e&&I.Lb(0,"user-info",7),2&e){var n=I.Zb(2);I.gc("user",n.data.user)}}function st(e,t){1&e&&I.Lb(0,"icon",17)}function ct(e,t){if(1&e){var n=I.Rb();I.Qb(0,"a",18),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(2).setMain(t),e.stopPropagation(),e.preventDefault()})),I.Dc(1),I.Pb()}if(2&e){var i=I.Zb(3);I.xb(1),I.Fc("",i.i18n.brokers.setMain," ")}}function lt(e,t){if(1&e){var n=I.Rb();I.Qb(0,"mobile-result",8),I.Qb(1,"div",9),I.Qb(2,"div"),I.Qb(3,"div",10),I.Dc(4),I.Pb(),I.Qb(5,"div",11),I.Bc(6,st,1,0,"icon",12),I.Bc(7,ct,2,1,"a",13),I.Pb(),I.Pb(),I.Qb(8,"div",14),I.Qb(9,"button",15),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit;return I.Zb(2).remove(i),e.stopPropagation(),e.preventDefault()})),I.Lb(10,"icon",16),I.Pb(),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=t.$implicit;I.gc("avatarImage",null==i.broker?null:i.broker.image),I.xb(4),I.Fc(" ",i.broker.display," "),I.xb(2),I.gc("ngIf",i.main),I.xb(1),I.gc("ngIf",!i.main)}}function ut(e,t){1&e&&I.Lb(0,"icon",17)}function bt(e,t){if(1&e){var n=I.Rb();I.Qb(0,"a",18),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(3).setMain(t),e.stopPropagation(),e.preventDefault()})),I.Dc(1),I.Pb()}if(2&e){var i=I.Zb(4);I.xb(1),I.Fc("",i.i18n.brokers.setMain," ")}}var dt=function(e,t){return{"pb-0":e,"border-0":t}};function ft(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"tr",24),I.Xb("click",(function(){I.sc(n);var e=t.$implicit,i=I.Zb(3);return i.router.navigate(i.path(e))})),I.Qb(2,"td",25),I.ac(3,"async"),I.ac(4,"async"),I.Lb(5,"avatar",26),I.Pb(),I.Qb(6,"td"),I.Qb(7,"a",27),I.Dc(8),I.Pb(),I.Pb(),I.Qb(9,"td",28),I.Bc(10,ut,1,0,"icon",12),I.Bc(11,bt,2,1,"a",13),I.Pb(),I.Qb(12,"td",29),I.Qb(13,"button",30),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit;return I.Zb(3).remove(i),e.stopPropagation()})),I.Lb(14,"icon",16),I.Pb(),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=t.$implicit,a=I.Zb(3);I.xb(2),I.gc("ngClass",I.kc(12,dt,I.bc(3,8,a.layout.xxs$),I.bc(4,10,a.layout.xxs$))),I.xb(3),I.gc("image",null==i.broker?null:i.broker.image)("tooltip",null==i.broker?null:i.broker.display),I.xb(2),I.gc("routerLink",a.path(i)),I.xb(1),I.Fc(" ",i.broker.shortDisplay," "),I.xb(2),I.gc("ngIf",i.main),I.xb(1),I.gc("ngIf",!i.main),I.xb(2),I.gc("tooltip",a.i18n.general.remove)}}function gt(e,t){if(1&e&&(I.Qb(0,"table",19),I.Qb(1,"thead"),I.Lb(2,"th",20),I.Qb(3,"th"),I.Dc(4),I.Pb(),I.Qb(5,"th",21),I.Dc(6),I.Pb(),I.Lb(7,"th",22),I.Pb(),I.Qb(8,"tbody"),I.Bc(9,ft,15,15,"ng-container",23),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(4),I.Ec(n.i18n.general.user),I.xb(2),I.Fc("",n.i18n.brokers.mainBroker," "),I.xb(3),I.gc("ngForOf",n.data.brokers)}}function mt(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"page-content",2),I.ac(2,"async"),I.Bc(3,ot,1,1,"user-info",3),I.Pb(),I.Qb(4,"results-layout",4),I.Bc(5,lt,11,4,"mobile-result",5),I.Bc(6,gt,10,3,"table",6),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("heading",n.i18n.brokers.title.list)("mobileHeading",n.i18n.brokers.mobileTitle.list)("headingActions",I.bc(2,7,n.headingActions$))("mode",n.self?"empty":"normal"),I.xb(2),I.gc("ngIf",!n.self),I.xb(1),I.gc("results",n.data.brokers)("toLink",n.toLink)}}var pt,ht=((pt=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).brokeringService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.brokeringService.getUserBrokersData({user:this.param}).subscribe((function(t){e.data=t})))}},{key:"path",value:function(e){return["/users",e.broker.id,"profile"]}},{key:"onDataInitialized",value:function(e){var t=this;this.self=this.authHelper.isSelf(e.user),this.brokers=e.brokers,this.headingActions=[],e.editable&&this.headingActions.push(new Ie.c("registration",this.i18n.general.addNew,(function(){return t.router.navigate(["/users",t.param,"brokers","new"])}),!0)),e.history&&this.headingActions.push(new Ie.c("history",this.i18n.general.viewHistory,(function(){return t.router.navigate(["/users",t.param,"brokers","history"])}),!0))}},{key:"setMain",value:function(e){var t=this;this.addSub(this.brokeringService.setMainBroker({broker:e.broker.id,user:this.param}).subscribe((function(){t.reload()})))}},{key:"remove",value:function(e){var t=this;this.notification.confirm({message:this.i18n.general.removeConfirm(e.broker.display),callback:function(){return t.doRemove(e)}})}},{key:"doRemove",value:function(e){var t=this;this.addSub(this.brokeringService.removeBroker({broker:e.broker.id,user:this.param}).subscribe((function(){t.notification.snackBar(t.i18n.general.removeDone(e.broker.display)),t.reload()})))}},{key:"resolveMenu",value:function(){return this.menu.searchUsersMenu()}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(v.a)).\u0275fac=function(e){return new(e||pt)(I.Kb(I.r),I.Kb(tt.a))},pt.\u0275cmp=I.Eb({type:pt,selectors:[["list-user-brokers"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions","mode"],[3,"user",4,"ngIf"],[3,"results","toLink"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"user"],["avatarIcon","user",3,"avatarImage"],[1,"d-flex"],[1,"cell-main"],[1,"cell-text"],["class","d-inline-block","icon","done_outline",4,"ngIf"],["class","decorated",3,"click",4,"ngIf"],[1,"ml-auto"],[1,"btn","btn-icon",3,"click"],["icon","clear"],["icon","done_outline",1,"d-inline-block"],[1,"decorated",3,"click"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],["width","20%",1,"text-center"],[1,"actions"],[4,"ngFor","ngForOf"],[3,"click"],[1,"avatar",3,"ngClass"],["icon","user",3,"image","tooltip"],[3,"routerLink"],[1,"text-center"],[1,"actions","actions-multiple"],[1,"btn","btn-icon",3,"tooltip","click"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,mt,7,9,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,Y.a,W.a,ee.a,Q.a,te.a,ne.a,A.s,A.q,Ve.a,N.b,d.h],pipes:[A.b],encapsulation:2,changeDetection:0}),pt),vt=o("zisa");function yt(e,t){1&e&&I.Mb(0)}function xt(e,t){if(1&e&&(I.Qb(0,"mobile-result",8),I.Qb(1,"div",9),I.Dc(2),I.Pb(),I.Qb(3,"div",10),I.Dc(4),I.ac(5,"date"),I.Pb(),I.Qb(6,"div",11),I.Dc(7),I.Pb(),I.Qb(8,"div",11),I.Dc(9),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(2);I.gc("avatarImage",null==n.broker?null:n.broker.image),I.xb(2),I.Fc(" ",n.broker.display," "),I.xb(2),I.Fc(" ",I.bc(5,7,n.date)," "),I.xb(3),I.Gc(" ",i.i18n.general.action,": ",i.showActionLabel(n)," "),I.xb(2),I.Gc(" ",i.i18n.general.performedBy,": ",n.by?n.by.shortDisplay:i.i18n.brokers.administration," ")}}var Pt=function(e,t){return{"pb-0":e,"border-0":t}};function It(e,t){if(1&e&&(I.Qb(0,"tr"),I.Qb(1,"td",15),I.ac(2,"async"),I.ac(3,"async"),I.Lb(4,"avatar",16),I.Pb(),I.Qb(5,"td"),I.Dc(6),I.Pb(),I.Qb(7,"td"),I.Dc(8),I.ac(9,"date"),I.Pb(),I.Qb(10,"td"),I.Dc(11),I.Pb(),I.Qb(12,"td"),I.Dc(13),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(1),I.gc("ngClass",I.kc(13,Pt,I.bc(2,7,i.layout.xxs$),I.bc(3,9,i.layout.xxs$))),I.xb(3),I.gc("image",null==n.broker?null:n.broker.image)("tooltip",null==n.broker?null:n.broker.display),I.xb(2),I.Ec(n.broker.shortDisplay),I.xb(2),I.Ec(I.bc(9,11,n.date)),I.xb(3),I.Ec(i.showActionLabel(n)),I.xb(2),I.Fc(" ",n.by?n.by.shortDisplay:i.i18n.brokers.administration," ")}}function kt(e,t){if(1&e&&(I.Qb(0,"table",12),I.Qb(1,"thead"),I.Lb(2,"th",13),I.Qb(3,"th"),I.Dc(4),I.Pb(),I.Qb(5,"th"),I.Dc(6),I.Pb(),I.Qb(7,"th"),I.Dc(8),I.Pb(),I.Qb(9,"th"),I.Dc(10),I.Pb(),I.Pb(),I.Qb(11,"tbody"),I.Bc(12,It,14,16,"tr",14),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(4),I.Ec(n.i18n.brokers.broker),I.xb(2),I.Ec(n.i18n.general.date),I.xb(2),I.Ec(n.i18n.general.action),I.xb(2),I.Ec(n.i18n.general.performedBy),I.xb(2),I.gc("ngForOf",n.data.history)}}function Et(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.Lb(1,"user-info",4),I.Pb(),I.Qb(2,"results-layout",5),I.Bc(3,xt,10,9,"mobile-result",6),I.Bc(4,kt,13,5,"table",7),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.i18n.brokers.title.history)("mobileHeading",n.i18n.brokers.mobileTitle.history),I.xb(1),I.gc("user",n.data.user),I.xb(1),I.gc("results",n.data.history)("onClick",n.onClick)}}var At,Ct=((At=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).brokeringService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.brokeringService.getUserBrokersData({user:this.param,fields:["user","history"]}).subscribe((function(t){e.data=t})))}},{key:"showActionLabel",value:function(e){switch(e.action){case vt.a.ADD:return this.i18n.brokers.action.add;case vt.a.REMOVE:return this.i18n.brokers.action.remove;case vt.a.SET_MAIN:return this.i18n.brokers.action.setMain}}},{key:"resolveMenu",value:function(e){return this.menu.searchUsersMenu(e.user)}},{key:"onClick",get:function(){return function(e){return null!=e}}}]),n}(X.a)).\u0275fac=function(e){return new(e||At)(I.Kb(I.r),I.Kb(tt.a))},At.\u0275cmp=I.Eb({type:At,selectors:[["view-broker-history"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading"],[3,"user"],[3,"results","onClick"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover",4,"resultTable"],["avatarIcon","user",3,"avatarImage"],[1,"cell-main"],[1,"cell-date"],[1,"cell-text"],[1,"table","table-hover"],[1,"avatar"],[4,"ngFor","ngForOf"],[1,"avatar",3,"ngClass"],["icon","user",3,"image","tooltip"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,yt,1,0,"ng-container",1),I.Pb(),I.Bc(3,Et,5,5,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,Q.a,Y.a,W.a,ee.a,te.a,A.s,A.q,Ve.a,N.b],pipes:[A.b,ie.a],encapsulation:2,changeDetection:0}),At),Dt=o("5Qz4"),Ot=o("4APx");function St(e,t){if(1&e&&I.Lb(0,"field-option",13),2&e){var n=t.$implicit;I.gc("value",n.id)("internalName",n.internalName)("id",n.id)("text",n.name)}}function Qt(e,t){if(1&e&&(I.Qb(0,"div",6),I.Qb(1,"multi-selection-field",11),I.Bc(2,St,1,4,"field-option",12),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("label",n.i18n.connectedUser.channel),I.xb(1),I.gc("ngForOf",n.data.channels)}}function Nt(e,t){if(1&e&&I.Lb(0,"field-option",16),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("value",n)("text",i.showConnectedLabel(n))}}function wt(e,t){if(1&e&&(I.Qb(0,"div",6),I.Qb(1,"multi-selection-field",14),I.Bc(2,Nt,1,2,"field-option",15),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("label",n.i18n.connectedUser.showConnected),I.xb(1),I.gc("ngForOf",n.data.roles)}}function Ft(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",24),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(2).disconnect(t),e.stopPropagation(),e.preventDefault()})),I.Lb(1,"icon",25),I.Pb()}}function Lt(e,t){if(1&e&&(I.Qb(0,"mobile-result",17),I.Qb(1,"div",18),I.Qb(2,"div"),I.Qb(3,"div",19),I.Dc(4),I.Pb(),I.Qb(5,"div",20),I.Dc(6),I.ac(7,"dateTime"),I.Pb(),I.Qb(8,"div",21),I.Dc(9),I.Pb(),I.Pb(),I.Qb(10,"div",22),I.Bc(11,Ft,2,0,"button",23),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(2);I.gc("avatarImage",null==n.user?null:n.user.image),I.xb(4),I.Fc(" ",n.user.shortDisplay," "),I.xb(2),I.Fc(" ",I.bc(7,5,n.creationDate)," "),I.xb(3),I.Fc(" ",n.channel.name," "),I.xb(2),I.gc("ngIf",i.canDisconnect(n))}}function Bt(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",33),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(3).disconnect(t),e.stopPropagation()})),I.Lb(1,"icon",25),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("tooltip",i.i18n.connectedUser.disconnect)}}var Rt=function(e,t){return{"pb-0":e,"border-0":t}};function Tt(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"tr"),I.Qb(2,"td",30),I.ac(3,"async"),I.ac(4,"async"),I.Lb(5,"avatar",31),I.Pb(),I.Qb(6,"td"),I.Dc(7),I.Pb(),I.Qb(8,"td"),I.Dc(9),I.Pb(),I.Qb(10,"td"),I.Dc(11),I.ac(12,"dateTime"),I.Pb(),I.Qb(13,"td"),I.Dc(14),I.Pb(),I.Qb(15,"td",28),I.Bc(16,Bt,2,1,"button",32),I.Pb(),I.Pb(),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(2),I.gc("ngClass",I.kc(14,Rt,I.bc(3,8,i.layout.xxs$),I.bc(4,10,i.layout.xxs$))),I.xb(3),I.gc("image",null==n.user?null:n.user.image)("tooltip",null==n.user?null:n.user.display),I.xb(2),I.Ec(n.user.shortDisplay),I.xb(2),I.Ec(n.channel.name),I.xb(2),I.Ec(I.bc(12,12,n.creationDate)),I.xb(3),I.Ec(n.remoteAddress),I.xb(2),I.gc("ngIf",i.canDisconnect(n))}}function Zt(e,t){if(1&e&&(I.Qb(0,"table",26),I.Qb(1,"thead"),I.Lb(2,"th",27),I.Qb(3,"th"),I.Dc(4),I.Pb(),I.Qb(5,"th"),I.Dc(6),I.Pb(),I.Qb(7,"th"),I.Dc(8),I.Pb(),I.Qb(9,"th"),I.Dc(10),I.Pb(),I.Lb(11,"th",28),I.Pb(),I.Qb(12,"tbody"),I.Bc(13,Tt,17,17,"ng-container",29),I.ac(14,"async"),I.Pb(),I.Pb()),2&e){var n,i=I.Zb(2);I.xb(4),I.Ec(i.i18n.general.user),I.xb(2),I.Ec(i.i18n.connectedUser.channel),I.xb(2),I.Ec(i.i18n.connectedUser.loggedInAt),I.xb(2),I.Ec(i.i18n.connectedUser.ipAddress),I.xb(3),I.gc("ngForOf",null==(n=I.bc(14,5,i.results$))?null:n.results)}}function _t(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"page-content",2),I.Qb(2,"form",3),I.Qb(3,"div",4),I.Bc(4,Qt,3,2,"div",5),I.Bc(5,wt,3,2,"div",5),I.Qb(6,"div",6),I.Lb(7,"user-field",7),I.Pb(),I.Pb(),I.Pb(),I.Pb(),I.Qb(8,"results-layout",8),I.Xb("update",(function(e){return I.sc(n),I.Zb().update(e)})),I.ac(9,"async"),I.Bc(10,Lt,12,7,"mobile-result",9),I.Bc(11,Zt,15,7,"table",10),I.Pb(),I.Nb()}if(2&e){var i=I.Zb();I.xb(1),I.gc("heading",i.i18n.connectedUser.title)("mobileHeading",i.i18n.connectedUser.mobileTitle),I.xb(1),I.gc("formGroup",i.form),I.xb(2),I.gc("ngIf",(null==i.data.channels?null:i.data.channels.length)>1),I.xb(1),I.gc("ngIf",(null==i.data.roles?null:i.data.roles.length)>1),I.xb(2),I.gc("label",i.i18n.general.user),I.xb(1),I.gc("results",I.bc(9,9,i.results$))("onClick",i.onClick)("rendering$",i.rendering$)}}var Mt,$t=((Mt=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).sessionsService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.addSub(this.sessionsService.getSessionDataForSearch().subscribe((function(t){e.form.patchValue(t.query,{emitEvent:!1}),e.data=t})))}},{key:"toSearchParams",value:function(e){return e}},{key:"disconnect",value:function(e){var t=this;this.addSub(this.sessionsService.disconnectSession({sessionToken:e.sessionToken}).subscribe((function(){t.notification.snackBar(t.i18n.connectedUser.disconnected(e.user.display)),t.update()})))}},{key:"canDisconnect",value:function(e){return this.login.auth.permissions.sessions.disconnect&&this.login.auth.sessionToken!==e.sessionToken}},{key:"getFormControlNames",value:function(){return["channels","roles","user"]}},{key:"doSearch",value:function(e){return this.sessionsService.searchSessions$Response(e)}},{key:"showConnectedLabel",value:function(e){switch(e){case et.kb.ADMINISTRATOR:return this.i18n.connectedUser.viewConnected.admin;case et.kb.BROKER:return this.i18n.connectedUser.viewConnected.broker;case et.kb.MEMBER:return this.i18n.connectedUser.viewConnected.member;case et.kb.OPERATOR:return this.i18n.connectedUser.viewConnected.operator}}},{key:"resolveMenu",value:function(){return this.menu.searchUsersMenu()}},{key:"onClick",get:function(){return function(e){return null!=e}}}]),n}(Ue.a)).\u0275fac=function(e){return new(e||Mt)(I.Kb(I.r),I.Kb(Dt.a))},Mt.\u0275cmp=I.Eb({type:Mt,selectors:[["search-connected"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","user",3,"label"],["resultType","list",3,"results","onClick","rendering$","update"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","formControlName","channels",3,"label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],[3,"value","internalName","id","text"],["labelPosition","side","formControlName","roles",3,"label"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["avatarIcon","user",3,"avatarImage"],[1,"d-flex"],[1,"cell-main"],[1,"cell-cell-date"],[1,"cell-text"],[1,"ml-auto"],["class","btn btn-icon",3,"click",4,"ngIf"],[1,"btn","btn-icon",3,"click"],["icon","clear"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[1,"actions"],[4,"ngFor","ngForOf"],[1,"avatar",3,"ngClass"],["icon","user",3,"image","tooltip"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,_t,12,11,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,C.I,C.w,C.n,Ke.a,C.v,C.l,Y.a,W.a,ee.a,Ot.a,A.s,qe.a,te.a,ne.a,A.q,Ve.a,N.b],pipes:[A.b,ae.a],encapsulation:2,changeDetection:0}),Mt),Ut=o("2S6i"),Ht=o("2Vo4"),Gt=o("Ls5z"),qt=o("DIHi"),Kt=o("YG2p"),Vt=o("ZJXG");function jt(e,t){if(1&e&&I.Lb(0,"boolean-field",16),2&e){var n=I.Zb(2);I.gc("label",n.i18n.document.brokerManageable)}}function zt(e,t){if(1&e){var n=I.Rb();I.Qb(0,"label-value",17),I.Qb(1,"div"),I.Qb(2,"span"),I.Dc(3),I.ac(4,"async"),I.Pb(),I.Qb(5,"button",18),I.Xb("click",(function(e){return I.sc(n),I.Zb(2).download(),e.stopPropagation()})),I.Lb(6,"icon",19),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("label",i.i18n.document.document),I.xb(3),I.Fc(" ",I.bc(4,3,i.fileName$)," "),I.xb(2),I.gc("tooltip",i.i18n.general.download)}}function Xt(e,t){if(1&e&&(I.Ob(0,4),I.Qb(1,"label-value",5),I.Lb(2,"user-link",6),I.Pb(),I.Lb(3,"input-field",7),I.Lb(4,"textarea-field",8),I.Lb(5,"boolean-field",9),I.Lb(6,"boolean-field",10),I.Lb(7,"boolean-field",11,12),I.Bc(9,jt,1,1,"boolean-field",13),I.Bc(10,zt,7,5,"label-value",14),I.ac(11,"async"),I.Lb(12,"file-field",15),I.ac(13,"async"),I.Nb()),2&e){var n=I.qc(8),i=I.Zb();I.gc("formGroup",i.form),I.xb(1),I.gc("label",i.i18n.general.user),I.xb(1),I.gc("user",i.data.user),I.xb(1),I.gc("label",i.i18n.general.name),I.xb(1),I.gc("label",i.i18n.general.description),I.xb(1),I.gc("label",i.i18n.document.enable),I.xb(1),I.gc("label",i.i18n.document.userVisible),I.xb(1),I.gc("label",i.i18n.document.brokerVisible),I.xb(2),I.gc("ngIf",n.value),I.xb(1),I.gc("ngIf",!i.create&&I.bc(11,13,i.fileName$)),I.xb(2),I.gc("required",i.create)("label",i.create||null!==I.bc(13,15,i.fileName$)?i.i18n.document.newDocument:i.i18n.document.replaceDocument)("formControl",i.fileControl)}}var Jt,Yt=((Jt=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).documentsService=i,a.fileName$=new Ht.a(null),a}return s(n,[{key:"isOwner",value:function(){return this.authHelper.isSelf(this.data.user)}},{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot;this.user=t.params.user,this.id=t.params.id,this.create=null==this.id;var i=this.create?this.documentsService.getUserDocumentDataForNew({user:this.user}):this.documentsService.getDocumentDataForEdit({id:this.id});this.addSub(i.subscribe((function(t){return e.data=t})))}},{key:"download",value:function(){this.addSub(this.documentsService.downloadDocumentFile$Response({id:this.id}).subscribe(y.g))}},{key:"onDataInitialized",value:function(e){var t;c(f(n.prototype),"onDataInitialized",this).call(this,e);var i=e.document,a=e.document;this.create||this.fileName$.next(null===(t=e.file)||void 0===t?void 0:t.name),this.fileControl=this.formBuilder.control(null,this.create?C.G.required:null),this.form=this.formBuilder.group({name:[i.name,C.G.required],description:i.description,enabled:i.enabled,userVisible:i.userVisible,brokerVisible:i.brokerVisible,brokerManageable:i.brokerManageable,version:a.version})}},{key:"asEdit",value:function(){return this.data}},{key:"asNew",value:function(){return this.data}},{key:"save",value:function(){var e=this;Object(y.F)(this.form);var t=this.fileControl.value;if((this.create||t)&&Object(y.F)(this.fileControl),this.form.valid&&this.fileControl.valid){var n=Object(P.a)(this.form.value);n.brokerVisible||(n.brokerManageable=!1),this.addSub(this.create?this.documentsService.createUserDocumentWithUpload({user:this.user,body:{document:n,file:t}}).subscribe((function(t){return e.notifySavedAndReload(t)})):this.fileControl.value?this.documentsService.updateDocumentWithUpload({id:this.id,body:{document:n,file:t}}).subscribe((function(){return e.notifySavedAndReload(e.id)})):this.documentsService.updateDocument({id:this.id,body:n}).subscribe((function(){return e.notifySavedAndReload(e.id)})))}}},{key:"notifySavedAndReload",value:function(e){this.notification.snackBar(this.i18n.document.savedSuccessfully),this.router.navigate(["/users","documents","edit",e])}},{key:"formControl",value:function(e){return this.form.get(e)}},{key:"resolveMenu",value:function(){return this.menu.searchUsersMenu()}}]),n}(v.a)).\u0275fac=function(e){return new(e||Jt)(I.Kb(I.r),I.Kb(Ut.a))},Jt.\u0275cmp=I.Eb({type:Jt,selectors:[["edit-document"]],features:[I.ub],decls:7,vars:10,consts:[[3,"ready"],[3,"heading","mobileHeading"],[3,"formGroup",4,"ngIf"],[3,"disabled","label","action"],[3,"formGroup"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],["fieldSize","full","required","","formControlName","name",3,"label"],["formControlName","description",3,"label"],["formControlName","enabled",3,"label"],["formControlName","userVisible",3,"label"],["formControlName","brokerVisible",3,"label"],["brokerVisible",""],["formControlName","brokerManageable",3,"label",4,"ngIf"],[3,"label",4,"ngIf"],[3,"required","label","formControl"],["formControlName","brokerManageable",3,"label"],[3,"label"],[1,"btn","btn-icon","ml-2",3,"tooltip","click"],["icon","save_alt"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Qb(2,"page-content",1),I.Bc(3,Xt,14,17,"ng-container",2),I.Qb(4,"actions"),I.Qb(5,"action-button",3),I.Xb("action",(function(){return t.save()})),I.ac(6,"async"),I.Pb(),I.Pb(),I.Pb(),I.Pb()),2&e&&(I.gc("ready",I.bc(1,6,t.data$)),I.xb(2),I.gc("heading",t.create?t.i18n.document.title.new:t.i18n.document.title.edit)("mobileHeading",t.create?t.i18n.document.mobileTitle.new:t.i18n.document.mobileTitle.edit),I.xb(1),I.gc("ngIf",t.data),I.xb(2),I.gc("disabled",I.bc(6,8,t.requesting$))("label",t.i18n.general.save))},directives:[k.a,E.a,A.t,O.a,S.a,C.w,C.n,_.a,Gt.a,qt.a,C.D,C.v,C.l,Kt.a,D.a,Vt.a,C.k,N.b,ne.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Jt);function Wt(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",10),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(2).download(t),e.stopPropagation(),e.preventDefault()})),I.Lb(1,"icon",11),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("tooltip",i.i18n.general.download)}}function en(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",10),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit,i=I.Zb(2);return i.router.navigate(i.path(t)),e.stopPropagation(),e.preventDefault()})),I.Lb(1,"icon",12),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("tooltip",i.i18n.document.process)}}function tn(e,t){if(1&e&&(I.Qb(0,"mobile-result"),I.Qb(1,"div",6),I.Qb(2,"div"),I.Qb(3,"label-value",7),I.Dc(4),I.Pb(),I.Qb(5,"label-value",7),I.Dc(6),I.Pb(),I.Pb(),I.Qb(7,"div",8),I.Bc(8,Wt,2,1,"button",9),I.Bc(9,en,2,1,"button",9),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(2);I.xb(3),I.gc("label",i.i18n.general.name),I.xb(1),I.Fc(" ",n.name," "),I.xb(1),I.gc("label",i.i18n.general.description),I.xb(1),I.Fc(" ",n.description," "),I.xb(2),I.gc("ngIf",i.isStatic(n.kind)),I.xb(1),I.gc("ngIf",!i.isStatic(n.kind))}}function nn(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",10),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(3).download(t),e.stopPropagation()})),I.Lb(1,"icon",11),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("tooltip",i.i18n.general.download)}}function an(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",10),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit,i=I.Zb(3);return i.router.navigate(i.path(t)),e.stopPropagation()})),I.Lb(1,"icon",12),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("tooltip",i.i18n.document.process)}}function rn(e,t){if(1&e){var n=I.Rb();I.Qb(0,"tr",16),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit,a=I.Zb(3);return a.isStatic(i.kind)?a.download(i):a.router.navigate(a.path(i)),e.stopPropagation()})),I.Qb(1,"td",17),I.Dc(2),I.Pb(),I.Qb(3,"td"),I.Dc(4),I.Pb(),I.Qb(5,"td",18),I.Bc(6,nn,2,1,"button",9),I.Bc(7,an,2,1,"button",9),I.Pb(),I.Pb()}if(2&e){var i=t.$implicit,a=I.Zb(3);I.xb(2),I.Ec(i.name),I.xb(2),I.Ec(i.description),I.xb(2),I.gc("ngIf",a.isStatic(i.kind)),I.xb(1),I.gc("ngIf",!a.isStatic(i.kind))}}function on(e,t){if(1&e&&(I.Qb(0,"table",13),I.Qb(1,"thead"),I.Qb(2,"th"),I.Dc(3),I.Pb(),I.Qb(4,"th"),I.Dc(5),I.Pb(),I.Lb(6,"th",14),I.Pb(),I.Qb(7,"tbody"),I.Bc(8,rn,8,4,"tr",15),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(3),I.Ec(n.i18n.general.name),I.xb(2),I.Ec(n.i18n.general.description),I.xb(3),I.gc("ngForOf",n.data)}}function sn(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"page-content",2),I.ac(2,"async"),I.Qb(3,"results-layout",3),I.Bc(4,tn,10,6,"mobile-result",4),I.Bc(5,on,9,3,"table",5),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("mode","empty")("heading",n.i18n.document.title.list)("mobileHeading",n.i18n.document.mobileTitle.list)("headingActions",I.bc(2,5,n.headingActions$)),I.xb(2),I.gc("results",n.data)}}var cn,ln=((cn=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).documentsService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.addSub(this.documentsService.listUserDocuments({user:h.a.SELF}).subscribe((function(t){return e.data=t})))}},{key:"isStatic",value:function(e){return e!==et.u.DYNAMIC}},{key:"download",value:function(e){this.addSub(this.documentsService.downloadDocumentFile$Response({id:e.id}).subscribe(y.g))}},{key:"path",value:function(e){return["/users","documents","process-dynamic",e.id]}},{key:"resolveMenu",value:function(){return this.menu.userMenu(null,x.b.MY_DOCUMENTS)}}]),n}(v.a)).\u0275fac=function(e){return new(e||cn)(I.Kb(I.r),I.Kb(Ut.a))},cn.\u0275cmp=I.Eb({type:cn,selectors:[["list-documents"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"mode","heading","mobileHeading","headingActions"],[3,"results"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[1,"d-flex"],["labelPosition","above",3,"label"],[1,"ml-auto","text-right","d-flex","flex-column"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","save_alt"],["icon","edit"],[1,"table","table-hover","cursor-pointer"],[1,"actions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["width","20%"],[1,"actions","actions-multiple"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,sn,6,7,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,Y.a,W.a,ee.a,te.a,_.a,N.b,ne.a,A.s],pipes:[A.b],encapsulation:2,changeDetection:0}),cn),un=o("OoS4"),bn=o("Y+zs"),dn=o("bBjs"),fn=o("cyUc");function gn(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"custom-field-input",6),I.Nb()),2&e){var n=t.$implicit,i=t.first,a=I.Zb(2);I.xb(1),I.gc("field",n)("formControl",a.formControl(n.internalName))("focused",i)("labelPosition","auto")}}function mn(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.Bc(1,gn,2,4,"ng-container",4),I.Qb(2,"actions"),I.Qb(3,"action-button",5),I.Xb("action",(function(){return I.sc(n),I.Zb().process()})),I.ac(4,"async"),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb();I.gc("heading",i.data.document.name)("mobileHeading",i.data.document.name),I.xb(1),I.gc("ngForOf",i.formFields),I.xb(2),I.gc("disabled",I.bc(4,5,i.requesting$))("label",i.i18n.general.submit)}}function pn(e,t){if(1&e&&(I.Qb(0,"page-content",7),I.ac(1,"async"),I.Lb(2,"div",8),I.ac(3,"trust"),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.data.document.name)("mobileHeading",n.data.document.name)("headingActions",I.bc(1,4,n.headingActions$)),I.xb(2),I.gc("innerHTML",I.bc(3,6,n.result),I.tc)}}var hn,vn=((hn=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).fieldsHelper=i,o.documentsService=a,o.step$=new Ht.a(null),o.result$=new Ht.a(null),o}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.documentId=this.route.snapshot.params.id,this.addSub(this.documentsService.getDataForDynamicDocument({id:this.documentId,user:h.a.SELF}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){this.formFields=e.formFields||[],this.form=this.fieldsHelper.customValuesFormGroup(this.formFields),this.formFields.length>0?this.step="form":this.process()}},{key:"process",value:function(){var e=this;Object(y.F)(this.form),this.form.valid&&this.addSub(this.documentsService.processDynamicDocument({id:this.documentId,user:h.a.SELF,body:{formFields:this.form.value}}).subscribe((function(t){e.result$.next(t);var n=[];n.push(e.exportHelper.printAction()),n[0].maybeRoot=!0,e.headingActions=n,e.step="preview"})))}},{key:"formControl",value:function(e){return this.form.get(e)}},{key:"resolveMenu",value:function(){return this.menu.userMenu(null,x.b.MY_DOCUMENTS)}},{key:"result",get:function(){return this.result$.value}},{key:"step",get:function(){return this.step$.value},set:function(e){this.step$.next(e)}}]),n}(v.a)).\u0275fac=function(e){return new(e||hn)(I.Kb(I.r),I.Kb(un.a),I.Kb(Ut.a))},hn.\u0275cmp=I.Eb({type:hn,selectors:[["process-dynamic-document"]],features:[I.ub],decls:5,vars:8,consts:[[3,"ready","ngSwitch"],[3,"heading","mobileHeading",4,"ngSwitchCase"],["printContentOnly","","last","",3,"heading","mobileHeading","headingActions",4,"ngSwitchCase"],[3,"heading","mobileHeading"],[4,"ngFor","ngForOf"],[3,"disabled","label","action"],[3,"field","formControl","focused","labelPosition"],["printContentOnly","","last","",3,"heading","mobileHeading","headingActions"],[3,"innerHTML"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.ac(2,"async"),I.Bc(3,mn,5,7,"page-content",1),I.Bc(4,pn,4,8,"page-content",2),I.Pb()),2&e&&(I.gc("ready",I.bc(1,4,t.data$))("ngSwitch",I.bc(2,6,t.step$)),I.xb(3),I.gc("ngSwitchCase","form"),I.xb(1),I.gc("ngSwitchCase","preview"))},directives:[k.a,A.x,A.y,E.a,A.s,O.a,S.a,bn.a,C.v,C.k,dn.a],pipes:[A.b,fn.a],encapsulation:2,changeDetection:0}),hn);function yn(e,t){1&e&&I.Lb(0,"div",5)}function xn(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div",5),I.Qb(2,"label-value",10),I.Lb(3,"user-link",11),I.Pb(),I.Pb(),I.Bc(4,yn,1,0,"div",12),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.data.user),I.xb(1),I.gc("ngIf",n.layout.gtsm$)}}function Pn(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",18),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(2).navigateToView(t),e.stopPropagation(),e.preventDefault()})),I.Lb(1,"icon",19),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("tooltip",i.i18n.general.view)}}function In(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",20),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(2).download(t),e.stopPropagation()})),I.Lb(1,"icon",21),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("tooltip",i.i18n.general.download)}}function kn(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",18),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit,i=I.Zb(2);return i.router.navigate(i.process(t)),e.stopPropagation(),e.preventDefault()})),I.Lb(1,"icon",19),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("tooltip",i.i18n.document.process)}}function En(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",20),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(2).remove(t),e.stopPropagation(),e.preventDefault()})),I.Lb(1,"icon",22),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("tooltip",i.i18n.general.remove)}}function An(e,t){if(1&e&&(I.Qb(0,"mobile-result"),I.Qb(1,"div",13),I.Qb(2,"div"),I.Qb(3,"label-value",14),I.Dc(4),I.Pb(),I.Qb(5,"label-value",14),I.Dc(6),I.Pb(),I.Pb(),I.Qb(7,"div",15),I.Bc(8,Pn,2,1,"button",16),I.Bc(9,In,2,1,"button",17),I.Bc(10,kn,2,1,"button",16),I.Bc(11,En,2,1,"button",17),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(2);I.xb(3),I.gc("label",i.i18n.general.name),I.xb(1),I.Fc(" ",n.name," "),I.xb(1),I.gc("label",i.i18n.general.description),I.xb(1),I.Fc(" ",n.description," "),I.xb(2),I.gc("ngIf",i.isStatic(n.kind)),I.xb(1),I.gc("ngIf",i.isStatic(n.kind)),I.xb(1),I.gc("ngIf",!i.isStatic(n.kind)),I.xb(1),I.gc("ngIf",i.isUserKind(n))}}function Cn(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",18),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(3).download(t),e.stopPropagation()})),I.Lb(1,"icon",21),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("tooltip",i.i18n.general.download)}}function Dn(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",18),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit,i=I.Zb(3);return i.router.navigate(i.process(t)),e.stopPropagation(),e.preventDefault()})),I.Lb(1,"icon",19),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("tooltip",i.i18n.document.process)}}function On(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",30),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(3).remove(t),e.stopPropagation(),e.preventDefault()})),I.Lb(1,"icon",22),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("tooltip",i.i18n.general.remove)}}function Sn(e,t){if(1&e){var n=I.Rb();I.Qb(0,"tr",26),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit,a=I.Zb(3);return a.isStatic(i.kind)?a.navigateToView(i):a.router.navigate(a.process(i)),e.stopPropagation(),e.preventDefault()})),I.Qb(1,"td",27),I.Dc(2),I.Pb(),I.Qb(3,"td"),I.Dc(4),I.Pb(),I.Qb(5,"td",28),I.Bc(6,Cn,2,1,"button",16),I.Bc(7,Dn,2,1,"button",16),I.Bc(8,On,2,1,"button",29),I.Pb(),I.Pb()}if(2&e){var i=t.$implicit,a=I.Zb(3);I.xb(2),I.Ec(i.name),I.xb(2),I.Ec(i.description),I.xb(2),I.gc("ngIf",a.isStatic(i.kind)),I.xb(1),I.gc("ngIf",!a.isStatic(i.kind)),I.xb(1),I.gc("ngIf",a.data.canManageIndividual&&a.isUserKind(i))}}function Qn(e,t){if(1&e&&(I.Qb(0,"table",23),I.Qb(1,"thead"),I.Qb(2,"th"),I.Dc(3),I.Pb(),I.Qb(4,"th"),I.Dc(5),I.Pb(),I.Lb(6,"th",24),I.Pb(),I.Qb(7,"tbody"),I.Bc(8,Sn,9,5,"tr",25),I.ac(9,"async"),I.Pb(),I.Pb()),2&e){var n,i=I.Zb(2);I.xb(3),I.Ec(i.i18n.general.name),I.xb(2),I.Ec(i.i18n.general.description),I.xb(3),I.gc("ngForOf",null==(n=I.bc(9,3,i.results$))?null:n.results)}}function Nn(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"page-content",2),I.ac(2,"async"),I.Qb(3,"form",3),I.Qb(4,"div",4),I.Bc(5,xn,5,3,"ng-container",1),I.Qb(6,"div",5),I.Lb(7,"input-field",6),I.Pb(),I.Pb(),I.Pb(),I.Pb(),I.Qb(8,"results-layout",7),I.ac(9,"async"),I.Bc(10,An,12,8,"mobile-result",8),I.Bc(11,Qn,10,5,"table",9),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("heading",n.i18n.document.title.search)("mobileHeading",n.i18n.document.mobileTitle.search)("headingActions",I.bc(2,8,n.headingActions$)),I.xb(2),I.gc("formGroup",n.form),I.xb(2),I.gc("ngIf",!n.authHelper.isSelf(n.data.user)),I.xb(2),I.gc("label",n.i18n.general.keywords),I.xb(1),I.gc("results",I.bc(9,10,n.results$))("rendering$",n.rendering$)}}var wn,Fn=((wn=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).documentsService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user,this.addSub(this.documentsService.getDocumentsDataForSearch({user:this.user}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;c(f(n.prototype),"onDataInitialized",this).call(this,e),this.headingActions=[new Ie.c("add",this.i18n.general.add,(function(){t.router.navigate(["/users",t.user,"documents","new"])}),!0)]}},{key:"doSearch",value:function(e){return this.documentsService.searchDocuments$Response(e)}},{key:"remove",value:function(e){var t=this;this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:function(){return t.doRemove(e)}})}},{key:"doRemove",value:function(e){var t=this;this.addSub(this.documentsService.deleteDocument({id:e.id}).subscribe((function(){t.notification.snackBar(t.i18n.general.removeItemDone),t.update()})))}},{key:"toSearchParams",value:function(e){return e}},{key:"getFormControlNames",value:function(){return["brokers","categories","enabled","groups","keywords","range","user"]}},{key:"isStatic",value:function(e){return e!==et.u.DYNAMIC}},{key:"download",value:function(e){this.addSub(this.documentsService.downloadDocumentFile$Response({id:e.id}).subscribe(y.g))}},{key:"process",value:function(e){return["/users","documents","process-dynamic",e.id]}},{key:"view",value:function(e){return["/users","documents","view",e.id]}},{key:"isUserKind",value:function(e){return e.kind===et.u.USER}},{key:"navigateToView",value:function(e){this.router.navigate(this.view(e))}},{key:"resolveMenu",value:function(){return this.menu.searchUsersMenu()}},{key:"toProcessLink",get:function(){var e=this;return function(t){return e.process(t)}}}]),n}(Ue.a)).\u0275fac=function(e){return new(e||wn)(I.Kb(I.r),I.Kb(Ut.a))},wn.\u0275cmp=I.Eb({type:wn,selectors:[["search-documents"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","keywords","fieldSize","full",3,"label"],["resultType","list",3,"results","rendering$"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],["class","col-12 col-md-6",4,"ngIf"],[1,"d-flex"],["labelPosition","above",3,"label"],[1,"ml-auto","text-right","d-flex","flex-column"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],["class","btn btn-icon mt-2",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","edit"],[1,"btn","btn-icon","mt-2",3,"tooltip","click"],["icon","save_alt"],["icon","clear"],[1,"table","table-hover","cursor-pointer"],[1,"actions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["width","20%"],[1,"actions","actions-multiple"],["class","btn btn-icon ml-2",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon","ml-2",3,"tooltip","click"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Nn,12,12,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,C.I,C.w,C.n,qt.a,C.v,C.l,Y.a,W.a,ee.a,_.a,Gt.a,te.a,N.b,ne.a,A.s],pipes:[A.b],encapsulation:2,changeDetection:0}),wn);function Ln(e,t){if(1&e&&(I.Qb(0,"label-value",8),I.Lb(1,"user-link",9),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.data.user)}}function Bn(e,t){if(1&e&&(I.Qb(0,"label-value",10),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.document.category),I.xb(1),I.Fc(" ",n.data.category.name," ")}}function Rn(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.document.userVisible),I.xb(1),I.Fc(" ",n.format.formatBoolean(n.data.userVisible)," ")}}function Tn(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.document.brokerVisible),I.xb(1),I.Fc(" ",n.format.formatBoolean(n.data.brokerVisible)," ")}}function Zn(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.document.brokerManageable),I.xb(1),I.Fc(" ",n.format.formatBoolean(n.data.brokerManageable)," ")}}function _n(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Ln,2,2,"label-value",4),I.Qb(2,"label-value",5),I.Dc(3),I.Pb(),I.Qb(4,"label-value",5),I.Dc(5),I.Pb(),I.Bc(6,Bn,2,2,"label-value",6),I.Qb(7,"label-value",5),I.Dc(8),I.Pb(),I.Bc(9,Rn,2,2,"label-value",7),I.Bc(10,Tn,2,2,"label-value",7),I.Bc(11,Zn,2,2,"label-value",7),I.Qb(12,"label-value",5),I.Dc(13),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("ngIf",n.data.user),I.xb(1),I.gc("label",n.i18n.general.name),I.xb(1),I.Fc(" ",n.data.name," "),I.xb(1),I.gc("label",n.i18n.general.description),I.xb(1),I.Fc(" ",n.data.description," "),I.xb(1),I.gc("ngIf",n.data.category),I.xb(1),I.gc("label",n.i18n.document.enable),I.xb(1),I.Fc(" ",n.format.formatBoolean(n.data.enabled)," "),I.xb(1),I.gc("ngIf",n.data.userVisible),I.xb(1),I.gc("ngIf",n.data.brokerVisible),I.xb(1),I.gc("ngIf",n.data.brokerVisible),I.xb(1),I.gc("label",n.i18n.document.document),I.xb(1),I.Fc(" ",n.data.file.name," ")}}var Mn,$n=((Mn=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).documentsService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.id=this.route.snapshot.params.id,this.addSub(this.documentsService.viewDocument({id:this.id}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;if(c(f(n.prototype),"onDataInitialized",this).call(this,e),this.dataForUiHolder.auth.role!==et.kb.BROKER||e.brokerManageable){var i=[new Ie.c("edit",this.i18n.general.edit,(function(){return t.navigateToEdit()}),!0)];i.push(new Ie.c("clear",this.i18n.general.remove,(function(){return t.remove()}),!0)),this.headingActions=i}}},{key:"remove",value:function(){var e=this;this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:function(){return e.doRemove()}})}},{key:"doRemove",value:function(){var e=this;this.addSub(this.documentsService.deleteDocument({id:this.id}).subscribe((function(){e.notification.snackBar(e.i18n.general.removeItemDone),e.router.navigate(["/users",e.data.user.id,"documents","search"])})))}},{key:"download",value:function(){this.addSub(this.documentsService.downloadDocumentFile$Response({id:this.id}).subscribe(y.g))}},{key:"navigateToEdit",value:function(){this.router.navigate(["/users","documents","edit",this.id])}},{key:"resolveMenu",value:function(e){return e.kind===et.u.USER&&this.authHelper.isSelf(e.user)?this.menu.userMenu(null,x.b.MY_DOCUMENTS):this.menu.searchUsersMenu()}}]),n}(v.a)).\u0275fac=function(e){return new(e||Mn)(I.Kb(I.r),I.Kb(Ut.a))},Mn.\u0275cmp=I.Eb({type:Mn,selectors:[["view-document"]],features:[I.ub],decls:8,vars:13,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[3,"disabled","label","action"],["kind","fieldView","labelPosition","side",3,"label",4,"ngIf"],[3,"label"],["ng","",3,"label",4,"ngIf"],[3,"label",4,"ngIf"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],["ng","",3,"label"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Qb(2,"page-content",1),I.ac(3,"async"),I.Bc(4,_n,14,13,"ng-container",2),I.Qb(5,"actions"),I.Qb(6,"action-button",3),I.Xb("action",(function(){return t.download()})),I.ac(7,"async"),I.Pb(),I.Pb(),I.Pb(),I.Pb()),2&e&&(I.gc("ready",I.bc(1,7,t.data$)),I.xb(2),I.gc("heading",t.i18n.document.title.view)("mobileHeading",t.i18n.document.mobileTitle.view)("headingActions",I.bc(3,9,t.headingActions$)),I.xb(2),I.gc("ngIf",t.data),I.xb(2),I.gc("disabled",I.bc(7,11,t.requesting$))("label",t.i18n.general.download))},directives:[k.a,E.a,A.t,O.a,S.a,_.a,Gt.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Mn),Un=o("j79m");function Hn(e,t){1&e&&I.Mb(0)}function Gn(e,t){if(1&e&&(I.Qb(0,"div",11),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(2);I.xb(1),I.Gc(" ",i.i18n.general.performedBy,": ",n.by.display," ")}}function qn(e,t){if(1&e&&(I.Qb(0,"mobile-result",8),I.Qb(1,"div",9),I.Dc(2),I.Pb(),I.Bc(3,Gn,2,2,"div",10),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(2);I.gc("date",null==n.period?null:n.period.date),I.xb(2),I.Gc(" ",i.i18n.user.group,": ",n.group?n.group.name:i.i18n.user.operatorNoGroup," "),I.xb(1),I.gc("ngIf",n.by)}}function Kn(e,t){if(1&e&&(I.Qb(0,"tr"),I.Qb(1,"td"),I.Dc(2),I.ac(3,"date"),I.Pb(),I.Qb(4,"td"),I.Dc(5),I.Pb(),I.Qb(6,"td"),I.Dc(7),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(2),I.Ec(I.bc(3,3,null==n.period?null:n.period.begin)),I.xb(3),I.Fc("",n.group?n.group.name:i.i18n.user.operatorNoGroup," "),I.xb(2),I.Ec(null==n.by?null:n.by.display)}}function Vn(e,t){if(1&e&&(I.Qb(0,"table",12),I.Qb(1,"thead"),I.Qb(2,"th"),I.Dc(3),I.Pb(),I.Qb(4,"th"),I.Dc(5),I.Pb(),I.Qb(6,"th"),I.Dc(7),I.Pb(),I.Pb(),I.Qb(8,"tbody"),I.Bc(9,Kn,8,5,"tr",13),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(3),I.Ec(n.i18n.general.date),I.xb(2),I.Ec(n.i18n.general.status),I.xb(2),I.Ec(n.i18n.general.performedBy),I.xb(2),I.gc("ngForOf",n.data.history)}}function jn(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.Lb(1,"user-info",4),I.Pb(),I.Qb(2,"results-layout",5),I.Bc(3,qn,4,4,"mobile-result",6),I.Bc(4,Vn,10,4,"table",7),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.operator?n.i18n.groupMembership.title.historyOperator:n.i18n.groupMembership.title.historyUser)("mobileHeading",n.operator?n.i18n.groupMembership.mobileTitle.historyOperator:n.i18n.groupMembership.mobileTitle.historyUser),I.xb(1),I.gc("user",n.data.user),I.xb(1),I.gc("results",n.data.history)}}var zn,Xn=((zn=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).groupMembershipService=i,o.userHelper=a,o}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.groupMembershipService.getGroupMembershipData({user:this.param,fields:["user","history"]}).subscribe((function(t){e.data=t})))}},{key:"resolveMenu",value:function(e){return this.menu.searchUsersMenu(e.user)}},{key:"operator",get:function(){return this.userHelper.isOperator(this.data.user)}}]),n}(X.a)).\u0275fac=function(e){return new(e||zn)(I.Kb(I.r),I.Kb(Un.a),I.Kb(j.a))},zn.\u0275cmp=I.Eb({type:zn,selectors:[["view-user-group-history"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading"],[3,"user"],[3,"results"],[3,"date",4,"mobileResult"],["class","table table-hover",4,"resultTable"],[3,"date"],[1,"cell-main"],["class","cell-text",4,"ngIf"],[1,"cell-text"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Hn,1,0,"ng-container",1),I.Pb(),I.Bc(3,jn,5,4,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,Q.a,Y.a,W.a,ee.a,te.a,A.s],pipes:[A.b,ie.a],encapsulation:2,changeDetection:0}),zn);function Jn(e,t){if(1&e&&I.Lb(0,"field-option",11),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("value",i.ApiHelper.internalNameOrId(n))("id",n.id)("internalName",n.internalName)("text",n.name)}}function Yn(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Lb(1,"hr"),I.Qb(2,"form",6),I.Qb(3,"single-selection-field",7),I.Bc(4,Jn,1,4,"field-option",8),I.Pb(),I.Lb(5,"textarea-field",9),I.Pb(),I.Qb(6,"actions"),I.Qb(7,"action-button",10),I.Xb("action",(function(){return I.sc(n),I.Zb(2).save()})),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=I.Zb(2);I.xb(2),I.gc("formGroup",i.form),I.xb(1),I.gc("label",i.i18n.groupMembership.new)("required",!i.allowEmptyGroup)("emptyOption",i.allowEmptyGroup?i.i18n.user.operatorNoGroup:null),I.xb(1),I.gc("ngForOf",i.data.possibleNewGroups),I.xb(1),I.gc("label",i.i18n.general.comments),I.xb(2),I.gc("label",i.i18n.general.submit)}}function Wn(e,t){if(1&e&&(I.Qb(0,"page-content",2),I.ac(1,"async"),I.Lb(2,"user-info",3),I.Qb(3,"label-value",4),I.Dc(4),I.Pb(),I.Bc(5,Yn,8,7,"ng-container",5),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.operator?n.i18n.groupMembership.title.groupOperator:n.i18n.groupMembership.title.groupUser)("mobileHeading",n.operator?n.i18n.groupMembership.mobileTitle.groupOperator:n.i18n.groupMembership.mobileTitle.groupUser)("headingActions",I.bc(1,7,n.headingActions$)),I.xb(2),I.gc("user",n.data.user),I.xb(1),I.gc("label",n.i18n.groupMembership.current),I.xb(1),I.Fc(" ",n.data.group?n.data.group.name:n.i18n.user.operatorNoGroup," "),I.xb(1),I.gc("ngIf",n.editable)}}var ei,ti=((ei=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).userHelper=i,o.groupMembershipService=a,o}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.groupMembershipService.getGroupMembershipData({user:this.param,fields:["-history"]}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;this.allowEmptyGroup=this.userHelper.isOperator(e.user)&&!!e.group,this.form=this.formBuilder.group({group:this.allowEmptyGroup?null:[null,C.G.required],comment:null}),this.headingActions=[new Ie.c("history",this.i18n.general.viewHistory,(function(){return t.router.navigate(["users",t.param,"group","history"])}),!0)]}},{key:"save",value:function(){var e=this;if(Object(y.F)(this.form),this.form.valid){var t,n,i=this.data.possibleNewGroups.find((function(t){return t.id===e.form.value.group}));t=this.userHelper.isOperator(this.data.user)?this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeOperator:this.i18n.userStatus.title.changeOperator:this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeUser:this.i18n.userStatus.title.changeUser,n=i?this.i18n.groupMembership.confirm({user:this.data.user.display,group:i?i.name:this.i18n.user.operatorNoGroup}):this.i18n.groupMembership.confirmAliasOperator(this.data.user.display),this.notification.confirm({title:t,message:n,callback:function(){return e.submit()}})}}},{key:"submit",value:function(){var e=this;this.addSub(this.groupMembershipService.changeGroupMembership({user:this.param,body:this.form.value}).subscribe((function(){e.notification.snackBar(e.operator?e.i18n.groupMembership.doneOperator:e.i18n.groupMembership.doneUser),e.reload()})))}},{key:"resolveMenu",value:function(e){return this.menu.searchUsersMenu(e.user)}},{key:"editable",get:function(){return!Object(y.h)(this.data.possibleNewGroups)}},{key:"operator",get:function(){return this.userHelper.isOperator(this.data.user)}}]),n}(X.a)).\u0275fac=function(e){return new(e||ei)(I.Kb(I.r),I.Kb(j.a),I.Kb(Un.a))},ei.\u0275cmp=I.Eb({type:ei,selectors:[["view-user-group"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions",4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[3,"user"],[3,"label"],[4,"ngIf"],[3,"formGroup"],["formControlName","group",3,"label","required","emptyOption"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],["formControlName","comment",3,"label"],[3,"label","action"],[3,"value","id","internalName","text"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Wn,6,9,"page-content",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,Q.a,_.a,C.I,C.w,C.n,Ge.a,C.v,C.l,C.D,A.s,Kt.a,O.a,S.a,qe.a],pipes:[A.b],encapsulation:2,changeDetection:0}),ei),ni=o("fGFU");function ii(e,t){1&e&&I.Mb(0)}function ai(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"user-info",7),I.Lb(2,"hr"),I.Nb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("user",n.data.user)}}function ri(e,t){1&e&&I.Lb(0,"hr",18)}function oi(e,t){if(1&e&&I.Lb(0,"avatar",19),2&e){var n=I.Zb().$implicit;I.gc("size",64)("image",n.identityProvider.image)}}function si(e,t){if(1&e&&(I.Qb(0,"div"),I.Dc(1),I.ac(2,"dateTime"),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.xb(1),I.Fc(" ",i.i18n.identityProvider.connectedOn(I.bc(2,1,n.linkDate))," ")}}function ci(e,t){if(1&e&&(I.Qb(0,"div"),I.Dc(1),I.Pb()),2&e){var n=I.Zb(4);I.xb(1),I.Fc(" ",n.i18n.identityProvider.disconnected," ")}}function li(e,t){if(1&e&&(I.Qb(0,"div"),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Fc(" ",n.name," ")}}function ui(e,t){if(1&e&&(I.Qb(0,"div"),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Fc(" ",n.email," ")}}var bi=function(e){return{"mb-3":e}};function di(e,t){if(1&e&&(I.Qb(0,"action-button",20),I.Xb("action",(function(){return t.$implicit.onClick()})),I.Pb()),2&e){var n=t.$implicit;I.gc("ngClass",I.jc(2,bi,!t.last))("label",n.label)}}var fi=function(e){return{"mt-0":e}};function gi(e,t){if(1&e&&(I.Ob(0),I.Bc(1,ri,1,0,"hr",9),I.Qb(2,"div",10),I.Qb(3,"div",11),I.Bc(4,oi,1,2,"avatar",12),I.ac(5,"async"),I.Pb(),I.Qb(6,"div",13),I.Qb(7,"h2",14),I.Dc(8),I.Pb(),I.Qb(9,"div",15),I.Bc(10,si,3,3,"div",5),I.Bc(11,ci,2,1,"div",5),I.Bc(12,li,2,1,"div",5),I.Bc(13,ui,2,1,"div",5),I.Pb(),I.Pb(),I.Qb(14,"div",16),I.Bc(15,di,1,4,"action-button",17),I.Pb(),I.Pb(),I.Nb()),2&e){var n=t.$implicit,i=t.first,a=I.Zb(3);I.xb(1),I.gc("ngIf",!i),I.xb(3),I.gc("ngIf",I.bc(5,9,a.layout.gtxxs$)),I.xb(3),I.gc("ngClass",I.jc(11,fi,i)),I.xb(1),I.Fc(" ",n.identityProvider.name,""),I.xb(2),I.gc("ngIf",n.linkDate),I.xb(1),I.gc("ngIf","linked"!==n.status),I.xb(1),I.gc("ngIf",n.name),I.xb(1),I.gc("ngIf",n.email),I.xb(2),I.gc("ngForOf",a.actions(n))}}function mi(e,t){if(1&e&&(I.Ob(0),I.Bc(1,gi,16,13,"ng-container",8),I.Nb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("ngForOf",n.data.identityProviders)}}function pi(e,t){if(1&e&&(I.Qb(0,"page-content",4),I.Bc(1,ai,3,1,"ng-container",5),I.Bc(2,mi,2,1,"ng-container",6),I.Pb()),2&e){var n=I.Zb(),i=I.qc(6);I.gc("heading",n.title)("mobileHeading",n.mobileTitle),I.xb(1),I.gc("ngIf",n.data.user&&!n.self),I.xb(1),I.gc("ngIf",n.data.identityProviders.length>0)("ngIfElse",i)}}function hi(e,t){if(1&e&&I.Dc(0),2&e){var n=I.Zb();I.Fc(" ",n.i18n.identityProvider.noResults,"\n")}}var vi,yi=((vi=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).identityProvidersService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.identityProvidersService.getUserIdentityProvidersListData({user:this.param}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){this.self=this.authHelper.isSelf(e.user),this.title=this.self?this.i18n.identityProvider.title.manageSelf:this.i18n.identityProvider.title.manageUser,this.mobileTitle=this.self?this.i18n.identityProvider.mobileTitle.manageSelf:this.i18n.identityProvider.mobileTitle.manageUser}},{key:"actions",value:function(e){var t=this,n=[];return e.status!==et.Gb.LINKED&&this.data.canLink&&n.push(new Ie.a(this.i18n.identityProvider.action.connect,(function(){t.connect(e)}))),e.status===et.Gb.LINKED&&this.data.canEdit&&n.push(new Ie.a(this.i18n.identityProvider.action.disconnect,(function(){t.disconnect(e)}))),n}},{key:"connect",value:function(e){var t=this;this.addSub(this.authHelper.identityProviderPopup(e.identityProvider,"link").subscribe((function(e){t.notification.snackBar(t.i18n.identityProvider.action.connectDone({name:e.name,provider:e.identityProvider.name})),t.reload()})))}},{key:"disconnect",value:function(e){var t=this;this.notification.confirm({title:this.i18n.identityProvider.action.disconnect,message:this.i18n.identityProvider.action.disconnectConfirm(e.identityProvider.name),callback:function(){return t.doDisconnect(e)}})}},{key:"doDisconnect",value:function(e){var t=this,n=e.identityProvider;this.addSub(this.identityProvidersService.deleteUserIdentityProvider({user:this.param,identityProvider:n.internalName,disable:!0}).subscribe((function(){t.notification.info(t.i18n.identityProvider.action.disconnectDone(n.name)),t.reload()})))}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.IDENTITY_PROVIDERS)}}]),n}(v.a)).\u0275fac=function(e){return new(e||vi)(I.Kb(I.r),I.Kb(ni.a))},vi.\u0275cmp=I.Eb({type:vi,selectors:[["user-identity-providers"]],features:[I.ub],decls:7,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["noResults",""],[3,"heading","mobileHeading"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["labelCols","2",3,"user"],[4,"ngFor","ngForOf"],["class","mt-4",4,"ngIf"],[1,"row","no-gutters"],[1,"col-4","col-xs-3","col-md-2"],["class","ml-2 mr-5 management","iconSize","64px","icon","perm_identity",3,"size","image",4,"ngIf"],[1,"col-8","col-xs-9","col-md-7"],[1,"border-0","mb-3",3,"ngClass"],[1,"mt-2"],[1,"col-12","col-md-3","mt-3","mt-md-0"],["class","d-block ml-auto",3,"ngClass","label","action",4,"ngFor","ngForOf"],[1,"mt-4"],["iconSize","64px","icon","perm_identity",1,"ml-2","mr-5","management",3,"size","image"],[1,"d-block","ml-auto",3,"ngClass","label","action"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,ii,1,0,"ng-container",1),I.Pb(),I.Bc(3,pi,3,5,"ng-template",null,2,I.Cc),I.Bc(5,hi,1,1,"ng-template",null,3,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,Q.a,A.s,A.q,Ve.a,S.a],pipes:[A.b,ae.a],encapsulation:2,changeDetection:0}),vi),xi=o("+QOm"),Pi=o("dCJh"),Ii=o("iXUt");function ki(e,t){if(1&e&&I.Lb(0,"boolean-field",9),2&e){var n=I.Zb(2);I.gc("label",n.i18n.notificationSettings.forwardMessages)("disabled",!n.data.editable)}}var Ei=function(e){return{"border-top-0":e}};function Ai(e,t){if(1&e&&(I.Qb(0,"h2",13),I.Dc(1),I.Pb()),2&e){var n=I.Zb(4);I.gc("ngClass",I.jc(2,Ei,!n.data.forwardMessagesAllowed)),I.xb(1),I.Fc(" ",n.i18n.notificationSettings.payments,"")}}function Ci(e,t){if(1&e&&(I.Qb(0,"h3",14),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2).$implicit;I.xb(1),I.Fc(" ",n.name," ")}}function Di(e,t){1&e&&I.Mb(0)}var Oi=function(e){return{$implicit:e}};function Si(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Ai,2,4,"h2",10),I.Ob(2,4),I.Bc(3,Ci,2,1,"h3",11),I.Bc(4,Di,1,0,"ng-container",12),I.Nb(),I.Nb()),2&e){var n=t.ngIf,i=I.Zb(),a=i.first,r=i.$implicit,o=I.Zb(2),s=I.qc(4);I.xb(1),I.gc("ngIf",a),I.xb(1),I.gc("formGroup",n),I.xb(1),I.gc("ngIf",!o.singleAccount),I.xb(1),I.gc("ngTemplateOutlet",s)("ngTemplateOutletContext",I.jc(5,Oi,r))}}function Qi(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Si,5,7,"ng-container",1),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(2);I.xb(1),I.gc("ngIf",i.form.get("userAccounts").get(n.id))}}function Ni(e,t){if(1&e&&I.Lb(0,"field-option",17),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("value",i.ApiHelper.internalNameOrId(n))("id",n.id)("internalName",n.internalName)("text",n.name)}}function wi(e,t){if(1&e&&(I.Qb(0,"multi-selection-field",15),I.Bc(1,Ni,1,4,"field-option",16),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.notificationSettings.forwardMessages),I.xb(1),I.gc("ngForOf",n.data.messageCategories)}}var Fi=function(e){return{"section-title-action":e}},Li=function(e,t){return{"mr-3":e,"mb-2":t}};function Bi(e,t){if(1&e){var n=I.Rb();I.Qb(0,"div",13),I.ac(1,"async"),I.Qb(2,"action-button",21),I.Xb("action",(function(){I.sc(n);var e=I.Zb(2).$implicit;return I.Zb(2).enableNotifications(e,!0)})),I.ac(3,"async"),I.ac(4,"async"),I.Pb(),I.Qb(5,"action-button",22),I.Xb("action",(function(){I.sc(n);var e=I.Zb(2).$implicit;return I.Zb(2).enableNotifications(e,!1)})),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("ngClass",I.jc(10,Fi,I.bc(1,4,i.layout.gtsm$))),I.xb(2),I.gc("ngClass",I.kc(12,Li,!I.bc(3,6,i.layout.ltxs$),I.bc(4,8,i.layout.ltxs$)))("label",i.i18n.notificationSettings.enableAll),I.xb(3),I.gc("label",i.i18n.notificationSettings.disableAll)}}function Ri(e,t){if(1&e&&(I.Qb(0,"h2",19),I.Qb(1,"div",20),I.Dc(2),I.Pb(),I.Bc(3,Bi,6,15,"div",10),I.Pb()),2&e){var n=I.Zb(),i=n.first,a=n.$implicit,r=I.Zb(2);I.gc("ngClass",I.jc(3,Ei,i&&0===r.data.userAccounts.length&&0===r.data.messageCategories.length&&!r.data.forwardMessagesAllowed)),I.xb(2),I.Fc(" ",a," "),I.xb(1),I.gc("ngIf",!r.adminSettings&&r.notificationSections.get(a).length>3&&r.data.editable)}}function Ti(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"label-value",23),I.Lb(2,"notification-type-setting",24),I.Pb(),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(1),I.gc("label",i.resolveNotificationLabel(n)),I.xb(1),I.gc("setting",n)("options",i.kindFieldOptionsMap.get(n.kind))("form",i.resolveControl(n.kind))("multiSelectionControl",i.kindControlsMap.get(n.kind))("disabled",!i.data.editable)}}function Zi(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Ri,4,5,"h2",18),I.Bc(2,Ti,3,6,"ng-container",6),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(2);I.xb(1),I.gc("ngIf",""!==n),I.xb(1),I.gc("ngForOf",i.notificationSections.get(n))}}var _i=function(e,t){return{count:e,total:t}};function Mi(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2"),I.Dc(2),I.Pb(),I.Qb(3,"label"),I.Dc(4),I.Pb(),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Ec(n.i18n.general.sendMedium.sms),I.xb(2),I.Ec(n.i18n.notificationSettings.smsCount(I.kc(2,_i,n.data.smsCountThisMonth,n.data.maxSmsPerMonth)))}}function $i(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",25),I.Xb("action",(function(){return I.sc(n),I.Zb(2).save()})),I.ac(1,"async"),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("disabled",I.bc(1,2,i.requesting$))("label",i.i18n.general.save)}}function Ui(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"page-content",3),I.Qb(2,"form",4),I.Bc(3,ki,1,2,"boolean-field",5),I.Bc(4,Qi,2,1,"ng-container",6),I.Bc(5,wi,2,2,"multi-selection-field",7),I.Bc(6,Zi,3,2,"ng-container",6),I.Bc(7,Mi,5,5,"ng-container",1),I.Pb(),I.Qb(8,"actions"),I.Bc(9,$i,2,4,"action-button",8),I.Pb(),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("heading",n.i18n.notificationSettings.title)("mobileHeading",n.i18n.notificationSettings.mobileTitle),I.xb(1),I.gc("formGroup",n.form),I.xb(1),I.gc("ngIf",n.data.forwardMessagesAllowed),I.xb(1),I.gc("ngForOf",n.data.userAccounts),I.xb(1),I.gc("ngIf",n.data.messageCategories.length>0),I.xb(1),I.gc("ngForOf",n.notificationSections.keys()),I.xb(1),I.gc("ngIf",n.data.smsAllowed),I.xb(2),I.gc("ngIf",n.data.editable)}}function Hi(e,t){if(1&e&&(I.Ob(0,4),I.Lb(1,"decimal-field",26),I.Lb(2,"decimal-field",27),I.Nb()),2&e){var n=t.$implicit,i=I.Zb();I.gc("formGroup",i.form.get("userAccounts").get(n.id).get("paymentAmount")),I.xb(1),I.gc("label",i.i18n.notificationSettings.paymentNotificationsAbove)("scale",n.currency.decimalDigits)("prefix",n.currency.prefix)("suffix",n.currency.suffix)("disabled",!i.data.editable)("emptyLabel",i.i18n.general.notSet),I.xb(1),I.gc("label",i.i18n.notificationSettings.paymentNotificationsBelow)("scale",n.currency.decimalDigits)("prefix",n.currency.prefix)("suffix",n.currency.suffix)("disabled",!i.data.editable)("emptyLabel",i.i18n.general.notSet)}}var Gi,qi=((Gi=function(e){l(a,e);var i=b(a);function a(e,t){var n;return r(this,a),(n=i.call(this,e)).notificationSettingsService=t,n.notificationSections=new Map,n.kindControlsMap=new Map,n.kindFieldOptionsMap=new Map,n}return s(a,[{key:"ngOnInit",value:function(){var e=this;c(f(a.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user,this.addSub(this.notificationSettingsService.getNotificationSettingsDataForEdit({user:this.user}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var i=this;if(this.adminSettings=e.role===et.kb.ADMINISTRATOR,this.form=this.formBuilder.group({version:e.settings.version}),this.adminSettings){if(!this.hasSettings(e))return void this.notification.info(this.i18n.notificationSettings.notAvailableSettings);this.notificationSections.set("",e.settings.notifications),this.form.addControl("forwardMessageCategories",this.formBuilder.control(e.settings.forwardMessageCategories))}e.forwardMessagesAllowed&&this.form.setControl("forwardMessages",this.formBuilder.control(e.settings.forwardMessages));var a,r=[],o=this.formBuilder.array([]),s=n(e.settings.notifications);try{var c=function(){var e=a.value,t=i.formBuilder.group({internal:e.internal,kind:e.kind,sms:void 0===e.sms?null:e.sms,email:void 0===e.email?null:e.email});if(i.addSub(t.controls.internal.valueChanges.subscribe((function(){i.updateControls(t)}))),i.updateControls(t),o.push(t),r.push(e.kind),!i.adminSettings){var n=i.resolveSection(e.kind),s=i.notificationSections.get(n);s?s.push(e):i.notificationSections.set(n,[e])}};for(s.s();!(a=s.n()).done;)c()}catch(k){s.e(k)}finally{s.f()}if(r.length>0){var l,u=n(r);try{for(u.s();!(l=u.n()).done;){var b,d,f,g=l.value,m=t(this.resolveOptions(g,e),3);b=m[0],d=m[1],f=m[2];var p=this.formBuilder.control(d);this.kindControlsMap.set(g,p),this.form.setControl(f,p),this.kindFieldOptionsMap.set(g,b)}}catch(k){u.e(k)}finally{u.f()}}if(this.form.setControl("notifications",o),!Object(y.h)(e.userAccounts)){this.singleAccount=1===e.userAccounts.length;var h,v=this.formBuilder.group({}),x=n(e.userAccounts);try{for(x.s();!(h=x.n()).done;){var P=h.value,I=(e.settings.userAccounts[this.ApiHelper.internalNameOrId(P)]||{}).paymentAmount||{};v.setControl(P.id,this.formBuilder.group({paymentAmount:this.formBuilder.group({min:I.min,max:I.max})}))}}catch(k){x.e(k)}finally{x.f()}this.form.setControl("userAccounts",v)}}},{key:"updateControls",value:function(e){e.controls.internal.value?(e.controls.sms&&e.controls.sms.enable(),e.controls.email&&e.controls.email.enable()):(e.controls.sms&&e.controls.sms.disable(),e.controls.email&&e.controls.email.disable())}},{key:"save",value:function(){var e=this,t=this.notificationSettingsService.saveNotificationSettings({user:this.user,body:this.form.value});this.addSub(t.subscribe((function(){e.reload(),e.notification.snackBar(e.i18n.notificationSettings.saved)})))}},{key:"hasSettings",value:function(e){return!(Object(y.h)(e.settings.notifications)||this.adminSettings&&Object(y.h)(e.messageCategories))}},{key:"resolveSection",value:function(e){return e.startsWith("account")?this.i18n.notificationSettings.accounts:e.startsWith("personal")?this.i18n.notificationSettings.personal:e.startsWith("buyer")?this.i18n.notificationSettings.marketplaceAsBuyer:e.startsWith("seller")?this.i18n.notificationSettings.marketplaceAsSeller:e.startsWith("reference")||e.startsWith("feedback")?this.i18n.notificationSettings.feedbackAndReferences:""}},{key:"resolveMenu",value:function(){return this.adminSettings||this.user===this.ApiHelper.SELF?x.b.NOTIFICATIONS_SETTINGS:this.menu.searchUsersMenu()}},{key:"resolveControl",value:function(e){var t,i=n(this.form.controls.notifications.controls);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.controls.kind.value===e)return a}}catch(r){i.e(r)}finally{i.f()}return null}},{key:"enableNotifications",value:function(e,t){var i,a=n(this.notificationSections.get(e));try{for(a.s();!(i=a.n()).done;){var r=i.value;this.resolveControl(r.kind).controls.internal.setValue(t)}}catch(o){a.e(o)}finally{a.f()}}},{key:"resolveNotificationLabel",value:function(e){switch(e.kind){case et.J.ADMIN_AD_PENDING_AUTHORIZATION:return this.i18n.notification.admin.adPendingAuthorization;case et.J.ADMIN_APPLICATION_ERROR:return this.i18n.notification.admin.applicationErrors;case et.J.ADMIN_EXTERNAL_PAYMENT_EXPIRED:return this.i18n.notification.admin.externalPaymentExpired;case et.J.ADMIN_EXTERNAL_PAYMENT_PERFORMED_FAILED:return this.i18n.notification.admin.externalPaymentPerformedFailed;case et.J.ADMIN_GENERATED_VOUCHERS_ABOUT_TO_EXPIRE:return this.i18n.notification.admin.generatedVouchersAboutToExpire;case et.J.ADMIN_GENERATED_VOUCHERS_EXPIRED:return this.i18n.notification.admin.generatedVouchersExpired;case et.J.ADMIN_NETWORK_CREATED:return this.i18n.notification.admin.networkCreated;case et.J.ADMIN_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.admin.paymentAwaitingAuthorization;case et.J.ADMIN_PAYMENT_PERFORMED:return this.i18n.notification.admin.paymentPerformed;case et.J.ADMIN_SYSTEM_ALERT:return this.i18n.notification.admin.systemAlert;case et.J.ADMIN_USER_ALERT:return this.i18n.notification.admin.userAlert;case et.J.ADMIN_USER_IMPORT_REGISTRATION:return"";case et.J.ADMIN_USER_REGISTRATION:return this.i18n.notification.admin.userRegistration;case et.J.ADMIN_VOUCHER_BUYING_ABOUT_TO_EXPIRE:return this.i18n.notification.admin.voucherBuyingAboutToExpire;case et.J.ACCOUNT_ALL_NON_SMS_PERFORMED_PAYMENTS:return this.i18n.notification.user.account.allNonSmsPerformedPayments;case et.J.ACCOUNT_AUTHORIZED_PAYMENT_CANCELED:return this.i18n.notification.user.account.authorizedPaymentCanceled;case et.J.ACCOUNT_AUTHORIZED_PAYMENT_DENIED:return this.i18n.notification.user.account.authorizedPaymentDenied;case et.J.ACCOUNT_AUTHORIZED_PAYMENT_EXPIRED:return this.i18n.notification.user.account.authorizedPaymentExpired;case et.J.ACCOUNT_AUTHORIZED_PAYMENT_SUCCEEDED:return this.i18n.notification.user.account.authorizedPaymentSucceeded;case et.J.ACCOUNT_BOUGHT_VOUCHERS_ABOUT_TO_EXPIRE:return this.i18n.notification.user.account.boughtVouchersAboutToExpire;case et.J.ACCOUNT_BOUGHT_VOUCHERS_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.boughtVouchersExpirationDateChanged;case et.J.ACCOUNT_BOUGHT_VOUCHERS_EXPIRED:return this.i18n.notification.user.account.boughtVouchersExpired;case et.J.ACCOUNT_EXTERNAL_PAYMENT_EXPIRED:return this.i18n.notification.user.account.externalPaymentExpired;case et.J.ACCOUNT_EXTERNAL_PAYMENT_PERFORMED_FAILED:return this.i18n.notification.user.account.externalPaymentPerformedFailed;case et.J.ACCOUNT_EXTERNAL_PAYMENT_RECEIVED_FAILED:return this.i18n.notification.user.account.externalPaymentReceivedFailed;case et.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_CANCELED:return this.i18n.notification.user.account.incomingRecurringPaymentCanceled;case et.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_FAILED:return this.i18n.notification.user.account.incomingRecurringPaymentFailed;case et.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_RECEIVED:return this.i18n.notification.user.account.incomingRecurringPaymentReceived;case et.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_CANCELED:return this.i18n.notification.user.account.incomingScheduledPaymentCanceled;case et.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_FAILED:return this.i18n.notification.user.account.incomingScheduledPaymentFailed;case et.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_RECEIVED:return this.i18n.notification.user.account.incomingScheduledPaymentReceived;case et.J.ACCOUNT_LIMIT_CHANGE:return this.i18n.notification.user.account.limitChange;case et.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_APPROVED_STILL_PENDING:return this.i18n.notification.user.account.operator.authorizedPaymentApprovedStillPending;case et.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_CANCELED:return this.i18n.notification.user.account.operator.authorizedPaymentCanceled;case et.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_DENIED:return this.i18n.notification.user.account.operator.authorizedPaymentDenied;case et.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_EXPIRED:return this.i18n.notification.user.account.operator.authorizedPaymentExpired;case et.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_SUCCEEDED:return this.i18n.notification.user.account.operator.authorizedPaymentSucceeded;case et.J.ACCOUNT_OPERATOR_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.user.account.operator.paymentAwaitingAuthorization;case et.J.ACCOUNT_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.user.account.paymentAwaitingAuthorization;case et.J.ACCOUNT_PAYMENT_RECEIVED:return this.i18n.notification.user.account.paymentReceived;case et.J.ACCOUNT_PAYMENT_REQUEST_CANCELED:return this.i18n.notification.user.account.paymentRequestCanceled;case et.J.ACCOUNT_PAYMENT_REQUEST_DENIED:return this.i18n.notification.user.account.paymentRequestDenied;case et.J.ACCOUNT_PAYMENT_REQUEST_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.paymentRequestExpirationDateChanged;case et.J.ACCOUNT_PAYMENT_REQUEST_EXPIRED:return this.i18n.notification.user.account.paymentRequestExpired;case et.J.ACCOUNT_PAYMENT_REQUEST_PROCESSED:return this.i18n.notification.user.account.paymentRequestProcessed;case et.J.ACCOUNT_PAYMENT_REQUEST_RECEIVED:return this.i18n.notification.user.account.paymentRequestReceived;case et.J.ACCOUNT_RECURRING_PAYMENT_FAILED:return this.i18n.notification.user.account.recurringPaymentFailed;case et.J.ACCOUNT_RECURRING_PAYMENT_OCCURRENCE_PROCESSED:return this.i18n.notification.user.account.recurringPaymentOcurrenceProcessed;case et.J.ACCOUNT_SCHEDULED_PAYMENT_FAILED:return this.i18n.notification.user.account.scheduledPaymentFailed;case et.J.ACCOUNT_SCHEDULED_PAYMENT_INSTALLMENT_PROCESSED:return this.i18n.notification.user.account.scheduledPaymentInstallmentProcessed;case et.J.ACCOUNT_SCHEDULED_PAYMENT_REQUEST_FAILED:return this.i18n.notification.user.account.scheduledPaymentRequestFailed;case et.J.ACCOUNT_SENT_PAYMENT_REQUEST_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.sentPaymentRequestExpirationDateChanged;case et.J.ACCOUNT_SMS_PERFORMED_PAYMENT:return this.i18n.notification.user.account.smsPerformedPayment;case et.J.ACCOUNT_TICKET_WEBHOOK_FAILED:return this.i18n.notification.user.account.ticketWebhookFailed;case et.J.BROKERING_AD_PENDING_AUTHORIZATION:return this.i18n.notification.user.brokering.adPendingAuthorization;case et.J.BROKERING_MEMBER_ASSIGNED:return this.i18n.notification.user.brokering.memberAssigned;case et.J.BROKERING_MEMBER_UNASSIGNED:return this.i18n.notification.user.brokering.memberUnassigned;case et.J.BUYER_AD_INTEREST_NOTIFICATION:return this.i18n.notification.user.buyer.adInterestNotification;case et.J.BUYER_AD_QUESTION_ANSWERED:return this.i18n.notification.user.buyer.adQuestionAnswered;case et.J.BUYER_ORDER_CANCELED:return this.i18n.notification.user.buyer.orderCanceled;case et.J.BUYER_ORDER_PAYMENT_CANCELED:return this.i18n.notification.user.buyer.orderPaymentCanceled;case et.J.BUYER_ORDER_PAYMENT_DENIED:return this.i18n.notification.user.buyer.orderPaymentDenied;case et.J.BUYER_ORDER_PAYMENT_EXPIRED:return this.i18n.notification.user.buyer.orderPaymentExpired;case et.J.BUYER_ORDER_PENDING:return this.i18n.notification.user.buyer.orderPending;case et.J.BUYER_ORDER_PENDING_AUTHORIZATION:return this.i18n.notification.user.buyer.orderPendingAuthorization;case et.J.BUYER_ORDER_PENDING_DELIVERY_DATA:return this.i18n.notification.user.buyer.orderPendingDeliveryData;case et.J.BUYER_ORDER_PROCESSED_BY_SELLER:return this.i18n.notification.user.buyer.orderProcessedBySeller;case et.J.BUYER_ORDER_REJECTED_BY_SELLER:return this.i18n.notification.user.buyer.orderRejectedBySeller;case et.J.BUYER_SALE_PENDING:return this.i18n.notification.user.buyer.buyerSalePending;case et.J.BUYER_SALE_REJECTED_BY_SELLER:return this.i18n.notification.user.buyer.buyerSaleRejectedBySeller;case et.J.FEEDBACK_CHANGED:return this.i18n.notification.user.feedback.changed;case et.J.FEEDBACK_CREATED:return this.i18n.notification.user.feedback.created;case et.J.FEEDBACK_EXPIRATION_REMINDER:return this.i18n.notification.user.feedback.expirationReminder;case et.J.FEEDBACK_OPTIONAL:return this.i18n.notification.user.feedback.optional;case et.J.FEEDBACK_REPLY_CREATED:return this.i18n.notification.user.feedback.replyCreated;case et.J.FEEDBACK_REQUIRED:return this.i18n.notification.user.feedback.required;case et.J.PERSONAL_BROKER_ASSIGNED:return this.i18n.notification.user.personal.brokerAssigned;case et.J.PERSONAL_BROKER_UNASSIGNED:return this.i18n.notification.user.personal.brokerUnassigned;case et.J.PERSONAL_MAX_SMS_PER_MONTH_REACHED:return this.i18n.notification.user.personal.maxSmsPerMonthReached;case et.J.PERSONAL_NEW_TOKEN:return this.i18n.notification.user.personal.newToken;case et.J.PERSONAL_NEW_TOKEN_PENDING_ACTIVATION:return this.i18n.notification.user.personal.newTokenPendingActivation;case et.J.PERSONAL_PASSWORD_STATUS_CHANGED:return this.i18n.notification.user.personal.passwordStatusChanged;case et.J.PERSONAL_TOKEN_STATUS_CHANGED:return this.i18n.notification.user.personal.tokenStatusChanged;case et.J.PERSONAL_USER_STATUS_CHANGED:return this.i18n.notification.user.personal.userStatusChanged;case et.J.REFERENCE_CHANGED:return this.i18n.notification.user.reference.changed;case et.J.REFERENCE_CREATED:return this.i18n.notification.user.reference.created;case et.J.SELLER_AD_AUTHORIZED:return this.i18n.notification.user.seller.adAuthorized;case et.J.SELLER_AD_EXPIRED:return this.i18n.notification.user.seller.adExpired;case et.J.SELLER_AD_LOW_STOCK:return this.i18n.notification.user.seller.adLowStock;case et.J.SELLER_AD_OUT_OF_STOCK:return this.i18n.notification.user.seller.adOutOfStock;case et.J.SELLER_AD_QUESTION_CREATED:return this.i18n.notification.user.seller.adQuestionCreated;case et.J.SELLER_AD_REJECTED:return this.i18n.notification.user.seller.adRejected;case et.J.SELLER_ORDER_CANCELED:return this.i18n.notification.user.seller.orderCanceled;case et.J.SELLER_ORDER_CREATED:return this.i18n.notification.user.seller.orderCreated;case et.J.SELLER_ORDER_PAYMENT_CANCELED:return this.i18n.notification.user.seller.orderPaymentCanceled;case et.J.SELLER_ORDER_PAYMENT_DENIED:return this.i18n.notification.user.seller.orderPaymentDenied;case et.J.SELLER_ORDER_PAYMENT_EXPIRED:return this.i18n.notification.user.seller.orderPaymentExpired;case et.J.SELLER_ORDER_PENDING_AUTHORIZATION:return this.i18n.notification.user.seller.orderPendingAuthorization;case et.J.SELLER_ORDER_PENDING_DELIVERY_DATA:return this.i18n.notification.user.seller.orderPendingDeliveryData;case et.J.SELLER_ORDER_PROCESSED_BY_BUYER:return this.i18n.notification.user.seller.orderProcessedByBuyer;case et.J.SELLER_ORDER_REJECTED_BY_BUYER:return this.i18n.notification.user.seller.orderRejectedByBuyer;case et.J.SELLER_SALE_PROCESSED_BY_BUYER:return this.i18n.notification.user.seller.saleProcessedByBuyer}return""}},{key:"resolveOptions",value:function(e,t){var n,i,a,r,o,s=this;switch(e){case et.J.ADMIN_EXTERNAL_PAYMENT_EXPIRED:n=t.externalPayments,i=t.settings.externalPaymentsExpired,r="externalPaymentsExpired";break;case et.J.ADMIN_EXTERNAL_PAYMENT_PERFORMED_FAILED:n=t.externalPayments,i=t.settings.externalPaymentsFailed,r="externalPaymentsFailed";break;case et.J.ADMIN_GENERATED_VOUCHERS_ABOUT_TO_EXPIRE:case et.J.ADMIN_GENERATED_VOUCHERS_EXPIRED:n=t.voucherConfigurations,i=t.settings.voucherConfigurations,r="voucherConfigurations";break;case et.J.ADMIN_VOUCHER_BUYING_ABOUT_TO_EXPIRE:n=t.voucherConfigurations,i=t.settings.voucherConfigurationsBuying,r="voucherConfigurationsBuying";break;case et.J.ADMIN_PAYMENT_AWAITING_AUTHORIZATION:n=t.authorizablePayments,i=t.settings.authorizablePayments,r="authorizablePayments";break;case et.J.ADMIN_PAYMENT_PERFORMED:n=t.payments,i=t.settings.payments,r="payments";break;case et.J.ADMIN_USER_REGISTRATION:n=t.userGroups,i=t.settings.userGroups,r="userGroups";break;case et.J.ADMIN_SYSTEM_ALERT:a=Object.values(et.rb),i=t.settings.systemAlerts,r="systemAlert";break;case et.J.ADMIN_USER_ALERT:a=Object.values(et.Fb),i=t.settings.userAlerts,r="userAlert"}return n?o=n.map((function(e){return{id:e.id,internalName:e.internalName,value:s.ApiHelper.internalNameOrId(e),text:e.name}})):a&&(o=a.map((function(e){return{value:e,text:s.resolveAlertLabel(e)}}))),[o,i,r]}},{key:"resolveAlertLabel",value:function(e){switch(e){case et.rb.ACCOUNT_FEE_CHARGED_NO_FAILURES:return this.i18n.systemAlert.type.accountFeeChargedNoFailures;case et.rb.ACCOUNT_FEE_CHARGED_WITH_FAILURES:return this.i18n.systemAlert.type.accountFeeChargedWithFailures;case et.rb.APPLICATION_RESTARTED:return this.i18n.systemAlert.type.applicationRestarted;case et.rb.CUSTOM:return this.i18n.systemAlert.type.custom;case et.rb.MAX_GLOBAL_SMS_REACHED:return this.i18n.systemAlert.type.maxGlobalSmsReached;case et.rb.MAX_INCORRECT_LOGIN_ATTEMPTS:return this.i18n.systemAlert.type.maxIncorrectLoginAttempts;case et.Fb.CUSTOM:return this.i18n.userAlert.type.custom;case et.Fb.GIVEN_VERY_BAD_REFS:return this.i18n.userAlert.type.givenVeryBadRefs;case et.Fb.INSUFFICIENT_BALANCE_FOR_INITIAL_CREDIT:return this.i18n.userAlert.type.insufficientBalanceForInitialCredit;case et.Fb.MAX_DEVICE_ACTIVATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxDeviceActivationAttemptsReached;case et.Fb.MAX_DEVICE_CONFIRMATION_CHECK_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxDeviceConfirmationCheckAttemptsReached;case et.Fb.MAX_TOKEN_ACTIVATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxTokenActivationAttemptsReached;case et.Fb.MAX_USER_LOCALIZATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxUserLocalizationAttemptsReached;case et.Fb.MAX_VOUCHER_REDEEM_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxVoucherRedeemAttemptsReached;case et.Fb.MOVE_USER_AUTOMATICALLY_FAILED:return this.i18n.userAlert.type.moveUserAutomaticallyFailed;case et.Fb.PASSWORD_DISABLED_BY_TRIES:return this.i18n.userAlert.type.passwordDisabledByTries;case et.Fb.PASSWORD_TEMPORARILY_BLOCKED:return this.i18n.userAlert.type.passwordTemporarilyBlocked;case et.Fb.RECEIVED_VERY_BAD_REFS:return this.i18n.userAlert.type.receivedVeryBadRefs;case et.Fb.SCHEDULED_PAYMENT_FAILED:return this.i18n.userAlert.type.scheduledPaymentFailed}return""}}]),a}(v.a)).\u0275fac=function(e){return new(e||Gi)(I.Kb(I.r),I.Kb(xi.a))},Gi.\u0275cmp=I.Eb({type:Gi,selectors:[["notification-settings-form"]],features:[I.ub],decls:5,vars:4,consts:[[3,"ready"],[4,"ngIf"],["accountDetails",""],[3,"heading","mobileHeading"],[3,"formGroup"],["formControlName","forwardMessages",3,"label","disabled",4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","forwardMessageCategories",3,"label",4,"ngIf"],[3,"disabled","label","action",4,"ngIf"],["formControlName","forwardMessages",3,"label","disabled"],[3,"ngClass",4,"ngIf"],["class","mt-3 mb-0",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[1,"mt-3","mb-0"],["formControlName","forwardMessageCategories",3,"label"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["class","d-flex flex-column flex-xs-row justify-content-between",3,"ngClass",4,"ngIf"],[1,"d-flex","flex-column","flex-xs-row","justify-content-between",3,"ngClass"],[1,"mb-2","mb-xs-0"],["outline","",3,"ngClass","label","action"],["outline","",3,"label","action"],["kind","field",3,"label"],[3,"setting","options","form","multiSelectionControl","disabled"],[3,"disabled","label","action"],["formControlName","min",3,"label","scale","prefix","suffix","disabled","emptyLabel"],["formControlName","max",3,"label","scale","prefix","suffix","disabled","emptyLabel"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Ui,10,9,"ng-container",1),I.Pb(),I.Bc(3,Hi,3,13,"ng-template",null,2,I.Cc)),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,C.I,C.w,C.n,A.s,O.a,D.a,C.v,C.l,A.A,A.q,Ot.a,qe.a,S.a,_.a,Pi.a,Ii.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Gi),Ki=o("a50p");function Vi(e,t){if(1&e&&(I.Qb(0,"div",7),I.Qb(1,"label-value",8),I.Lb(2,"user-link",9),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.data.user)}}function ji(e,t){if(1&e&&(I.Qb(0,"mobile-result"),I.Qb(1,"div",10),I.Dc(2),I.Pb(),I.Pb()),2&e){var n=t.$implicit;I.xb(2),I.Ec(n.name)}}function zi(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"tr",13),I.Xb("click",(function(){I.sc(n);var e=t.$implicit,i=I.Zb(3);return i.router.navigate(i.path(e))})),I.Qb(2,"td"),I.Qb(3,"a",14),I.Dc(4),I.Pb(),I.Pb(),I.Qb(5,"td",15),I.Qb(6,"button",16),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit;return I.Zb(3).remove(i),e.stopPropagation()})),I.Lb(7,"icon",17),I.Pb(),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=t.$implicit,a=I.Zb(3);I.xb(3),I.gc("routerLink",a.path(i)),I.xb(1),I.Fc(" ",i.name," "),I.xb(2),I.gc("tooltip",a.i18n.general.removeTooltip(i.name))}}function Xi(e,t){if(1&e&&(I.Qb(0,"table",11),I.Qb(1,"tbody"),I.Bc(2,zi,8,3,"ng-container",12),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(2),I.gc("ngForOf",n.data.operatorGroups)}}function Ji(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"page-content",2),I.ac(2,"async"),I.Bc(3,Vi,3,2,"div",3),I.Pb(),I.Qb(4,"results-layout",4),I.Bc(5,ji,3,1,"mobile-result",5),I.Bc(6,Xi,3,1,"table",6),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("mode",n.self?"empty":"filters")("heading",n.i18n.operatorGroup.title.list)("mobileHeading",n.i18n.operatorGroup.mobileTitle.list)("headingActions",I.bc(2,7,n.headingActions$)),I.xb(2),I.gc("ngIf",!n.self),I.xb(1),I.gc("results",n.data.operatorGroups)("toLink",n.toLink)}}var Yi,Wi=((Yi=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).operatorGroupsService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user||this.ApiHelper.SELF,this.self=this.authHelper.isSelf(this.param),this.addSub(this.operatorGroupsService.getUserOperatorGroupsListData({user:this.param}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;this.groups=e.operatorGroups,e.canCreate&&(this.headingActions=[new Ie.c("add",this.i18n.general.addNew,(function(){t.router.navigate(["/users",t.param,"operator-groups","new"])}),!0)])}},{key:"path",value:function(e){return["/users","operator-groups",e.id]}},{key:"remove",value:function(e){var t=this;this.notification.confirm({message:this.i18n.general.removeConfirm(e.name),callback:function(){return t.doRemove(e)}})}},{key:"doRemove",value:function(e){var t=this;this.addSub(this.operatorGroupsService.deleteOperatorGroup({id:e.id}).subscribe((function(){t.notification.snackBar(t.i18n.general.removeDone(e.name)),t.reload()})))}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.OPERATOR_GROUPS)}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(v.a)).\u0275fac=function(e){return new(e||Yi)(I.Kb(I.r),I.Kb(Ki.a))},Yi.\u0275cmp=I.Eb({type:Yi,selectors:[["list-operator-groups"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"mode","heading","mobileHeading","headingActions"],["class","col-12 col-md-6",4,"ngIf"],[3,"results","toLink"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[1,"col-12","col-md-6"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],[1,"cell-main"],[1,"table","table-hover","cursor-pointer"],[4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink"],[1,"actions"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","clear"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Ji,7,9,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,Y.a,W.a,ee.a,_.a,Gt.a,te.a,A.s,d.h,N.b,ne.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Yi),ea=o("vHbw");function ta(e,t){if(1&e&&(I.Qb(0,"label-value",16),I.Lb(1,"user-link",17),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.data.user)}}function na(e,t){1&e&&I.Mb(0)}function ia(e,t){if(1&e&&(I.Ob(0),I.Bc(1,na,1,0,"ng-container",19),I.Nb()),2&e){I.Zb(3);var n=I.qc(6);I.xb(1),I.gc("ngTemplateOutlet",n)}}function aa(e,t){if(1&e&&(I.Qb(0,"h3",9),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2).$implicit;I.xb(1),I.Fc(" ",n.name," ")}}function ra(e,t){1&e&&I.Mb(0)}var oa=function(e){return{$implicit:e}};function sa(e,t){if(1&e&&(I.Ob(0),I.Bc(1,ra,1,0,"ng-container",22),I.Nb()),2&e){var n=I.Zb(2).$implicit;I.Zb(3);var i=I.qc(4);I.xb(1),I.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",I.jc(2,oa,n))}}function ca(e,t){if(1&e&&(I.Ob(0),I.Ob(1,5),I.Bc(2,aa,2,1,"h3",20),I.Lb(3,"single-selection-field",21),I.Bc(4,sa,2,4,"ng-container",1),I.Nb(),I.Nb()),2&e){var n=t.ngIf,i=I.Zb(4);I.xb(1),I.gc("formGroup",n),I.xb(1),I.gc("ngIf",!i.singleAccount),I.xb(1),I.gc("label",i.i18n.operatorGroup.accountAccess)("fieldOptions",i.accountAccessOptions),I.xb(1),I.gc("ngIf","none"!==n.value.access)}}function la(e,t){if(1&e&&(I.Ob(0),I.Bc(1,ca,5,5,"ng-container",1),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(1),I.gc("ngIf",i.form.get("accounts").get(n.id))}}function ua(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",9),I.Dc(2),I.ac(3,"async"),I.Pb(),I.Bc(4,ia,2,1,"ng-container",1),I.Bc(5,la,2,1,"ng-container",18),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Fc("",I.bc(3,3,n.layout.ltsm$)?n.i18n.operatorGroup.mobileTitle.accountAccess:n.i18n.operatorGroup.title.accountAccess," "),I.xb(2),I.gc("ngIf",!n.singleAccount),I.xb(1),I.gc("ngForOf",n.data.accountTypes)}}function ba(e,t){if(1&e&&I.Lb(0,"boolean-field",23),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.notifications)}}function da(e,t){if(1&e&&I.Lb(0,"boolean-field",24),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.viewAdvertisements)}}function fa(e,t){if(1&e&&I.Lb(0,"field-option",27),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("value",i.ApiHelper.internalNameOrId(n))("id",n.id)("internalName",n.internalName)("text",n.name)}}function ga(e,t){if(1&e&&(I.Qb(0,"multi-selection-field",25),I.Bc(1,fa,1,4,"field-option",26),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.runOperations),I.xb(1),I.gc("ngForOf",n.data.operations)}}function ma(e,t){if(1&e&&I.Lb(0,"boolean-field",28),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.brokering)}}function pa(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"page-content",4),I.ac(2,"async"),I.Qb(3,"form",5),I.Bc(4,ta,2,2,"label-value",6),I.Lb(5,"input-field",7),I.Lb(6,"textarea-field",8),I.Bc(7,ua,6,5,"ng-container",1),I.Qb(8,"h2",9),I.Dc(9),I.ac(10,"async"),I.Pb(),I.Lb(11,"boolean-field",10),I.Bc(12,ba,1,1,"boolean-field",11),I.Bc(13,da,1,1,"boolean-field",12),I.Bc(14,ga,2,2,"multi-selection-field",13),I.Bc(15,ma,1,1,"boolean-field",14),I.Pb(),I.Qb(16,"actions"),I.Qb(17,"action-button",15),I.Xb("action",(function(){return I.sc(n),I.Zb().save()})),I.ac(18,"async"),I.Pb(),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=I.Zb();I.xb(1),I.gc("heading",i.create?i.i18n.operatorGroup.title.new:i.i18n.operatorGroup.title.edit)("mobileHeading",i.create?i.i18n.operatorGroup.mobileTitle.new:i.i18n.operatorGroup.mobileTitle.edit)("headingActions",I.bc(2,16,i.headingActions$)),I.xb(2),I.gc("formGroup",i.form),I.xb(1),I.gc("ngIf",!i.self),I.xb(1),I.gc("label",i.i18n.general.name),I.xb(1),I.gc("label",i.i18n.general.description),I.xb(1),I.gc("ngIf",(null==i.data.accountTypes?null:i.data.accountTypes.length)>0),I.xb(2),I.Fc("",I.bc(10,18,i.layout.ltsm$)?i.i18n.operatorGroup.mobileTitle.permissions:i.i18n.operatorGroup.title.permissions," "),I.xb(2),I.gc("label",i.i18n.operatorGroup.editOwnProfile),I.xb(1),I.gc("ngIf",i.data.canHaveNotifications),I.xb(1),I.gc("ngIf",i.data.canViewAdvertisements),I.xb(1),I.gc("ngIf",(null==i.data.operations?null:i.data.operations.length)>0),I.xb(1),I.gc("ngIf",i.data.broker),I.xb(2),I.gc("disabled",I.bc(18,20,i.requesting$))("label",i.i18n.general.save)}}function ha(e,t){1&e&&I.Mb(0)}function va(e,t){if(1&e&&(I.Ob(0),I.Bc(1,ha,1,0,"ng-container",19),I.Nb()),2&e){I.Zb(2);var n=I.qc(6);I.xb(1),I.gc("ngTemplateOutlet",n)}}function ya(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"hr",36),I.Qb(2,"h4",37),I.Dc(3),I.Pb(),I.Nb()),2&e){var n=I.Zb().$implicit;I.xb(3),I.Ec(n.name)}}function xa(e,t){if(1&e&&(I.Ob(0,5),I.Bc(1,ya,4,1,"ng-container",1),I.Lb(2,"boolean-field",32),I.Lb(3,"boolean-field",33),I.Lb(4,"decimal-field",34),I.Lb(5,"boolean-field",35),I.Nb()),2&e){var n,i=t.$implicit,a=I.Zb().$implicit,r=I.Zb();I.gc("formGroup",r.form.get("payments").get(i.id)),I.xb(1),I.gc("ngIf",(null==(n=r.paymentTypes(a))?null:n.length)>1),I.xb(1),I.gc("label",r.i18n.operatorGroup.performPayments),I.xb(1),I.gc("label",r.i18n.operatorGroup.performPaymentsRequiresAuthorization),I.xb(1),I.gc("label",r.i18n.operatorGroup.performPaymentsMaxAmountPerDay)("scale",i.currency.decimalDigits)("prefix",i.currency.prefix)("suffix",i.currency.suffix),I.xb(1),I.gc("label",r.i18n.operatorGroup.authorizePayments)}}function Pa(e,t){if(1&e&&(I.Ob(0,5),I.Lb(1,"decimal-field",29),I.Lb(2,"decimal-field",30),I.Nb(),I.Bc(3,va,2,1,"ng-container",1),I.Bc(4,xa,6,9,"ng-container",31)),2&e){var n=t.$implicit,i=I.Zb();I.gc("formGroup",i.form.get("accounts").get(n.id).get("notificationAmount")),I.xb(1),I.gc("label",i.i18n.operatorGroup.paymentNotificationsAbove)("scale",n.currency.decimalDigits)("prefix",n.currency.prefix)("suffix",n.currency.suffix),I.xb(1),I.gc("label",i.i18n.operatorGroup.paymentNotificationsBelow)("scale",n.currency.decimalDigits)("prefix",n.currency.prefix)("suffix",n.currency.suffix),I.xb(1),I.gc("ngIf",i.singleAccount),I.xb(1),I.gc("ngForOf",i.paymentTypes(n))}}function Ia(e,t){if(1&e&&I.Lb(0,"boolean-field",40),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.chargebackPayments)}}function ka(e,t){if(1&e&&(I.Ob(0,5),I.Bc(1,Ia,1,1,"boolean-field",38),I.Lb(2,"multiple-users-field",39),I.Nb()),2&e){var n=I.Zb();I.gc("formGroup",n.form),I.xb(1),I.gc("ngIf",n.data.canChargebackPayments),I.xb(1),I.gc("label",n.i18n.operatorGroup.restrictPaymentsToUsers)("preselectedUsers",n.restrictPaymentsToUsers)}}var Ea,Aa=((Ea=function(e){l(i,e);var t=b(i);function i(e,n,a){var o;return r(this,i),(o=t.call(this,e)).userHelper=n,o.operatorGroupsService=a,o}return s(i,[{key:"ngOnInit",value:function(){var e=this;c(f(i.prototype),"ngOnInit",this).call(this),this.id=this.route.snapshot.params.id,this.user=this.route.snapshot.params.user,this.create=null!=this.user;var t=this.create?this.operatorGroupsService.getOperatorGroupDataForNew({user:this.user}):this.operatorGroupsService.getOperatorGroupDataForEdit({id:this.id});this.addSub(t.subscribe((function(t){e.data=t})));var n=Object(y.i)(et.P);this.accountAccessOptions=n.map((function(t){return{value:t,text:e.userHelper.operatorGroupAccountAccess(t)}}))}},{key:"onDataInitialized",value:function(e){this.self=this.authHelper.isSelf(e.user);var t=e.operatorGroup;if(this.form=this.formBuilder.group({name:[t.name,C.G.required],description:t.description}),!Object(y.h)(e.accountTypes)){this.singleAccount=1===e.accountTypes.length;var i,a=this.formBuilder.group({}),r=n(e.accountTypes);try{for(r.s();!(i=r.n()).done;){var o=i.value,s=t.accounts[o.id]||t.accounts[o.internalName]||{},c=s.notificationAmount||{};a.setControl(o.id,this.formBuilder.group({access:[s.access||et.P.NONE,C.G.required],notificationAmount:this.formBuilder.group({min:c.min,max:c.max})}))}}catch(g){r.e(g)}finally{r.f()}this.form.setControl("accounts",a)}if(!Object(y.h)(e.paymentTypes)){var l,u=this.formBuilder.group({}),b=n(e.paymentTypes);try{for(b.s();!(l=b.n()).done;){var d=l.value,f=t.payments[d.id]||t.payments[d.internalName]||{};u.setControl(d.id,this.formBuilder.group({perform:f.perform,maxAmountPerDay:f.maxAmountPerDay,requiresAuthorization:f.requiresAuthorization,authorize:f.authorize}))}}catch(g){b.e(g)}finally{b.f()}this.form.setControl("payments",u)}this.form.addControl("editOwnProfile",new C.j(t.editOwnProfile)),this.form.addControl("restrictPaymentsToUsers",new C.j(t.restrictPaymentsToUsers)),e.canHaveNotifications&&this.form.addControl("notifications",new C.j(t.notifications)),e.canChargebackPayments&&this.form.addControl("chargebackPayments",new C.j(t.chargebackPayments)),e.canViewAdvertisements&&this.form.addControl("viewAdvertisements",new C.j(t.viewAdvertisements)),e.broker&&this.form.addControl("brokering",new C.j(t.brokering)),Object(y.h)(e.operations)||this.form.addControl("operations",new C.j(t.operations)),t.version&&this.form.addControl("version",new C.j(t.version))}},{key:"paymentTypes",value:function(e){return(this.data.paymentTypes||[]).filter((function(t){return t.from.id===e.id}))}},{key:"save",value:function(){var e=this;if(Object(y.F)(this.form),this.form.valid){var t=this.form.value,n=this.create?this.operatorGroupsService.createOperatorGroup({user:this.user,body:t}):this.operatorGroupsService.updateOperatorGroup({id:this.id,body:t});this.addSub(n.subscribe((function(t){e.notification.snackBar(e.create?e.i18n.operatorGroup.created:e.i18n.operatorGroup.saved),e.router.navigate(["/users","operator-groups",t||e.id])})))}}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.OPERATOR_GROUPS)}},{key:"restrictPaymentsToUsers",get:function(){return this.data.restrictPaymentsToUsers}}]),i}(v.a)).\u0275fac=function(e){return new(e||Ea)(I.Kb(I.r),I.Kb(j.a),I.Kb(Ki.a))},Ea.\u0275cmp=I.Eb({type:Ea,selectors:[["operator-group-form"]],features:[I.ub],decls:7,vars:4,consts:[[3,"ready"],[4,"ngIf"],["accountDetails",""],["generalAccounts",""],[3,"heading","mobileHeading","headingActions"],[3,"formGroup"],["mode","fieldView",3,"label",4,"ngIf"],["formControlName","name","required","",3,"label"],["formControlName","description",3,"label"],[1,"mt-3","mb-0"],["formControlName","editOwnProfile",3,"label"],["formControlName","notifications",3,"label",4,"ngIf"],["formControlName","viewAdvertisements",3,"label",4,"ngIf"],["formControlName","operations",3,"label",4,"ngIf"],["formControlName","brokering",3,"label",4,"ngIf"],[1,"btn-main",3,"disabled","label","action"],["mode","fieldView",3,"label"],[3,"user"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],["class","mt-3 mb-0",4,"ngIf"],["formControlName","access","required","",3,"label","fieldOptions"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["formControlName","notifications",3,"label"],["formControlName","viewAdvertisements",3,"label"],["formControlName","operations",3,"label"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["formControlName","brokering",3,"label"],["formControlName","min",3,"label","scale","prefix","suffix"],["formControlName","max",3,"label","scale","prefix","suffix"],[3,"formGroup",4,"ngFor","ngForOf"],["formControlName","perform",3,"label"],["formControlName","requiresAuthorization",3,"label"],["formControlName","maxAmountPerDay",3,"label","scale","prefix","suffix"],["formControlName","authorize",3,"label"],[1,"inner-separator"],[1,"mt-3","mb-2"],["formControlName","chargebackPayments",3,"label",4,"ngIf"],["formControlName","restrictPaymentsToUsers",3,"label","preselectedUsers"],["formControlName","chargebackPayments",3,"label"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,pa,19,22,"ng-container",1),I.Pb(),I.Bc(3,Pa,5,11,"ng-template",null,2,I.Cc),I.Bc(5,ka,3,4,"ng-template",null,3,I.Cc)),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,C.I,C.w,C.n,qt.a,C.v,C.l,C.D,Kt.a,D.a,O.a,S.a,_.a,Gt.a,A.s,A.A,Ge.a,Ot.a,qe.a,Ii.a,ea.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Ea),Ca=o("I9hm");function Da(e,t){if(1&e&&(I.Qb(0,"label-value",9),I.Lb(1,"user-link",10),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.group.user)}}function Oa(e,t){if(1&e&&I.Lb(0,"label-value",11),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.description)("value",n.group.description)}}function Sa(e,t){if(1&e&&(I.Qb(0,"h3",12),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Fc(" ",n.accountType.name," ")}}function Qa(e,t){if(1&e&&(I.Ob(0),I.Dc(1),I.Nb()),2&e){var n=I.Zb(6);I.xb(1),I.Ec(n.i18n.operatorGroup.performPaymentsRequiresAuthorizationView)}}function Na(e,t){if(1&e&&(I.Ob(0),I.Dc(1),I.ac(2,"currency"),I.Nb()),2&e){var n=I.Zb().$implicit,i=I.Zb(5);I.xb(1),I.Ec(i.i18n.operatorGroup.performPaymentsMaxAmountPerDayView(I.cc(2,1,n.maxAmountPerDay,n.paymentType.currency)))}}function wa(e,t){1&e&&I.Lb(0,"br")}function Fa(e,t){if(1&e&&(I.Ob(0),I.Dc(1),I.Bc(2,Qa,2,1,"ng-container",1),I.Bc(3,Na,3,4,"ng-container",1),I.Bc(4,wa,1,0,"br",1),I.Nb()),2&e){var n=t.$implicit,i=t.last;I.xb(1),I.Fc(" ",n.paymentType.name,""),I.xb(1),I.gc("ngIf",n.requiresAuthorization),I.xb(1),I.gc("ngIf",n.maxAmountPerDay),I.xb(1),I.gc("ngIf",!i)}}function La(e,t){if(1&e&&(I.Qb(0,"label-value",14),I.Bc(1,Fa,5,4,"ng-container",13),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.gc("label",i.i18n.operatorGroup.performPayments),I.xb(1),I.gc("ngForOf",i.paymentsByAccount[n.accountType.id])}}function Ba(e,t){1&e&&(I.Ob(0),I.Dc(1,", "),I.Nb())}function Ra(e,t){if(1&e&&(I.Ob(0),I.Dc(1),I.Bc(2,Ba,2,0,"ng-container",1),I.Nb()),2&e){var n=t.$implicit,i=t.last;I.xb(1),I.Fc(" ",n.name,""),I.xb(1),I.gc("ngIf",!i)}}function Ta(e,t){if(1&e&&(I.Qb(0,"label-value",14),I.Bc(1,Ra,3,2,"ng-container",13),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.gc("label",i.i18n.operatorGroup.authorizePayments),I.xb(1),I.gc("ngForOf",i.authorizeByAccount[n.accountType.id])}}var Za=function(e,t){return{min:e,max:t}};function _a(e,t){if(1&e&&(I.Lb(0,"label-value",4),I.ac(1,"currency"),I.ac(2,"currency")),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.gc("label",i.i18n.operatorGroup.paymentNotifications)("value",i.format.formatRange(I.kc(8,Za,I.cc(1,2,n.notificationAmount.min,n.accountType.currency),I.cc(2,5,n.notificationAmount.max,n.accountType.currency))))}}function Ma(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Sa,2,1,"h3",6),I.Lb(2,"label-value",4),I.Bc(3,La,2,2,"label-value",8),I.Bc(4,Ta,2,2,"label-value",8),I.Bc(5,_a,3,11,"label-value",7),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(1),I.gc("ngIf",!i.singleAccount),I.xb(1),I.gc("label",i.i18n.operatorGroup.accountAccess)("value",i.userHelper.operatorGroupAccountAccess(n.access)),I.xb(1),I.gc("ngIf",(null==i.paymentsByAccount[n.accountType.id]?null:i.paymentsByAccount[n.accountType.id].length)>0),I.xb(1),I.gc("ngIf",(null==i.authorizeByAccount[n.accountType.id]?null:i.authorizeByAccount[n.accountType.id].length)>0),I.xb(1),I.gc("ngIf",(null==n.notificationAmount?null:n.notificationAmount.min)||(null==n.notificationAmount?null:n.notificationAmount.max))}}function $a(e,t){if(1&e&&(I.Qb(0,"h3",12),I.Dc(1),I.ac(2,"async"),I.Pb()),2&e){var n=I.Zb(4);I.xb(1),I.Fc(" ",I.bc(2,1,n.layout.ltsm$)?n.i18n.operatorGroup.mobileTitle.generalAccount:n.i18n.operatorGroup.title.generalAccount," ")}}function Ua(e,t){if(1&e&&I.Lb(0,"label-value",4),2&e){var n=I.Zb(4);I.gc("label",n.i18n.operatorGroup.chargebackPayments)("value",n.i18n.general.yes)}}function Ha(e,t){1&e&&(I.Ob(0),I.Dc(1,", "),I.Nb())}function Ga(e,t){if(1&e&&(I.Ob(0),I.Dc(1),I.Bc(2,Ha,2,0,"ng-container",1),I.Nb()),2&e){var n=t.$implicit,i=t.last;I.xb(1),I.Fc(" ",n.display,""),I.xb(1),I.gc("ngIf",!i)}}function qa(e,t){if(1&e&&(I.Qb(0,"label-value",14),I.Bc(1,Ga,3,2,"ng-container",13),I.Pb()),2&e){var n=I.Zb(4);I.gc("label",n.i18n.operatorGroup.restrictPaymentsToUsers),I.xb(1),I.gc("ngForOf",n.group.restrictPaymentsToUsers)}}function Ka(e,t){if(1&e&&(I.Ob(0),I.Bc(1,$a,3,3,"h3",6),I.Bc(2,Ua,1,2,"label-value",7),I.Bc(3,qa,2,2,"label-value",8),I.Nb()),2&e){var n=I.Zb(3);I.xb(1),I.gc("ngIf",!n.singleAccount),I.xb(1),I.gc("ngIf",n.group.chargebackPayments),I.xb(1),I.gc("ngIf",(null==n.group.restrictPaymentsToUsers?null:n.group.restrictPaymentsToUsers.length)>0)}}function Va(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",12),I.Dc(2),I.ac(3,"async"),I.Pb(),I.Bc(4,Ma,6,6,"ng-container",13),I.Bc(5,Ka,4,3,"ng-container",1),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Fc("",I.bc(3,3,n.layout.ltsm$)?n.i18n.operatorGroup.mobileTitle.accountAccess:n.i18n.operatorGroup.title.accountAccess," "),I.xb(2),I.gc("ngForOf",n.visibleAccounts),I.xb(1),I.gc("ngIf",(null==n.group.restrictPaymentsToUsers?null:n.group.restrictPaymentsToUsers.length)>0||n.group.chargebackPayments)}}function ja(e,t){if(1&e&&(I.Qb(0,"h2",12),I.Dc(1),I.ac(2,"async"),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.Fc("",I.bc(2,1,n.layout.ltsm$)?n.i18n.operatorGroup.mobileTitle.permissions:n.i18n.operatorGroup.title.permissions," ")}}function za(e,t){if(1&e&&I.Lb(0,"label-value",4),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.editOwnProfile)("value",n.i18n.general.yes)}}function Xa(e,t){if(1&e&&I.Lb(0,"label-value",4),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.notifications)("value",n.i18n.general.yes)}}function Ja(e,t){if(1&e&&I.Lb(0,"label-value",4),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.viewAdvertisements)("value",n.i18n.general.yes)}}function Ya(e,t){1&e&&(I.Ob(0),I.Dc(1,", "),I.Nb())}function Wa(e,t){if(1&e&&(I.Ob(0),I.Dc(1),I.Bc(2,Ya,2,0,"ng-container",1),I.Nb()),2&e){var n=t.$implicit,i=t.last;I.xb(1),I.Ec(n.name),I.xb(1),I.gc("ngIf",!i)}}function er(e,t){if(1&e&&(I.Qb(0,"label-value",14),I.Bc(1,Wa,3,2,"ng-container",13),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.runOperations),I.xb(1),I.gc("ngForOf",n.group.operations)}}function tr(e,t){if(1&e&&I.Lb(0,"label-value",4),2&e){var n=I.Zb(2);I.gc("label",n.i18n.operatorGroup.brokering)("value",n.i18n.general.yes)}}function nr(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"page-content",2),I.ac(2,"async"),I.Bc(3,Da,2,2,"label-value",3),I.Lb(4,"label-value",4),I.Bc(5,Oa,1,2,"label-value",5),I.Bc(6,Va,6,5,"ng-container",1),I.Bc(7,ja,3,3,"h2",6),I.Bc(8,za,1,2,"label-value",7),I.Bc(9,Xa,1,2,"label-value",7),I.Bc(10,Ja,1,2,"label-value",7),I.Bc(11,er,2,2,"label-value",8),I.Bc(12,tr,1,2,"label-value",7),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("heading",n.i18n.operatorGroup.title.view)("mobileHeading",n.i18n.operatorGroup.mobileTitle.view)("headingActions",I.bc(2,14,n.headingActions$)),I.xb(2),I.gc("ngIf",!n.self),I.xb(1),I.gc("label",n.i18n.general.name)("value",n.group.name),I.xb(1),I.gc("ngIf",n.group.description),I.xb(1),I.gc("ngIf",(null==n.visibleAccounts?null:n.visibleAccounts.length)>0),I.xb(1),I.gc("ngIf",n.group.editOwnProfile||n.group.notifications||n.group.viewAdvertisements||n.group.brokering||(null==n.group.operations?null:n.group.operations.length)>0),I.xb(1),I.gc("ngIf",n.group.editOwnProfile),I.xb(1),I.gc("ngIf",n.group.notifications),I.xb(1),I.gc("ngIf",n.group.viewAdvertisements),I.xb(1),I.gc("ngIf",(null==n.group.operations?null:n.group.operations.length)>0),I.xb(1),I.gc("ngIf",n.group.brokering)}}var ir,ar=((ir=function(e){l(i,e);var t=b(i);function i(e,n,a){var o;return r(this,i),(o=t.call(this,e)).userHelper=n,o.operatorGroupsService=a,o}return s(i,[{key:"ngOnInit",value:function(){var e=this;c(f(i.prototype),"ngOnInit",this).call(this),this.id=this.route.snapshot.params.id,this.addSub(this.operatorGroupsService.viewOperatorGroup({id:this.id}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;this.self=this.authHelper.isSelf(e.user);var i=e.accounts||[];this.visibleAccounts=i.filter((function(e){return e.access!==et.P.NONE})),this.singleAccount=1===i.length,this.paymentsByAccount={},this.authorizeByAccount={};var a,r=e.payments||[],o=n(this.visibleAccounts);try{var s=function(){var e=a.value;t.paymentsByAccount[e.accountType.id]=r.filter((function(t){return t.perform&&t.paymentType.from.id===e.accountType.id})),t.authorizeByAccount[e.accountType.id]=r.filter((function(t){return t.authorize&&t.paymentType.from.id===e.accountType.id})).map((function(e){return e.paymentType}))};for(o.s();!(a=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}if(e.canEdit){var c=[new Ie.c("edit",this.i18n.general.edit,(function(){t.router.navigateByUrl(t.router.url+"/edit")}),!0)];this.layout.ltsm&&c.push(new Ie.c("clear",this.i18n.general.remove,(function(){return t.remove()}))),this.headingActions=c}}},{key:"remove",value:function(){var e=this;this.notification.confirm({message:this.i18n.general.removeConfirm(this.group.name),callback:function(){return e.doRemove()}})}},{key:"doRemove",value:function(){var e=this;this.addSub(this.operatorGroupsService.deleteOperatorGroup({id:this.id}).subscribe((function(){e.notification.snackBar(e.i18n.general.removeDone(e.group.name)),e.router.navigate(["users",e.authHelper.orSelf(e.group.user),"operator-groups"])})))}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.OPERATOR_GROUPS)}},{key:"group",get:function(){return this.data}}]),i}(X.a)).\u0275fac=function(e){return new(e||ir)(I.Kb(I.r),I.Kb(j.a),I.Kb(Ki.a))},ir.\u0275cmp=I.Eb({type:ir,selectors:[["view-operator-group"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","viewForm",3,"heading","mobileHeading","headingActions"],["labelPosition","side",3,"label",4,"ngIf"],[3,"label","value"],["valueFormat","break",3,"label","value",4,"ngIf"],["class","mt-3 mb-0",4,"ngIf"],[3,"label","value",4,"ngIf"],[3,"label",4,"ngIf"],["labelPosition","side",3,"label"],[3,"user"],["valueFormat","break",3,"label","value"],[1,"mt-3","mb-0"],[4,"ngFor","ngForOf"],[3,"label"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,nr,13,16,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,_.a,Gt.a,A.s],pipes:[A.b,Ca.a],encapsulation:2,changeDetection:0}),ir),rr=o("yFKC");function or(e,t){if(1&e&&(I.Qb(0,"label-value",15),I.Lb(1,"user-link",16),I.Pb()),2&e){var n=I.Zb(3);I.gc("label",n.i18n.user.operatorOwner),I.xb(1),I.gc("user",n.data.user)}}function sr(e,t){if(1&e&&I.Lb(0,"field-option",19),2&e){var n=t.$implicit,i=I.Zb(4);I.gc("value",i.ApiHelper.internalNameOrId(n))("id",n.id)("internalName",n.internalName)("text",n.name)}}function cr(e,t){if(1&e&&(I.Qb(0,"single-selection-field",17),I.Bc(1,sr,1,4,"field-option",18),I.Pb()),2&e){var n=I.Zb(3);I.gc("label",n.i18n.user.group)("emptyOption",n.i18n.user.operatorNoGroup),I.xb(1),I.gc("ngForOf",n.data.groups)}}function lr(e,t){if(1&e&&I.Lb(0,"input-field",20),2&e){var n=I.Zb(3);I.gc("label",n.i18n.user.name)}}function ur(e,t){if(1&e&&I.Lb(0,"input-field",21),2&e){var n=I.Zb(3);I.gc("label",n.i18n.user.username)}}function br(e,t){if(1&e&&I.Lb(0,"input-field",24),2&e){var n=I.Zb(4);I.gc("label",n.i18n.user.email)("required",n.data.emailRequired)}}function dr(e,t){if(1&e&&I.Lb(0,"boolean-field",25),2&e){var n=I.Zb(4);I.gc("label",n.i18n.user.registration.skipActivationEmail)}}function fr(e,t){if(1&e&&(I.Ob(0),I.Bc(1,br,1,2,"input-field",22),I.Bc(2,dr,1,1,"boolean-field",23),I.Nb()),2&e){var n=I.Zb(3);I.xb(1),I.gc("ngIf",n.canEdit("email")),I.xb(1),I.gc("ngIf",n.data.allowSetSendActivationEmail)}}function gr(e,t){if(1&e&&I.Lb(0,"custom-field-input",28),2&e){var n=I.Zb().$implicit;I.gc("field",n)("formControlName",n.internalName)}}function mr(e,t){if(1&e&&(I.Ob(0,26),I.Bc(1,gr,1,2,"custom-field-input",27),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("formGroup",i.form.get("customValues")),I.xb(1),I.gc("ngIf",i.canEdit(n))}}function pr(e,t){if(1&e&&(I.Ob(0,26),I.Lb(1,"input-field",29),I.Nb()),2&e){var n=I.Zb(3);I.gc("formGroup",n.mobileForm),I.xb(1),I.gc("label",n.i18n.phone.mobile)("required","required"===n.mobileAvailability)("placeholder",n.data.phoneConfiguration.mobileExample)}}function hr(e,t){if(1&e&&I.Lb(0,"input-field",31),2&e){var n=I.Zb(4);I.gc("label",n.i18n.phone.extension)}}function vr(e,t){if(1&e&&(I.Ob(0,26),I.Lb(1,"input-field",29),I.Bc(2,hr,1,1,"input-field",30),I.Nb()),2&e){var n=I.Zb(3);I.gc("formGroup",n.landLineForm),I.xb(1),I.gc("label",n.i18n.phone.landLine)("required","required"===n.data.phoneConfiguration.landLineAvailability)("placeholder",n.data.phoneConfiguration.landLineExample),I.xb(1),I.gc("ngIf",n.data.phoneConfiguration.extensionEnabled)}}function yr(e,t){if(1&e&&(I.Qb(0,"div",34),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Ec(n.description)}}function xr(e,t){if(1&e&&I.Lb(0,"boolean-field",35),2&e){var n=I.Zb(4);I.gc("label",n.i18n.user.registration.passwordAssign)}}function Pr(e,t){if(1&e&&I.Lb(0,"boolean-field",39),2&e){var n=I.Zb(5);I.gc("label",n.i18n.user.registration.passwordForceChange)}}function Ir(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"input-field",36),I.Lb(2,"input-field",37),I.Bc(3,Pr,1,1,"boolean-field",38),I.Nb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.xb(1),I.gc("label",n.name),I.xb(1),I.gc("label",i.i18n.user.passwordConfirmation(n.name)),I.xb(1),I.gc("ngIf",n.canForceChange)}}function kr(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2"),I.Dc(2),I.Pb(),I.Ob(3,26),I.Bc(4,yr,2,1,"div",32),I.Bc(5,xr,1,1,"boolean-field",33),I.Bc(6,Ir,4,3,"ng-container",10),I.Nb(),I.Nb()),2&e){var n=t.$implicit,i=t.index,a=I.Zb(3);I.xb(2),I.Ec(n.name),I.xb(1),I.gc("formGroup",a.passwordForms[i]),I.xb(1),I.gc("ngIf",n.description),I.xb(1),I.gc("ngIf",a.login.user),I.xb(1),I.gc("ngIf",a.passwordForms[i].get("defined").value)}}function Er(e,t){if(1&e){var n=I.Rb();I.Qb(0,"form",5),I.Bc(1,or,2,2,"label-value",6),I.Bc(2,cr,2,3,"single-selection-field",7),I.Bc(3,lr,1,1,"input-field",8),I.Bc(4,ur,1,1,"input-field",9),I.Bc(5,fr,3,2,"ng-container",10),I.Bc(6,mr,2,2,"ng-container",11),I.Bc(7,pr,2,4,"ng-container",12),I.Bc(8,vr,3,5,"ng-container",12),I.Bc(9,kr,7,5,"ng-container",13),I.Qb(10,"actions"),I.Qb(11,"action-button",14),I.Xb("action",(function(){return I.sc(n),I.Zb(2).register()})),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("formGroup",i.form),I.xb(1),I.gc("ngIf",!i.self),I.xb(1),I.gc("ngIf",i.data.groups.length>0),I.xb(1),I.gc("ngIf",i.canEdit("name")),I.xb(1),I.gc("ngIf",i.canEdit("username")),I.xb(1),I.gc("ngIf",i.canEdit("email")),I.xb(1),I.gc("ngForOf",i.data.customFields),I.xb(1),I.gc("ngIf","disabled"!==i.mobileAvailability),I.xb(1),I.gc("ngIf","disabled"!==i.landLineAvailability),I.xb(1),I.gc("ngForOf",i.data.passwordTypes),I.xb(2),I.gc("label",i.i18n.general.submit)}}function Ar(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.Bc(1,Er,12,11,"form",4),I.ac(2,"async"),I.Pb()),2&e){var n=I.Zb(),i=I.qc(4);I.gc("heading",n.i18n.user.title.operatorRegistration)("mobileHeading",n.i18n.user.mobileTitle.operatorRegistration),I.xb(1),I.gc("ngIf",null==I.bc(2,4,n.result$))("ngIfElse",i)}}function Cr(e,t){if(1&e){var n=I.Rb();I.Lb(0,"p",40),I.ac(1,"trust"),I.Qb(2,"actions",41),I.Qb(3,"action-button",14),I.Xb("action",(function(){return I.sc(n),I.Zb().reload()})),I.Pb(),I.Qb(4,"action-button",14),I.Xb("action",(function(){return I.sc(n),I.Zb().viewProfile()})),I.Pb(),I.Pb()}if(2&e){var i=I.Zb();I.gc("innerHTML",I.bc(1,3,i.doneMessageHtml),I.tc),I.xb(3),I.gc("label",i.i18n.user.operatorRegistrationAddAnother),I.xb(1),I.gc("label",i.i18n.user.registration.viewProfile)}}var Dr,Or=((Dr=function(e){l(i,e);var n=b(i);function i(e,t,a){var o;return r(this,i),(o=n.call(this,e)).userHelper=t,o.operatorsService=a,o.result$=new Ht.a(null),o}return s(i,[{key:"ngOnInit",value:function(){var e=this;c(f(i.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user||this.ApiHelper.SELF,this.self=this.authHelper.isSelf(this.user),this.addSub(this.operatorsService.getOperatorDataForNew({user:this.user}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var n;this.form=this.formBuilder.group({group:null}),n=t(this.userHelper.setupRegistrationForm(this.form,e,!1),2),this.mobileForm=n[0],this.landLineForm=n[1],this.passwordForms=this.userHelper.passwordRegistrationForms(e),this.editableFields=this.userHelper.fieldNamesByAction(e,"edit")}},{key:"canEdit",value:function(e){return this.editableFields.has(this.fieldHelper.fieldName(e))}},{key:"register",value:function(){var e=this,t=Object(y.d)(this.form);this.mobileForm&&t.setControl("mobile",this.mobileForm),this.landLineForm&&t.setControl("landLine",this.landLineForm),t.setControl("passwords",new C.g(this.passwordForms)),Object(y.F)(t)&&this.addSub(this.operatorsService.registerOperator({user:this.user,body:t.value}).subscribe((function(t){return e.result$.next(t)})))}},{key:"viewProfile",value:function(){var e=this.result$.value;e&&this.router.navigate(["users",e.user.id,"profile"])}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.MY_OPERATORS)}},{key:"mobileAvailability",get:function(){return this.data.phoneConfiguration.mobileAvailability}},{key:"landLineAvailability",get:function(){return this.data.phoneConfiguration.landLineAvailability}},{key:"doneMessageHtml",get:function(){var e=this.result$.value;if(!e)return null;var t=e.user.display;switch(e.status){case et.Lb.ACTIVE:return this.i18n.user.operatorRegistrationActive(t);case et.Lb.INACTIVE:return this.i18n.user.operatorRegistrationInactive(t);case et.Lb.EMAIL_VALIDATION:return this.i18n.user.operatorRegistrationPending(t)}}}]),i}(v.a)).\u0275fac=function(e){return new(e||Dr)(I.Kb(I.r),I.Kb(j.a),I.Kb(rr.a))},Dr.\u0275cmp=I.Eb({type:Dr,selectors:[["operator-registration"]],features:[I.ub],decls:5,vars:4,consts:[[3,"ready"],["last","",3,"heading","mobileHeading",4,"ngIf"],["done",""],["last","",3,"heading","mobileHeading"],["autocomplete","off",3,"formGroup",4,"ngIf","ngIfElse"],["autocomplete","off",3,"formGroup"],[3,"label",4,"ngIf"],["formControlName","group",3,"label","emptyOption",4,"ngIf"],["formControlName","name","required","",3,"label",4,"ngIf"],["formControlName","username","required","",3,"label",4,"ngIf"],[4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"label","action"],[3,"label"],[3,"user"],["formControlName","group",3,"label","emptyOption"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["formControlName","name","required","",3,"label"],["formControlName","username","required","",3,"label"],["formControlName","email",3,"label","required",4,"ngIf"],["formControlName","skipActivationEmail",3,"label",4,"ngIf"],["formControlName","email",3,"label","required"],["formControlName","skipActivationEmail",3,"label"],[3,"formGroup"],[3,"field","formControlName",4,"ngIf"],[3,"field","formControlName"],["formControlName","number",3,"label","required","placeholder"],["formControlName","extension","fieldSize","tiny",3,"label",4,"ngIf"],["formControlName","extension","fieldSize","tiny",3,"label"],["class","mb-2",4,"ngIf"],["formControlName","defined",3,"label",4,"ngIf"],[1,"mb-2"],["formControlName","defined",3,"label"],["required","","formControlName","value","type","password","autocomplete","new-password",3,"label"],["required","","formControlName","confirmationValue","type","password","autocomplete","new-password",3,"label"],["formControlName","forceChange",3,"label",4,"ngIf"],["formControlName","forceChange",3,"label"],[3,"innerHTML"],["forceRow",""]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Ar,3,6,"page-content",1),I.Bc(3,Cr,5,5,"ng-template",null,2,I.Cc),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,C.I,C.w,C.n,A.s,O.a,S.a,_.a,Gt.a,Ge.a,C.v,C.l,qe.a,qt.a,C.D,D.a,bn.a],pipes:[A.b,fn.a],encapsulation:2,changeDetection:0}),Dr),Sr=o("TFmz"),Qr=o("qCwG"),Nr=(o("Ky6R"),o("7nZW")),wr=o("XvX2"),Fr=o("5Wk5"),Lr=o("oOvo"),Br=o("IJ5G"),Rr=function(e,t){return{"cell-main":e,"cell-text":t}};function Tr(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div",8),I.Lb(2,"format-field-value",9),I.Pb(),I.Nb()),2&e){var n=t.$implicit,i=t.first,a=I.Zb().$implicit,r=I.Zb();I.xb(1),I.gc("ngClass",I.kc(6,Rr,i,!i)),I.xb(1),I.gc("fields",r.data.customFields)("plainText",!0)("fieldName",n)("object",r.user(a))("customValues",r.customValues(a))}}function Zr(e,t){if(1&e&&(I.Qb(0,"div",10),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb();I.xb(1),I.Fc(" ",i.operatorGroup(n)," ")}}function _r(e,t){if(1&e&&(I.Qb(0,"mobile-result",5),I.Bc(1,Tr,3,9,"ng-container",6),I.Bc(2,Zr,2,1,"div",7),I.Pb()),2&e){var n=t.$implicit,i=I.Zb();I.gc("avatarImage",i.user(n).image)("avatarIcon","operator"===i.resultKind?null:"user"),I.xb(1),I.gc("ngForOf",i.fieldsInTile),I.xb(1),I.gc("ngIf","operator"===i.resultKind)}}function Mr(e,t){1&e&&I.Lb(0,"th",15)}function $r(e,t){if(1&e&&(I.Qb(0,"th"),I.Dc(1),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(2);I.xb(1),I.Ec(i.fieldName(n))}}function Ur(e,t){if(1&e&&(I.Qb(0,"th"),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.Ec(n.i18n.user.group)}}function Hr(e,t){if(1&e&&(I.Qb(0,"td",15),I.Lb(1,"avatar",17),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(2);I.xb(1),I.gc("image",i.user(n).image)}}function Gr(e,t){if(1&e&&(I.Qb(0,"td"),I.Lb(1,"format-field-value",9),I.Pb()),2&e){var n=t.$implicit,i=I.Zb().$implicit,a=I.Zb(2);I.xb(1),I.gc("fields",a.data.customFields)("plainText",!0)("fieldName",n)("object",a.user(i))("customValues",a.customValues(i))}}function qr(e,t){if(1&e&&(I.Qb(0,"td"),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(2);I.xb(1),I.Ec(i.operatorGroup(n))}}function Kr(e,t){if(1&e){var n=I.Rb();I.Qb(0,"tr",16),I.Xb("click",(function(){I.sc(n);var e=t.$implicit,i=I.Zb(2);return i.canViewProfile?i.router.navigate(i.path(e)):null})),I.Bc(1,Hr,2,1,"td",12),I.Bc(2,Gr,2,5,"td",6),I.Bc(3,qr,2,1,"td",13),I.Pb()}if(2&e){var i=I.Zb(2);I.xb(1),I.gc("ngIf","operator"!==i.resultKind),I.xb(1),I.gc("ngForOf",i.fieldsInList),I.xb(1),I.gc("ngIf","operator"===i.resultKind)}}var Vr=function(e){return{"cursor-pointer":e}};function jr(e,t){if(1&e&&(I.Qb(0,"table",11),I.Qb(1,"thead"),I.Bc(2,Mr,1,0,"th",12),I.Bc(3,$r,2,1,"th",6),I.Bc(4,Ur,2,1,"th",13),I.Pb(),I.Qb(5,"tbody"),I.Bc(6,Kr,4,3,"tr",14),I.Pb(),I.Pb()),2&e){var n=I.Zb();I.gc("ngClass",I.jc(5,Vr,n.canViewProfile)),I.xb(2),I.gc("ngIf","operator"!==n.resultKind),I.xb(1),I.gc("ngForOf",n.fieldsInList),I.xb(1),I.gc("ngIf","operator"===n.resultKind),I.xb(2),I.gc("ngForOf",null==n.results?null:n.results.results)}}function zr(e,t){if(1&e&&(I.Qb(0,"div",8),I.Qb(1,"format-field-value",20),I.Dc(2," \xa0 "),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=t.first,a=I.Zb().$implicit,r=I.Zb();I.gc("ngClass",i?"card-title":"card-text"),I.xb(1),I.gc("fields",r.data.customFields)("fieldName",n)("object",r.user(a))("customValues",r.customValues(a))}}function Xr(e,t){if(1&e&&(I.Qb(0,"tiled-result",18),I.Bc(1,zr,3,5,"div",19),I.Pb()),2&e){var n=t.$implicit,i=I.Zb();I.gc("image",i.user(n).image),I.xb(1),I.gc("ngForOf",i.fieldsInTile)}}var Jr=function(e,t){return{"font-weight-bold":e,"mb-2":t}};function Yr(e,t){if(1&e&&(I.Qb(0,"div",8),I.Lb(1,"format-field-value",9),I.Pb()),2&e){var n=t.$implicit,i=t.first,a=t.last,r=I.Zb().$implicit,o=I.Zb();I.gc("ngClass",I.kc(6,Jr,i,a)),I.xb(1),I.gc("fields",o.data.customFields)("plainText",!0)("fieldName",n)("object",o.user(r))("customValues",o.customValues(r))}}function Wr(e,t){if(1&e&&(I.Qb(0,"map-result",21),I.Bc(1,Yr,2,9,"div",19),I.Pb()),2&e){var n=t.$implicit,i=t.address,a=I.Zb();I.gc("image",a.user(n).image)("address",i),I.xb(1),I.gc("ngForOf",a.fieldsInTile)}}var eo,to=((eo=function(e){l(n,e);var t=b(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).clazz="flex-grow-1 d-flex",i.resultKind="user",i.update=new I.n,i}return s(n,[{key:"ngOnInit",value:function(){c(f(n.prototype),"ngOnInit",this).call(this),this.canViewProfile=!0===(((this.dataForUiHolder.dataForUi.auth||{}).permissions||{}).users||{}).viewProfile}},{key:"user",value:function(e){return"contact"===this.resultKind?e.contact:e}},{key:"operatorGroup",value:function(e){if("operator"===this.resultKind){var t=e.group;return t?t.name:this.i18n.user.operatorNoGroup}return null}},{key:"displayFunction",value:function(){var e=this;return function(t){var n=e.user(t);if(n.display)return n.display;var i=n,a=e.fieldsInList[0];return i.hasOwnProperty(a)?i[a]:(i.customValues||{})[a]}}},{key:"customValues",value:function(e){return null==e?null:e.customValues}},{key:"address",value:function(e){return"contact"===this.resultKind?null:e.address}},{key:"fieldName",value:function(e){return"operator"===this.resultKind&&"display"===e?this.i18n.general.operator:this.fieldHelper.fieldDisplay(e,this.data.customFields)}},{key:"path",value:function(e){var t=this.user(e);return this.authHelper.isSelf(t)?["/users",this.ApiHelper.SELF,"profile"]:"operator"===this.resultKind?["/users","operators",t.id]:this.canViewProfile?"contact"===this.resultKind?["/users","contacts",t.id]:["/users",t.id,"profile"]:null}},{key:"data",set:function(e){this._data=e;var t=(e||{}).fieldsInList||[];this.fieldsInList=t.slice(0,Math.min(t.length,7)),this.fieldsInTile=t.slice(0,Math.min(t.length,2)),this.showTableHeader=this.fieldsInList.length>1},get:function(){return this._data}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||eo)(I.Kb(I.r))},eo.\u0275cmp=I.Eb({type:eo,selectors:[["users-results"]],hostVars:2,hostBindings:function(e,t){2&e&&I.zb(t.clazz)},inputs:{resultType:"resultType",rendering$:"rendering$",referencePoint:"referencePoint",data:"data",results:"results",resultKind:"resultKind"},outputs:{update:"update"},features:[I.ub],decls:5,vars:7,consts:[[3,"results","rendering$","resultType","toAddress","referencePoint","toMarkerTitle","toLink","update"],[3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-hover",3,"ngClass",4,"resultTable"],["icon","user","zoom","",3,"image",4,"resultTile"],[3,"image","address",4,"resultInfoWindow"],[3,"avatarImage","avatarIcon"],[4,"ngFor","ngForOf"],["class","cell-text",4,"ngIf"],[3,"ngClass"],[3,"fields","plainText","fieldName","object","customValues"],[1,"cell-text"],[1,"table","table-hover",3,"ngClass"],["class","avatar",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"avatar"],[3,"click"],[3,"image"],["icon","user","zoom","",3,"image"],[3,"ngClass",4,"ngFor","ngForOf"],["plainText","",1,"d-block","text-truncate",3,"fields","fieldName","object","customValues"],[3,"image","address"]],template:function(e,t){1&e&&(I.Qb(0,"results-layout",0),I.Xb("update",(function(e){return t.update.emit(e)})),I.Bc(1,_r,3,4,"mobile-result",1),I.Bc(2,jr,7,7,"table",2),I.Bc(3,Xr,2,2,"tiled-result",3),I.Bc(4,Wr,2,3,"map-result",4),I.Pb()),2&e&&I.gc("results",t.results)("rendering$",t.rendering$)("resultType",t.resultType)("toAddress",t.address)("referencePoint",t.referencePoint)("toMarkerTitle",t.displayFunction())("toLink",t.canViewProfile?t.toLink:null)},directives:[Y.a,W.a,ee.a,Nr.a,wr.a,te.a,A.s,A.t,A.q,Fr.a,Ve.a,Lr.a,Br.a],encapsulation:2,changeDetection:0}),eo);function no(e,t){1&e&&I.Mb(0)}function io(e,t){if(1&e&&(I.Qb(0,"div",9),I.Qb(1,"label-value",10),I.Lb(2,"user-link",11),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.data.user)}}function ao(e,t){if(1&e&&I.Lb(0,"field-option",14),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("value",i.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)}}function ro(e,t){if(1&e&&(I.Qb(0,"div",9),I.Qb(1,"multi-selection-field",12),I.Bc(2,ao,1,4,"field-option",13),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("label",n.i18n.user.groupFilter),I.xb(1),I.gc("ngForOf",n.data.groups)}}function oo(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div",9),I.Lb(2,"multi-selection-field",15),I.Pb(),I.Qb(3,"div",9),I.Lb(4,"date-field",16),I.Pb(),I.Qb(5,"div",9),I.Lb(6,"date-field",17),I.Pb(),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.gc("label",n.i18n.general.status)("fieldOptions",n.statusOptions),I.xb(2),I.gc("label",n.i18n.user.creationBegin),I.xb(2),I.gc("label",n.i18n.user.creationEnd)}}function so(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.ac(1,"async"),I.Qb(2,"form",4),I.Qb(3,"div",5),I.Bc(4,io,3,2,"div",6),I.Bc(5,ro,3,2,"div",6),I.Bc(6,oo,7,4,"ng-container",7),I.ac(7,"async"),I.Pb(),I.Pb(),I.Pb(),I.Qb(8,"users-results",8),I.Xb("update",(function(e){return I.sc(n),I.Zb().update(e)})),I.ac(9,"async"),I.ac(10,"async"),I.Pb()}if(2&e){var i=I.Zb();I.gc("heading",i.self?i.i18n.user.title.myOperators:i.i18n.user.title.userOperators)("mobileHeading",i.self?i.i18n.user.mobileTitle.myOperators:i.i18n.user.mobileTitle.userOperators)("headingActions",I.bc(1,11,i.headingActions$)),I.xb(2),I.gc("formGroup",i.form),I.xb(2),I.gc("ngIf",!i.self),I.xb(1),I.gc("ngIf",(null==i.data.groups?null:i.data.groups.length)>1),I.xb(1),I.gc("ngIf",I.bc(7,13,i.layout.gtxxs$)),I.xb(2),I.gc("results",I.bc(9,15,i.results$))("rendering$",i.rendering$)("data",I.bc(10,17,i.data$))("resultKind","operator")}}var co,lo=((co=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).operatorsService=i,o.userHelper=a,o.ResultType=Sr.a,o.empty=y.h,o}return s(n,[{key:"getFormControlNames",value:function(){return["operatorGroups","statuses","creationBegin","creationEnd"]}},{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user||h.a.SELF,this.self=this.authHelper.isSelf(this.param),this.addSub(this.operatorsService.getUserOperatorsDataForSearch({user:this.param}).subscribe((function(t){e.statusOptions=e.userHelper.statusOptions(),!e.self&&t.canCreateNew&&(e.headingActions=[new Ie.c("registration",e.i18n.general.addNew,(function(){e.router.navigate(["/users",e.param,"operators","registration"])}),!0)]),e.data=t})))}},{key:"onDataInitialized",value:function(e){c(f(n.prototype),"onDataInitialized",this).call(this,e),Object(y.h)(e.fieldsInList)&&(e.fieldsInList=["display"])}},{key:"toSearchParams",value:function(e){var t=e;return t.user=this.param,t.creationPeriod=h.a.rangeFilter(e.creationBegin,e.creationEnd),delete e.customValues,t}},{key:"doSearch",value:function(e){return this.operatorsService.searchUserOperators$Response(e)}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.MY_OPERATORS)}}]),n}(Ue.a)).\u0275fac=function(e){return new(e||co)(I.Kb(I.r),I.Kb(rr.a),I.Kb(j.a))},co.\u0275cmp=I.Eb({type:co,selectors:[["search-user-operators"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],[4,"ngIf"],["resultType","list",3,"results","rendering$","data","resultKind","update"],[1,"col-12","col-md-6"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],["labelPosition","side","formControlName","operatorGroups",3,"label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],[3,"value","internalName","id","text"],["labelPosition","side","formControlName","statuses",3,"label","fieldOptions"],["labelPosition","side","formControlName","creationBegin","fieldSize","full",3,"label"],["labelPosition","side","formControlName","creationEnd","fieldSize","full",3,"label"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,no,1,0,"ng-container",1),I.Pb(),I.Bc(3,so,11,19,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,C.I,C.w,C.n,to,_.a,Gt.a,Ot.a,C.v,C.l,A.s,qe.a,He.a],pipes:[A.b],encapsulation:2,changeDetection:0}),co),uo=o("FUMw");function bo(e,t){if(1&e&&I.Lb(0,"input-field",7),2&e){var n=I.Zb();I.gc("label",n.i18n.password.oldPassword)}}var fo,go=function(e){var t=e.value;if(e.touched&&null!=t&&""!==t){var n=e.parent;if((null==n.get("newPassword")?"":n.get("newPassword").value)!==t)return{passwordsMatch:!0}}return null},mo=((fo=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).modalRef=i,o.passwordsService=a,o.done=new I.n,o}return s(n,[{key:"ngOnInit",value:function(){c(f(n.prototype),"ngOnInit",this).call(this),this.self=this.authHelper.isSelf(this.user),this.form=this.formBuilder.group({newPassword:[null,C.G.required],newPasswordConfirmation:[null,C.G.compose([C.G.required,go])]}),this.requireOld&&this.form.setControl("oldPassword",this.formBuilder.control(null,C.G.required))}},{key:"submit",value:function(){var e=this;if(Object(y.F)(this.form)){var t=this.form.value;t.checkConfirmation=!0,this.addSub(this.passwordsService.changePassword({user:this.param,type:this.type.id,body:t}).subscribe((function(){e.done.emit(),e.modalRef.hide()})))}}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||fo)(I.Kb(I.r),I.Kb(J.a),I.Kb(uo.a))},fo.\u0275cmp=I.Eb({type:fo,selectors:[["change-password-dialog"]],inputs:{param:"param",user:"user",type:"type",requireOld:"requireOld"},outputs:{done:"done"},features:[I.ub],decls:10,vars:10,consts:[[3,"formGroup"],["required","","focused","","formControlName","oldPassword","type","password",3,"label",4,"ngIf"],["required","","formControlName","newPassword","type","password",3,"label"],["required","","formControlName","newPasswordConfirmation","type","password",3,"label"],["forceRow",""],[3,"disabled","label","action"],["outline","",3,"label","action"],["required","","focused","","formControlName","oldPassword","type","password",3,"label"]],template:function(e,t){1&e&&(I.Qb(0,"h1"),I.Dc(1),I.Pb(),I.Qb(2,"form",0),I.Bc(3,bo,1,1,"input-field",1),I.Lb(4,"input-field",2),I.Lb(5,"input-field",3),I.Pb(),I.Qb(6,"actions",4),I.Qb(7,"action-button",5),I.Xb("action",(function(){return t.submit()})),I.ac(8,"async"),I.Pb(),I.Qb(9,"action-button",6),I.Xb("action",(function(){return t.modalRef.hide()})),I.Pb(),I.Pb()),2&e&&(I.xb(1),I.Fc(" ",t.self?t.i18n.password.title.changeSelf:t.i18n.password.title.changeUser,"\n"),I.xb(1),I.gc("formGroup",t.form),I.xb(1),I.gc("ngIf",t.requireOld),I.xb(1),I.gc("label",t.i18n.password.newPassword),I.xb(1),I.gc("label",t.i18n.password.passwordConfirmation),I.xb(2),I.gc("disabled",I.bc(8,8,t.requesting$))("label",t.i18n.general.submit),I.xb(2),I.gc("label",t.i18n.general.cancel))},directives:[C.I,C.w,C.n,A.t,qt.a,C.D,C.v,C.l,O.a,S.a,dn.a],pipes:[A.b],encapsulation:2,changeDetection:0}),fo),po=o("CNMR");function ho(e,t){1&e&&I.Mb(0)}function vo(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"user-info",7),I.Lb(2,"hr"),I.Nb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("user",n.data.user)}}function yo(e,t){1&e&&I.Lb(0,"hr",17)}function xo(e,t){1&e&&I.Lb(0,"avatar",18),2&e&&I.gc("size",64)}var Po=function(e){return{"mt-0":e}};function Io(e,t){if(1&e&&(I.Qb(0,"h2",19),I.Dc(1),I.Pb()),2&e){var n=I.Zb(),i=n.$implicit;I.gc("ngClass",I.jc(2,Po,n.first)),I.xb(1),I.Fc(" ",i.type.name,"")}}function ko(e,t){if(1&e&&(I.Qb(0,"div",20),I.Dc(1),I.ac(2,"dateTime"),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(2);I.xb(1),I.Fc(" ",i.i18n.password.statusSince(I.bc(2,1,n.date))," ")}}var Eo=function(e){return{"mb-3":e}};function Ao(e,t){if(1&e&&(I.Qb(0,"action-button",21),I.Xb("action",(function(){return t.$implicit.onClick()})),I.Pb()),2&e){var n=t.$implicit;I.gc("ngClass",I.jc(2,Eo,!t.last))("label",n.label)}}function Co(e,t){if(1&e&&(I.Ob(0),I.Bc(1,yo,1,0,"hr",8),I.Qb(2,"div",9),I.Qb(3,"div",10),I.Bc(4,xo,1,1,"avatar",11),I.ac(5,"async"),I.Pb(),I.Qb(6,"div",12),I.Bc(7,Io,2,4,"h2",13),I.Qb(8,"div"),I.Dc(9),I.Pb(),I.Bc(10,ko,3,3,"div",14),I.Pb(),I.Qb(11,"div",15),I.Bc(12,Ao,1,4,"action-button",16),I.Pb(),I.Pb(),I.Nb()),2&e){var n=t.$implicit,i=t.first,a=I.Zb(2);I.xb(1),I.gc("ngIf",!i),I.xb(3),I.gc("ngIf",I.bc(5,6,a.layout.gtxxs$)),I.xb(3),I.gc("ngIf",a.multiple),I.xb(2),I.Ec(a.status(n)),I.xb(1),I.gc("ngIf",n.date),I.xb(2),I.gc("ngForOf",a.actions(n))}}function Do(e,t){if(1&e&&I.Lb(0,"field-option",29),2&e){var n=t.$implicit;I.gc("value",n.internalName)("text",n.name)}}function Oo(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",22),I.Qb(1,"alert",23),I.Dc(2),I.Pb(),I.Qb(3,"form",24),I.Qb(4,"single-selection-field",25),I.Bc(5,Do,1,2,"field-option",26),I.Pb(),I.Lb(6,"input-field",27),I.Pb(),I.Qb(7,"actions"),I.Qb(8,"action-button",28),I.Xb("action",(function(){return I.sc(n),I.Zb(2).setSecurityAnswer()})),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("heading",i.i18n.password.title.securityAnswer)("mobileHeading",i.i18n.password.mobileTitle.securityAnswer),I.xb(2),I.Ec(i.i18n.securityQuestion.message),I.xb(1),I.gc("formGroup",i.securityAnswer),I.xb(1),I.gc("label",i.i18n.securityQuestion.question),I.xb(1),I.gc("ngForOf",i.data.dataForSetSecurityAnswer.securityQuestions),I.xb(1),I.gc("label",i.i18n.securityQuestion.answer),I.xb(2),I.gc("label",i.i18n.general.save)}}function So(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.Bc(1,vo,3,1,"ng-container",4),I.Bc(2,Co,13,8,"ng-container",5),I.Pb(),I.Bc(3,Oo,9,8,"page-content",6)),2&e){var n=I.Zb();I.gc("heading",n.title)("mobileHeading",n.mobileTitle)("last",!(null!=n.data&&n.data.dataForSetSecurityAnswer)),I.xb(1),I.gc("ngIf",n.data.user&&!n.self),I.xb(1),I.gc("ngForOf",n.data.passwords),I.xb(1),I.gc("ngIf",null==n.data?null:n.data.dataForSetSecurityAnswer)}}var Qo,No=((Qo=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).modal=i,o.passwordsService=a,o}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.passwordsService.getUserPasswordsListData({user:this.param}).subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){this.self=this.authHelper.isSelf(e.user),this.multiple=e.passwords.length>1,this.self?(this.title=this.multiple?this.i18n.password.title.manageMultipleSelf:this.i18n.password.title.manageSingleSelf,this.mobileTitle=this.multiple?this.i18n.password.mobileTitle.manageMultipleSelf:this.i18n.password.mobileTitle.manageSingleSelf):(this.title=this.multiple?this.i18n.password.title.manageMultipleUser:this.i18n.password.title.manageSingleUser,this.mobileTitle=this.multiple?this.i18n.password.mobileTitle.manageMultipleUser:this.i18n.password.mobileTitle.manageSingleUser),e.dataForSetSecurityAnswer&&(this.securityAnswer=this.formBuilder.group({securityQuestion:[null,C.G.required],securityAnswer:[null,C.G.required]}))}},{key:"actions",value:function(e){var t=this,n=[],i=e.permissions||{};return i.change&&n.push(new Ie.a(this.i18n.password.action.change,(function(){t.change(e)}))),i.changeGenerated&&n.push(new Ie.a(this.i18n.password.action.change,(function(){t.changeGenerated(e)}))),i.unblock&&n.push(new Ie.a(this.i18n.password.action.unblock,(function(){t.unblock(e)}))),i.generate&&n.push(new Ie.a(this.i18n.password.action.activate,(function(){t.generate(e)}))),i.enable&&n.push(new Ie.a(this.i18n.password.action.enable,(function(){t.enable(e)}))),i.disable&&n.push(new Ie.a(this.i18n.password.action.disable,(function(){t.disable(e)}))),n}},{key:"setSecurityAnswer",value:function(){var e=this;Object(y.F)(this.securityAnswer),this.securityAnswer.valid&&this.addSub(this.passwordsService.setSecurityAnswer({body:this.securityAnswer.value}).subscribe((function(){e.notification.snackBar(e.i18n.securityQuestion.set),e.reload()})))}},{key:"status",value:function(e){switch(e.status){case et.T.ACTIVE:return this.i18n.password.status.active;case et.T.DISABLED:return this.i18n.password.status.disabled;case et.T.EXPIRED:return this.i18n.password.status.expired;case et.T.INDEFINITELY_BLOCKED:return this.i18n.password.status.indefinitelyBlocked;case et.T.NEVER_CREATED:return this.i18n.password.status.neverCreated;case et.T.PENDING:return this.i18n.password.status.pending;case et.T.RESET:return this.i18n.password.status.reset;case et.T.TEMPORARILY_BLOCKED:return this.i18n.password.status.temporarilyBlocked}}},{key:"change",value:function(e){var t=this,n=this.modal.show(mo,{class:"modal-form",initialState:{param:this.param,type:e.type,user:this.data.user,requireOld:e.requireOldPasswordForChange}});this.addSub(n.content.done.subscribe((function(){t.notification.snackBar(t.i18n.password.action.changeDone(e.type.name)),t.reload()})))}},{key:"generate",value:function(e){var t=this;this.notification.confirm({title:this.i18n.password.action.activate,message:this.i18n.password.action.activateConfirm(e.type.name),callback:function(){return t.doGenerate(e)}})}},{key:"doGenerate",value:function(e){var t=this;this.addSub(this.passwordsService.generatePassword({type:e.type.id}).subscribe((function(n){t.notification.info(t.i18n.password.action.changeGeneratedDone({type:e.type.name,value:n})),t.reload()})))}},{key:"createDeviceConfirmation",value:function(e){return function(){return{type:et.s.GENERATE_PASSWORD,passwordType:e.type.id}}}},{key:"changeGenerated",value:function(e){var t=this;this.notification.confirm({title:this.i18n.password.action.change,message:this.i18n.password.action.changeGeneratedConfirm(e.type.name),createDeviceConfirmation:this.createDeviceConfirmation(e),passwordInput:this.data.confirmationPasswordInput,callback:function(n){return t.doChangeGenerated(e,n.confirmationPassword)}})}},{key:"doChangeGenerated",value:function(e,t){var n=this;this.addSub(this.passwordsService.changeGenerated({type:e.type.id,confirmationPassword:t}).subscribe((function(t){n.notification.info(n.i18n.password.action.changeGeneratedDone({type:e.type.name,value:t})),n.reload()})))}},{key:"unblock",value:function(e){var t=this;this.notification.confirm({title:this.i18n.password.action.unblock,message:this.i18n.password.action.unblockConfirm(e.type.name),callback:function(){return t.doUnblock(e)}})}},{key:"doUnblock",value:function(e){var t=this;this.addSub(this.passwordsService.unblockPassword({user:this.param,type:e.type.id}).subscribe((function(){t.notification.snackBar(t.i18n.password.action.unblockDone(e.type.name)),t.reload()})))}},{key:"enable",value:function(e){var t=this;this.notification.confirm({title:this.i18n.password.action.enable,message:this.i18n.password.action.enableConfirm(e.type.name),callback:function(){return t.doEnable(e)}})}},{key:"doEnable",value:function(e){var t=this;this.addSub(this.passwordsService.enablePassword({user:this.param,type:e.type.id}).subscribe((function(){t.notification.snackBar(t.i18n.password.action.enableDone(e.type.name)),t.reload()})))}},{key:"disable",value:function(e){var t=this;this.notification.confirm({title:this.i18n.password.action.disable,message:this.i18n.password.action.disableConfirm(e.type.name),callback:function(){return t.doDisable(e)}})}},{key:"doDisable",value:function(e){var t=this;this.addSub(this.passwordsService.disablePassword({user:this.param,type:e.type.id}).subscribe((function(){t.notification.snackBar(t.i18n.password.action.disableDone(e.type.name)),t.reload()})))}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.PASSWORDS)}}]),n}(v.a)).\u0275fac=function(e){return new(e||Qo)(I.Kb(I.r),I.Kb(J.b),I.Kb(uo.a))},Qo.\u0275cmp=I.Eb({type:Qo,selectors:[["manage-passwords"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading","last"],[4,"ngIf"],[4,"ngFor","ngForOf"],["hideBack","","last","",3,"heading","mobileHeading",4,"ngIf"],["labelCols","2",3,"user"],["class","mt-4",4,"ngIf"],[1,"row","no-gutters"],[1,"col-4","col-md-2"],["class","ml-2 mr-5 management","iconSize","64px","icon","vpn_key",3,"size",4,"ngIf"],[1,"col-8","col-md-7"],["class","border-0 mb-3",3,"ngClass",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"col-12","col-md-3","mt-3","mt-md-0"],["class","d-block ml-auto",3,"ngClass","label","action",4,"ngFor","ngForOf"],[1,"mt-4"],["iconSize","64px","icon","vpn_key",1,"ml-2","mr-5","management",3,"size"],[1,"border-0","mb-3",3,"ngClass"],[1,"mt-2"],[1,"d-block","ml-auto",3,"ngClass","label","action"],["hideBack","","last","",3,"heading","mobileHeading"],["type","info"],[3,"formGroup"],["formControlName","securityQuestion","required","",3,"label"],[3,"value","text",4,"ngFor","ngForOf"],["formControlName","securityAnswer","required","",3,"label"],[3,"label","action"],[3,"value","text"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,ho,1,0,"ng-container",1),I.Pb(),I.Bc(3,So,4,6,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,A.s,Q.a,Ve.a,A.q,S.a,po.a,C.I,C.w,C.n,Ge.a,C.v,C.l,C.D,qt.a,O.a,qe.a],pipes:[A.b,ae.a],encapsulation:2,changeDetection:0}),Qo),wo=o("GJcY");function Fo(e,t){1&e&&I.Mb(0)}function Lo(e,t){1&e&&I.Mb(0)}function Bo(e,t){1&e&&I.Mb(0)}var Ro=function(e,t){return{$implicit:e,title:t}},To=function(e,t){return{$implicit:e,title:t,readOnly:!0}};function Zo(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"page-content",3),I.ac(2,"async"),I.Lb(3,"user-info",4),I.Bc(4,Fo,1,0,"ng-container",5),I.Bc(5,Lo,1,0,"ng-container",5),I.Bc(6,Bo,1,0,"ng-container",5),I.Pb(),I.Nb()),2&e){var n=I.Zb(),i=I.qc(4);I.xb(1),I.gc("heading",n.i18n.product.title.list)("mobileHeading",n.i18n.product.mobileTitle.list)("headingActions",I.bc(2,10,n.headingActions$)),I.xb(2),I.gc("user",n.data.user),I.xb(1),I.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",I.kc(12,Ro,n.data.userProducts,n.i18n.product.assigned.individual)),I.xb(1),I.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",I.kc(15,To,n.data.groupProducts,n.i18n.product.assigned.group)),I.xb(1),I.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",I.kc(18,To,n.data.groupSetProducts,n.i18n.product.assigned.groupSet))}}function _o(e,t){if(1&e){var n=I.Rb();I.Qb(0,"div",13),I.Qb(1,"button",14),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(4).remove(t),e.stopPropagation(),e.preventDefault()})),I.Lb(2,"icon",15),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(5);I.xb(1),I.gc("tooltip",i.i18n.general.remove)}}function Mo(e,t){if(1&e&&(I.Qb(0,"div",10),I.Qb(1,"div",11),I.Dc(2),I.Pb(),I.Bc(3,_o,3,1,"div",12),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(3).readOnly,a=I.Zb();I.xb(2),I.Ec(n.name),I.xb(1),I.gc("ngIf",!i&&a.canRemove(n))}}function $o(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Mo,4,2,"div",9),I.Nb()),2&e){var n=I.Zb(2).$implicit;I.xb(1),I.gc("ngForOf",n)}}function Uo(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",14),I.Xb("click",(function(e){I.sc(n);var t=I.Zb().$implicit;return I.Zb(4).remove(t),e.stopPropagation()})),I.Lb(1,"icon",15),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("tooltip",i.i18n.general.remove)}}var Ho=function(e){return{"no-border":e}};function Go(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"tr"),I.Qb(2,"td",21),I.Dc(3),I.Pb(),I.Qb(4,"td",21),I.Dc(5),I.Pb(),I.Qb(6,"td",21),I.Dc(7),I.Pb(),I.Qb(8,"td",22),I.Bc(9,Uo,2,1,"button",23),I.Pb(),I.Pb(),I.Nb()),2&e){var n=t.$implicit,i=t.last,a=I.Zb(3).readOnly,r=I.Zb();I.xb(2),I.gc("ngClass",I.jc(8,Ho,i)),I.xb(1),I.Fc(" ",n.name," "),I.xb(1),I.gc("ngClass",I.jc(10,Ho,i)),I.xb(1),I.Fc(" ",r.resolveKindLabel(n.kind)," "),I.xb(1),I.gc("ngClass",I.jc(12,Ho,i)),I.xb(1),I.Fc(" ",null==n.userAccount?null:n.userAccount.name," "),I.xb(1),I.gc("ngClass",I.jc(14,Ho,i)),I.xb(1),I.gc("ngIf",!a&&r.canRemove(n))}}function qo(e,t){if(1&e&&(I.Qb(0,"table",16),I.Qb(1,"thead"),I.Qb(2,"th",17),I.Dc(3),I.Pb(),I.Qb(4,"th",18),I.Dc(5),I.Pb(),I.Qb(6,"th",18),I.Dc(7),I.Pb(),I.Lb(8,"th",19),I.Pb(),I.Qb(9,"tbody"),I.Bc(10,Go,10,16,"ng-container",20),I.Pb(),I.Pb()),2&e){var n=I.Zb(2).$implicit,i=I.Zb();I.xb(3),I.Ec(i.i18n.general.name),I.xb(2),I.Ec(i.i18n.general.type),I.xb(2),I.Fc("",i.i18n.product.userAccount," "),I.xb(3),I.gc("ngForOf",n)}}function Ko(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",6),I.Dc(2),I.Pb(),I.Bc(3,$o,2,1,"ng-container",7),I.ac(4,"async"),I.Bc(5,qo,11,4,"ng-template",null,8,I.Cc),I.Nb()),2&e){var n=I.qc(6),i=I.Zb().title,a=I.Zb();I.xb(2),I.Ec(i),I.xb(1),I.gc("ngIf",I.bc(4,3,a.layout.ltsm$))("ngIfElse",n)}}function Vo(e,t){if(1&e&&I.Bc(0,Ko,7,5,"ng-container",1),2&e){var n=t.$implicit,i=I.Zb();I.gc("ngIf",!i.empty(n))}}var jo,zo=((jo=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).productAssignmentService=i,a.empty=y.h,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user,this.addSub(this.productAssignmentService.getUserProductsData({user:this.user}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this,n=[];e.assignable&&n.push(new Ie.c("add",this.i18n.product.assignIndividualProduct,(function(){return t.assign()}))),e.history&&n.push(new Ie.c("history",this.i18n.general.viewHistory,(function(){return t.router.navigate(["/users",t.user,"product-assignment","history"])}))),this.headingActions=n}},{key:"resolveKindLabel",value:function(e){switch(e){case et.cb.ADMINISTRATOR:return this.i18n.product.kind.administrator;case et.cb.BROKER:return this.i18n.product.kind.broker;case et.cb.MEMBER:return this.i18n.product.kind.member}}},{key:"resolveMenu",value:function(){return this.menu.searchUsersMenu()}},{key:"assign",value:function(){var e=this;this.notification.confirm({title:this.i18n.product.assignIndividualProduct,labelPosition:"above",customFields:[{internalName:"products",name:this.i18n.product.product,type:et.p.SINGLE_SELECTION,control:et.n.SINGLE_SELECTION,hasValuesList:!0,defaultValue:this.data.assignable[0].id,possibleValues:this.data.assignable.map((function(e){return{id:e.id,value:e.name}})),required:!0}],callback:function(t){e.addSub(e.productAssignmentService.assignIndividualProduct({product:t.customValues.products,user:e.user}).subscribe((function(){e.notification.snackBar(e.i18n.product.productAssigned),e.reload()})))}})}},{key:"canRemove",value:function(e){return this.data.unassignable.find((function(t){return e.id===t||e.internalName===t}))}},{key:"remove",value:function(e){var t=this;this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:function(){t.addSub(t.productAssignmentService.unassignIndividualProduct({product:e.id,user:t.user}).subscribe((function(){t.notification.snackBar(t.i18n.general.removeItemDone),t.reload()})))}})}}]),n}(v.a)).\u0275fac=function(e){return new(e||jo)(I.Kb(I.r),I.Kb(wo.a))},jo.\u0275cmp=I.Eb({type:jo,selectors:[["list-product-assignment"]],features:[I.ub],decls:5,vars:4,consts:[[3,"ready"],[4,"ngIf"],["products",""],[3,"heading","mobileHeading","headingActions"],[3,"user"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mt-3","mb-2"],[4,"ngIf","ngIfElse"],["largeTable",""],["class","d-flex mb-2",4,"ngFor","ngForOf"],[1,"d-flex","mb-2"],[1,"cell-main"],["class","ml-auto text-right",4,"ngIf"],[1,"ml-auto","text-right"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","clear"],[1,"table","table-hover","small-height","mb-0"],["width","40%",1,"no-border"],["width","25%",1,"no-border"],["width","10%",1,"no-border"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"actions",3,"ngClass"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Zo,7,21,"ng-container",1),I.Pb(),I.Bc(3,Vo,1,1,"ng-template",null,2,I.Cc)),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,Q.a,A.A,A.s,N.b,ne.a,A.q],pipes:[A.b],encapsulation:2,changeDetection:0}),jo);function Xo(e,t){1&e&&I.Mb(0)}function Jo(e,t){if(1&e&&(I.Qb(0,"mobile-result"),I.Qb(1,"div",9),I.Dc(2),I.Pb(),I.Qb(3,"div",10),I.Dc(4),I.ac(5,"dateTime"),I.Pb(),I.Qb(6,"div",11),I.Dc(7),I.Pb(),I.Qb(8,"div",11),I.Dc(9),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(2);I.xb(2),I.Fc(" ",n.product.name," "),I.xb(2),I.Fc(" ",I.bc(5,6,n.date)," "),I.xb(3),I.Gc(" ",i.i18n.product.action," ",n.action===i.ProductAssignmentActionEnum.ASSIGN?i.i18n.product.assign:i.i18n.product.unassign," "),I.xb(2),I.Gc(" ",i.i18n.general.performedBy," ",n.by.display," ")}}function Yo(e,t){if(1&e&&(I.Qb(0,"tr"),I.Qb(1,"td"),I.Dc(2),I.ac(3,"dateTime"),I.Pb(),I.Qb(4,"td"),I.Dc(5),I.Pb(),I.Qb(6,"td"),I.Dc(7),I.Pb(),I.Qb(8,"td"),I.Dc(9),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(2),I.Ec(I.bc(3,4,n.date)),I.xb(3),I.Ec(n.product.name),I.xb(2),I.Fc(" ",n.action===i.ProductAssignmentActionEnum.ASSIGN?i.i18n.product.assign:i.i18n.product.unassign," "),I.xb(2),I.Ec(n.by.display)}}function Wo(e,t){if(1&e&&(I.Qb(0,"table",12),I.Qb(1,"thead"),I.Qb(2,"th"),I.Dc(3),I.Pb(),I.Qb(4,"th"),I.Dc(5),I.Pb(),I.Qb(6,"th"),I.Dc(7),I.Pb(),I.Qb(8,"th"),I.Dc(9),I.Pb(),I.Pb(),I.Qb(10,"tbody"),I.Bc(11,Yo,10,6,"tr",13),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(3),I.Ec(n.i18n.general.date),I.xb(2),I.Ec(n.i18n.product.product),I.xb(2),I.Ec(n.i18n.product.action),I.xb(2),I.Ec(n.i18n.general.performedBy),I.xb(2),I.gc("ngForOf",n.data.history)}}function es(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.Qb(1,"label-value",4),I.Lb(2,"user-link",5),I.Pb(),I.Pb(),I.Qb(3,"results-layout",6),I.Bc(4,Jo,10,8,"mobile-result",7),I.Bc(5,Wo,12,5,"table",8),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.i18n.product.title.history)("mobileHeading",n.i18n.product.mobileTitle.history),I.xb(1),I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.data.user),I.xb(1),I.gc("results",n.data.history)("onClick",n.onClick)}}var ts,ns,is=((ts=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).productAssignmentSerivce=i,a.ProductAssignmentActionEnum=et.bb,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user,this.addSub(this.productAssignmentSerivce.getUserProductsData({user:this.user,fields:["user","history"]}).subscribe((function(t){return e.data=t})))}},{key:"resolveMenu",value:function(e){return this.menu.searchUsersMenu(e.user)}},{key:"onClick",get:function(){return function(e){return null!=e}}}]),n}(X.a)).\u0275fac=function(e){return new(e||ts)(I.Kb(I.r),I.Kb(wo.a))},ts.\u0275cmp=I.Eb({type:ts,selectors:[["view-product-assignment-history"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading"],[3,"label"],[3,"user"],[3,"results","onClick"],[4,"mobileResult"],["class","table table-hover",4,"resultTable"],[1,"cell-main"],[1,"cell-date"],[1,"cell-text"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Xo,1,0,"ng-container",1),I.Pb(),I.Bc(3,es,6,6,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,_.a,Gt.a,Y.a,W.a,ee.a,te.a,A.s],pipes:[A.b,ae.a],encapsulation:2,changeDetection:0}),ts),as=o("zlpg"),rs=o("mMSl"),os=o("dt5f"),ss=o("9d5G"),cs=o("bER3"),ls=o("MYKl"),us=o("c/3O"),bs=["codeField"],ds=((ns=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).modalRef=i,o.phonesService=a,o.verified=new I.n,o.message$=new Ht.a(""),o.disabled=!1,o.code=o.formBuilder.control(null,C.G.required),o}return s(n,[{key:"ngOnInit",value:function(){c(f(n.prototype),"ngOnInit",this).call(this),this.message=this.i18n.phone.verify.message}},{key:"sendCode",value:function(){var e=this;this.addSub(this.phonesService.sendPhoneVerificationCode({id:this.phone.id}).subscribe((function(t){e.message=e.i18n.phone.verify.done(t),e.code.setValue(null),e.codeField.focus()})))}},{key:"verify",value:function(){var e=this;Object(y.F)(this.code)&&this.addSub(this.phonesService.verifyPhone({id:this.phone.id,code:this.code.value}).subscribe((function(t){switch(t){case et.l.CODE_NOT_SENT:case et.l.EXPIRED:e.notification.error(e.i18n.phone.error.verify.expired);break;case et.l.FAILED:e.notification.error(e.i18n.phone.error.verify.invalid);break;case et.l.MAX_ATTEMPTS_REACHED:e.notification.error(e.i18n.phone.error.verify.maxAttempts);break;case et.l.SUCCESS:e.disabled=!0,e.verified.emit(!0)}})))}},{key:"message",set:function(e){this.message$.next(e)}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||ns)(I.Kb(I.r),I.Kb(J.a),I.Kb(rs.a))},ns.\u0275cmp=I.Eb({type:ns,selectors:[["verify-phone"]],viewQuery:function(e,t){var n;1&e&&I.yc(bs,!0),2&e&&I.pc(n=I.Yb())&&(t.codeField=n.first)},inputs:{phone:"phone"},outputs:{verified:"verified"},features:[I.ub],decls:18,vars:12,consts:[[1,"row"],[1,"col-3","col-form-label"],["for","smsCode"],[1,"col-6"],["id","smsCode","fieldSize","4","type","number","focused","",3,"formControl"],["codeField",""],[1,"col-3"],[1,"d-block","w-100",3,"label","action"],[1,"mt-3","pb-1"],[3,"disabled","label","action"],["outline","",3,"label","action"]],template:function(e,t){1&e&&(I.Qb(0,"h1"),I.Dc(1),I.Pb(),I.Qb(2,"div",0),I.Qb(3,"div",1),I.Qb(4,"label",2),I.Dc(5),I.Pb(),I.Pb(),I.Qb(6,"div",3),I.Lb(7,"input-field",4,5),I.Pb(),I.Qb(9,"div",6),I.Qb(10,"action-button",7),I.Xb("action",(function(){return t.sendCode()})),I.Pb(),I.Pb(),I.Pb(),I.Qb(11,"div",8),I.Dc(12),I.ac(13,"async"),I.Pb(),I.Qb(14,"actions"),I.Qb(15,"action-button",9),I.Xb("action",(function(){return t.verify()})),I.ac(16,"async"),I.Pb(),I.Qb(17,"action-button",10),I.Xb("action",(function(){return t.modalRef.hide()})),I.Pb(),I.Pb()),2&e&&(I.xb(1),I.Fc(" ",t.i18n.phone.verify.title(t.phone.number),"\n"),I.xb(4),I.Fc(" ",t.i18n.phone.verify.code," "),I.xb(2),I.gc("formControl",t.code),I.xb(3),I.gc("label",t.i18n.phone.verify.send),I.xb(2),I.Ec(I.bc(13,8,t.message$)),I.xb(3),I.gc("disabled",I.bc(16,10,t.requesting$))("label",t.i18n.general.confirm),I.xb(2),I.gc("label",t.i18n.general.cancel))},directives:[qt.a,dn.a,C.v,C.k,S.a,O.a],pipes:[A.b],encapsulation:2,changeDetection:0}),ns),fs=o("IzEk"),gs=o("SxV6"),ms=o("pz1b"),ps=o("pBnU"),hs=o("sGzL"),vs=o("N7zh"),ys=o("CyT4"),xs=o("FE24"),Ps=o("z332"),Is=o("oj/z");function ks(e,t){if(1&e&&I.Lb(0,"avatar",21),2&e){var n=I.Zb(4);I.gc("image",n.images[0])("roundBorders",!1)}}function Es(e,t){if(1&e&&(I.Qb(0,"div",22),I.Dc(1),I.Pb()),2&e){var n=I.Zb(4);I.xb(1),I.Fc(" ",n.i18n.user.noImage," ")}}function As(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){return I.sc(n),I.Zb(5).removeAllImages()})),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("label",i.i18n.field.image.remove)}}function Cs(e,t){if(1&e){var n=I.Rb();I.Qb(0,"actions",23),I.Qb(1,"action-button",24),I.Xb("action",(function(){return I.sc(n),I.Zb(),I.qc(7).perform()})),I.Pb(),I.Bc(2,As,1,1,"action-button",25),I.Pb()}if(2&e){var i=I.Zb(4);I.xb(1),I.gc("label",i.i18n.field.image.upload),I.xb(1),I.gc("ngIf",i.images.length>0)}}function Ds(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"h2",14),I.Dc(2),I.Pb(),I.Qb(3,"div",15),I.Bc(4,ks,1,2,"avatar",16),I.Bc(5,Es,2,1,"div",17),I.Pb(),I.Qb(6,"image-upload",18,19),I.Xb("uploadDone",(function(e){return I.sc(n),I.Zb(3).onUploadDone(e)})),I.Pb(),I.Bc(8,Cs,3,2,"actions",20),I.ac(9,"async"),I.Nb()}if(2&e){var i=I.qc(7),a=I.Zb(3);I.xb(2),I.Fc(" ",a.i18n.user.title.image," "),I.xb(2),I.gc("ngIf",a.images.length>0),I.xb(1),I.gc("ngIf",0===a.images.length),I.xb(1),I.gc("owner",a.param),I.xb(2),I.gc("ngIf",a.canEdit("image")&&!1===I.bc(9,5,i.uploading$))}}function Os(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){return I.sc(n),I.Zb(),I.qc(11).perform()})),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("label",i.i18n.field.image.upload)}}function Ss(e,t){if(1&e&&(I.Qb(0,"div",33),I.Lb(1,"avatar",34),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(4);I.xb(1),I.gc("image",n)("roundBorders",!1)("additionalImages",i.images)}}function Qs(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div",35),I.Dc(2),I.Pb(),I.Nb()),2&e){var n=I.Zb(4);I.xb(2),I.Fc(" ",n.i18n.user.noImages," ")}}function Ns(e,t){if(1&e){var n=I.Rb();I.Qb(0,"div",36),I.Qb(1,"action-button",24),I.Xb("action",(function(){return I.sc(n),I.Zb(4).manageImages()})),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(4);I.xb(1),I.gc("label",i.i18n.field.image.manage)}}function ws(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"h2",26),I.Qb(2,"div",27),I.Dc(3),I.Pb(),I.Bc(4,Os,1,1,"action-button",25),I.ac(5,"async"),I.Pb(),I.Qb(6,"div",28),I.Bc(7,Ss,2,3,"div",29),I.Bc(8,Qs,3,1,"ng-container",4),I.Pb(),I.Bc(9,Ns,2,1,"div",30),I.Qb(10,"image-upload",31,32),I.Xb("uploadDone",(function(e){return I.sc(n),I.Zb(3).onUploadDone(e)})),I.Pb(),I.Nb()}if(2&e){var i=I.qc(11),a=I.Zb(3);I.xb(3),I.Fc(" ",a.i18n.user.title.images," "),I.xb(1),I.gc("ngIf",a.canUploadImages&&!1===I.bc(5,7,i.uploading$)),I.xb(3),I.gc("ngForOf",a.images),I.xb(1),I.gc("ngIf",0===a.images.length),I.xb(1),I.gc("ngIf",a.canEdit("image")&&a.images.length>0),I.xb(1),I.gc("owner",a.param)("max",a.data.imageConfiguration.maxImages)}}function Fs(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Ds,10,7,"ng-container",4),I.Bc(2,ws,12,9,"ng-container",4),I.Nb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("ngIf","single"===n.imagesAvailability),I.xb(1),I.gc("ngIf","multiple"===n.imagesAvailability)}}function Ls(e,t){if(1&e&&(I.Qb(0,"label-value",37),I.Lb(1,"user-link",38),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.operatorOwner),I.xb(1),I.gc("user",n.data.userConfiguration.details.user)}}function Bs(e,t){if(1&e&&I.Lb(0,"input-field",39),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.name)("required",n.canEdit("name"))}}function Rs(e,t){if(1&e&&I.Lb(0,"input-field",40),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.username)("required",n.canEdit("username"))}}function Ts(e,t){if(1&e&&I.Lb(0,"field-privacy",44),2&e){var n=I.Zb(3);I.gc("control",n.user.get("hiddenFields"))}}function Zs(e,t){if(1&e&&(I.Qb(0,"label-value",41),I.Lb(1,"input-field",42),I.Bc(2,Ts,1,1,"field-privacy",43),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.email)("kind",n.canEdit("email")?"field":"fieldView")("ignoreExtraCell",!n.canManagePrivacy("email")),I.xb(1),I.gc("required",n.canEdit("email"))}}function _s(e,t){if(1&e&&(I.Qb(0,"label-value",37),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.emailPending),I.xb(1),I.Fc(" ",n.data.userConfiguration.emailPendingValidation," ")}}function Ms(e,t){if(1&e&&I.Lb(0,"custom-field-input",50),2&e){var n=I.Zb(2).$implicit,i=I.Zb(2);I.gc("field",n)("formControlName",n.internalName)("binaryValues",i.data.userConfiguration.binaryValues)}}function $s(e,t){if(1&e&&I.Lb(0,"format-field-value",51),2&e){var n=I.Zb(2).$implicit,i=I.Zb(2);I.gc("fieldValue",i.fieldValue(n))}}function Us(e,t){if(1&e&&I.Lb(0,"field-privacy",52),2&e){var n=I.Zb(2).$implicit,i=I.Zb(2);I.gc("field",n.internalName)("control",i.user.get("hiddenFields"))}}function Hs(e,t){if(1&e&&(I.Qb(0,"label-value",46),I.Bc(1,Ms,1,3,"custom-field-input",47),I.Bc(2,$s,1,1,"ng-template",null,48,I.Cc),I.Bc(4,Us,1,2,"field-privacy",49),I.Pb()),2&e){var n=I.qc(3),i=I.Zb().$implicit,a=I.Zb(2);I.gc("label",i.name)("kind",a.canEdit(i)?"field":"fieldView")("labelPosition","boolean"===i.type?"sideForced":"auto")("ignoreExtraCell",!a.canManagePrivacy(i))("fieldSize",a.fieldSize(i))("required",i.required),I.xb(1),I.gc("ngIf",a.canEdit(i))("ngIfElse",n)}}function Gs(e,t){if(1&e&&(I.Ob(0,6),I.Bc(1,Hs,5,8,"label-value",45),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(2);I.gc("formGroup",i.user.get("customValues")),I.xb(1),I.gc("ngIf",i.canEdit(n)||!i.isEmpty(n))}}function qs(e,t){if(1&e&&I.Lb(0,"input-field",57),2&e){var n=I.Zb(3);I.gc("placeholder",n.data.phoneConfiguration.mobileExample)}}function Ks(e,t){if(1&e&&I.Dc(0),2&e){var n=I.Zb(3);I.Fc(" ",n.singleMobile.get("number").value," ")}}function Vs(e,t){if(1&e&&I.Lb(0,"field-privacy",58),2&e){var n=I.Zb(3);I.gc("control",n.singleMobile.get("hidden"))}}function js(e,t){if(1&e&&I.Lb(0,"boolean-field",61),2&e){var n=I.Zb(4);I.gc("label",n.i18n.phone.verified)("formControl",n.singleMobile.get("verified"))}}function zs(e,t){if(1&e&&(I.Qb(0,"label-value",37),I.Dc(1),I.Pb()),2&e){var n=I.Zb(4);I.gc("label",n.i18n.phone.verified),I.xb(1),I.Fc(" ",n.format.formatBoolean(n.singleMobile.get("verified").value)," ")}}function Xs(e,t){if(1&e&&(I.Ob(0),I.Bc(1,js,1,2,"boolean-field",59),I.Bc(2,zs,2,2,"ng-template",null,60,I.Cc),I.Nb()),2&e){var n=I.qc(3),i=I.Zb(3);I.xb(1),I.gc("ngIf",i.canEdit("phone"))("ngIfElse",n)}}function Js(e,t){if(1&e){var n=I.Rb();I.Qb(0,"boolean-field",64),I.Xb("click",(function(e){return I.sc(n),I.Zb(4).maybeVerify(e)})),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("label",i.i18n.phone.enabledSms)("formControl",i.singleMobile.get("enabledForSms"))}}function Ys(e,t){if(1&e&&(I.Qb(0,"label-value",37),I.Dc(1),I.Pb()),2&e){var n=I.Zb(4);I.gc("label",n.i18n.phone.enabledSms),I.xb(1),I.Fc(" ",n.format.formatBoolean(n.singleMobile.get("enabledForSms").value)," ")}}function Ws(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Js,1,2,"boolean-field",62),I.Bc(2,Ys,2,2,"ng-template",null,63,I.Cc),I.Nb()),2&e){var n=I.qc(3),i=I.Zb(3);I.xb(1),I.gc("ngIf",i.canEdit("phone"))("ngIfElse",n)}}function ec(e,t){if(1&e&&(I.Ob(0,6),I.Qb(1,"label-value",53),I.Bc(2,qs,1,1,"input-field",54),I.Bc(3,Ks,1,1,"ng-template",null,55,I.Cc),I.Bc(5,Vs,1,1,"field-privacy",56),I.Pb(),I.Bc(6,Xs,4,2,"ng-container",4),I.Bc(7,Ws,4,2,"ng-container",4),I.Nb()),2&e){var n=I.qc(4),i=I.Zb(2);I.gc("formGroup",i.singleMobile),I.xb(1),I.gc("label",i.i18n.phone.mobile)("required","required"===i.data.phoneConfiguration.mobileAvailability)("ignoreExtraCell",!i.canManagePrivacy("phone")),I.xb(1),I.gc("ngIf",i.canEdit("phone"))("ngIfElse",n),I.xb(4),I.gc("ngIf",i.phoneHasSms(i.singleMobileManage)),I.xb(1),I.gc("ngIf",i.showEnableForSms(i.singleMobile))}}function tc(e,t){if(1&e&&I.Lb(0,"input-field",57),2&e){var n=I.Zb(3);I.gc("placeholder",n.data.phoneConfiguration.landLineExample)}}function nc(e,t){if(1&e&&I.Dc(0),2&e){var n=I.Zb(3);I.Fc(" ",n.singleLandLine.get("number").value," ")}}function ic(e,t){if(1&e&&I.Lb(0,"field-privacy",58),2&e){var n=I.Zb(3);I.gc("control",n.singleLandLine.get("hidden"))}}function ac(e,t){if(1&e&&I.Lb(0,"input-field",66),2&e){var n=I.Zb(4);I.gc("label",n.i18n.phone.extension)}}function rc(e,t){if(1&e&&(I.Ob(0),I.Bc(1,ac,1,1,"input-field",65),I.Nb()),2&e){var n=t.ngIf;I.xb(1),I.gc("ngIf",!n.disabled||n.value)}}function oc(e,t){if(1&e&&(I.Ob(0,6),I.Qb(1,"label-value",53),I.Bc(2,tc,1,1,"input-field",54),I.Bc(3,nc,1,1,"ng-template",null,55,I.Cc),I.Bc(5,ic,1,1,"field-privacy",56),I.Pb(),I.Bc(6,rc,2,1,"ng-container",4),I.Nb()),2&e){var n=I.qc(4),i=I.Zb(2);I.gc("formGroup",i.singleLandLine),I.xb(1),I.gc("label",i.i18n.phone.landLine)("required","required"===i.data.phoneConfiguration.landLineAvailability)("ignoreExtraCell",!i.canManagePrivacy("address")),I.xb(1),I.gc("ngIf",i.canEdit("phone"))("ngIfElse",n),I.xb(4),I.gc("ngIf",i.data.phoneConfiguration.extensionEnabled&&i.singleLandLine.get("extension"))}}function sc(e,t){if(1&e&&I.Lb(0,"boolean-field",69),2&e){var n=I.Zb(3);I.gc("formControl",n.defineSingleAddress)("label",n.i18n.user.addressDefine)}}function cc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"static-map",75),I.Xb("imageLoaded",(function(){I.sc(n);var e=I.Zb(5);return e.mapShown(e.singleAddress)})),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("address",i.singleAddress.value)}}function lc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){I.sc(n);var e=I.Zb(6);return e.locateAddress(e.singleAddress)})),I.Pb()}if(2&e){var i=I.Zb(6);I.gc("label",i.i18n.general.mapView)}}function uc(e,t){if(1&e&&(I.Bc(0,lc,1,1,"action-button",76),I.ac(1,"async")),2&e){var n=I.Zb(5),i=I.qc(4);I.gc("ngIf",!1===I.bc(1,2,n.singleAddress.locating$))("ngIfElse",i)}}function bc(e,t){if(1&e&&(I.Qb(0,"label-value",72),I.Bc(1,cc,1,1,"static-map",73),I.Bc(2,uc,2,4,"ng-template",null,74,I.Cc),I.Pb()),2&e){var n=I.qc(3),i=I.Zb(4);I.gc("label",i.i18n.general.map),I.xb(1),I.gc("ngIf",null!=i.singleAddress.get("location").value.latitude)("ngIfElse",n)}}function dc(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"address-form",70),I.Bc(2,bc,4,3,"label-value",71),I.Nb()),2&e){var n=I.Zb(3);I.xb(1),I.gc("addressForm",n.singleAddress)("configuration",n.data.addressConfiguration)("managePrivacy",n.data.addressConfiguration.managePrivacy)("binaryValues",n.data.addressBinaryValues[null==n.data.addresses[0]?null:n.data.addresses[0].id]),I.xb(1),I.gc("ngIf",n.maps.enabled)}}function fc(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",67),I.Dc(2),I.Pb(),I.Bc(3,sc,1,2,"boolean-field",68),I.Bc(4,dc,3,5,"ng-container",4),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Ec(n.i18n.address.address),I.xb(1),I.gc("ngIf",n.canEdit("address")&&"required"!==n.data.addressConfiguration.availability),I.xb(1),I.gc("ngIf",n.defineSingleAddress.value)}}function gc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"div",83,84),I.Qb(2,"button",85),I.Xb("click",(function(){return I.sc(n),I.Zb(4).addLandLine()})),I.Dc(3),I.Pb(),I.Qb(4,"button",85),I.Xb("click",(function(){return I.sc(n),I.Zb(4).addMobile()})),I.Dc(5),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(4);I.xb(3),I.Fc(" ",i.i18n.user.phoneAddLandLine," "),I.xb(2),I.Fc(" ",i.i18n.user.phoneAddMobile," ")}}function mc(e,t){if(1&e&&(I.Qb(0,"div",80),I.Qb(1,"button",81),I.Dc(2),I.Pb(),I.Bc(3,gc,6,2,"div",82),I.Pb()),2&e){var n=I.Zb(3);I.xb(2),I.Fc(" ",n.i18n.user.phoneAdd," ")}}function pc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"div",86),I.Qb(1,"action-button",24),I.Xb("action",(function(){return I.sc(n),I.Zb(3).addLandLine()})),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(3);I.xb(1),I.gc("label",i.i18n.user.phoneAddLandLine)}}function hc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"div",86),I.Qb(1,"action-button",24),I.Xb("action",(function(){return I.sc(n),I.Zb(3).addMobile()})),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(3);I.xb(1),I.gc("label",i.i18n.user.phoneAddMobile)}}function vc(e,t){if(1&e&&(I.Qb(0,"div"),I.Dc(1),I.Pb()),2&e){var n=I.Zb(3);I.xb(1),I.Fc(" ",n.i18n.user.phoneNone," ")}}function yc(e,t){if(1&e&&I.Lb(0,"input-field",66),2&e){var n=I.Zb(5);I.gc("label",n.i18n.phone.extension)}}function xc(e,t){if(1&e&&(I.Ob(0),I.Bc(1,yc,1,1,"input-field",65),I.Nb()),2&e){var n=t.ngIf;I.xb(1),I.gc("ngIf",!n.disabled||n.value)}}function Pc(e,t){if(1&e&&I.Lb(0,"boolean-field",91),2&e){var n=I.Zb(5);I.gc("label",n.i18n.phone.verified)}}function Ic(e,t){if(1&e&&(I.Qb(0,"label-value",37),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2).$implicit,i=I.Zb(3);I.gc("label",i.i18n.phone.verified),I.xb(1),I.Fc(" ",i.format.formatBoolean(n.verified)," ")}}function kc(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Pc,1,1,"boolean-field",90),I.Bc(2,Ic,2,2,"ng-template",null,60,I.Cc),I.Nb()),2&e){var n=I.qc(3),i=I.Zb(4);I.xb(1),I.gc("ngIf",i.canEdit("phone"))("ngIfElse",n)}}function Ec(e,t){if(1&e){var n=I.Rb();I.Qb(0,"boolean-field",93),I.Xb("click",(function(e){I.sc(n);var t=I.Zb(2).$implicit;return I.Zb(3).maybeVerify(e,t.id)})),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("label",i.i18n.phone.enabledSms)}}function Ac(e,t){if(1&e&&(I.Qb(0,"label-value",37),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2).$implicit,i=I.Zb(3);I.gc("label",i.i18n.phone.enabledSms),I.xb(1),I.Fc(" ",i.format.formatBoolean(n.enabledForSms)," ")}}function Cc(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Ec,1,1,"boolean-field",92),I.Bc(2,Ac,2,2,"ng-template",null,63,I.Cc),I.Nb()),2&e){var n=I.qc(3),i=I.Zb(4);I.xb(1),I.gc("ngIf",i.canEdit("phone"))("ngIfElse",n)}}function Dc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){I.sc(n);var e=I.Zb(2).$implicit;return I.Zb(3).removePhone(e)})),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("label",i.i18n.user.phoneRemove)}}function Oc(e,t){if(1&e&&(I.Qb(0,"label-value",72),I.Qb(1,"div",94),I.Lb(2,"field-privacy",95),I.Bc(3,Dc,1,1,"action-button",25),I.ac(4,"async"),I.Pb(),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.gc("label",i.i18n.field.privacy.name),I.xb(2),I.gc("control",n.form.get("hidden")),I.xb(1),I.gc("ngIf",i.editableFields.has("phone")&&I.bc(4,3,i.layout.gtxxs$))}}function Sc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){I.sc(n);var e=I.Zb(2).$implicit;return I.Zb(3).removePhone(e)})),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("label",i.i18n.user.phoneRemove)}}var Qc=function(e){return{"mt-3":e}};function Nc(e,t){if(1&e&&(I.Qb(0,"div",96),I.Bc(1,Sc,1,1,"action-button",25),I.Pb()),2&e){var n=I.Zb(4);I.gc("ngClass",I.jc(2,Qc,!n.data.phoneConfiguration.managePrivacy)),I.xb(1),I.gc("ngIf",n.editableFields.has("phone"))}}function wc(e,t){1&e&&I.Lb(0,"hr")}function Fc(e,t){if(1&e&&(I.Ob(0,6),I.Lb(1,"input-field",87),I.Lb(2,"input-field",88),I.Bc(3,xc,2,1,"ng-container",4),I.Bc(4,kc,4,2,"ng-container",4),I.Bc(5,Cc,4,2,"ng-container",4),I.Bc(6,Oc,5,5,"label-value",71),I.Bc(7,Nc,2,4,"div",89),I.ac(8,"async"),I.Bc(9,wc,1,0,"hr",4),I.Nb()),2&e){var n=t.$implicit,i=t.last,a=I.Zb(3);I.gc("formGroup",n.form),I.xb(1),I.gc("id","phone_name"+n.idSuffix)("label",a.phoneNameLabel(n)),I.xb(1),I.gc("id","phone_number"+n.idSuffix)("label",a.phoneNumberLabel(n))("placeholder",a.phoneExample(n)),I.xb(1),I.gc("ngIf",a.hasExtension(n)&&n.form.get("extension")),I.xb(1),I.gc("ngIf","mobile"===n.kind&&a.phoneHasSms(n.form)),I.xb(1),I.gc("ngIf","mobile"===n.kind&&a.showEnableForSms(n.form)),I.xb(1),I.gc("ngIf",a.canManagePrivacy("phone")),I.xb(1),I.gc("ngIf",I.bc(8,12,a.layout.xxs$)||!a.data.phoneConfiguration.managePrivacy),I.xb(2),I.gc("ngIf",!i)}}function Lc(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",77),I.Qb(2,"div",27),I.Dc(3),I.Pb(),I.Bc(4,mc,4,1,"div",78),I.Bc(5,pc,2,1,"div",79),I.Bc(6,hc,2,1,"div",79),I.Pb(),I.Bc(7,vc,2,1,"div",4),I.Bc(8,Fc,10,14,"ng-container",11),I.Nb()),2&e){var n=I.Zb(2);I.xb(3),I.Fc(" ",n.i18n.user.title.phones," "),I.xb(1),I.gc("ngIf",n.canCreateLandLine&&n.canCreateMobile),I.xb(1),I.gc("ngIf",n.canCreateLandLine&&!n.canCreateMobile),I.xb(1),I.gc("ngIf",!n.canCreateLandLine&&n.canCreateMobile),I.xb(1),I.gc("ngIf",0==n.phones.length),I.xb(1),I.gc("ngForOf",n.phones)}}function Bc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){return I.sc(n),I.Zb(3).addAddress()})),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("label",i.i18n.user.addressAdd)}}function Rc(e,t){if(1&e&&(I.Qb(0,"div"),I.Dc(1),I.Pb()),2&e){var n=I.Zb(3);I.xb(1),I.Fc(" ",n.i18n.user.addressNone," ")}}function Tc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){I.sc(n);var e=I.Zb(2).$implicit;return I.Zb(3).removeAddress(e)})),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("label",i.i18n.user.addressRemove)}}function Zc(e,t){if(1&e&&(I.Qb(0,"label-value",72),I.Qb(1,"div",94),I.Lb(2,"field-privacy",95),I.Bc(3,Tc,1,1,"action-button",25),I.ac(4,"async"),I.Pb(),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.gc("label",i.i18n.field.privacy.name),I.xb(2),I.gc("control",n.form.get("hidden")),I.xb(1),I.gc("ngIf",i.editableFields.has("address")&&!i.maps.enabled&&I.bc(4,3,i.layout.gtxxs$))}}function _c(e,t){1&e&&I.Mb(0)}function Mc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"label-value",100),I.Qb(1,"static-map",75),I.Xb("imageLoaded",(function(){I.sc(n);var e=I.Zb().$implicit;return I.Zb(3).mapShown(e.form)})),I.Pb(),I.Bc(2,_c,1,0,"ng-container",101),I.ac(3,"async"),I.Pb()}if(2&e){var i=I.Zb().$implicit,a=I.Zb(3),r=I.qc(4);I.gc("label",a.i18n.general.map),I.xb(1),I.gc("address",i.form.value),I.xb(1),I.gc("ngIf",I.bc(3,4,i.form.locating$))("ngIfThen",r)}}function $c(e,t){1&e&&I.Lb(0,"div",106)}function Uc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){I.sc(n);var e=I.Zb(2).$implicit;return I.Zb(3).removeAddress(e)})),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("label",i.i18n.user.addressRemove)}}function Hc(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Lb(1,"div",107),I.Qb(2,"action-button",24),I.Xb("action",(function(){I.sc(n);var e=I.Zb(2).$implicit;return I.Zb(3).locateAddress(e.form)})),I.Pb(),I.Nb()}if(2&e){var i=I.Zb(5);I.xb(2),I.gc("label",i.i18n.general.mapView)}}function Gc(e,t){if(1&e&&(I.Qb(0,"div",102),I.Bc(1,$c,1,0,"div",103),I.ac(2,"async"),I.Qb(3,"div",104),I.Qb(4,"actions",105),I.Bc(5,Uc,1,1,"action-button",25),I.Bc(6,Hc,3,1,"ng-container",4),I.ac(7,"async"),I.Pb(),I.Pb(),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.xb(1),I.gc("ngIf",I.bc(2,3,i.layout.gtxs$)),I.xb(4),I.gc("ngIf",i.editableFields.has("address")),I.xb(1),I.gc("ngIf",null==n.form.get("location").value.latitude&&!1===I.bc(7,5,n.form.locating$))}}function qc(e,t){1&e&&I.Lb(0,"hr")}function Kc(e,t){if(1&e&&(I.Ob(0,6),I.Lb(1,"input-field",87),I.Lb(2,"address-form",97),I.Bc(3,Zc,5,5,"label-value",71),I.Bc(4,Mc,4,6,"label-value",98),I.ac(5,"async"),I.Bc(6,Gc,8,7,"div",99),I.ac(7,"async"),I.Bc(8,qc,1,0,"hr",4),I.Nb()),2&e){var n=t.$implicit,i=t.last,a=I.Zb(3);I.gc("formGroup",n.form),I.xb(1),I.gc("id","address_name"+n.idSuffix)("label",a.i18n.general.name),I.xb(1),I.gc("addressForm",n.form)("ignoreContactFields",1===a.addresses.length)("configuration",a.data.addressConfiguration)("idSuffix",n.idSuffix)("managePrivacy",!1)("binaryValues",a.data.addressBinaryValues[n.id]),I.xb(1),I.gc("ngIf",a.canManagePrivacy("address")),I.xb(1),I.gc("ngIf",a.maps.enabled&&(null!=n.form.get("location").value.latitude||I.bc(5,13,n.form.locating$))),I.xb(2),I.gc("ngIf",a.maps.enabled||I.bc(7,15,a.layout.xxs$)||!a.data.addressConfiguration.managePrivacy),I.xb(2),I.gc("ngIf",!i)}}function Vc(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",77),I.Qb(2,"div",27),I.Dc(3),I.Pb(),I.Qb(4,"div",86),I.Bc(5,Bc,1,1,"action-button",25),I.Pb(),I.Pb(),I.Bc(6,Rc,2,1,"div",4),I.Bc(7,Kc,9,17,"ng-container",11),I.Nb()),2&e){var n=I.Zb(2);I.xb(3),I.Fc(" ",n.i18n.user.title.addresses," "),I.xb(2),I.gc("ngIf",n.canCreateAddress),I.xb(1),I.gc("ngIf",0==n.data.addresses.length),I.xb(1),I.gc("ngForOf",n.addresses)}}function jc(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){return I.sc(n),I.Zb(3).addContactInfo()})),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("label",i.i18n.user.contactInfoAdd)}}function zc(e,t){if(1&e&&(I.Qb(0,"div"),I.Dc(1),I.Pb()),2&e){var n=I.Zb(3);I.xb(1),I.Fc(" ",n.i18n.user.contactInfoNone," ")}}function Xc(e,t){if(1&e&&I.Lb(0,"input-field",116),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.gc("id","contact-info_landLineExtension"+n.idSuffix)("label",i.i18n.phone.extension)}}function Jc(e,t){if(1&e&&I.Lb(0,"field-option",118),2&e){var n=I.Zb().$implicit;I.gc("value",n.id)("text",n.name)}}function Yc(e,t){if(1&e&&(I.Ob(0),I.Bc(1,Jc,1,2,"field-option",117),I.Nb()),2&e){var n=t.$implicit;I.xb(1),I.gc("ngIf",n.id)}}function Wc(e,t){if(1&e&&(I.Ob(0,6),I.Lb(1,"custom-field-input",119),I.Nb()),2&e){var n=t.$implicit,i=I.Zb().$implicit,a=I.Zb(3);I.gc("formGroup",i.form.get("customValues")),I.xb(1),I.gc("field",n)("formControlName",n.internalName)("binaryValues",a.data.contactInfoBinaryValues[i.id])}}function el(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",24),I.Xb("action",(function(){I.sc(n);var e=I.Zb(2).$implicit;return I.Zb(3).removeContactInfo(e)})),I.Pb()}if(2&e){var i=I.Zb(5);I.gc("label",i.i18n.user.contactInfoRemove)}}function tl(e,t){if(1&e&&(I.Qb(0,"label-value",72),I.Qb(1,"div",94),I.Lb(2,"field-privacy",95),I.Bc(3,el,1,1,"action-button",25),I.ac(4,"async"),I.Pb(),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.gc("label",i.i18n.field.privacy.name),I.xb(2),I.gc("control",n.form.get("hidden")),I.xb(1),I.gc("ngIf",I.bc(4,3,i.layout.gtxxs$))}}function nl(e,t){if(1&e){var n=I.Rb();I.Qb(0,"div",36),I.Qb(1,"action-button",24),I.Xb("action",(function(){I.sc(n);var e=I.Zb().$implicit;return I.Zb(3).removeContactInfo(e)})),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(4);I.xb(1),I.gc("label",i.i18n.user.contactInfoRemove)}}function il(e,t){1&e&&I.Lb(0,"hr")}function al(e,t){if(1&e&&(I.Ob(0,6),I.Lb(1,"images-field",108),I.Lb(2,"input-field",109),I.Lb(3,"input-field",110),I.Lb(4,"input-field",111),I.Lb(5,"input-field",112),I.Bc(6,Xc,1,2,"input-field",113),I.Qb(7,"single-selection-field",114),I.Bc(8,Yc,2,1,"ng-container",115),I.Pb(),I.Bc(9,Wc,2,4,"ng-container",11),I.Bc(10,tl,5,5,"label-value",71),I.Bc(11,nl,2,1,"div",30),I.ac(12,"async"),I.Bc(13,il,1,0,"hr",4),I.Nb()),2&e){var n=t.$implicit,i=t.last,a=I.Zb(3);I.gc("formGroup",n.form),I.xb(1),I.gc("label",a.i18n.general.image)("initialImages",null==a.data.contactInfoBinaryValues[n.id]?null:a.data.contactInfoBinaryValues[n.id].image),I.xb(1),I.gc("id","contact-info_name"+n.idSuffix)("label",a.i18n.general.name),I.xb(1),I.gc("id","contact-info_email"+n.idSuffix)("label",a.i18n.user.email),I.xb(1),I.gc("id","contact-info_mobilePhone"+n.idSuffix)("label",a.i18n.phone.mobile),I.xb(1),I.gc("id","contact-info_landLinePhone"+n.idSuffix)("label",a.i18n.phone.landLine),I.xb(1),I.gc("ngIf",a.data.phoneConfiguration.extensionEnabled),I.xb(1),I.gc("id","contact-info_address"+n.idSuffix)("label",a.i18n.address.address),I.xb(1),I.gc("ngForOf",a.data.addresses),I.xb(1),I.gc("ngForOf",a.data.contactInfoConfiguration.customFields),I.xb(1),I.gc("ngIf",a.canManagePrivacy("contactInfo")),I.xb(1),I.gc("ngIf",I.bc(12,19,a.layout.xxs$)||!a.data.contactInfoConfiguration.managePrivacy),I.xb(2),I.gc("ngIf",!i)}}function rl(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",77),I.Qb(2,"div",27),I.Dc(3),I.Pb(),I.Qb(4,"div",86),I.Bc(5,jc,1,1,"action-button",25),I.Pb(),I.Pb(),I.Bc(6,zc,2,1,"div",4),I.Bc(7,al,14,21,"ng-container",11),I.Nb()),2&e){var n=I.Zb(2);I.xb(3),I.Fc(" ",n.i18n.user.title.contactInfos," "),I.xb(2),I.gc("ngIf",n.canCreateContactInfo),I.xb(1),I.gc("ngIf",0==n.contactInfos.length),I.xb(1),I.gc("ngForOf",n.contactInfos)}}function ol(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.ac(1,"async"),I.Bc(2,Fs,3,2,"ng-container",4),I.Qb(3,"h2",5),I.Dc(4),I.Pb(),I.Ob(5,6),I.Bc(6,Ls,2,2,"label-value",7),I.Bc(7,Bs,1,2,"input-field",8),I.Bc(8,Rs,1,2,"input-field",9),I.Bc(9,Zs,3,4,"label-value",10),I.Bc(10,_s,2,2,"label-value",7),I.Nb(),I.Bc(11,Gs,2,2,"ng-container",11),I.Bc(12,ec,8,8,"ng-container",12),I.Bc(13,oc,7,7,"ng-container",12),I.Bc(14,fc,5,3,"ng-container",4),I.Bc(15,Lc,9,6,"ng-container",4),I.Bc(16,Vc,8,4,"ng-container",4),I.Bc(17,rl,8,4,"ng-container",4),I.Qb(18,"actions"),I.Qb(19,"action-button",13),I.Xb("action",(function(){return I.sc(n),I.Zb().saveOrConfirm()})),I.ac(20,"async"),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb();I.gc("heading",i.i18n.user.title.editProfile)("mobileHeading",i.i18n.user.mobileTitle.editProfile)("headingActions",I.bc(1,21,i.headingActions$)),I.xb(2),I.gc("ngIf","disabled"!==i.imagesAvailability),I.xb(1),I.gc("ngClass","disabled"===i.imagesAvailability?"border-0 mt-2 mt-md-0":null),I.xb(1),I.Fc(" ",i.i18n.user.title.fields," "),I.xb(1),I.gc("formGroup",i.user),I.xb(1),I.gc("ngIf",i.operatorOfManagedUser),I.xb(1),I.gc("ngIf",i.hasField("name")),I.xb(1),I.gc("ngIf",i.hasField("username")),I.xb(1),I.gc("ngIf",i.hasField("email")),I.xb(1),I.gc("ngIf",i.hasField("email")&&i.data.userConfiguration.emailPendingValidation),I.xb(1),I.gc("ngForOf",null==i.data.userConfiguration?null:i.data.userConfiguration.customFields),I.xb(1),I.gc("ngIf",i.singleMobile),I.xb(1),I.gc("ngIf",i.singleLandLine),I.xb(1),I.gc("ngIf",i.singleAddress),I.xb(1),I.gc("ngIf","multiple"===i.landLineAvailability||"multiple"===i.mobileAvailability),I.xb(1),I.gc("ngIf","multiple"===i.addressAvailability),I.xb(1),I.gc("ngIf","disabled"!==i.contactInfoAvailability),I.xb(2),I.gc("disabled",I.bc(20,23,i.requesting$))("label",i.i18n.general.save)}}function sl(e,t){1&e&&I.Lb(0,"spinner")}var cl,ll=["name","username","email"],ul=0,bl=((cl=function(t){l(a,t);var i=b(a);function a(e,t,n,o,s,c,l,u){var b;return r(this,a),(b=i.call(this,e)).usersService=t,b.imagesService=n,b.phonesService=o,b.maps=s,b.addressHelper=c,b.modal=l,b.changeDetector=u,b.ConfirmationMode=ss.a,b.ready$=new Ht.a(!1),b.confirmationMode$=new Ht.a(null),b.createLandLinePhones=[],b.modifyLandLinePhones=[],b.createMobilePhones=[],b.modifyMobilePhones=[],b.createAddresses=[],b.modifyAddresses=[],b.createContactInfos=[],b.modifyContactInfos=[],b}return s(a,[{key:"ngOnInit",value:function(){var e=this;c(f(a.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user||h.a.SELF,this.createDeviceConfirmation=function(){return{type:et.s.EDIT_PROFILE}},this.headingActions=[new Ie.c("search",this.i18n.general.view,(function(){return e.router.navigate(["users",e.param,"profile"])}),!0)],this.addSub(this.usersService.getDataForEditFullProfile({user:this.param}).subscribe((function(t){e.data=t;var n=t.userConfiguration.role,i=t.userConfiguration.details,a=e.authHelper.isSelf(i);e.byManager=!e.authHelper.isSelfOrOwner(i),e.operatorOfManagedUser="operator"===n&&!e.authHelper.isSelf(i.user),a&&e.login.user$.next({id:e.login.user.id,display:t.userConfiguration.details.display,image:Object(y.h)(t.images)?null:t.images[0]}),e.initialize(t),e.canConfirm=e.authHelper.canConfirm(t.confirmationPasswordInput),e.canConfirm||(e.notification.warning(e.authHelper.getConfirmationMessage(t.confirmationPasswordInput)),e.router.navigate(["users","profile"])),e.ready$.next(!0)})))}},{key:"locateControl",value:function(e){return Object(y.t)(this,e)}},{key:"hasField",value:function(e){return this.enabledFields.has(e)}},{key:"isRequired",value:function(e){if(!this.canEdit(e))return!1;if("name"===e||"username"===e)return!0;if("email"===e)return this.data.userConfiguration.emailRequired;var t=this.userCustomFields.get(e);return t&&t.required}},{key:"fieldName",value:function(e){return"string"==typeof e?e:e.internalName}},{key:"isEmpty",value:function(e){var t=this.fieldName(e);if("string"==typeof e)return Object(y.h)(this.user.get(t).value);var n=this.user.get("customValues");return!n||Object(y.h)(n.get(t).value)}},{key:"canEdit",value:function(e){return this.editableFields.has(this.fieldName(e))}},{key:"canManagePrivacy",value:function(e){if(!this.data.userConfiguration.enablePrivacy)return!1;switch(e){case"phone":return this.data.phoneConfiguration.managePrivacy;case"address":return this.data.addressConfiguration.managePrivacy;case"contactInfo":return this.data.contactInfoConfiguration.managePrivacy;default:return this.managePrivacyFields.has(this.fieldName(e))}}},{key:"getAvailability",value:function(e){return null==e||e<=0?"disabled":1===e?"single":"multiple"}},{key:"saveOrConfirm",value:function(){var e=this;this.data.confirmationPasswordInput?this.notification.confirm({title:this.i18n.user.title.confirmation,passwordInput:this.data.confirmationPasswordInput,createDeviceConfirmation:this.createDeviceConfirmation,callback:function(t){e.save(t.confirmationPassword)}}):this.save()}},{key:"save",value:function(e){var t=this,n=new C.m({user:this.user,createLandLinePhones:new C.g(this.createLandLinePhones),modifyLandLinePhones:new C.g(this.modifyLandLinePhones),createMobilePhones:new C.g(this.createMobilePhones),modifyMobilePhones:new C.g(this.modifyMobilePhones),createAddresses:new C.g(this.createAddresses),modifyAddresses:new C.g(this.modifyAddresses),createContactInfos:new C.g(this.createContactInfos),modifyContactInfos:new C.g(this.modifyContactInfos)});!e&&this.confirmationPassword&&(n.setControl("confirmationPassword",this.confirmationPassword),e=this.confirmationPassword.value),Object(y.F)(n)&&this.addSub(this.usersService.saveUserFullProfile({user:this.param,confirmationPassword:e,body:this.editForSubmit()}).subscribe((function(){t.notification.snackBar(t.i18n.user.profileSaved),t.reload(),Object(y.y)()})))}},{key:"editForSubmit",value:function(){var e={user:Object(y.s)(this.user)?this.user.value:null,createLandLinePhones:this.createLandLinePhones.map((function(e){return e.value})),modifyLandLinePhones:this.modifyLandLinePhones.map((function(e){return e.value})),createMobilePhones:this.createMobilePhones.map((function(e){return e.value})),modifyMobilePhones:this.modifyMobilePhones.map((function(e){return e.value})),removePhones:this.removedPhones,createAddresses:this.createAddresses.map((function(e){return e.value})),modifyAddresses:this.modifyAddresses.map((function(e){return e.value})),removeAddresses:this.removedAddresses,createContactInfos:this.createContactInfos.map((function(e){return e.value})),modifyContactInfos:this.modifyContactInfos.map((function(e){return e.value})),removeContactInfos:this.removedContactInfos};if("single"===this.mobileAvailability){var t=this.singleMobile.value,n=t.id;n?Object(y.h)(t.number)?e.removePhones.push(n):Object(y.s)(this.singleMobile)&&(e.modifyMobilePhones=[t]):Object(y.h)(t.number)||(e.createMobilePhones=[t])}if("single"===this.landLineAvailability){var i=this.singleLandLine.value,a=i.id;a?Object(y.h)(i.number)?e.removePhones.push(a):Object(y.s)(this.singleLandLine)&&(e.modifyLandLinePhones=[i]):Object(y.h)(i.number)||(e.createLandLinePhones=[i])}if("single"===this.addressAvailability){var r=this.singleAddress.value,o=r.id,s=this.defineSingleAddress.value;o?s?Object(y.s)(this.singleAddress)&&(e.modifyAddresses=[r]):e.removeAddresses.push(o):s&&(e.createAddresses=[r])}return e}},{key:"initialize",value:function(e){var t=this;this.userCustomFields=new Map,this.enabledFields=new Set,this.editableFields=new Set,this.managePrivacyFields=new Set,this.removedPhones=[],this.removedAddresses=[],this.removedContactInfos=[],e.contactInfoConfiguration&&e.contactInfoConfiguration.availability!==et.i.DISABLED&&(e.addressConfiguration.contactInfoEnabled=!0,e.addressConfiguration.contactInfoFields=e.contactInfoConfiguration.customFields);var n=e.userConfiguration.profileFieldActions,i=function(e){if(!n.hasOwnProperty(e))return"continue";t.enabledFields.add(e);var i=n[e];i.edit&&t.editableFields.add(e),i.managePrivacy&&t.managePrivacyFields.add(e);var a=t.data.userConfiguration.customFields.find((function(t){return t.internalName===e}));a&&t.userCustomFields.set(e,a)};for(var a in n)i(a);this.user=this.buildUserForm(),e.confirmationPasswordInput&&(this.confirmationPassword=this.formBuilder.control("",C.G.required)),this.images=this.data.images.slice(),this.phones=[],"single"===this.mobileAvailability?(this.singleMobileManage=Object(y.h)(e.mobilePhones)?e.phoneConfiguration.mobilePhone:e.mobilePhones[0],this.singleMobile=this.buildMobileForm(this.singleMobileManage)):(e.mobilePhones||[]).forEach((function(e){var n=t.buildMobileForm(e);"multiple"===t.mobileAvailability&&(t.phones.push(e),t.addSub(n.valueChanges.subscribe((function(){t.modifyMobilePhones.includes(n)||t.modifyMobilePhones.push(n)}))))})),"single"===this.landLineAvailability?(this.singleLandLineManage=Object(y.h)(e.landLinePhones)?e.phoneConfiguration.landLinePhone:e.landLinePhones[0],this.singleLandLine=this.buildLandLineForm(this.singleLandLineManage)):(e.landLinePhones||[]).forEach((function(e){var n=t.buildLandLineForm(e);"multiple"===t.landLineAvailability&&(t.phones.push(e),t.addSub(n.valueChanges.subscribe((function(){t.modifyLandLinePhones.includes(n)||t.modifyLandLinePhones.push(n)}))))})),"single"===this.addressAvailability?(this.defineSingleAddress=this.formBuilder.control(!Object(y.h)(e.addresses)||"required"===e.addressConfiguration.availability),this.singleAddressManage=Object(y.h)(e.addresses)?e.addressConfiguration.address:e.addresses[0],this.singleAddress=this.buildAddressForm(this.singleAddressManage)):((e.addresses||[]).forEach((function(e){var n=t.buildAddressForm(e);"multiple"===t.addressAvailability&&t.addSub(n.valueChanges.subscribe((function(){t.modifyAddresses.includes(n)||t.modifyAddresses.push(n)})))})),this.addresses=(e.addresses||[]).slice()),(e.contactInfos||[]).forEach((function(e){var n=t.buildContactInfoForm(e);t.addSub(n.valueChanges.subscribe((function(){t.modifyContactInfos.includes(n)||t.modifyContactInfos.push(n)})))})),this.contactInfos=(e.contactInfos||[]).slice()}},{key:"buildUserForm",value:function(){var e,t=this,i=this.data.userConfiguration,a=this.data.user,r=this.formBuilder.group({version:a.version,hiddenFields:[a.hiddenFields||[]]}),o=n(ll);try{for(o.s();!(e=o.n()).done;){var s=e.value;this.hasField(s)?r.setControl(s,this.formBuilder.control({value:a[s],disabled:!this.canEdit(s)},this.isRequired(s)?C.G.required:null)):r.removeControl(s)}}catch(c){o.e(c)}finally{o.f()}return r.setControl("customValues",this.fieldHelper.customValuesFormGroup(i.customFields,{currentValues:a.customValues,disabledProvider:function(e){return!t.canEdit(e.internalName)}})),r}},{key:"stampDataAndInitForm",value:function(e,t){e.idSuffix="_"+(e.id||ul++),e.form=t,t.locating$=new Ht.a(!1),t.patchValue(e)}},{key:"buildLandLineForm",value:function(e){e.kind=et.Z.LAND_LINE;var t=this.data.phoneConfiguration,n=this.buildPhoneForm(1===t.maxLandLines,t.landLineAvailability===et.i.REQUIRED);if(t.extensionEnabled){var i=this.formBuilder.control(null);this.editableFields.has("phone")||i.disable(),n.setControl("extension",i)}return this.stampDataAndInitForm(e,n),n}},{key:"buildMobileForm",value:function(e){e.kind=et.Z.MOBILE;var t=this.data.phoneConfiguration,n=this.buildPhoneForm(1===t.maxMobiles,t.mobileAvailability===et.i.REQUIRED);return t.smsEnabled&&(n.setControl("verified",this.formBuilder.control(e.verified)),n.setControl("enabledForSms",this.formBuilder.control(e.enabledForSms))),this.stampDataAndInitForm(e,n),n}},{key:"buildPhoneForm",value:function(e,t){var n=this.formBuilder.group({id:null,version:null,hidden:null,name:[null,C.G.required],number:[null,!e||t?C.G.required:null]});return this.editableFields.has("phone")||n.disable(),n}},{key:"buildAddressForm",value:function(e){var t=this,i=this.data.addressConfiguration,a=this.addressHelper.addressFormGroup(i);this.stampDataAndInitForm(e,a);var r,o=n(i.enabledFields);try{var s=function(){var n=r.value,i=e[n]||null;t.addSub(a.get(n).valueChanges.subscribe((function(e){i!==e&&a.get("location").patchValue({latitude:null,longitude:null}),i=e})))};for(o.s();!(r=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}return this.editableFields.has("address")||a.disable(),a}},{key:"buildContactInfoForm",value:function(e){var t=this.data.contactInfoConfiguration,n=this.formBuilder.group({id:null,version:null,hidden:null,name:[null,C.G.required],image:null,email:null,mobilePhone:null,landLinePhone:null,landLineExtension:null,address:null});return n.setControl("customValues",this.fieldHelper.customValuesFormGroup(t.customFields)),this.stampDataAndInitForm(e,n),n}},{key:"phoneNameLabel",value:function(e){return e.kind===et.Z.LAND_LINE?this.i18n.phone.nameLandLine:this.i18n.phone.nameMobile}},{key:"phoneExample",value:function(e){return e.kind===et.Z.LAND_LINE?this.data.phoneConfiguration.landLineExample:this.data.phoneConfiguration.mobileExample}},{key:"phoneNumberLabel",value:function(e){return e.kind===et.Z.LAND_LINE?this.i18n.phone.numberLandLine:this.i18n.phone.numberMobile}},{key:"phoneHasSms",value:function(e){return!!this.data.phoneConfiguration.smsEnabled&&e.id&&e.kind===et.Z.MOBILE&&e.number===e.form.value.number}},{key:"hasExtension",value:function(e){return this.data.phoneConfiguration.extensionEnabled&&e.kind===et.Z.LAND_LINE}},{key:"addMobile",value:function(){var t=Object(P.a)(this.data.phoneConfiguration.mobilePhone);t.name="",this.createMobilePhones.push(this.buildMobileForm(t)),this.phones=[t].concat(e(this.phones)),this.setFocus("phone_name",t)}},{key:"addLandLine",value:function(){var t=Object(P.a)(this.data.phoneConfiguration.landLinePhone);t.name="",this.createLandLinePhones.push(this.buildLandLineForm(t)),this.phones=[t].concat(e(this.phones)),this.setFocus("phone_name",t)}},{key:"addAddress",value:function(){var t=Object(P.a)(this.data.addressConfiguration.address);t.name="",this.createAddresses.push(this.buildAddressForm(t)),this.addresses=[t].concat(e(this.addresses)),this.setFocus("address_name",t)}},{key:"addContactInfo",value:function(){var t=Object(P.a)(this.data.contactInfoConfiguration.contactInfo);this.createContactInfos.push(this.buildContactInfoForm(t)),this.contactInfos=[t].concat(e(this.contactInfos)),this.setFocus("contact-info_name",t)}},{key:"removePhone",value:function(e){this.phones=this.phones.filter((function(t){return t!==e}));var t=e.id;if(t)this.removedPhones.push(t);else{var n=e.form;this.createMobilePhones=this.createMobilePhones.filter((function(e){return e!==n})),this.createLandLinePhones=this.createLandLinePhones.filter((function(e){return e!==n}))}}},{key:"removeAddress",value:function(e){this.addresses=this.addresses.filter((function(t){return t!==e}));var t=e.id;if(t)this.removedAddresses.push(t);else{var n=e.form;this.createAddresses=this.createAddresses.filter((function(e){return e!==n}))}}},{key:"removeContactInfo",value:function(e){this.contactInfos=this.contactInfos.filter((function(t){return t!==e}));var t=e.id;if(t)this.removedContactInfos.push(t);else{var n=e.form;this.createContactInfos=this.createContactInfos.filter((function(e){return e!==n}))}}},{key:"setFocus",value:function(e,t){var n=e+t.idSuffix;setTimeout((function(){return document.getElementById(n).focus()}),10)}},{key:"showEnableForSms",value:function(e){return!!this.data.phoneConfiguration.smsEnabled&&(!this.byManager||e.value.verified)}},{key:"maybeVerify",value:function(e,t){if(!this.byManager){var n;if(null==(n=this.singleMobile?this.singleMobileManage:this.phones.find((function(e){return e.id===t}))))throw new Error("Mobile phone not found: "+t);n.verified||(this.verify(n),e.preventDefault(),e.stopPropagation())}}},{key:"verify",value:function(e){var t=this,n=this.modal.show(ds,{class:"modal-form",initialState:{phone:e}});this.addSub(n.content.verified.pipe(Object(fs.a)(1)).subscribe((function(i){i&&t.phonesService.getPhoneDataForEdit({id:e.id,fields:["phone"]}).subscribe((function(i){var a=i.phone;a.id=e.id,a.enabledForSms=!0;var r=t.buildMobileForm(a);r.markAsTouched();var o=(t.phones||[]).findIndex((function(t){return t.id===e.id}));if(o>=0){var s=t.phones.slice();s[o]=a,t.phones=s;var c=t.modifyMobilePhones.findIndex((function(t){return t.value.id===e.id})),l=t.modifyMobilePhones.slice();c>=0?l[c]=r:l.push(r),t.modifyMobilePhones=l}t.singleMobile&&(t.singleMobile=r),n.hide(),t.changeDetector.detectChanges()}))})))}},{key:"onUploadDone",value:function(t){this.images=[].concat(e(this.images),e(t)),this.changeDetector.detectChanges()}},{key:"manageImages",value:function(){var e=this,t=this.modal.show(cs.a,{class:"modal-form",initialState:{images:this.images}});t.content.result.pipe(Object(gs.a)()).subscribe((function(i){if(!Object(y.h)(i.removedImages)){var a,r=n(i.removedImages);try{for(r.s();!(a=r.n()).done;){var o=a.value;e.addSub(e.imagesService.deleteImage({idOrKey:o}).subscribe())}}catch(s){r.e(s)}finally{r.f()}e.images=e.images.filter((function(e){return!i.removedImages.includes(e.id)}))}!Object(y.h)(i.order)&&(e.images=i.order.map((function(t){return e.images.find((function(e){return e.id===t}))})),e.addSub(e.imagesService.reorderProfileImages({ids:i.order,user:e.param}).subscribe())),t.hide()}))}},{key:"removeAllImages",value:function(){var e,t=n(this.images||[]);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.addSub(this.imagesService.deleteImage({idOrKey:i.id}).subscribe())}}catch(a){t.e(a)}finally{t.f()}this.images=[],this.changeDetector.detectChanges()}},{key:"fieldSize",value:function(e){return this.fieldHelper.fieldSize(e)}},{key:"locateAddress",value:function(e){var t=this,n=e.value;e.locating$.next(!0),this.addSub(this.maps.geocode(n).subscribe((function(n){e.patchValue({location:n}),t.changeDetector.detectChanges()}),(function(){return t.mapShown(e)})))}},{key:"mapShown",value:function(e){e.locating$.next(!1),this.changeDetector.detectChanges()}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.userConfiguration.details,x.b.EDIT_MY_PROFILE)}},{key:"fieldValue",value:function(e){var t=this.user.get("customValues").get(e.internalName).value;return this.fieldHelper.asFieldValue(e,t,this.data.userConfiguration.binaryValues)}},{key:"landLineAvailability",get:function(){return this.getAvailability((this.data.phoneConfiguration||{}).maxLandLines)}},{key:"mobileAvailability",get:function(){return this.getAvailability((this.data.phoneConfiguration||{}).maxMobiles)}},{key:"addressAvailability",get:function(){return this.getAvailability((this.data.addressConfiguration||{}).maxAddresses)}},{key:"contactInfoAvailability",get:function(){return this.getAvailability((this.data.contactInfoConfiguration||{}).maxContactInfos)}},{key:"imagesAvailability",get:function(){return this.getAvailability((this.data.imageConfiguration||{}).maxImages)}},{key:"canCreateLandLine",get:function(){if("multiple"!==this.landLineAvailability||!this.editableFields.has("phone"))return!1;var e=this.data.phoneConfiguration.maxLandLines;return this.phones.filter((function(e){return e.kind===et.Z.LAND_LINE})).length<e}},{key:"canCreateMobile",get:function(){if("multiple"!==this.mobileAvailability||!this.editableFields.has("phone"))return!1;var e=this.data.phoneConfiguration.maxMobiles;return this.phones.filter((function(e){return e.kind===et.Z.MOBILE})).length<e}},{key:"canCreateAddress",get:function(){return!("multiple"!==this.addressAvailability||!this.editableFields.has("address"))&&this.addresses.length<this.data.addressConfiguration.maxAddresses}},{key:"canCreateContactInfo",get:function(){return"multiple"===this.contactInfoAvailability&&this.contactInfos.length<this.data.contactInfoConfiguration.maxContactInfos}},{key:"canUploadImages",get:function(){return this.images.length<this.data.imageConfiguration.maxImages}}]),a}(v.a)).\u0275fac=function(e){return new(e||cl)(I.Kb(I.r),I.Kb(os.a),I.Kb(as.a),I.Kb(rs.a),I.Kb(us.a),I.Kb(ls.a),I.Kb(J.b),I.Kb(I.h))},cl.\u0275cmp=I.Eb({type:cl,selectors:[["edit-profile"]],features:[I.ub],decls:5,vars:4,consts:[[3,"ready"],["last","",3,"heading","mobileHeading","headingActions",4,"ngIf"],["locatingSpinner",""],["last","",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[1,"mt-4","mb-2",3,"ngClass"],[3,"formGroup"],["kind","fieldView",3,"label",4,"ngIf"],["formControlName","name",3,"label","required",4,"ngIf"],["formControlName","username",3,"label","required",4,"ngIf"],[3,"label","kind","ignoreExtraCell",4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[1,"btn-main",3,"disabled","label","action"],[1,"mb-3","border-0","mt-2","mt-md-0"],[1,"d-flex","justify-content-center","justify-content-sm-start"],["size","huge","useLightbox","",3,"image","roundBorders",4,"ngIf"],["class","my-3",4,"ngIf"],["containerClass","mt-3","target","profile",3,"owner","uploadDone"],["singleUpload",""],["class","mt-3","forceRow","",4,"ngIf"],["size","huge","useLightbox","",3,"image","roundBorders"],[1,"my-3"],["forceRow","",1,"mt-3"],["outline","",3,"label","action"],["outline","",3,"label","action",4,"ngIf"],[1,"border-0","d-flex","mb-3","flex-column","flex-xs-row","justify-content-between","mt-2","mt-md-0"],[1,"mb-2","mb-xs-0"],[1,"row","no-gutters"],["class","col-12 col-xs-6 col-sm-4 col-md-3 d-flex justify-content-center justify-content-center",4,"ngFor","ngForOf"],["class","d-flex justify-content-end",4,"ngIf"],["target","profile",3,"owner","max","uploadDone"],["multiUpload",""],[1,"col-12","col-xs-6","col-sm-4","col-md-3","d-flex","justify-content-center","justify-content-center"],["size","huge","useLightbox","",1,"mb-1","mb-xs-3",3,"image","roundBorders","additionalImages"],[1,"col-12"],[1,"d-flex","justify-content-end"],["kind","fieldView",3,"label"],[3,"user"],["formControlName","name",3,"label","required"],["formControlName","username",3,"label","required"],[3,"label","kind","ignoreExtraCell"],["formControlName","email",3,"required"],["field","email",3,"control",4,"extraCell"],["field","email",3,"control"],[3,"label","kind","labelPosition","ignoreExtraCell","fieldSize","required",4,"ngIf"],[3,"label","kind","labelPosition","ignoreExtraCell","fieldSize","required"],["hideLabel","",3,"field","formControlName","binaryValues",4,"ngIf","ngIfElse"],["plainFieldValue",""],[3,"field","control",4,"extraCell"],["hideLabel","",3,"field","formControlName","binaryValues"],[3,"fieldValue"],[3,"field","control"],["kind","field","fieldSize","small",3,"label","required","ignoreExtraCell"],["formControlName","number",3,"placeholder",4,"ngIf","ngIfElse"],["plainPhoneNumber",""],[3,"control",4,"extraCell"],["formControlName","number",3,"placeholder"],[3,"control"],[3,"label","formControl",4,"ngIf","ngIfElse"],["plainVerified",""],[3,"label","formControl"],[3,"label","formControl","click",4,"ngIf","ngIfElse"],["plainSms",""],[3,"label","formControl","click"],["formControlName","extension","fieldSize","tiny",3,"label",4,"ngIf"],["formControlName","extension","fieldSize","tiny",3,"label"],[1,"mb-2"],[3,"formControl","label",4,"ngIf"],[3,"formControl","label"],["ignoreContactFields","",3,"addressForm","configuration","managePrivacy","binaryValues"],["kind","field",3,"label",4,"ngIf"],["kind","field",3,"label"],[3,"address","imageLoaded",4,"ngIf","ngIfElse"],["viewMap",""],[3,"address","imageLoaded"],["outline","",3,"label","action",4,"ngIf","ngIfElse"],[1,"mt-4","mb-2","d-flex","flex-column","flex-xs-row","justify-content-between"],["class","section-title-action","dropdown","",4,"ngIf"],["class","section-title-action",4,"ngIf"],["dropdown","",1,"section-title-action"],["dropdownToggle","","type","button","type","button","aria-controls","newPhoneDropDown",1,"btn","btn-outline-primary","dropdown-toggle"],["class","dropdown-menu dropdown-menu-right","role","listbox","id","newPhoneDropDown",4,"dropdownMenu"],["role","listbox","id","newPhoneDropDown",1,"dropdown-menu","dropdown-menu-right"],["dropDownMenu",""],[1,"dropdown-item",3,"click"],[1,"section-title-action"],["formControlName","name","required","",3,"id","label"],["type","tel","formControlName","number","required","",3,"id","label","placeholder"],["class","d-flex justify-content-end",3,"ngClass",4,"ngIf"],["formControlName","verified",3,"label",4,"ngIf","ngIfElse"],["formControlName","verified",3,"label"],["formControlName","enabledForSms",3,"label","click",4,"ngIf","ngIfElse"],["formControlName","enabledForSms",3,"label","click"],[1,"d-flex","w-100","justify-content-between"],["justifyStart","",3,"control"],[1,"d-flex","justify-content-end",3,"ngClass"],["idPrefix","address_",3,"addressForm","ignoreContactFields","configuration","idSuffix","managePrivacy","binaryValues"],["kind","field","class","pb-0",3,"label",4,"ngIf"],["class","row mt-3 no-gutters",4,"ngIf"],["kind","field",1,"pb-0",3,"label"],[4,"ngIf","ngIfThen"],[1,"row","mt-3","no-gutters"],["class","col-4",4,"ngIf"],[1,"col-12","col-sm-8"],["forceRow","",1,"mt-0"],[1,"col-4"],[1,"flex-grow-1"],["formControlName","image","target","contactInfo","separator","@","avatarSize","xlarge",3,"label","initialImages"],["formControlName","name",3,"id","label"],["formControlName","email",3,"id","label"],["formControlName","mobilePhone",3,"id","label"],["formControlName","landLinePhone",3,"id","label"],["formControlName","landLineExtension",3,"id","label",4,"ngIf"],["formControlName","address",3,"id","label"],[4,"ngFor","ngForOf"],["formControlName","landLineExtension",3,"id","label"],[3,"value","text",4,"ngIf"],[3,"value","text"],[3,"field","formControlName","binaryValues"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,ol,21,25,"page-content",1),I.Pb(),I.Bc(3,sl,1,0,"ng-template",null,2,I.Cc)),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,A.q,C.w,C.n,A.s,O.a,S.a,ms.a,Ve.a,_.a,Gt.a,qt.a,C.v,C.l,C.D,ps.a,hs.a,bn.a,Fr.a,D.a,C.k,vs.a,ys.a,xs.a,xs.d,xs.b,Ps.a,Ge.a,qe.a,Is.a],pipes:[A.b],encapsulation:2,changeDetection:0}),cl),dl=o("qEt1"),fl=o("cvAk");function gl(e,t){if(1&e){var n=I.Rb();I.Qb(0,"actions",4),I.Qb(1,"action-button",5),I.Xb("action",(function(){return I.sc(n),I.Zb(2).goToLogin()})),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(2);I.xb(1),I.gc("label",i.i18n.menu.login)}}function ml(e,t){if(1&e&&(I.Qb(0,"page-content"),I.Qb(1,"notification",2),I.Dc(2),I.Pb(),I.Bc(3,gl,2,1,"actions",3),I.ac(4,"async"),I.Pb()),2&e){var n=I.Zb();I.xb(1),I.gc("allowClose",!1),I.xb(1),I.Fc(" ",n.i18n.user.newEmailConfirmed," "),I.xb(1),I.gc("ngIf",null==I.bc(4,3,n.login.user$))}}var pl,hl=((pl=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).validationService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;this.addSub(this.validationService.validateEmailChange(this.route.snapshot.params.key).subscribe((function(){e.login.user?(e.login.logout(),e.notification.info(e.i18n.user.newEmailConfirmed)):e.data=""})))}},{key:"goToLogin",value:function(){this.login.goToLoginPage("")}},{key:"resolveMenu",value:function(){return this.menu.homeMenu()}},{key:"userId",get:function(){return this.data}}]),n}(v.a)).\u0275fac=function(e){return new(e||pl)(I.Kb(I.r),I.Kb(dl.a))},pl.\u0275cmp=I.Eb({type:pl,selectors:[["validate-email-change"]],features:[I.ub],decls:3,vars:4,consts:[["size","medium","hideMenu","",3,"ready"],[4,"ngIf"],[3,"allowClose"],["ngClass","mt-3","forceRow","",4,"ngIf"],["ngClass","mt-3","forceRow",""],[3,"label","action"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,ml,5,5,"page-content",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,fl.a,O.a,A.q,S.a],pipes:[A.b],encapsulation:2,changeDetection:0}),pl),vl=o("/QoZ"),yl=o("nUN0"),xl=o("ZvpF"),Pl=o("naJM"),Il=o("wR2l"),kl=o("vOpc");function El(e,t){1&e&&I.Lb(0,"div",6)}function Al(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div",6),I.Qb(2,"label-value",13),I.Lb(3,"user-link",14),I.Pb(),I.Pb(),I.Bc(4,El,1,0,"div",15),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.data.user),I.xb(1),I.gc("ngIf",n.layout.gtsm$)}}function Cl(e,t){1&e&&I.Mb(0)}function Dl(e,t){1&e&&I.Mb(0)}var Ol=function(e,t){return{count:e,total:t}};function Sl(e,t){if(1&e){var n=I.Rb();I.Qb(0,"tr"),I.Qb(1,"td"),I.Lb(2,"rating-stats",22),I.Pb(),I.Qb(3,"td",21),I.Xb("click",(function(){I.sc(n);var e=t.$implicit;return I.Zb(3).filter(e.level,!0)})),I.Bc(4,Cl,1,0,"ng-container",23),I.Pb(),I.Qb(5,"td",21),I.Xb("click",(function(){I.sc(n);var e=t.$implicit;return I.Zb(3).filter(e.level)})),I.Bc(6,Dl,1,0,"ng-container",23),I.Pb(),I.Pb()}if(2&e){var i=t.$implicit,a=I.Zb(3),r=I.qc(4);I.xb(2),I.gc("level",i.level)("textLeft",i.text),I.xb(2),I.gc("ngTemplateOutlet",r)("ngTemplateOutletContext",I.kc(6,Ol,null==a.allTime?null:a.allTime.counts[i.level],null==a.allTime?null:a.allTime.total)),I.xb(2),I.gc("ngTemplateOutlet",r)("ngTemplateOutletContext",I.kc(9,Ol,null==a.last30Days?null:a.last30Days.counts[i.level],null==a.last30Days?null:a.last30Days.total))}}function Ql(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",16),I.Qb(1,"table",17),I.Qb(2,"thead"),I.Qb(3,"th",18),I.Dc(4),I.Pb(),I.Qb(5,"th"),I.Dc(6),I.Pb(),I.Qb(7,"th"),I.Dc(8),I.Pb(),I.Pb(),I.Qb(9,"tbody"),I.Bc(10,Sl,7,12,"tr",19),I.Qb(11,"tr"),I.Qb(12,"td",20),I.Dc(13),I.Pb(),I.Qb(14,"td",21),I.Xb("click",(function(){return I.sc(n),I.Zb(2).filter(null,!0)})),I.Dc(15),I.Pb(),I.Qb(16,"td",21),I.Xb("click",(function(){return I.sc(n),I.Zb(2).filter()})),I.Dc(17),I.Pb(),I.Pb(),I.Qb(18,"tr"),I.Qb(19,"td",20),I.Dc(20),I.Pb(),I.Qb(21,"td"),I.Dc(22),I.ac(23,"percent"),I.Pb(),I.Qb(24,"td"),I.Dc(25),I.ac(26,"percent"),I.Pb(),I.Pb(),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb(2);I.xb(4),I.Ec(i.i18n.reference.value),I.xb(2),I.Ec(i.i18n.reference.allTime),I.xb(2),I.Ec(i.i18n.reference.last30Days),I.xb(2),I.gc("ngForOf",i.levels),I.xb(3),I.Ec(i.i18n.reference.total),I.xb(2),I.Fc(" ",null==i.allTime?null:i.allTime.total," "),I.xb(2),I.Fc(" ",null==i.last30Days?null:i.last30Days.total,""),I.xb(3),I.Fc(" ",i.i18n.reference.percentagePositive,""),I.xb(2),I.Fc(" ",I.bc(23,10,(null==i.allTime?null:i.allTime.totalPositive)/(null==i.allTime?null:i.allTime.total)||0)," "),I.xb(3),I.Fc(" ",I.bc(26,12,(null==i.last30Days?null:i.last30Days.totalPositive)/(null==i.last30Days?null:i.last30Days.total)||0)," ")}}function Nl(e,t){if(1&e&&(I.Qb(0,"mobile-result",24),I.Qb(1,"div",25),I.Qb(2,"div"),I.Qb(3,"div",26),I.Dc(4),I.Pb(),I.Qb(5,"div",27),I.Dc(6),I.ac(7,"dateTime"),I.Pb(),I.Qb(8,"div",28),I.Lb(9,"rating-stats",29),I.Pb(),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit;I.gc("avatarImage",n.relatedUser.image),I.xb(4),I.Fc(" ",n.relatedUser.display," "),I.xb(2),I.Fc(" ",I.bc(7,4,n.date)," "),I.xb(3),I.gc("level",n.level)}}function wl(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",35),I.Xb("click",(function(){I.sc(n);var e=I.Zb().$implicit;return I.Zb(3).remove(e)})),I.Lb(1,"icon",36),I.Pb()}if(2&e){var i=I.Zb(4);I.gc("tooltip",i.i18n.general.remove)}}function Fl(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"tr",32),I.Xb("click",(function(){I.sc(n);var e=t.$implicit,i=I.Zb(3);return i.router.navigate(i.path(e))})),I.Qb(2,"td"),I.Dc(3),I.ac(4,"dateTime"),I.Pb(),I.Qb(5,"td"),I.Dc(6),I.Pb(),I.Qb(7,"td"),I.Lb(8,"rating-stats",29),I.Pb(),I.Qb(9,"td",33),I.Bc(10,wl,2,1,"button",34),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=t.$implicit,a=I.Zb(3);I.xb(3),I.Ec(I.bc(4,4,i.date)),I.xb(3),I.Ec(i.relatedUser.shortDisplay),I.xb(2),I.gc("level",i.level),I.xb(2),I.gc("ngIf",a.data.manage)}}function Ll(e,t){if(1&e&&(I.Qb(0,"table",30),I.Qb(1,"thead"),I.Qb(2,"th",18),I.Dc(3),I.Pb(),I.Qb(4,"th"),I.Dc(5),I.Pb(),I.Qb(6,"th"),I.Dc(7),I.Pb(),I.Lb(8,"th",31),I.Pb(),I.Qb(9,"tbody"),I.Bc(10,Fl,11,6,"ng-container",19),I.ac(11,"async"),I.Pb(),I.Pb()),2&e){var n,i=I.Zb(2);I.xb(3),I.Ec(i.i18n.general.date),I.xb(2),I.Ec(i.i18n.general.name),I.xb(2),I.Ec(i.i18n.reference.level.level),I.xb(3),I.gc("ngForOf",null==(n=I.bc(11,4,i.results$))?null:n.results)}}function Bl(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"page-content",3),I.ac(2,"async"),I.Qb(3,"form",4),I.Qb(4,"div",5),I.Bc(5,Al,5,3,"ng-container",1),I.Qb(6,"div",6),I.Qb(7,"radio-group-field",7),I.Lb(8,"field-option",8),I.Lb(9,"field-option",8),I.Pb(),I.Pb(),I.Pb(),I.Pb(),I.Pb(),I.Bc(10,Ql,27,14,"page-content",9),I.ac(11,"async"),I.ac(12,"async"),I.Qb(13,"results-layout",10),I.Xb("update",(function(e){return I.sc(n),I.Zb().update(e)})),I.ac(14,"async"),I.Bc(15,Nl,10,6,"mobile-result",11),I.Bc(16,Ll,12,6,"table",12),I.Pb(),I.Nb()}if(2&e){var i=I.Zb();I.xb(1),I.gc("heading",i.i18n.reference.title.search)("mobileHeading",i.i18n.reference.mobileTitle.search)("headingActions",I.bc(2,14,i.headingActions$)),I.xb(2),I.gc("formGroup",i.form),I.xb(2),I.gc("ngIf",i.data.user&&!i.isOwner),I.xb(2),I.gc("label",i.i18n.reference.direction.direction),I.xb(1),I.gc("value",i.ReferenceDirectionEnum.GIVEN)("text",i.i18n.reference.direction.given),I.xb(1),I.gc("value",i.ReferenceDirectionEnum.RECEIVED)("text",i.i18n.reference.direction.received),I.xb(1),I.gc("ngIf",I.bc(11,16,i.layout.gtsm$)&&I.bc(12,18,i.stats$)),I.xb(3),I.gc("results",I.bc(14,20,i.results$))("rendering$",i.rendering$)("toLink",i.toLink)}}var Rl=function(e){return{width:e}};function Tl(e,t){if(1&e&&(I.Qb(0,"div",40),I.Dc(1," \xa0"),I.Pb()),2&e){var n=I.Zb();I.gc("ngStyle",I.jc(1,Rl,n.count/n.total*190+"px"))}}var Zl=function(e){return{"pl-2":e}};function _l(e,t){if(1&e&&(I.Qb(0,"div",37),I.Bc(1,Tl,2,3,"div",38),I.Qb(2,"span",39),I.Dc(3),I.Pb(),I.Pb()),2&e){var n=t.count;I.xb(1),I.gc("ngIf",n>0),I.xb(1),I.gc("ngClass",I.jc(3,Zl,n>0)),I.xb(1),I.Ec(n)}}var Ml,$l=((Ml=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).referenceHelper=i,o.referencesService=a,o.ReferenceDirectionEnum=et.ib,o.ReferenceLevelEnum=et.jb,o.stats$=new Ht.a(null),o}return s(n,[{key:"getFormControlNames",value:function(){return["direction","levels","period"]}},{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.paramMap.get("user")||this.ApiHelper.SELF,this.isOwner=this.authHelper.isSelf(this.param),this.addSub(this.referencesService.getUserReferencesDataForSearch({user:this.param}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;c(f(n.prototype),"onDataInitialized",this).call(this,e),e.set&&!this.isOwner&&(this.headingActions=[new Ie.c("military_tech",this.i18n.reference.set,(function(){t.router.navigate(e.current?["users","references","edit",e.current.id]:["users","references","set","self",t.param])}),!0)]),this.levels=[{level:et.jb.VERY_GOOD,text:this.i18n.reference.level.veryGood},{level:et.jb.GOOD,text:this.i18n.reference.level.good},{level:et.jb.NEUTRAL,text:this.i18n.reference.level.neutral},{level:et.jb.BAD,text:this.i18n.reference.level.bad},{level:et.jb.VERY_BAD,text:this.i18n.reference.level.veryBad}],this.searchStatistics(),this.addSub(this.form.controls.direction.valueChanges.subscribe((function(){return t.searchStatistics()})))}},{key:"searchStatistics",value:function(){var e=this;this.addSub(this.referencesService.getUserReferenceStatistics({user:this.param,direction:this.form.controls.direction.value}).subscribe((function(t){return e.stats=t})))}},{key:"toSearchParams",value:function(e){return e.user=this.param,e}},{key:"doSearch",value:function(e){return this.referencesService.searchUserReferences$Response(e)}},{key:"filter",value:function(e,t){this.form.patchValue({levels:e?[e]:null,period:t?null:[this.dataForUiHolder.now().clone().subtract(30,"day").startOf("day").format(xl.b),null]})}},{key:"remove",value:function(e){var t=this;this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:function(){t.addSub(t.referencesService.deleteReference({id:e.id}).subscribe((function(){t.notification.snackBar(t.i18n.general.removeItemDone),t.reload()})))}})}},{key:"path",value:function(e){return["/users","references","view",e.id]}},{key:"resolveMenu",value:function(e){return this.isOwner?x.b.REFERENCES:this.menu.searchUsersMenu(e.user)}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}},{key:"stats",get:function(){return this.stats$.value},set:function(e){this.stats$.next(e),this.allTime=e.periods.filter((function(e){return null==e.period}))[0],this.last30Days=e.periods.filter((function(e){return null!=e.period}))[0]}}]),n}(Ue.a)).\u0275fac=function(e){return new(e||Ml)(I.Kb(I.r),I.Kb(Pl.a),I.Kb(yl.a))},Ml.\u0275cmp=I.Eb({type:Ml,selectors:[["search-references"]],features:[I.ub],decls:5,vars:4,consts:[[3,"ready"],[4,"ngIf"],["columnData",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["formControlName","direction",3,"label"],[3,"value","text"],["mode","table",4,"ngIf"],["resultType","list",3,"results","rendering$","toLink","update"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","kind","fieldView",3,"label"],[3,"user"],["class","col-12 col-md-6",4,"ngIf"],["mode","table"],[1,"table","table-hover","small-height"],["width","33%"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"],[1,"link","link-undecorated",3,"click"],[3,"level","textLeft"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["avatarIcon","user",3,"avatarImage"],[1,"d-flex"],[1,"cell-main"],[1,"cell-cell-date"],[1,"cell-text"],[3,"level"],[1,"table","table-hover","cursor-pointer"],[1,"actions"],[3,"click"],[1,"actions","actions-multiple"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","clear"],[1,"stats"],["class","bar",3,"ngStyle",4,"ngIf"],[1,"count",3,"ngClass"],[1,"bar",3,"ngStyle"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Bl,17,22,"ng-container",1),I.Pb(),I.Bc(3,_l,4,5,"ng-template",null,2,I.Cc)),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,C.I,C.w,C.n,Il.a,C.v,C.l,qe.a,Y.a,W.a,ee.a,_.a,Gt.a,A.s,kl.a,A.A,te.a,N.b,ne.a,A.q,A.w],pipes:[A.b,A.C,ae.a],encapsulation:2,changeDetection:0}),Ml);function Ul(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.ac(2,"dateTime"),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.date),I.xb(1),I.Fc(" ",I.bc(2,2,n.data.date)," ")}}function Hl(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"page-content",2),I.ac(2,"async"),I.Qb(3,"form",3),I.Bc(4,Ul,3,4,"label-value",4),I.Qb(5,"label-value",5),I.Lb(6,"user-link",6),I.Pb(),I.Qb(7,"label-value",5),I.Lb(8,"user-link",6),I.Pb(),I.Qb(9,"single-selection-field",7),I.Lb(10,"field-option",8),I.Lb(11,"field-option",8),I.Lb(12,"field-option",8),I.Lb(13,"field-option",8),I.Lb(14,"field-option",8),I.Pb(),I.Lb(15,"textarea-field",9),I.Pb(),I.Qb(16,"actions",10),I.Qb(17,"action-button",11),I.Xb("action",(function(){return I.sc(n),I.Zb().save()})),I.ac(18,"async"),I.Pb(),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=I.Zb();I.xb(1),I.gc("heading",i.create?i.i18n.reference.title.set:i.i18n.reference.title.edit)("mobileHeading",i.create?i.i18n.reference.mobileTitle.set:i.i18n.reference.title.edit)("headingActions",I.bc(2,23,i.headingActions$)),I.xb(2),I.gc("formGroup",i.form),I.xb(1),I.gc("ngIf",!i.create),I.xb(1),I.gc("label",i.i18n.reference.from),I.xb(1),I.gc("user",i.data.from),I.xb(1),I.gc("label",i.i18n.reference.to),I.xb(1),I.gc("user",i.data.to),I.xb(1),I.gc("label",i.i18n.reference.level.level),I.xb(1),I.gc("value",i.ReferenceLevelEnum.VERY_BAD)("text",i.i18n.reference.level.veryBad),I.xb(1),I.gc("value",i.ReferenceLevelEnum.BAD)("text",i.i18n.reference.level.bad),I.xb(1),I.gc("value",i.ReferenceLevelEnum.NEUTRAL)("text",i.i18n.reference.level.neutral),I.xb(1),I.gc("value",i.ReferenceLevelEnum.GOOD)("text",i.i18n.reference.level.good),I.xb(1),I.gc("value",i.ReferenceLevelEnum.VERY_GOOD)("text",i.i18n.reference.level.veryGood),I.xb(1),I.gc("label",i.i18n.general.comments),I.xb(2),I.gc("disabled",I.bc(18,25,i.requesting$))("label",i.i18n.general.submit)}}var Gl,ql=((Gl=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).referencesService=i,a.ReferenceLevelEnum=et.jb,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.from=this.route.snapshot.params.from,this.to=this.route.snapshot.params.to,this.id=this.route.snapshot.params.id,this.create=null==this.id;var t=this.create?this.referencesService.getReferenceDataForSet({from:this.from,to:this.to}):this.referencesService.getReferenceDataForEdit({id:this.id});this.addSub(t.subscribe((function(t){e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=e.reference;this.form=this.formBuilder.group({level:[t.level,C.G.required],comments:[t.comments,C.G.required],version:t.version})}},{key:"save",value:function(){var e=this;if(Object(y.F)(this.form)){var t=this.form.value,n=this.create?this.referencesService.setReference({body:t,from:this.ApiHelper.SELF,to:this.data.to.id}):this.referencesService.updateReference({id:this.id,body:t});this.addSub(n.subscribe((function(){e.notification.snackBar(e.i18n.reference.referenceSet),history.back()})))}}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.from,x.b.REFERENCES)}}]),n}(v.a)).\u0275fac=function(e){return new(e||Gl)(I.Kb(I.r),I.Kb(yl.a))},Gl.\u0275cmp=I.Eb({type:Gl,selectors:[["set-reference"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[3,"formGroup"],[3,"label",4,"ngIf"],[3,"label"],[3,"user"],["formControlName","level","required","",3,"label"],[3,"value","text"],["formControlName","comments","required","",3,"label"],["forceRow",""],[3,"disabled","label","action"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Hl,19,27,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,C.I,C.w,C.n,_.a,Gt.a,Ge.a,C.v,C.l,C.D,qe.a,Kt.a,O.a,S.a],pipes:[A.b,ae.a],encapsulation:2,changeDetection:0}),Gl);function Kl(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"page-content",2),I.ac(2,"async"),I.Qb(3,"label-value",3),I.Dc(4),I.ac(5,"dateTime"),I.Pb(),I.Qb(6,"label-value",3),I.Lb(7,"user-link",4),I.Pb(),I.Qb(8,"label-value",3),I.Lb(9,"user-link",4),I.Pb(),I.Qb(10,"label-value",3),I.Lb(11,"rating-stats",5),I.Pb(),I.Qb(12,"label-value",3),I.Dc(13),I.Pb(),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("heading",n.i18n.reference.title.view)("mobileHeading",n.i18n.reference.mobileTitle.view)("headingActions",I.bc(2,13,n.headingActions$)),I.xb(2),I.gc("label",n.i18n.general.date),I.xb(1),I.Fc(" ",I.bc(5,15,n.data.date)," "),I.xb(2),I.gc("label",n.i18n.reference.from),I.xb(1),I.gc("user",n.data.from),I.xb(1),I.gc("label",n.i18n.reference.to),I.xb(1),I.gc("user",n.data.to),I.xb(1),I.gc("label",n.i18n.reference.level.level),I.xb(1),I.gc("level",n.data.level),I.xb(1),I.gc("label",n.i18n.general.comments),I.xb(1),I.Fc(" ",n.data.comments," ")}}var Vl,jl=((Vl=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).referencesService=i,o.referenceHelper=a,o}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.id=this.route.snapshot.params.id,this.addSub(this.referencesService.viewReference({id:this.id}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;this.self=this.authHelper.isSelfOrOwner(e.from)||this.authHelper.isSelfOrOwner(e.to);var n=[];e.canEdit&&n.push(new Ie.c("edit",this.i18n.general.edit,(function(){return t.router.navigate(["/users","references","edit",t.id])}),!0)),this.headingActions=n}},{key:"resolveMenu",value:function(){return this.self?x.b.REFERENCES:this.menu.searchUsersMenu()}}]),n}(X.a)).\u0275fac=function(e){return new(e||Vl)(I.Kb(I.r),I.Kb(yl.a),I.Kb(Pl.a))},Vl.\u0275cmp=I.Eb({type:Vl,selectors:[["view-reference"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","viewForm",3,"heading","mobileHeading","headingActions"],[3,"label"],[3,"user"],[3,"level"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Kl,14,17,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,_.a,Gt.a,kl.a],pipes:[A.b,ae.a],encapsulation:2,changeDetection:0}),Vl),zl=o("mwYl"),Xl=o("R8pA");function Jl(e,t){if(1&e&&(I.Qb(0,"div",6),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Fc(" ",n.name,"")}}var Yl=function(e){return{"ml-3":e}};function Wl(e,t){if(1&e&&(I.Qb(0,"div",7),I.Lb(1,"input",8),I.Qb(2,"label",9),I.Qb(3,"div",10),I.Dc(4),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb().$implicit,a=I.Zb(2);I.gc("ngClass",I.jc(6,Yl,i)),I.xb(1),I.gc("formControl",a.control)("id","group_"+n.id)("value",n.id),I.xb(1),I.gc("for","group_"+n.id),I.xb(2),I.Fc(" ",n.name," ")}}function eu(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div"),I.Bc(2,Jl,2,1,"div",4),I.Bc(3,Wl,5,8,"div",5),I.Pb(),I.Nb()),2&e){var n=t.$implicit,i=I.Zb(2);I.xb(2),I.gc("ngIf",n),I.xb(1),I.gc("ngForOf",i.groupsForSet(n))}}function tu(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div",2),I.Dc(2),I.Pb(),I.Bc(3,eu,4,2,"ng-container",3),I.Nb()),2&e){var n=I.Zb();I.xb(2),I.Ec(n.i18n.user.registration.groupManager),I.xb(1),I.gc("ngForOf",n.groupSets)}}function nu(e,t){if(1&e&&I.Lb(0,"field-option",15),2&e){var n=t.$implicit;I.gc("value",n.id)("text",n.name)}}function iu(e,t){if(1&e&&(I.Qb(0,"radio-group-field",13),I.Bc(1,nu,1,2,"field-option",14),I.Pb()),2&e){var n=I.Zb(2);I.gc("formControl",n.control),I.xb(1),I.gc("ngForOf",n.groups)}}function au(e,t){if(1&e&&(I.Qb(0,"div",21),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Fc(" ",n.description," ")}}function ru(e,t){if(1&e&&(I.Qb(0,"div",17),I.Qb(1,"div",18),I.Qb(2,"div",19),I.Lb(3,"input",8),I.Qb(4,"label",9),I.Qb(5,"div",10),I.Dc(6),I.Bc(7,au,2,1,"div",20),I.Pb(),I.Pb(),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(3),I.gc("formControl",i.control)("id","group_"+n.id)("value",n.id),I.xb(1),I.gc("for","group_"+n.id),I.xb(2),I.Fc(" ",n.name," "),I.xb(1),I.gc("ngIf",n.description)}}function ou(e,t){if(1&e&&I.Bc(0,ru,8,6,"div",16),2&e){var n=I.Zb(2);I.gc("ngForOf",n.groups)}}function su(e,t){if(1&e&&(I.Qb(0,"div",2),I.Dc(1),I.Pb(),I.Bc(2,iu,2,2,"radio-group-field",11),I.Bc(3,ou,1,1,"ng-template",null,12,I.Cc)),2&e){var n=I.qc(4),i=I.Zb();I.xb(1),I.Ec(i.i18n.user.registration.groupPublic),I.xb(1),I.gc("ngIf",i.singleLine)("ngIfElse",n)}}var cu,lu=((cu=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).login=i,a}return s(n,[{key:"ngOnInit",value:function(){c(f(n.prototype),"ngOnInit",this).call(this),this.singleLine=this.groups.length<=3&&0===this.groups.filter((function(e){return e.description})).length}},{key:"groupsForSet",value:function(e){return this.groups.filter(null==e?function(e){return null==e.groupSet}:function(t){return t.groupSet===e.id})}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||cu)(I.Kb(I.r),I.Kb(Xl.a))},cu.\u0275cmp=I.Eb({type:cu,selectors:[["registration-step-group"]],inputs:{groupSets:"groupSets",groups:"groups",control:"control"},features:[I.ub],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["asGuest",""],[1,"mb-3"],[4,"ngFor","ngForOf"],["class","mt-3 mb-2","font-weight-bold","",4,"ngIf"],["class","custom-control custom-radio mb-1",3,"ngClass",4,"ngFor","ngForOf"],["font-weight-bold","",1,"mt-3","mb-2"],[1,"custom-control","custom-radio","mb-1",3,"ngClass"],["type","radio",1,"custom-control-input",3,"formControl","id","value"],[1,"custom-control-label",3,"for"],[1,"ml-1"],[3,"formControl",4,"ngIf","ngIfElse"],["multiLine",""],[3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["class","row mb-2",4,"ngFor","ngForOf"],[1,"row","mb-2"],[1,"col-12","col-6","col-sm-8"],[1,"custom-control","custom-radio"],["class","text-muted mt-1 mb-3",4,"ngIf"],[1,"text-muted","mt-1","mb-3"]],template:function(e,t){if(1&e&&(I.Bc(0,tu,4,2,"ng-container",0),I.Bc(1,su,5,3,"ng-template",null,1,I.Cc)),2&e){var n=I.qc(2);I.gc("ngIf",t.login.user)("ngIfElse",n)}},directives:[A.t,A.s,A.q,C.A,C.e,C.v,C.k,Il.a,qe.a],encapsulation:2,changeDetection:0}),cu),uu=o("n7/T");function bu(e,t){if(1&e&&I.Lb(0,"img",6),2&e){var n=I.Zb().$implicit;I.gc("src",n.image.url,I.uc)("alt",n.name)}}var du=function(e,t,n){return{border:e,background:t,color:n}};function fu(e,t){if(1&e){var n=I.Rb();I.Qb(0,"button",3),I.Xb("click",(function(){I.sc(n);var e=t.$implicit;return I.Zb().registerWith(e)})),I.Bc(1,bu,1,2,"img",4),I.Lb(2,"span",5),I.ac(3,"trust"),I.Pb()}if(2&e){var i=t.$implicit,a=I.Zb();I.gc("ngStyle",I.lc(5,du,"1px solid "+i.borderColor,i.backgroundColor,i.textColor)),I.xb(1),I.gc("ngIf",i.image),I.xb(1),I.gc("innerHTML",I.bc(3,3,a.i18n.identityProvider.login(i.name)),I.tc)}}var gu,mu=((gu=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).uiLayout=i,a.continue=new I.n,a}return s(n,[{key:"registerWith",value:function(e){this.continue.emit(e)}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||gu)(I.Kb(I.r),I.Kb(uu.a))},gu.\u0275cmp=I.Eb({type:gu,selectors:[["registration-step-idp"]],inputs:{identityProviders:"identityProviders"},outputs:{continue:"continue"},features:[I.ub],decls:5,vars:5,consts:[[1,"text-center"],["type","button","class","identity-provider",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"text-muted","text-justify","my-3",3,"innerHTML"],["type","button",1,"identity-provider",3,"ngStyle","click"],["class","aria-hidden",3,"src","alt",4,"ngIf"],[3,"innerHTML"],[1,"aria-hidden",3,"src","alt"]],template:function(e,t){1&e&&(I.Qb(0,"div",0),I.Dc(1),I.Pb(),I.Bc(2,fu,4,9,"button",1),I.Lb(3,"div",2),I.ac(4,"trust")),2&e&&(I.xb(1),I.Ec(t.i18n.identityProvider.registration),I.xb(1),I.gc("ngForOf",t.identityProviders),I.xb(1),I.gc("innerHTML",I.bc(4,3,t.i18n.identityProvider.registrationDisclaimer(t.uiLayout.appTitleSmall)),I.tc))},directives:[A.s,A.w,A.t],pipes:[fn.a],encapsulation:2,changeDetection:0}),gu),pu=o("HDdC"),hu=o("LRne");function vu(e,t){if(1&e&&I.Lb(0,"avatar",17),2&e){var n=I.Zb(2);I.gc("image",n.image)}}function yu(e,t){if(1&e&&I.Dc(0),2&e){var n=I.Zb(2);I.Fc(" ",n.i18n.user.noImage," ")}}function xu(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",21),I.Xb("action",(function(){return I.sc(n),I.Zb(3).removeImage()})),I.ac(1,"async"),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("disabled",I.bc(1,2,i.requesting$))("label",i.i18n.field.image.remove)}}function Pu(e,t){if(1&e){var n=I.Rb();I.Qb(0,"div",18),I.Qb(1,"action-button",19),I.Xb("action",(function(){return I.sc(n),I.Zb(),I.qc(11).perform()})),I.ac(2,"async"),I.Pb(),I.Bc(3,xu,2,4,"action-button",20),I.Pb()}if(2&e){var i=I.Zb(2);I.xb(1),I.gc("disabled",I.bc(2,3,i.requesting$))("label",i.i18n.field.image.upload),I.xb(2),I.gc("ngIf",i.image)}}function Iu(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Qb(1,"h2",7),I.Dc(2),I.Pb(),I.Qb(3,"div",8),I.Qb(4,"div",9),I.Qb(5,"div",10),I.Bc(6,vu,1,1,"avatar",11),I.ac(7,"async"),I.Bc(8,yu,1,1,"ng-template",null,12,I.Cc),I.Pb(),I.Qb(10,"image-upload",13,14),I.Xb("uploadDone",(function(e){return I.sc(n),I.Zb().onUploadDone(e[0])})),I.Pb(),I.Pb(),I.Bc(12,Pu,4,5,"div",15),I.ac(13,"async"),I.Pb(),I.Qb(14,"h2",16),I.Dc(15),I.Pb(),I.Nb()}if(2&e){var i=I.qc(9),a=I.qc(11),r=I.Zb();I.xb(2),I.Ec(r.i18n.user.title.image),I.xb(4),I.gc("ngIf",I.bc(7,5,r.image$))("ngIfElse",i),I.xb(6),I.gc("ngIf",!1===I.bc(13,7,a.uploading$)),I.xb(3),I.Ec(r.i18n.user.title.fields)}}function ku(e,t){if(1&e&&I.Lb(0,"input-field",22),2&e){var n=I.Zb();I.gc("label",n.i18n.user.name)}}function Eu(e,t){if(1&e&&I.Lb(0,"input-field",23),2&e){var n=I.Zb();I.gc("label",n.i18n.user.username)}}function Au(e,t){if(1&e&&I.Lb(0,"field-privacy",28),2&e){var n=I.Zb(2);I.gc("control",n.form.get("hiddenFields"))}}function Cu(e,t){if(1&e&&I.Lb(0,"boolean-field",29),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.registration.skipActivationEmail)}}function Du(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"label-value",24),I.Lb(2,"input-field",25),I.Bc(3,Au,1,1,"field-privacy",26),I.Pb(),I.Bc(4,Cu,1,1,"boolean-field",27),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("label",n.i18n.user.email)("ignoreExtraCell",!n.canManagePrivacy("email"))("required",n.data.emailRequired),I.xb(1),I.gc("required",n.data.emailRequired),I.xb(2),I.gc("ngIf",n.data.allowSetSendActivationEmail)}}function Ou(e,t){if(1&e&&I.Lb(0,"field-privacy",34),2&e){var n=I.Zb(2).$implicit,i=I.Zb();I.gc("field",n.internalName)("control",i.form.get("hiddenFields"))}}function Su(e,t){if(1&e){var n=I.Rb();I.Qb(0,"label-value",31),I.Qb(1,"custom-field-input",32),I.Xb("imagesUploaded",(function(e){return I.sc(n),I.Zb(2).customImagesUploaded.emit(e)}))("filesUploaded",(function(e){return I.sc(n),I.Zb(2).customFilesUploaded.emit(e)})),I.Pb(),I.Bc(2,Ou,1,2,"field-privacy",33),I.Pb()}if(2&e){var i=I.Zb().$implicit,a=I.Zb();I.gc("label",i.name)("ignoreExtraCell",!a.canManagePrivacy(i))("fieldSize",i.size)("required",i.required),I.xb(1),I.gc("field",i)("formControlName",i.internalName)}}function Qu(e,t){if(1&e&&(I.Ob(0,1),I.Bc(1,Su,3,6,"label-value",30),I.Nb()),2&e){var n=t.$implicit,i=I.Zb();I.gc("formGroup",i.form.get("customValues")),I.xb(1),I.gc("ngIf",i.canEdit(n))}}function Nu(e,t){if(1&e&&I.Lb(0,"field-privacy",38),2&e){var n=I.Zb(2);I.gc("control",n.mobileForm.get("hidden"))}}function wu(e,t){if(1&e&&(I.Qb(0,"label-value",35),I.Lb(1,"input-field",36),I.Bc(2,Nu,1,1,"field-privacy",37),I.Pb()),2&e){var n=I.Zb();I.gc("label",n.i18n.phone.mobile)("required","required"===n.mobileAvailability)("formGroup",n.mobileForm),I.xb(1),I.gc("placeholder",n.data.phoneConfiguration.mobileExample)}}function Fu(e,t){if(1&e&&I.Lb(0,"field-privacy",38),2&e){var n=I.Zb(2);I.gc("control",n.landLineForm.get("hidden"))}}function Lu(e,t){if(1&e&&I.Lb(0,"input-field",41),2&e){var n=I.Zb(2);I.gc("label",n.i18n.phone.extension)}}function Bu(e,t){if(1&e&&(I.Ob(0,1),I.Qb(1,"label-value",39),I.Lb(2,"input-field",36),I.Bc(3,Fu,1,1,"field-privacy",37),I.Pb(),I.Bc(4,Lu,1,1,"input-field",40),I.Nb()),2&e){var n=I.Zb();I.gc("formGroup",n.landLineForm),I.xb(1),I.gc("label",n.i18n.phone.landLine)("required","required"===n.data.phoneConfiguration.landLineAvailability),I.xb(1),I.gc("placeholder",n.data.phoneConfiguration.landLineExample),I.xb(2),I.gc("ngIf",n.data.phoneConfiguration.extensionEnabled)}}function Ru(e,t){if(1&e&&I.Lb(0,"boolean-field",45),2&e){var n=I.Zb(2);I.gc("formControl",n.defineAddress)("label",n.i18n.user.addressDefine)}}function Tu(e,t){if(1&e&&I.Lb(0,"address-form",46),2&e){var n=I.Zb(2);I.gc("addressForm",n.addressForm)("configuration",n.data.addressConfiguration)("managePrivacy",n.data.addressConfiguration.managePrivacy)}}function Zu(e,t){if(1&e){var n=I.Rb();I.Qb(0,"static-map",50),I.Xb("imageLoaded",(function(){return I.sc(n),I.Zb(3).mapShown()})),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("address",i.addressForm.value)}}function _u(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",19),I.Xb("action",(function(){return I.sc(n),I.Zb(3).locateAddress()})),I.ac(1,"async"),I.Pb()}if(2&e){var i=I.Zb(3);I.gc("disabled",I.bc(1,2,i.locatingAddress$))("label",i.i18n.general.mapView)}}function Mu(e,t){if(1&e&&(I.Qb(0,"label-value",47),I.Bc(1,Zu,1,1,"static-map",48),I.ac(2,"async"),I.Bc(3,_u,2,4,"ng-template",null,49,I.Cc),I.Pb()),2&e){var n,i=I.qc(4),a=I.Zb(2);I.gc("label",a.i18n.general.map),I.xb(1),I.gc("ngIf",null!=(null==(n=I.bc(2,3,a.addressForm.get("location").valueChanges))?null:n.latitude))("ngIfElse",i)}}function $u(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",16),I.Dc(2),I.Pb(),I.Bc(3,Ru,1,2,"boolean-field",42),I.Bc(4,Tu,1,3,"address-form",43),I.Bc(5,Mu,5,5,"label-value",44),I.Nb()),2&e){var n=I.Zb();I.xb(2),I.Ec(n.i18n.address.address),I.xb(1),I.gc("ngIf","required"!==n.data.addressConfiguration.availability),I.xb(1),I.gc("ngIf",n.defineAddress.value),I.xb(1),I.gc("ngIf",n.defineAddress.value&&n.maps.enabled)}}var Uu,Hu=((Uu=function(e){l(n,e);var t=b(n);function n(e,i,a,o,s){var c;return r(this,n),(c=t.call(this,e)).userHelper=i,c.imagesService=a,c.maps=o,c.changeDetector=s,c.imageUploaded=new I.n,c.imageRemoved=new I.n,c.customImagesUploaded=new I.n,c.customFilesUploaded=new I.n,c.image$=new Ht.a(null),c.location$=new Ht.a(null),c.locatingAddress$=new Ht.a(!1),c}return s(n,[{key:"ngOnInit",value:function(){c(f(n.prototype),"ngOnInit",this).call(this),this.editableFields=this.userHelper.fieldNamesByAction(this.data,"edit"),this.managePrivacyFields=this.userHelper.fieldNamesByAction(this.data,"managePrivacy")}},{key:"onUploadDone",value:function(e){var t=this;this.addSub(this.doRemoveImage().subscribe((function(){t.image=e,t.imageUploaded.emit(t.image),t.changeDetector.detectChanges()})))}},{key:"removeImage",value:function(){this.addSub(this.doRemoveImage().subscribe())}},{key:"doRemoveImage",value:function(){var e=this;if(this.image){var t=this.image;return this.errorHandler.requestWithCustomErrorHandler((function(){return new pu.a((function(n){e.imagesService.deleteImage({idOrKey:e.image.id}).subscribe((function(){e.imageRemoved.emit(e.image),e.image=null,e.changeDetector.detectChanges(),n.next(t)}))}))}))}return Object(hu.a)(null)}},{key:"canEdit",value:function(e){return this.editableFields.has(this.fieldHelper.fieldName(e))}},{key:"canManagePrivacy",value:function(e){return this.managePrivacyFields.has(this.fieldHelper.fieldName(e))}},{key:"locateAddress",value:function(){var e=this,t=this.addressForm.value;this.locatingAddress$.next(!0),this.addSub(this.maps.geocode(t).subscribe((function(t){e.addressForm.patchValue({location:t}),e.changeDetector.detectChanges()}),(function(){return e.mapShown()})))}},{key:"mapShown",value:function(){this.locatingAddress$.next(!1),this.changeDetector.detectChanges()}},{key:"image",get:function(){return this.image$.value},set:function(e){this.image$.next(e)}},{key:"location",get:function(){return this.location$.value},set:function(e){this.location$.next(e)}},{key:"mobileAvailability",get:function(){return this.data.phoneConfiguration.mobileAvailability}},{key:"landLineAvailability",get:function(){return this.data.phoneConfiguration.landLineAvailability}},{key:"addressAvailability",get:function(){return this.data.addressConfiguration.availability}},{key:"imageAvailability",get:function(){return this.data.imageConfiguration.availability}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||Uu)(I.Kb(I.r),I.Kb(j.a),I.Kb(as.a),I.Kb(us.a),I.Kb(I.h))},Uu.\u0275cmp=I.Eb({type:Uu,selectors:[["registration-step-fields"]],inputs:{data:"data",form:"form",mobileForm:"mobileForm",landLineForm:"landLineForm",addressForm:"addressForm",defineAddress:"defineAddress",image:"image"},outputs:{imageUploaded:"imageUploaded",imageRemoved:"imageRemoved",customImagesUploaded:"customImagesUploaded",customFilesUploaded:"customFilesUploaded"},features:[I.ub],decls:9,vars:9,consts:[[4,"ngIf"],[3,"formGroup"],["formControlName","name","required","",3,"label",4,"ngIf"],["formControlName","username","required","",3,"label",4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],["kind","field",3,"label","required","formGroup",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"border-0"],[1,"row"],[1,"col-12","col-sm-4"],[1,"d-flex","justify-content-center","justify-content-sm-start"],["size","huge","useLightbox","",3,"image",4,"ngIf","ngIfElse"],["noImage",""],["containerClass","mt-3","target","userRegistration","keepUrls","",3,"uploadDone"],["upload",""],["class","col-12 col-sm-8 mt-3 mt-sm-0 d-flex justify-content-between justify-content-sm-end align-items-end",4,"ngIf"],[1,"mt-4"],["size","huge","useLightbox","",3,"image"],[1,"col-12","col-sm-8","mt-3","mt-sm-0","d-flex","justify-content-between","justify-content-sm-end","align-items-end"],["outline","",3,"disabled","label","action"],["class","ml-3","outline","",3,"disabled","label","action",4,"ngIf"],["outline","",1,"ml-3",3,"disabled","label","action"],["formControlName","name","required","",3,"label"],["formControlName","username","required","",3,"label"],["kind","field",3,"label","ignoreExtraCell","required"],["formControlName","email",3,"required"],["field","email",3,"control",4,"extraCell"],["formControlName","skipActivationEmail",3,"label",4,"ngIf"],["field","email",3,"control"],["formControlName","skipActivationEmail",3,"label"],["kind","field",3,"label","ignoreExtraCell","fieldSize","required",4,"ngIf"],["kind","field",3,"label","ignoreExtraCell","fieldSize","required"],["hideLabel","",3,"field","formControlName","imagesUploaded","filesUploaded"],[3,"field","control",4,"extraCell"],[3,"field","control"],["kind","field",3,"label","required","formGroup"],["formControlName","number",3,"placeholder"],[3,"control",4,"extraCell"],[3,"control"],["kind","field",3,"label","required"],["formControlName","extension","fieldSize","tiny",3,"label",4,"ngIf"],["formControlName","extension","fieldSize","tiny",3,"label"],["switch","",3,"formControl","label",4,"ngIf"],["ignoreContactFields","",3,"addressForm","configuration","managePrivacy",4,"ngIf"],["kind","field",3,"label",4,"ngIf"],["switch","",3,"formControl","label"],["ignoreContactFields","",3,"addressForm","configuration","managePrivacy"],["kind","field",3,"label"],[3,"address","imageLoaded",4,"ngIf","ngIfElse"],["viewMap",""],[3,"address","imageLoaded"]],template:function(e,t){1&e&&(I.Bc(0,Iu,16,9,"ng-container",0),I.Ob(1,1),I.Bc(2,ku,1,1,"input-field",2),I.Bc(3,Eu,1,1,"input-field",3),I.Bc(4,Du,5,5,"ng-container",0),I.Nb(),I.Bc(5,Qu,2,2,"ng-container",4),I.Bc(6,wu,3,4,"label-value",5),I.Bc(7,Bu,5,5,"ng-container",6),I.Bc(8,$u,6,4,"ng-container",0)),2&e&&(I.gc("ngIf","disabled"!==t.imageAvailability),I.xb(1),I.gc("formGroup",t.form),I.xb(1),I.gc("ngIf",t.canEdit("name")),I.xb(1),I.gc("ngIf",t.canEdit("username")),I.xb(1),I.gc("ngIf",t.canEdit("email")),I.xb(1),I.gc("ngForOf",t.data.customFields),I.xb(1),I.gc("ngIf","disabled"!==t.mobileAvailability),I.xb(1),I.gc("ngIf","disabled"!==t.landLineAvailability),I.xb(1),I.gc("ngIf","disabled"!==t.addressAvailability))},directives:[A.t,C.w,C.n,A.s,ms.a,Ve.a,S.a,qt.a,C.v,C.l,C.D,_.a,ps.a,hs.a,D.a,bn.a,C.k,vs.a,ys.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Uu),Gu=o("UnhA"),qu=o("g9Ug"),Ku=["securityAnswer"];function Vu(e,t){if(1&e&&(I.Qb(0,"div",10),I.Lb(1,"avatar",11),I.Pb()),2&e){var n=I.Zb();I.xb(1),I.gc("image",n.image)}}function ju(e,t){if(1&e&&(I.Qb(0,"div",12),I.Lb(1,"avatar",13),I.Pb()),2&e){var n=I.Zb();I.xb(1),I.gc("size",n.image?200:128)("image",n.image)}}function zu(e,t){if(1&e&&I.Lb(0,"label-value",14),2&e){var n=I.Zb();I.gc("label",n.i18n.user.group)("value",n.group.name)}}function Xu(e,t){if(1&e&&I.Lb(0,"label-value",14),2&e){var n=I.Zb();I.gc("label",n.i18n.user.name)("value",n.name)}}function Ju(e,t){if(1&e&&I.Lb(0,"label-value",14),2&e){var n=I.Zb();I.gc("label",n.i18n.user.username)("value",n.username)}}function Yu(e,t){if(1&e&&I.Lb(0,"label-value",14),2&e){var n=I.Zb();I.gc("label",n.i18n.user.email)("value",n.email)}}function Wu(e,t){if(1&e&&(I.Qb(0,"label-value",15),I.Lb(1,"format-field-value",16),I.Pb()),2&e){var n=t.$implicit,i=I.Zb();I.gc("label",n.name),I.xb(1),I.gc("fields",i.customFields)("fieldName",n.internalName)("object",i.user)("images",i.customImages)("files",i.customFiles)}}function eb(e,t){if(1&e&&I.Lb(0,"label-value",14),2&e){var n=I.Zb();I.gc("label",n.i18n.phone.mobile)("value",n.mobile)}}function tb(e,t){if(1&e&&I.Lb(0,"label-value",14),2&e){var n=I.Zb();I.gc("label",n.i18n.user.phoneAddLandLine)("value",n.landLine)}}function nb(e,t){if(1&e&&(I.Qb(0,"label-value",15),I.Lb(1,"address-details",17),I.Pb()),2&e){var n=I.Zb();I.gc("label",n.i18n.address.address),I.xb(1),I.gc("address",n.address)}}function ib(e,t){if(1&e&&(I.Qb(0,"div",20),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Ec(n.description)}}function ab(e,t){if(1&e&&I.Lb(0,"boolean-field",21),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.registration.passwordAssign)}}function rb(e,t){if(1&e&&I.Lb(0,"boolean-field",25),2&e){var n=I.Zb(3);I.gc("label",n.i18n.user.registration.passwordForceChange)}}function ob(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"input-field",22),I.Lb(2,"input-field",23),I.Bc(3,rb,1,1,"boolean-field",24),I.Nb()),2&e){var n=I.Zb().$implicit,i=I.Zb();I.xb(1),I.gc("label",n.name),I.xb(1),I.gc("label",i.i18n.user.passwordConfirmation(n.name)),I.xb(1),I.gc("ngIf",n.canForceChange)}}function sb(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2"),I.Dc(2),I.Pb(),I.Ob(3,7),I.Bc(4,ib,2,1,"div",18),I.Bc(5,ab,1,1,"boolean-field",19),I.Bc(6,ob,4,3,"ng-container",9),I.Nb(),I.Nb()),2&e){var n=t.$implicit,i=t.index,a=I.Zb();I.xb(2),I.Ec(n.name),I.xb(1),I.gc("formGroup",a.passwordForm(i)),I.xb(1),I.gc("ngIf",n.description),I.xb(1),I.gc("ngIf",a.login.user),I.xb(1),I.gc("ngIf",a.passwordForm(i).get("defined").value)}}function cb(e,t){if(1&e&&I.Lb(0,"field-option",29),2&e){var n=t.$implicit;I.gc("value",n.internalName)("text",n.name)}}function lb(e,t){if(1&e&&I.Lb(0,"input-field",30,31),2&e){var n=I.Zb(3);I.gc("label",n.i18n.securityQuestion.answer)}}function ub(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2"),I.Dc(2),I.Pb(),I.Qb(3,"div",20),I.Dc(4),I.Pb(),I.Qb(5,"single-selection-field",26),I.Bc(6,cb,1,2,"field-option",27),I.Pb(),I.Bc(7,lb,2,1,"input-field",28),I.ac(8,"async"),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Ec(n.i18n.securityQuestion.question),I.xb(2),I.Fc(" ",n.i18n.user.securityQuestionMessage," "),I.xb(1),I.gc("label",n.i18n.securityQuestion.question)("emptyOption",n.i18n.user.securityQuestionEmpty),I.xb(1),I.gc("ngForOf",n.data.securityQuestions),I.xb(1),I.gc("ngIf",!n.empty(I.bc(8,6,n.form.get("securityQuestion").valueChanges)))}}function bb(e,t){if(1&e&&(I.Qb(0,"div",35),I.Qb(1,"div",36),I.Dc(2),I.Pb(),I.Lb(3,"accept-agreements",37),I.Pb()),2&e){var n=I.Zb(3);I.xb(2),I.Ec(n.i18n.pendingAgreements.preface),I.xb(1),I.gc("agreements",n.data.agreements)}}function db(e,t){if(1&e&&(I.Qb(0,"div",38),I.Qb(1,"div",36),I.Dc(2),I.Pb(),I.Qb(3,"div",36),I.Lb(4,"captcha",39),I.Pb(),I.Pb()),2&e){var n=I.Zb(3);I.xb(2),I.Ec(n.i18n.user.captcha),I.xb(2),I.gc("form",n.form.get("captcha"))}}function fb(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2"),I.Dc(2),I.Pb(),I.Qb(3,"div",32),I.Bc(4,bb,4,2,"div",33),I.Bc(5,db,5,2,"div",34),I.Pb(),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Fc(" ",n.i18n.user.title.registrationConfirmation," "),I.xb(2),I.gc("ngIf",(null==n.data.agreements?null:n.data.agreements.length)>0),I.xb(1),I.gc("ngIf",null!=n.data.captchaType)}}function gb(e,t){if(1&e&&(I.Ob(0),I.Bc(1,ub,9,8,"ng-container",9),I.Bc(2,fb,6,3,"ng-container",9),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("ngIf",(null==n.data.securityQuestions?null:n.data.securityQuestions.length)>0),I.xb(1),I.gc("ngIf",(null==n.data.agreements?null:n.data.agreements.length)>0||null!=n.data.captchaType)}}var mb,pb=((mb=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).login=i,a.empty=y.h,a.focusSecurityAnswer=!1,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;if(c(f(n.prototype),"ngOnInit",this).call(this),Object(y.h)(this.data.securityQuestions)||this.addSub(this.form.get("securityQuestion").valueChanges.subscribe((function(t){e.focusSecurityAnswer=!Object(y.a)(t)}))),!Object(y.h)(this.data.agreements)){var t=this.data.agreements.map((function(){return!1}));this.agreementsControl=this.formBuilder.array(t),this.addSub(this.agreementsControl.valueChanges.subscribe((function(t){var n=t.length===t.filter((function(e){return e})).length;e.form.patchValue({acceptAgreement:n})})))}}},{key:"ngAfterViewChecked",value:function(){this.focusSecurityAnswer&&(this.securityAnswer.forEach((function(e){return Object(y.j)(e)})),this.focusSecurityAnswer=!1)}},{key:"passwordForm",value:function(e){return this.form.get("passwords").controls[e]}},{key:"group",get:function(){var e=this,t=this.dataForUiHolder.dataForUi.publicRegistrationGroups||[];return 1===t.length?null:t.find((function(t){return t.id===e.user.group}))}},{key:"name",get:function(){return(this.user.name||"").trim()}},{key:"username",get:function(){return(this.user.username||"").trim()}},{key:"email",get:function(){return(this.user.email||"").trim()}},{key:"mobile",get:function(){var e=this.user.mobilePhones||[];return Object(y.h)(e)?null:(e[0].number||"").trim()}},{key:"landLine",get:function(){var e=this.user.landLinePhones||[],t=Object(y.h)(e)?null:(e[0].number||"").trim();if(Object(y.h)(t))return"";var n=Object(y.h)(e)?null:(e[0].extension||"").trim();return""===n?t:this.i18n.phone.numberExtensionValue({number:t,extension:n})}},{key:"address",get:function(){var e=this.user.addresses||[];return Object(y.h)(e)?null:e[0]}},{key:"customFields",get:function(){var e=this;return this.data.customFields.filter((function(t){return!Object(y.a)(e.user.customValues[t.internalName])}))}},{key:"autocompletePasswords",get:function(){return(this.login.auth||{}).role?"off":"on"}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||mb)(I.Kb(I.r),I.Kb(Xl.a))},mb.\u0275cmp=I.Eb({type:mb,selectors:[["registration-step-confirm"]],viewQuery:function(e,t){var n;1&e&&I.Hc(Ku,!0),2&e&&I.pc(n=I.Yb())&&(t.securityAnswer=n)},inputs:{data:"data",form:"form",user:"user",image:"image",customImages:"customImages",customFiles:"customFiles"},features:[I.ub],decls:17,vars:17,consts:[["class","image d-flex justify-content-center mt-2 mb-4",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["class","image ml-4 mb-3",4,"ngIf"],[1,"flex-grow-1","mb-ls"],[3,"label","value",4,"ngIf"],["valueFormat","component",3,"label",4,"ngFor","ngForOf"],["valueFormat","component",3,"label",4,"ngIf"],[3,"formGroup"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"image","d-flex","justify-content-center","mt-2","mb-4"],["size","160","imageSize","200","useLightbox","",3,"image"],[1,"image","ml-4","mb-3"],["iconSize","128px","useLightbox","",3,"size","image"],[3,"label","value"],["valueFormat","component",3,"label"],[3,"fields","fieldName","object","images","files"],[3,"address"],["class","mb-2",4,"ngIf"],["formControlName","defined",3,"label",4,"ngIf"],[1,"mb-2"],["formControlName","defined",3,"label"],["required","","formControlName","value","type","password","autocomplete","new-password",3,"label"],["required","","formControlName","confirmationValue","type","password","autocomplete","new-password",3,"label"],["formControlName","forceChange",3,"label",4,"ngIf"],["formControlName","forceChange",3,"label"],["formControlName","securityQuestion",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],["formControlName","securityAnswer","required","",3,"label",4,"ngIf"],[3,"value","text"],["formControlName","securityAnswer","required","",3,"label"],["securityAnswer",""],[1,"row","no-gutters"],["class","col-12 col-sm-6 col-md-7",4,"ngIf"],["class","col-12 col-sm-6 col-md-5",4,"ngIf"],[1,"col-12","col-sm-6","col-md-7"],[1,"mb-3"],["formControlName","acceptAgreements",3,"agreements"],[1,"col-12","col-sm-6","col-md-5"],[3,"form"]],template:function(e,t){1&e&&(I.Bc(0,Vu,2,1,"div",0),I.ac(1,"async"),I.Qb(2,"div",1),I.Bc(3,ju,2,2,"div",2),I.ac(4,"async"),I.Qb(5,"div",3),I.Bc(6,zu,1,2,"label-value",4),I.Bc(7,Xu,1,2,"label-value",4),I.Bc(8,Ju,1,2,"label-value",4),I.Bc(9,Yu,1,2,"label-value",4),I.Bc(10,Wu,2,6,"label-value",5),I.Bc(11,eb,1,2,"label-value",4),I.Bc(12,tb,1,2,"label-value",4),I.Bc(13,nb,2,2,"label-value",6),I.Pb(),I.Pb(),I.Qb(14,"form",7),I.Bc(15,sb,7,5,"ng-container",8),I.Bc(16,gb,3,2,"ng-container",9),I.Pb()),2&e&&(I.gc("ngIf",t.image&&I.bc(1,13,t.layout.ltsm$)),I.xb(3),I.gc("ngIf",t.image&&I.bc(4,15,t.layout.gtxs$)),I.xb(3),I.gc("ngIf",t.group),I.xb(1),I.gc("ngIf",!t.empty(t.name)),I.xb(1),I.gc("ngIf",!t.empty(t.username)),I.xb(1),I.gc("ngIf",!t.empty(t.email)),I.xb(1),I.gc("ngForOf",t.customFields),I.xb(1),I.gc("ngIf",!t.empty(t.mobile)),I.xb(1),I.gc("ngIf",!t.empty(t.landLine)),I.xb(1),I.gc("ngIf",t.address),I.xb(1),I.gc("formGroup",t.form),I.xb(1),I.gc("ngForOf",t.data.passwordTypes),I.xb(1),I.gc("ngIf",!t.login.user))},directives:[A.t,A.s,C.I,C.w,C.n,Ve.a,_.a,Fr.a,Gu.a,D.a,C.v,C.l,qt.a,C.D,Ge.a,qe.a,ke.a,qu.a],pipes:[A.b],encapsulation:2,changeDetection:0}),mb);function hb(e,t){if(1&e&&(I.Ob(0),I.Lb(1,"p",0),I.ac(2,"trust"),I.Qb(3,"p"),I.Dc(4),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("innerHTML",I.bc(2,2,n.principalsHtml),I.tc),I.xb(3),I.Ec(n.passwordsMessage)}}var vb,yb=((vb=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).login=i,o.userHelper=a,o}return s(n,[{key:"ngOnInit",value:function(){c(f(n.prototype),"ngOnInit",this).call(this),this.messageHtml=this.userHelper.registrationMessageHtml(this.result,!!this.dataForUiHolder.user),this.principalsHtml=this.userHelper.registrationPrincipalsHtml(this.result),this.passwordsMessage=this.userHelper.registrationPasswordsMessage(this.result)}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||vb)(I.Kb(I.r),I.Kb(Xl.a),I.Kb(j.a))},vb.\u0275cmp=I.Eb({type:vb,selectors:[["registration-step-done"]],inputs:{result:"result"},features:[I.ub],decls:3,vars:4,consts:[[3,"innerHTML"],[4,"ngIf"]],template:function(e,t){1&e&&(I.Lb(0,"p",0),I.ac(1,"trust"),I.Bc(2,hb,5,4,"ng-container",1)),2&e&&(I.gc("innerHTML",I.bc(1,2,t.messageHtml),I.tc),I.xb(2),I.gc("ngIf",null==t.login.user&&"active"==t.result.status))},directives:[A.t],pipes:[fn.a],encapsulation:2,changeDetection:0}),vb);function xb(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.ac(1,"async"),I.Qb(2,"div",4),I.Lb(3,"registration-step-group",5),I.Pb(),I.Qb(4,"actions",6),I.Qb(5,"action-button",7),I.Xb("action",(function(){return I.sc(n),I.Zb().showIdentityProviders()})),I.ac(6,"async"),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb();I.gc("heading",i.i18n.user.title.registration)("mobileHeading",i.i18n.user.mobileTitle.registration)("mode",I.bc(1,8,i.layout.ltsm$)?"fullHeight":"normal"),I.xb(3),I.gc("groupSets",i.groupSets)("groups",i.groups)("control",i.group),I.xb(2),I.gc("disabled",I.bc(6,10,i.requesting$))("label",i.i18n.general.next)}}function Pb(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",10),I.Xb("action",(function(){return I.sc(n),I.Zb(2).backToGroup()})),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("label",i.i18n.general.previous)}}function Ib(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.ac(1,"async"),I.Qb(2,"div",4),I.Qb(3,"registration-step-idp",8),I.Xb("continue",(function(e){return I.sc(n),I.Zb().continueWithProvider(e)})),I.Pb(),I.Pb(),I.Qb(4,"actions",6),I.Qb(5,"action-button",7),I.Xb("action",(function(){return I.sc(n),I.Zb().continueWithProvider(null)})),I.ac(6,"async"),I.Pb(),I.Bc(7,Pb,1,1,"action-button",9),I.Pb(),I.Pb()}if(2&e){var i=I.Zb();I.gc("heading",i.i18n.user.title.registration)("mobileHeading",i.i18n.user.mobileTitle.registration)("mode",I.bc(1,7,i.layout.ltsm$)?"fullHeight":"normal"),I.xb(3),I.gc("identityProviders",i.data.identityProviders),I.xb(2),I.gc("disabled",I.bc(6,9,i.requesting$))("label",i.i18n.general.skip),I.xb(2),I.gc("ngIf",i.groups.length>1)}}function kb(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",10),I.Xb("action",(function(){return I.sc(n),I.Zb(2).backToIdentityProviders()})),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("label",i.i18n.general.previous)}}function Eb(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.ac(1,"async"),I.Qb(2,"div",4),I.Qb(3,"registration-step-fields",11),I.Xb("imageUploaded",(function(e){return I.sc(n),I.Zb().image=e}))("imageRemoved",(function(){return I.sc(n),I.Zb().image=null}))("customImagesUploaded",(function(e){return I.sc(n),I.Zb().addCustomImages(e)}))("customFilesUploaded",(function(e){return I.sc(n),I.Zb().addCustomFiles(e)})),I.Pb(),I.Pb(),I.Qb(4,"actions",6),I.Qb(5,"action-button",7),I.Xb("action",(function(){return I.sc(n),I.Zb().showConfirm()})),I.ac(6,"async"),I.Pb(),I.Bc(7,kb,1,1,"action-button",9),I.Pb(),I.Pb()}if(2&e){var i=I.Zb();I.gc("heading",i.i18n.user.title.registration)("mobileHeading",i.i18n.user.mobileTitle.registration)("mode",I.bc(1,13,i.layout.ltsm$)?"fullHeight":"normal"),I.xb(3),I.gc("data",i.data)("form",i.form)("mobileForm",i.mobileForm)("landLineForm",i.landLineForm)("defineAddress",i.defineAddress)("addressForm",i.addressForm)("image",i.image),I.xb(2),I.gc("disabled",I.bc(6,15,i.requesting$))("label",i.i18n.general.next),I.xb(2),I.gc("ngIf",i.groups.length>1||(null==i.data.identityProviders?null:i.data.identityProviders.length)>0)}}function Ab(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.ac(1,"async"),I.Qb(2,"div",4),I.Lb(3,"registration-step-confirm",12),I.Pb(),I.Qb(4,"actions",6),I.Qb(5,"action-button",7),I.Xb("action",(function(){return I.sc(n),I.Zb().register()})),I.ac(6,"async"),I.Pb(),I.Qb(7,"action-button",10),I.Xb("action",(function(){return I.sc(n),I.Zb().backToFields()})),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb();I.gc("heading",i.i18n.user.title.registrationConfirmation)("mobileHeading",i.i18n.user.mobileTitle.registrationConfirmation)("mode",I.bc(1,12,i.layout.ltsm$)?"fullHeight":"normal"),I.xb(3),I.gc("data",i.data)("form",i.confirmForm)("user",i.userNew)("image",i.image)("customImages",i.customImages)("customFiles",i.customFiles),I.xb(2),I.gc("disabled",I.bc(6,14,i.requesting$))("label",i.i18n.general.submit),I.xb(2),I.gc("label",i.i18n.general.previous)}}function Cb(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",15),I.Xb("action",(function(){return I.sc(n),I.Zb(2).reload()})),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("label",i.i18n.user.registration.registerAnotherUser)}}function Db(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",15),I.Xb("action",(function(){return I.sc(n),I.Zb(2).viewProfile()})),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("label",i.i18n.user.registration.viewProfile)}}function Ob(e,t){if(1&e){var n=I.Rb();I.Qb(0,"action-button",15),I.Xb("action",(function(){return I.sc(n),I.Zb(2).goToLogin()})),I.Pb()}if(2&e){var i=I.Zb(2);I.gc("label",i.i18n.menu.login)}}function Sb(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.ac(1,"async"),I.Qb(2,"div",4),I.Lb(3,"registration-step-done",13),I.ac(4,"async"),I.Pb(),I.Qb(5,"actions",6),I.Bc(6,Cb,1,1,"action-button",14),I.Bc(7,Db,1,1,"action-button",14),I.Bc(8,Ob,1,1,"action-button",14),I.Pb(),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.i18n.user.title.registrationDone)("mobileHeading",n.i18n.user.mobileTitle.registrationDone)("mode",I.bc(1,7,n.layout.ltsm$)?"fullHeight":"normal"),I.xb(3),I.gc("result",I.bc(4,9,n.result$)),I.xb(3),I.gc("ngIf",n.login.user),I.xb(1),I.gc("ngIf",n.login.user),I.xb(1),I.gc("ngIf",!n.login.user)}}function Qb(e,t){1&e&&(I.Qb(0,"page-content"),I.Lb(1,"spinner"),I.Pb())}var Nb,wb=((Nb=function(n){l(a,n);var i=b(a);function a(e,t,n,o,s){var c;return r(this,a),(c=i.call(this,e)).usersService=t,c.userHelper=n,c.imagesService=o,c.nextRequestState=s,c.steps=["group","idp","fields","confirm","done"],c.customImages=[],c.customFiles=[],c.asyncValidatorsEnabled=!1,c.step$=new Ht.a(null),c.result$=new Ht.a(null),c}return s(a,[{key:"ngOnInit",value:function(){var e=this;c(f(a.prototype),"ngOnInit",this).call(this);var t=(this.login.auth||{}).role;if(null==t){var n,i=this.dataForUiHolder.dataForUi;if(n=this.layout.ltmd?i.smallScreenRegistrationWizard:this.layout.md?i.mediumScreenRegistrationWizard:i.largeScreenRegistrationWizard)return void this.router.navigate(["wizards","registration",h.a.internalNameOrId(n)],{replaceUrl:!0});this.initializeGroups(i.publicRegistrationGroups)}else this.addSub(this.usersService.getUserDataForSearch({broker:t===et.kb.BROKER?h.a.SELF:null,fields:["groupsForRegistration"]}).subscribe((function(t){e.groupSets=t.groupsForRegistration.filter((function(e){return e.kind===et.A.GROUP_SET})),t.groupsForRegistration.find((function(e){return e.kind!==et.A.GROUP_SET&&null==e.groupSet}))&&e.groupSets.unshift(null),e.initializeGroups(t.groupsForRegistration.filter((function(e){return e.kind!==et.A.GROUP_SET})))})))}},{key:"initializeGroups",value:function(e){null==this.groups&&(this.groups=e,Object(y.h)(this.groups)?this.router.navigateByUrl("/"):(this.group=new C.j(e[0].id,C.G.required),1===e.length?(this.steps=this.steps.filter((function(e){return"group"!==e})),this.showIdentityProviders()):this.step="group"))}},{key:"ngOnDestroy",value:function(){var e=this;c(f(a.prototype),"ngOnDestroy",this).call(this),this.image&&(URL.revokeObjectURL(this.image.url),this.errorHandler.requestWithCustomErrorHandler((function(){e.addSub(e.imagesService.deleteImage({idOrKey:e.image.id}).subscribe())})))}},{key:"showIdentityProviders",value:function(){var e=this;this.addSub(this.usersService.getUserDataForNew({group:this.group.value,fields:["-agreements.content"]}).subscribe((function(t){e.data=t,Object(y.h)(t.identityProviders)?e.showFields():e.step="idp"})))}},{key:"continueWithProvider",value:function(e){var t=this;e?this.authHelper.identityProviderPopup(e,"register",this.group.value).pipe(Object(gs.a)()).subscribe((function(e){switch(e.status){case et.B.REGISTRATION_DONE:t.nextRequestState.replaceSession(e.sessionToken).pipe(Object(gs.a)()).subscribe((function(){Object(y.B)(!0),t.dataForUiHolder.initialize().subscribe((function(e){Object(y.B)(!1),h.a.isRestrictedAccess(e)||t.router.navigateByUrl("")}))}));break;case et.B.REGISTRATION_DATA:t.identityProviderRequestId=e.requestId,t.data.captchaType=null;var n=t.data.user;if(e.name&&(n.name=e.name),e.username&&(n.username=e.username),e.email&&(n.email=e.email),e.mobilePhone&&(n.mobilePhones=[{number:e.mobilePhone}]),e.landLinePhone&&(n.landLinePhones=[{number:e.landLinePhone,extension:e.landLineExtension}]),e.customValues){n.customValues||(n.customValues={});for(var i=0,a=Object.keys(e.customValues);i<a.length;i++){var r=a[i];n.customValues[r]=e.customValues[r]}}e.image&&(n.images=[e.image.id],t.image=e.image),t.showFields();break;default:t.notification.error(e.errorMessage||t.i18n.error.general)}})):this.showFields()}},{key:"showFields",value:function(){this.prepareForms(this.data),Object(y.k)()}},{key:"backToGroup",value:function(){this.form=null,this.data=null,this.step="group"}},{key:"backToIdentityProviders",value:function(){this.data&&!Object(y.h)(this.data.identityProviders)?this.step="idp":this.backToGroup()}},{key:"backToFields",value:function(){this.confirmForm=null,this.step="fields"}},{key:"prepareForms",value:function(e){var n,i,a=this;this.form=this.formBuilder.group({group:this.group.value,hiddenFields:[e.user.hiddenFields||[]]}),n=t(this.userHelper.setupRegistrationForm(this.form,e,!this.login.user),2),this.mobileForm=n[0],this.landLineForm=n[1],i=t(this.userHelper.registrationAddressForm(e.addressConfiguration),3),this.addressForm=i[0],this.defineAddress=i[1],i[2].forEach((function(e){return a.addSub(e)})),this.data=e,this.step="fields"}},{key:"showConfirm",value:function(){var e=this,t=new C.m({user:this.form});this.mobileForm&&t.setControl("mobile",this.mobileForm),this.landLineForm&&t.setControl("landLine",this.landLineForm),this.addressForm&&this.defineAddress.value&&t.setControl("address",this.addressForm),this.asyncValidatorsEnabled=!0;var n=Object(y.F)(t,!0);this.addSub(Object(y.u)(n).subscribe((function(t){e.asyncValidatorsEnabled=!1,t?e.doShowConfirm():Object(y.l)()})))}},{key:"doShowConfirm",value:function(){var e=this.data;this.confirmForm=this.formBuilder.group({});var t=this.userHelper.passwordRegistrationForms(e);this.confirmForm.setControl("passwords",this.formBuilder.array(t)),Object(y.h)(e.securityQuestions)||(this.confirmForm.setControl("securityQuestion",this.formBuilder.control("")),this.confirmForm.setControl("securityAnswer",this.formBuilder.control("",this.userHelper.securityAnswerValidation))),Object(y.h)(e.agreements)||this.confirmForm.setControl("acceptAgreements",this.formBuilder.control([])),null!=e.captchaType&&this.confirmForm.setControl("captcha",this.authHelper.captchaFormGroup()),this.step="confirm",Object(y.y)()}},{key:"register",value:function(){var e=this,t=Object(y.F)(this.confirmForm,!0);this.addSub(Object(y.u)(t).subscribe((function(t){t?e.addSub(e.usersService.createUser({body:e.userNew}).subscribe((function(t){e.result=t,e.image=null,e.step="done"}))):Object(y.l)()})))}},{key:"goToLogin",value:function(){this.login.goToLoginPage("")}},{key:"viewProfile",value:function(){var e=this.result;e&&this.router.navigate(["users",e.user.id,"profile"])}},{key:"addCustomImages",value:function(t){this.customImages=[].concat(e(this.customImages),e(t))}},{key:"addCustomFiles",value:function(t){this.customFiles=[].concat(e(this.customFiles),e(t))}},{key:"resolveMenu",value:function(){switch(this.dataForUiHolder.role){case et.kb.ADMINISTRATOR:return x.b.ADMIN_REGISTRATION;case et.kb.BROKER:return x.b.BROKER_REGISTRATION;default:return x.b.PUBLIC_REGISTRATION}}},{key:"step",get:function(){return this.step$.value},set:function(e){this.step$.next(e)}},{key:"result",get:function(){return this.result$.value},set:function(e){this.result$.next(e)}},{key:"userNew",get:function(){var e=this.form.value;e.identityProviderRequestId=this.identityProviderRequestId;var t=(this.mobileForm||{}).value,n=(this.landLineForm||{}).value,i=(this.addressForm||{}).value;return this.image&&(e.images=[this.image.id]),t&&!Object(y.a)(t.number)&&(e.mobilePhones=[t]),n&&!Object(y.a)(n.number)&&(e.landLinePhones=[n]),i&&this.defineAddress.value&&(e.addresses=[i]),Object(y.e)(this.confirmForm.value,e),e}}]),a}(v.a)).\u0275fac=function(e){return new(e||Nb)(I.Kb(I.r),I.Kb(os.a),I.Kb(j.a),I.Kb(as.a),I.Kb(zl.a))},Nb.\u0275cmp=I.Eb({type:Nb,selectors:[["user-registration"]],features:[I.ub],decls:9,vars:11,consts:[["size","large",3,"ready","ngSwitch"],["last","",3,"heading","mobileHeading","mode",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["last","",3,"heading","mobileHeading","mode"],[1,"flex-grow-1"],[3,"groupSets","groups","control"],["forceRow",""],[3,"disabled","label","action"],[3,"identityProviders","continue"],["outline","",3,"label","action",4,"ngIf"],["outline","",3,"label","action"],[3,"data","form","mobileForm","landLineForm","defineAddress","addressForm","image","imageUploaded","imageRemoved","customImagesUploaded","customFilesUploaded"],[3,"data","form","user","image","customImages","customFiles"],[3,"result"],[3,"label","action",4,"ngIf"],[3,"label","action"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.ac(2,"async"),I.Bc(3,xb,7,12,"page-content",1),I.Bc(4,Ib,8,11,"page-content",1),I.Bc(5,Eb,8,17,"page-content",1),I.Bc(6,Ab,8,16,"page-content",1),I.Bc(7,Sb,9,11,"page-content",1),I.Bc(8,Qb,2,0,"page-content",2),I.Pb()),2&e&&(I.gc("ready",I.bc(1,7,t.step$))("ngSwitch",I.bc(2,9,t.step$)),I.xb(3),I.gc("ngSwitchCase","group"),I.xb(1),I.gc("ngSwitchCase","idp"),I.xb(1),I.gc("ngSwitchCase","fields"),I.xb(1),I.gc("ngSwitchCase","confirm"),I.xb(1),I.gc("ngSwitchCase","done"))},directives:[k.a,A.x,A.y,A.z,E.a,lu,O.a,S.a,mu,A.t,Hu,pb,yb,Is.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Nb);function Fb(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content"),I.Lb(1,"registration-step-done",2),I.Qb(2,"actions"),I.Qb(3,"action-button",3),I.Xb("action",(function(){return I.sc(n),I.Zb().goToLogin()})),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=I.Zb();I.xb(1),I.gc("result",i.result),I.xb(2),I.gc("label",i.i18n.menu.login)}}var Lb,Bb,Rb=((Lb=function(e){l(n,e);var t=b(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).validationService=i,a}return s(n,[{key:"ngOnInit",value:function(){var e=this;this.addSub(this.validationService.validateUserRegistration({key:this.route.snapshot.params.key}).subscribe((function(t){e.data=t})))}},{key:"goToLogin",value:function(){this.login.goToLoginPage("")}},{key:"resolveMenu",value:function(){return this.menu.homeMenu()}},{key:"result",get:function(){return this.data}}]),n}(v.a)).\u0275fac=function(e){return new(e||Lb)(I.Kb(I.r),I.Kb(dl.a))},Lb.\u0275cmp=I.Eb({type:Lb,selectors:[["validate-registration"]],features:[I.ub],decls:3,vars:4,consts:[["size","medium","hideMenu","",3,"ready"],[4,"ngIf"],[3,"result"],[3,"label","action"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Fb,4,2,"page-content",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,yb,O.a,S.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Lb),Tb=o("oWwz"),Zb=["field"],_b=function(){return{excludeContacts:!0}},Mb=((Bb=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).modalRef=i,o.contactsService=a,o.done=new I.n,o.control=new C.j(null,C.G.required),o}return s(n,[{key:"addContact",value:function(){var e=this;if(Object(y.F)(this.control),this.control.valid){var t=this.field.selection;this.addSub(this.contactsService.createContact({user:h.a.SELF,body:{contact:this.control.value}}).subscribe((function(){e.done.emit(t),e.modalRef.hide()})))}}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||Bb)(I.Kb(I.r),I.Kb(J.a),I.Kb(Tb.a))},Bb.\u0275cmp=I.Eb({type:Bb,selectors:[["add-contact-dialog"]],viewQuery:function(e,t){var n;1&e&&I.yc(Zb,!0),2&e&&I.pc(n=I.Yb())&&(t.field=n.first)},outputs:{done:"done"},features:[I.ub],decls:8,vars:12,consts:[["focused","",3,"filters","allowContacts","allowPrincipal","formControl","label"],["field",""],["forceRow",""],[3,"disabled","label","action"],["outline","",3,"label","action"]],template:function(e,t){1&e&&(I.Qb(0,"h1"),I.Dc(1),I.Pb(),I.Lb(2,"user-field",0,1),I.Qb(4,"actions",2),I.Qb(5,"action-button",3),I.Xb("action",(function(){return t.addContact()})),I.ac(6,"async"),I.Pb(),I.Qb(7,"action-button",4),I.Xb("action",(function(){return t.modalRef.hide()})),I.Pb(),I.Pb()),2&e&&(I.xb(1),I.Ec(t.i18n.user.title.addContact),I.xb(1),I.gc("filters",I.ic(11,_b))("allowContacts",!1)("allowPrincipal",!1)("formControl",t.control)("label",t.i18n.user.contact),I.xb(3),I.gc("disabled",I.bc(6,9,t.requesting$))("label",t.i18n.general.submit),I.xb(2),I.gc("label",t.i18n.general.cancel))},directives:[Ke.a,dn.a,C.v,C.k,O.a,S.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Bb),$b=o("+HmS"),Ub=["usersResults"];function Hb(e,t){1&e&&I.Mb(0)}var Gb=function(e){return{"d-none":e}};function qb(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.ac(1,"async"),I.ac(2,"async"),I.Qb(3,"div",4),I.Lb(4,"result-type-field",5),I.ac(5,"async"),I.Pb(),I.Pb(),I.Qb(6,"users-results",6,7),I.Xb("update",(function(e){return I.sc(n),I.Zb().update(e)})),I.ac(8,"async"),I.ac(9,"async"),I.ac(10,"async"),I.ac(11,"async"),I.Pb()}if(2&e){var i=I.Zb();I.gc("ngClass",I.jc(25,Gb,I.bc(1,11,i.layout.xxs$)))("heading",i.i18n.user.title.contactList)("mobileHeading",i.i18n.user.mobileTitle.contactList)("headingActions",I.bc(2,13,i.headingActions$)),I.xb(4),I.gc("formControl",i.resultTypeControl)("allowedResultTypes",I.bc(5,15,i.allowedResultTypes$)),I.xb(2),I.gc("ngClass",I.jc(27,Gb,I.bc(8,17,i.rendering$)))("results",I.bc(9,19,i.results$))("rendering$",i.rendering$)("data",I.bc(10,21,i.data$))("resultType",I.bc(11,23,i.resultType$))}}var Kb,Vb=((Kb=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).modal=i,o.contactsService=a,o.ResultType=Sr.a,o}return s(n,[{key:"getFormControlNames",value:function(){return["user","keywords"]}},{key:"getInitialResultType",value:function(){return this.layout.xxs?Sr.a.LIST:Sr.a.TILES}},{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.allowedResultTypes=[Sr.a.TILES,Sr.a.LIST],this.stateManager.cache("data",this.contactsService.getContactListDataForSearch({user:h.a.SELF})).subscribe((function(t){e.data=t}))}},{key:"toSearchParams",value:function(e){return e.user=h.a.SELF,e}},{key:"doSearch",value:function(e){return this.contactsService.searchContactList$Response(e)}},{key:"onDataInitialized",value:function(e){var t=this;c(f(n.prototype),"onDataInitialized",this).call(this,e);var i=(e.fieldsInList||[]).slice();i.includes("display")||(i.unshift("display"),e.fieldsInList=i),(((this.login.auth||{}).permissions||{}).users||{}).search&&(this.headingActions=[new Ie.c("add",this.i18n.general.addNew,(function(){return t.addNew()}),!0)])}},{key:"addNew",value:function(){var e=this,t=this.modal.show(Mb,{class:"modal-form"});this.addSub(t.content.done.subscribe((function(t){e.notification.snackBar(e.i18n.user.profile.addContactDone(t.display)),e.reload()})))}},{key:"resolveMenu",value:function(e){return this.menu.userMenu(e.user,x.b.CONTACTS)}}]),n}(Ue.a)).\u0275fac=function(e){return new(e||Kb)(I.Kb(I.r),I.Kb(J.b),I.Kb(Tb.a))},Kb.\u0275cmp=I.Eb({type:Kb,selectors:[["contact-list"]],viewQuery:function(e,t){var n;1&e&&I.Hc(Ub,!0),2&e&&I.pc(n=I.Yb())&&(t.usersResults=n.first)},features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"ngClass","heading","mobileHeading","headingActions"],[1,"filters-row"],[3,"formControl","allowedResultTypes"],["resultKind","contact",3,"ngClass","results","rendering$","data","resultType","update"],["usersResults",""]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Hb,1,0,"ng-container",1),I.Pb(),I.Bc(3,qb,12,29,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,A.q,$b.a,C.v,C.k,to],pipes:[A.b],encapsulation:2,changeDetection:0}),Kb),jb=o("9AzD"),zb=o("fe3a"),Xb=o("uao2");function Jb(e,t){1&e&&I.Mb(0)}function Yb(e,t){if(1&e&&(I.Qb(0,"div",14),I.Qb(1,"label-value",15),I.Lb(2,"user-link",16),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",n.broker)}}function Wb(e,t){1&e&&I.Lb(0,"div",17)}function ed(e,t){if(1&e&&(I.Qb(0,"div",14),I.Lb(1,"input-field",18),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("label",n.i18n.general.keywords)}}function td(e,t){if(1&e&&I.Lb(0,"field-option",21),2&e){var n=t.$implicit,i=I.Zb(4);I.gc("value",i.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)("parent",n.groupSet)}}function nd(e,t){if(1&e&&(I.Qb(0,"div",14),I.Qb(1,"multi-selection-field",19),I.Bc(2,td,1,5,"field-option",20),I.Pb(),I.Pb()),2&e){var n=I.Zb(3);I.xb(1),I.gc("label",n.i18n.user.groupFilter),I.xb(1),I.gc("ngForOf",n.data.groups)}}function id(e,t){if(1&e&&(I.Qb(0,"div",14),I.Lb(1,"max-distance-field",31),I.Pb()),2&e){var n=I.Zb(4);I.xb(1),I.gc("data",n.data.searchByDistanceData)("label",n.i18n.general.distanceFilter)}}function ad(e,t){if(1&e&&I.Lb(0,"field-option",34),2&e){var n=t.$implicit,i=I.Zb(5);I.gc("value",i.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)}}function rd(e,t){if(1&e&&(I.Qb(0,"div",14),I.Qb(1,"multi-selection-field",32),I.Bc(2,ad,1,4,"field-option",33),I.Pb(),I.Pb()),2&e){var n=I.Zb(4);I.xb(1),I.gc("emptyLabel",n.i18n.general.notApplied)("label",n.i18n.user.assignedProducts),I.xb(1),I.gc("ngForOf",n.data.products)}}function od(e,t){if(1&e&&I.Lb(0,"field-option",34),2&e){var n=t.$implicit,i=I.Zb(5);I.gc("value",i.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)}}function sd(e,t){if(1&e&&(I.Qb(0,"div",14),I.Qb(1,"multi-selection-field",35),I.Bc(2,od,1,4,"field-option",33),I.Pb(),I.Pb()),2&e){var n=I.Zb(4);I.xb(1),I.gc("emptyLabel",n.i18n.general.notApplied)("label",n.i18n.user.acceptedAgreements),I.xb(1),I.gc("ngForOf",n.data.agreements)}}function cd(e,t){if(1&e&&I.Lb(0,"field-option",34),2&e){var n=t.$implicit,i=I.Zb(5);I.gc("value",i.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)}}function ld(e,t){if(1&e&&(I.Qb(0,"div",14),I.Qb(1,"multi-selection-field",36),I.Bc(2,cd,1,4,"field-option",33),I.Pb(),I.Pb()),2&e){var n=I.Zb(4);I.xb(1),I.gc("emptyLabel",n.i18n.general.notApplied)("label",n.i18n.user.notAcceptedAgreements),I.xb(1),I.gc("ngForOf",n.data.agreements)}}function ud(e,t){if(1&e&&(I.Qb(0,"div",14),I.Lb(1,"user-field",37),I.Pb()),2&e){var n=I.Zb(4);I.xb(1),I.gc("label",n.i18n.general.usersOfBroker)("filters",n.userSearchFilters())("allowContacts",!1)}}function bd(e,t){if(1&e&&(I.Qb(0,"div",14),I.Lb(1,"basic-profile-field-filter",38),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(4);I.xb(1),I.gc("field",n)("formControl",i.form.get("profileFields").get(n.field))}}function dd(e,t){if(1&e&&(I.Qb(0,"div",14),I.Lb(1,"custom-field-filter",38),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(4);I.xb(1),I.gc("field",n)("formControl",i.form.get("profileFields").get(n.internalName))}}function fd(e,t){if(1&e&&(I.Ob(0),I.Bc(1,id,2,2,"div",6),I.Bc(2,rd,3,3,"div",6),I.Bc(3,sd,3,3,"div",6),I.Bc(4,ld,3,3,"div",6),I.Qb(5,"div",14),I.Lb(6,"multi-selection-field",22),I.Pb(),I.Qb(7,"div",23),I.Qb(8,"div",14),I.Lb(9,"date-field",24),I.Pb(),I.Qb(10,"div",14),I.Lb(11,"date-field",25),I.Pb(),I.Pb(),I.Qb(12,"div",23),I.Qb(13,"div",14),I.Lb(14,"date-field",26),I.Pb(),I.Qb(15,"div",14),I.Lb(16,"date-field",27),I.Pb(),I.Pb(),I.Qb(17,"div",23),I.Qb(18,"div",14),I.Lb(19,"date-field",28),I.Pb(),I.Qb(20,"div",14),I.Lb(21,"date-field",29),I.Pb(),I.Pb(),I.Bc(22,ud,2,3,"div",6),I.Bc(23,bd,2,2,"div",30),I.Bc(24,dd,2,2,"div",30),I.Nb()),2&e){var n=I.Zb(3);I.xb(1),I.gc("ngIf",n.data.searchByDistanceData),I.xb(1),I.gc("ngIf",(null==n.data.products?null:n.data.products.length)>1),I.xb(1),I.gc("ngIf",(null==n.data.agreements?null:n.data.agreements.length)>1),I.xb(1),I.gc("ngIf",(null==n.data.agreements?null:n.data.agreements.length)>1),I.xb(2),I.gc("label",n.i18n.general.status)("fieldOptions",n.statusOptions)("emptyLabel",n.i18n.general.notApplied),I.xb(3),I.gc("label",n.i18n.user.creationBegin),I.xb(2),I.gc("label",n.i18n.user.creationEnd),I.xb(3),I.gc("label",n.i18n.user.beginUserActivationDate),I.xb(2),I.gc("label",n.i18n.user.endUserActivationDate),I.xb(3),I.gc("label",n.i18n.user.beginLastLoginDate),I.xb(2),I.gc("label",n.i18n.user.endLastLoginDate),I.xb(1),I.gc("ngIf",!n.isBrokeringSearch),I.xb(1),I.gc("ngForOf",n.data.basicFields),I.xb(1),I.gc("ngForOf",n.customFieldsInSearch)}}function gd(e,t){if(1&e&&(I.Ob(0),I.Bc(1,nd,3,2,"div",6),I.Bc(2,fd,25,16,"ng-container",8),I.ac(3,"async"),I.Nb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("ngIf",(null==n.data.groups?null:n.data.groups.length)>1),I.xb(1),I.gc("ngIf",I.bc(3,2,n.moreFilters$))}}function md(e,t){if(1&e&&(I.Qb(0,"div",39),I.Qb(1,"single-selection-field",40),I.Lb(2,"field-option",41),I.Lb(3,"field-option",42),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("formControl",n.form.get("orderBy"))("display",n.i18n.general.orderBy)("emptyOption",n.i18n.general.orderByRelevance),I.xb(1),I.gc("text",n.i18n.user.orderBy.alphabeticallyAsc),I.xb(1),I.gc("text",n.i18n.user.orderBy.alphabeticallyDesc)}}function pd(e,t){if(1&e){var n=I.Rb();I.Qb(0,"page-content",3),I.ac(1,"async"),I.Qb(2,"form",4),I.Qb(3,"div",5),I.Bc(4,Yb,3,2,"div",6),I.Bc(5,Wb,1,0,"div",7),I.ac(6,"async"),I.Bc(7,ed,2,1,"div",6),I.Bc(8,gd,4,4,"ng-container",8),I.ac(9,"async"),I.Pb(),I.Pb(),I.Qb(10,"div",9),I.Qb(11,"div",10),I.Lb(12,"result-type-field",11),I.ac(13,"async"),I.Pb(),I.Bc(14,md,4,5,"div",12),I.ac(15,"async"),I.ac(16,"async"),I.Pb(),I.Pb(),I.Qb(17,"users-results",13),I.Xb("update",(function(e){return I.sc(n),I.Zb().update(e)})),I.ac(18,"async"),I.ac(19,"async"),I.ac(20,"async"),I.ac(21,"async"),I.Pb()}if(2&e){var i=I.Zb();I.gc("heading",i.heading)("mobileHeading",i.mobileHeading)("headingActions",I.bc(1,16,i.headingActions$)),I.xb(2),I.gc("formGroup",i.form),I.xb(2),I.gc("ngIf",!i.self&&i.broker),I.xb(1),I.gc("ngIf",I.bc(6,18,i.layout.gtsm$)&&!i.self&&i.broker),I.xb(2),I.gc("ngIf",i.data.allowKeywords),I.xb(1),I.gc("ngIf",I.bc(9,20,i.layout.gtxxs$)),I.xb(4),I.gc("allowedResultTypes",I.bc(13,22,i.allowedResultTypes$))("formControl",i.resultTypeControl),I.xb(2),I.gc("ngIf",I.bc(15,24,i.layout.gtxxs$)&&"map"!==I.bc(16,26,i.resultType$)),I.xb(3),I.gc("results",I.bc(18,28,i.results$))("rendering$",i.rendering$)("data",I.bc(19,30,i.data$))("resultType",I.bc(20,32,i.resultType$))("referencePoint",(I.bc(21,34,i.form.valueChanges)||i.form.value).distanceFilter)}}var hd,vd=function(e){return e[e.Public=0]="Public",e[e.Member=1]="Member",e[e.Admin=2]="Admin",e[e.Broker=3]="Broker",e}({}),yd=((hd=function(t){l(i,t);var n=b(i);function i(e,t,a,o){var s;return r(this,i),(s=n.call(this,e)).usersService=t,s.userHelper=a,s.countriesResolve=o,s.ResultType=Sr.a,s.UserSearchKind=vd,s.empty=y.h,s}return s(i,[{key:"getFormControlNames",value:function(){return["keywords","groups","customValues","distanceFilter","orderBy","statuses","beginActivationPeriod","endActivationPeriod","beginCreationPeriod","endCreationPeriod","beginLastLoginPeriod","endLastLoginPeriod","notAcceptedAgreements","acceptedAgreements","products","brokers"]}},{key:"getInitialResultType",value:function(){var e=this.uiLayout.getBreakpointConfiguration("defaultUsersResultType");return e&&this.allowedResultTypes.includes(e)?e:this.layout.xxs?Sr.a.LIST:Sr.a.TILES}},{key:"ngOnInit",value:function(){c(f(i.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user||h.a.SELF,this.self=this.authHelper.isSelf(this.param);var e=this.login.auth,t=null==e?null:e.role,n=this.router.url;n.includes("search")?this.kind=null==t?vd.Public:t===et.kb.ADMINISTRATOR?vd.Admin:vd.Member:n.includes("brokerings")&&(this.kind=vd.Broker),this.manager=[vd.Admin,vd.Broker].includes(this.kind);var a=[vd.Public,vd.Member].includes(this.kind);a?(this.heading=this.i18n.user.title.directory,this.mobileHeading=this.i18n.user.mobileTitle.directory):this.kind===vd.Broker?this.self?(this.heading=this.i18n.user.title.myBrokerings,this.mobileHeading=this.i18n.user.mobileTitle.myBrokerings):(this.heading=this.i18n.user.title.userBrokerings,this.mobileHeading=this.i18n.user.mobileTitle.userBrokerings):this.kind===vd.Admin&&(this.heading=this.i18n.user.title.search,this.mobileHeading=this.i18n.user.mobileTitle.search);var r=((e||{}).permissions||{}).users||{};if(this.canSearch=this.kind===vd.Broker||!!r.search,this.canViewMap=a&&r.map,this.canSearch||this.canViewMap){var o=[];this.canSearch&&(o.push(Sr.a.TILES),o.push(Sr.a.LIST)),(this.canViewMap||this.manager)&&o.push(Sr.a.MAP),this.allowedResultTypes=o,this.countries$=this.countriesResolve.data,this.resultType=this.getInitialResultType(),this.onResultTypeChanged(this.resultType,null)}else this.errorHandler.handleForbiddenError({})}},{key:"shouldUpdateOnResultTypeChange",value:function(){return!1}},{key:"onResultTypeChanged",value:function(t,n){var i=this,a=t===Sr.a.MAP;(a!==(n===Sr.a.MAP)||null==n)&&(this.data=null,this.resetPage());var r=function(t){Object(y.h)(t.fieldsInList)&&(t.fieldsInList=["display"]),i.doIgnoringUpdate((function(){i.customFieldsInSearch=t.customFields.filter((function(e){return t.fieldsInSearch.includes(e.internalName)})),i.form.setControl("profileFields",i.fieldHelper.profileFieldsForSearchFormGroup(t.basicFields,i.customFieldsInSearch)),!i.broker&&t.broker&&(i.broker=t.broker),i.data=t,i.headingActions=[].concat(e(Object(y.h)(t.fieldsInSearch)?[]:[i.moreFiltersAction]),e(i.exportHelper.headingActions(i.data.exportFormats,(function(e){return i.usersService.exportUsers$Response(Object.assign({format:e.internalName},i.toSearchParams(i.form.value)))}))))}))};null==this.data&&(this.rendering=!0,a&&!this.manager?this.stateManager.cache("dataForMap",this.usersService.getDataForMapDirectory()).subscribe(r):this.stateManager.cache("dataForSearch",this.usersService.getUserDataForSearch({fromMenu:!0,broker:this.kind===vd.Broker?this.param:null})).subscribe(r))}},{key:"toSearchParams",value:function(e){var t=Object.assign({},e);this.kind===vd.Broker&&(t.brokers=[this.param]),t.activationPeriod=h.a.dateRangeFilter(e.beginActivationPeriod,e.endActivationPeriod),t.creationPeriod=h.a.dateRangeFilter(e.beginCreationPeriod,e.endCreationPeriod),t.lastLoginPeriod=h.a.dateRangeFilter(e.beginLastLoginPeriod,e.endLastLoginPeriod),t.profileFields=this.fieldHelper.toProfileFieldsFilter(e.profileFields);var n=e.distanceFilter;n&&(t.maxDistance=n.maxDistance,t.latitude=n.latitude,t.longitude=n.longitude);var i=this.resultType===Sr.a.MAP;return t.fromMenu=this.kind!==vd.Broker,i&&(t.pageSize=99999,t.addressResult=et.Eb.ALL),t}},{key:"userSearchFilters",value:function(){return{roles:[et.kb.BROKER]}}},{key:"doSearch",value:function(e){return this.resultType!==Sr.a.MAP||this.manager?this.usersService.searchUsers$Response(e):this.usersService.searchMapDirectory$Response(e)}},{key:"resolveMenu",value:function(){switch(this.kind){case vd.Broker:return x.b.MY_BROKERED_USERS;case vd.Public:return x.b.PUBLIC_DIRECTORY;default:return x.b.SEARCH_USERS}}},{key:"statusOptions",get:function(){var e=this;return Object.values(et.Nb).map((function(t){return{value:t,text:e.userHelper.userStatus(t)}}))}},{key:"isBrokeringSearch",get:function(){return this.kind===vd.Broker}}]),i}(Ue.a)).\u0275fac=function(e){return new(e||hd)(I.Kb(I.r),I.Kb(os.a),I.Kb(j.a),I.Kb(g.a))},hd.\u0275cmp=I.Eb({type:hd,selectors:[["search-users"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator","border-bottom",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],["class","col-md-6",4,"ngIf"],[4,"ngIf"],[1,"row","filters-row"],[1,"col-12","col-xs-7","col-md-9"],[3,"allowedResultTypes","formControl"],["class","col-12 col-xs-5 col-md-3",4,"ngIf"],[3,"results","rendering$","data","resultType","referencePoint","update"],[1,"col-12","col-md-6"],["labelPosition","side",3,"label"],[3,"user"],[1,"col-md-6"],["labelPosition","side","formControlName","keywords",3,"label"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","groups",3,"label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],["labelPosition","side","formControlName","statuses",3,"label","fieldOptions","emptyLabel"],[1,"row","no-gutters","col-12"],["labelPosition","side","formControlName","beginCreationPeriod","minDate","past100","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["labelPosition","side","formControlName","endCreationPeriod","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","beginActivationPeriod","minDate","past100","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["labelPosition","side","formControlName","endActivationPeriod","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","beginLastLoginPeriod","minDate","past100","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["labelPosition","side","formControlName","endLastLoginPeriod","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],["labelPosition","side","formControlName","distanceFilter",3,"data","label"],["labelPosition","side","formControlName","products",3,"emptyLabel","label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],[3,"value","internalName","id","text"],["labelPosition","side","formControlName","acceptedAgreements",3,"emptyLabel","label"],["labelPosition","side","formControlName","notAcceptedAgreements",3,"emptyLabel","label"],["labelPosition","side","formControlName","brokers",3,"label","filters","allowContacts"],["labelPosition","side",3,"field","formControl"],[1,"col-12","col-xs-5","col-md-3"],[3,"formControl","display","emptyOption"],["value","alphabeticallyAsc",3,"text"],["value","alphabeticallyDesc",3,"text"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Jb,1,0,"ng-container",1),I.Pb(),I.Bc(3,pd,22,36,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,C.I,C.w,C.n,$b.a,C.v,C.k,to,_.a,Gt.a,qt.a,C.l,Ot.a,A.s,qe.a,He.a,jb.a,Ke.a,zb.a,Xb.a,Ge.a],pipes:[A.b],encapsulation:2,changeDetection:0}),hd),xd=o("XS/k");function Pd(e,t){1&e&&I.Mb(0)}function Id(e,t){if(1&e&&(I.Qb(0,"div",11),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(2);I.xb(1),I.Gc(" ",i.i18n.general.performedBy,": ",n.by.display," ")}}function kd(e,t){if(1&e&&(I.Qb(0,"mobile-result",8),I.Qb(1,"div",9),I.Dc(2),I.Pb(),I.Bc(3,Id,2,2,"div",10),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(2);I.gc("date",null==n.period?null:n.period.date),I.xb(2),I.Gc(" ",i.i18n.general.status,": ",i.userHelper.userStatus(n.status)," "),I.xb(1),I.gc("ngIf",n.by)}}function Ed(e,t){if(1&e&&(I.Qb(0,"tr"),I.Qb(1,"td"),I.Dc(2),I.ac(3,"date"),I.Pb(),I.Qb(4,"td"),I.Dc(5),I.Pb(),I.Qb(6,"td"),I.Dc(7),I.Pb(),I.Pb()),2&e){var n=t.$implicit,i=I.Zb(3);I.xb(2),I.Ec(I.bc(3,3,null==n.period?null:n.period.begin)),I.xb(3),I.Ec(i.userHelper.userStatus(n.status)),I.xb(2),I.Ec(null==n.by?null:n.by.display)}}function Ad(e,t){if(1&e&&(I.Qb(0,"table",12),I.Qb(1,"thead"),I.Qb(2,"th"),I.Dc(3),I.Pb(),I.Qb(4,"th"),I.Dc(5),I.Pb(),I.Qb(6,"th"),I.Dc(7),I.Pb(),I.Pb(),I.Qb(8,"tbody"),I.Bc(9,Ed,8,5,"tr",13),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(3),I.Ec(n.i18n.general.date),I.xb(2),I.Ec(n.i18n.general.status),I.xb(2),I.Ec(n.i18n.general.performedBy),I.xb(2),I.gc("ngForOf",n.data.history)}}function Cd(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.Lb(1,"user-info",4),I.Pb(),I.Qb(2,"results-layout",5),I.Bc(3,kd,4,4,"mobile-result",6),I.Bc(4,Ad,10,4,"table",7),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.operator?n.i18n.userStatus.title.historyOperator:n.i18n.userStatus.title.historyUser)("mobileHeading",n.operator?n.i18n.userStatus.mobileTitle.historyOperator:n.i18n.userStatus.mobileTitle.historyUser),I.xb(1),I.gc("user",n.data.user),I.xb(1),I.gc("results",n.data.history)}}var Dd,Od=((Dd=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).userStatusService=i,o.userHelper=a,o}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.userStatusService.getUserStatus({user:this.param,fields:["user","history"]}).subscribe((function(t){e.data=t})))}},{key:"resolveMenu",value:function(e){return this.menu.searchUsersMenu(e.user)}},{key:"operator",get:function(){return this.userHelper.isOperator(this.data.user)}}]),n}(X.a)).\u0275fac=function(e){return new(e||Dd)(I.Kb(I.r),I.Kb(xd.a),I.Kb(j.a))},Dd.\u0275cmp=I.Eb({type:Dd,selectors:[["view-user-status-history"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading"],[3,"user"],[3,"results"],[3,"date",4,"mobileResult"],["class","table table-hover",4,"resultTable"],[3,"date"],[1,"cell-main"],["class","cell-text",4,"ngIf"],[1,"cell-text"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Pd,1,0,"ng-container",1),I.Pb(),I.Bc(3,Cd,5,4,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,Q.a,Y.a,W.a,ee.a,te.a,A.s],pipes:[A.b,ie.a],encapsulation:2,changeDetection:0}),Dd);function Sd(e,t){if(1&e&&I.Lb(0,"field-option",11),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("value",n)("text",i.userHelper.userStatus(n))}}function Qd(e,t){if(1&e){var n=I.Rb();I.Ob(0),I.Lb(1,"hr"),I.Qb(2,"form",6),I.Qb(3,"single-selection-field",7),I.Bc(4,Sd,1,2,"field-option",8),I.Pb(),I.Lb(5,"textarea-field",9),I.Pb(),I.Qb(6,"actions"),I.Qb(7,"action-button",10),I.Xb("action",(function(){return I.sc(n),I.Zb(2).save()})),I.Pb(),I.Pb(),I.Nb()}if(2&e){var i=I.Zb(2);I.xb(2),I.gc("formGroup",i.form),I.xb(1),I.gc("label",i.i18n.userStatus.new),I.xb(1),I.gc("ngForOf",i.data.possibleNewStatuses),I.xb(1),I.gc("label",i.i18n.general.comments),I.xb(2),I.gc("label",i.i18n.general.submit)}}function Nd(e,t){if(1&e&&(I.Qb(0,"page-content",2),I.ac(1,"async"),I.Lb(2,"user-info",3),I.Qb(3,"label-value",4),I.Dc(4),I.Pb(),I.Bc(5,Qd,8,5,"ng-container",5),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.operator?n.i18n.userStatus.title.statusOperator:n.i18n.userStatus.title.statusUser)("mobileHeading",n.operator?n.i18n.userStatus.mobileTitle.statusOperator:n.i18n.userStatus.mobileTitle.statusUser)("headingActions",I.bc(1,7,n.headingActions$)),I.xb(2),I.gc("user",n.data.user),I.xb(1),I.gc("label",n.i18n.userStatus.current),I.xb(1),I.Fc(" ",n.userHelper.userStatus(n.data.status)," "),I.xb(1),I.gc("ngIf",n.editable)}}var wd,Fd=((wd=function(e){l(n,e);var t=b(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e)).userStatusService=i,o.userHelper=a,o}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.user,this.addSub(this.userStatusService.getUserStatus({user:this.param,fields:["-history"]}).subscribe((function(t){e.data=t}))),this.form=this.formBuilder.group({status:[null,C.G.required],comment:null}),this.headingActions=[new Ie.c("history",this.i18n.general.viewHistory,(function(){return e.router.navigate(["users",e.param,"status","history"])}),!0)]}},{key:"save",value:function(){var e=this;if(Object(y.F)(this.form),this.form.valid){var t,n,i=this.form.value.status,a=this.data.user,r=this.userHelper.isOperator(a);switch(i){case et.Nb.ACTIVE:t=this.i18n.userStatus.confirm.active(a.display);break;case et.Nb.BLOCKED:t=this.i18n.userStatus.confirm.blocked(a.display);break;case et.Nb.DISABLED:t=this.i18n.userStatus.confirm.disabled(a.display);break;case et.Nb.REMOVED:t=this.i18n.userStatus.confirm.removed(a.display);break;case et.Nb.PURGED:t=this.i18n.userStatus.confirm.purged(a.display)}n=r?this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeOperator:this.i18n.userStatus.title.changeOperator:this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeUser:this.i18n.userStatus.title.changeUser,this.notification.confirm({title:n,message:t,callback:function(){return e.submit(i)}})}}},{key:"submit",value:function(e){var t=this,n=this.data.user.display;this.addSub(this.userStatusService.changeUserStatus({user:this.param,body:this.form.value}).subscribe((function(){var i;switch(e){case et.Nb.ACTIVE:i=t.i18n.userStatus.done.active(n);break;case et.Nb.BLOCKED:i=t.i18n.userStatus.done.blocked(n);break;case et.Nb.DISABLED:i=t.i18n.userStatus.done.disabled(n);break;case et.Nb.REMOVED:i=t.i18n.userStatus.done.removed(n);break;case et.Nb.PURGED:i=t.i18n.userStatus.done.purged(n)}t.notification.snackBar(i),t.reload()})))}},{key:"resolveMenu",value:function(e){return this.menu.searchUsersMenu(e.user)}},{key:"editable",get:function(){return!Object(y.h)(this.data.possibleNewStatuses)}},{key:"operator",get:function(){return this.userHelper.isOperator(this.data.user)}}]),n}(X.a)).\u0275fac=function(e){return new(e||wd)(I.Kb(I.r),I.Kb(xd.a),I.Kb(j.a))},wd.\u0275cmp=I.Eb({type:wd,selectors:[["view-user-status"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions",4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[3,"user"],[3,"label"],[4,"ngIf"],[3,"formGroup"],["formControlName","status","required","",3,"label"],[3,"value","text",4,"ngFor","ngForOf"],["formControlName","comment",3,"label"],[3,"label","action"],[3,"value","text"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Nd,6,9,"page-content",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,Q.a,_.a,C.I,C.w,C.n,Ge.a,C.v,C.l,C.D,A.s,Kt.a,O.a,S.a,qe.a],pipes:[A.b],encapsulation:2,changeDetection:0}),wd),Ld=o("piyO"),Bd=o("Aw04");function Rd(e,t){if(1&e&&(I.Qb(0,"label-value",10),I.Dc(1),I.Pb()),2&e){var n=I.Zb();I.gc("label",n.i18n.general.user),I.xb(1),I.Fc(" ",n.user.display," ")}}function Td(e,t){if(1&e&&I.Lb(0,"user-field",11),2&e){var n=I.Zb();I.gc("label",n.i18n.general.user)}}function Zd(e,t){if(1&e&&I.Lb(0,"field-option",14),2&e){var n=t.$implicit;I.gc("value",n.id)("text",n.name)}}function _d(e,t){if(1&e&&(I.Qb(0,"single-selection-field",12),I.Bc(1,Zd,1,2,"field-option",13),I.ac(2,"async"),I.Pb()),2&e){var n=I.Zb();I.gc("label",n.i18n.general.operator)("emptyOption",n.i18n.general.notSet),I.xb(1),I.gc("ngForOf",I.bc(2,3,n.operators$))}}function Md(e,t){if(1&e&&I.Lb(0,"boolean-field",15),2&e){var n=I.Zb();I.gc("label",n.i18n.token.action.activate)}}function $d(e,t){1&e&&I.Dc(0,"\xa0")}var Ud,Hd=((Ud=function(e){l(n,e);var t=b(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e)).modalRef=i,s.tokensService=a,s.operatorsService=o,s.operators$=new Ht.a(null),s.canActivate$=new Ht.a(null),s}return s(n,[{key:"ngOnInit",value:function(){var e=this;this.canActivate$.next(!!this.user),this.form=this.formBuilder.group({user:this.user?this.user.id:null,operator:null,value:[null,C.G.required],activateNow:!1}),this.user||this.form.get("user").valueChanges.subscribe((function(){return e.fillOperatorsField()}))}},{key:"fillOperatorsField",value:function(){var e=this,t=this.form.get("user").value;t?(this.canActivate$.next(!0),this.operatorsService.searchUserOperators$Response({user:t,skipTotalCount:!0,pageSize:9999999}).subscribe((function(t){var n;t.ok&&(null===(n=t.body)||void 0===n?void 0:n.length)>0?e.operators$.next(t.body):e.operators$.next(null)}))):(this.canActivate$.next(!1),this.operators$.next(null))}},{key:"submit",value:function(){var e=this;if(Object(y.F)(this.form),this.form.valid){var t=Object(P.a)(this.form.value);t.operator&&(t.user=t.operator,delete t.operator),this.tokensService.createToken({type:this.type.id,body:t}).subscribe((function(){e.notification.snackBar(e.i18n.token.action.done.created),e.updateAction()})),this.modalRef.hide()}}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||Ud)(I.Kb(I.r),I.Kb(J.a),I.Kb(Ld.a),I.Kb(rr.a))},Ud.\u0275cmp=I.Eb({type:Ud,selectors:[["create-token"]],inputs:{type:"type",user:"user",required:"required",updateAction:"updateAction"},features:[I.ub],decls:16,vars:18,consts:[[1,"d-flex","flex-grow-1","flex-column",3,"formGroup"],["kind","fieldView","labelPosition","side",3,"label",4,"ngIf"],["formControlName","user",3,"label",4,"ngIf"],["formControlName","operator",3,"label","emptyOption",4,"ngIf"],["required","","formControlName","value",3,"mask","label","placeholder"],["formControlName","activateNow",3,"label",4,"ngIf"],["forceRow",""],[3,"label","disabled","action"],["blank",""],["outline","",3,"label","action"],["kind","fieldView","labelPosition","side",3,"label"],["formControlName","user",3,"label"],["formControlName","operator",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["formControlName","activateNow",3,"label"]],template:function(e,t){var n;1&e&&(I.Qb(0,"h1"),I.Dc(1),I.Pb(),I.Qb(2,"form",0),I.Bc(3,Rd,2,2,"label-value",1),I.Bc(4,Td,1,1,"user-field",2),I.Bc(5,_d,3,5,"single-selection-field",3),I.ac(6,"async"),I.Lb(7,"input-field",4),I.Bc(8,Md,1,1,"boolean-field",5),I.ac(9,"async"),I.Qb(10,"actions",6),I.Qb(11,"action-button",7),I.Xb("action",(function(){return t.submit()})),I.ac(12,"async"),I.Pb(),I.Bc(13,$d,1,0,"ng-template",null,8,I.Cc),I.Qb(15,"action-button",9),I.Xb("action",(function(){return t.modalRef.hide()})),I.Pb(),I.Pb(),I.Pb()),2&e&&(I.xb(1),I.Ec(t.i18n.token.title.new(t.type.name)),I.xb(1),I.gc("formGroup",t.form),I.xb(1),I.gc("ngIf",t.user),I.xb(1),I.gc("ngIf",!t.user),I.xb(1),I.gc("ngIf",(null==(n=I.bc(6,12,t.operators$))?null:n.length)>0),I.xb(2),I.gc("mask",t.type.mask)("label",t.i18n.token.value)("placeholder",t.type.mask?t.type.mask:""),I.xb(1),I.gc("ngIf",I.bc(9,14,t.canActivate$)),I.xb(3),I.gc("label",t.i18n.general.submit)("disabled",I.bc(12,16,t.requesting$)),I.xb(4),I.gc("label",t.i18n.general.cancel))},directives:[C.I,C.w,C.n,A.t,qt.a,C.D,C.v,C.l,Bd.a,O.a,S.a,_.a,Ke.a,Ge.a,A.s,qe.a,D.a],pipes:[A.b],encapsulation:2,changeDetection:0}),Ud);function Gd(e,t){if(1&e&&I.Lb(0,"user-info",7),2&e){var n=I.Zb(2);I.gc("user",n.data.user)}}function qd(e,t){if(1&e&&(I.Qb(0,"label-value",10),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(2);I.gc("label",i.i18n.general.operator),I.xb(1),I.Fc(" ",null!=n.user&&n.user.user?n.user.display:""," ")}}function Kd(e,t){if(1&e){var n=I.Rb();I.Qb(0,"mobile-result"),I.Qb(1,"div",8),I.Qb(2,"div"),I.Bc(3,qd,2,2,"label-value",9),I.Qb(4,"label-value",10),I.Dc(5),I.Pb(),I.Qb(6,"label-value",10),I.Dc(7),I.ac(8,"date"),I.Pb(),I.Qb(9,"label-value",10),I.Dc(10),I.ac(11,"date"),I.Pb(),I.Qb(12,"label-value",10),I.Dc(13),I.ac(14,"date"),I.Pb(),I.Qb(15,"label-value",10),I.Dc(16),I.Pb(),I.Pb(),I.Qb(17,"div",11),I.Qb(18,"button",12),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit,a=I.Zb(2);return a.router.navigate(a.view(i)),e.stopPropagation(),e.preventDefault()})),I.Lb(19,"icon",13),I.Pb(),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=t.$implicit,a=I.Zb(2);I.xb(3),I.gc("ngIf",!a.self),I.xb(1),I.gc("label",a.isNfc()?a.i18n.token.label:a.i18n.token.value),I.xb(1),I.Fc(" ",i.value," "),I.xb(1),I.gc("label",a.i18n.token.creationDate),I.xb(1),I.Fc(" ",I.bc(8,12,i.creationDate)," "),I.xb(2),I.gc("label",a.i18n.token.activationDate),I.xb(1),I.Fc(" ",I.bc(11,14,i.activationDate)," "),I.xb(2),I.gc("label",a.i18n.token.expiryDate),I.xb(1),I.Fc(" ",I.bc(14,16,i.expiryDate)," "),I.xb(2),I.gc("label",a.i18n.general.status),I.xb(1),I.Fc(" ",a.statusDisplay(i.status)," "),I.xb(2),I.gc("tooltip",a.i18n.general.view)}}function Vd(e,t){if(1&e&&(I.Qb(0,"th"),I.Dc(1),I.Pb()),2&e){var n=I.Zb(3);I.xb(1),I.Ec(n.i18n.general.operator)}}function jd(e,t){if(1&e&&(I.Qb(0,"td"),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.xb(1),I.Fc("",null!=n.user&&n.user.user?n.user.display:""," ")}}function zd(e,t){if(1&e){var n=I.Rb();I.Qb(0,"tr",16),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit,a=I.Zb(3);return a.router.navigate(a.view(i)),e.stopPropagation(),e.preventDefault()})),I.Bc(1,jd,2,1,"td",1),I.Qb(2,"td"),I.Dc(3),I.Pb(),I.Qb(4,"td"),I.Dc(5),I.ac(6,"date"),I.Pb(),I.Qb(7,"td"),I.Dc(8),I.ac(9,"date"),I.Pb(),I.Qb(10,"td"),I.Dc(11),I.ac(12,"date"),I.Pb(),I.Qb(13,"td"),I.Dc(14),I.Pb(),I.Pb()}if(2&e){var i=t.$implicit,a=I.Zb(3);I.xb(1),I.gc("ngIf",!a.self),I.xb(2),I.Ec(i.value),I.xb(2),I.Ec(I.bc(6,6,i.creationDate)),I.xb(3),I.Ec(I.bc(9,8,i.activationDate)),I.xb(3),I.Ec(I.bc(12,10,i.expiryDate)),I.xb(3),I.Ec(a.statusDisplay(i.status))}}function Xd(e,t){if(1&e&&(I.Qb(0,"table",14),I.Qb(1,"thead"),I.Bc(2,Vd,2,1,"th",1),I.Qb(3,"th"),I.Dc(4),I.Pb(),I.Qb(5,"th"),I.Dc(6),I.Pb(),I.Qb(7,"th"),I.Dc(8),I.Pb(),I.Qb(9,"th"),I.Dc(10),I.Pb(),I.Qb(11,"th"),I.Dc(12),I.Pb(),I.Pb(),I.Qb(13,"tbody"),I.Bc(14,zd,15,12,"tr",15),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(2),I.gc("ngIf",!n.self),I.xb(2),I.Ec(n.isNfc()?n.i18n.token.label:n.i18n.token.value),I.xb(2),I.Ec(n.i18n.token.creationDate),I.xb(2),I.Ec(n.i18n.token.activationDate),I.xb(2),I.Ec(n.i18n.token.expiryDate),I.xb(2),I.Ec(n.i18n.general.status),I.xb(2),I.gc("ngForOf",n.data.tokens)}}function Jd(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"page-content",2),I.ac(2,"async"),I.Bc(3,Gd,1,1,"user-info",3),I.Pb(),I.Qb(4,"results-layout",4),I.Bc(5,Kd,20,18,"mobile-result",5),I.Bc(6,Xd,15,7,"table",6),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(1),I.gc("heading",null==n.data?null:n.data.type.pluralName)("mobileHeading",null==n.data?null:n.data.type.pluralName)("headingActions",I.bc(2,6,n.headingActions$))("mode",n.self?"empty":"normal"),I.xb(2),I.gc("ngIf",!n.self),I.xb(1),I.gc("results",n.data.tokens)}}var Yd,Wd=((Yd=function(e){l(n,e);var t=b(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e)).modal=i,s.userHelper=a,s.tokenService=o,s}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.user=this.route.snapshot.params.user,this.type=this.route.snapshot.params.type,this.addSub(this.tokenService.getUserTokens({user:this.user,type:this.type}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;c(f(n.prototype),"onDataInitialized",this).call(this,e),this.self=this.authHelper.isSelf(e.user),this.canCreate()&&e.type.physicalType!==et.ab.NFC_TAG&&(this.headingActions=[new Ie.c("add",this.i18n.general.add,(function(){t.modal.show(Hd,{class:"modal-form",initialState:{type:e.type,user:e.user,required:!0,updateAction:function(){return t.reload()}}})}),!0)]),this.canActivate()&&(this.headingActions=[new Ie.c("how_to_reg",this.i18n.token.action.activate,(function(){t.notification.confirm({title:t.i18n.token.action.activate,customFields:[{internalName:"value",name:t.i18n.token.value,type:et.p.STRING,pattern:e.type.mask,required:!0}],callback:function(e){return t.tokenService.activateToken({user:t.user,type:t.type,body:e.customValues.value}).subscribe((function(){t.notification.snackBar(t.i18n.token.action.done.expiryChanged),t.reload()}))}})}),!0)])}},{key:"isNfc",value:function(){return this.data.type.physicalType===et.ab.NFC_TAG}},{key:"canCreate",value:function(){var e,t=this;return!this.self&&(null===(e=this.dataForUiHolder.auth.permissions.tokens.user.find((function(e){return e.type.id===t.type})))||void 0===e?void 0:e.create)}},{key:"canActivate",value:function(){var e,t=this;return!!this.self&&(null===(e=this.dataForUiHolder.auth.permissions.tokens.my.find((function(e){return e.type.id===t.type})))||void 0===e?void 0:e.activate)}},{key:"statusDisplay",value:function(e){return this.userHelper.tokenStatus(e)}},{key:"view",value:function(e){return["/users","tokens","view",e.id]}},{key:"resolveMenu",value:function(e){return this.authHelper.isSelf(e.user)?new x.a(x.b.MY_TOKENS,{tokenType:e.type}):e.user.user&&this.authHelper.isSelf(e.user.user)?x.b.MY_OPERATORS:this.dataForUiHolder.role===et.kb.BROKER?x.b.MY_BROKERED_USERS:x.b.SEARCH_USERS}}]),n}(v.a)).\u0275fac=function(e){return new(e||Yd)(I.Kb(I.r),I.Kb(J.b),I.Kb(j.a),I.Kb(Ld.a))},Yd.\u0275cmp=I.Eb({type:Yd,selectors:[["list-token"]],features:[I.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions","mode"],[3,"user",4,"ngIf"],[3,"results"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"user"],[1,"d-flex"],["labelPosition","above",3,"label",4,"ngIf"],["labelPosition","above",3,"label"],[1,"ml-auto","text-right","d-flex","flex-column"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","search"],[1,"table","table-hover","cursor-pointer"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,Jd,7,8,"ng-container",1),I.Pb()),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,A.t,E.a,Y.a,W.a,ee.a,Q.a,te.a,_.a,N.b,ne.a,A.s],pipes:[A.b,ie.a],encapsulation:2,changeDetection:0}),Yd);function ef(e,t){1&e&&I.Mb(0)}function tf(e,t){if(1&e&&I.Lb(0,"field-option",20),2&e){var n=t.$implicit,i=I.Zb(3);I.gc("value",i.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)("parent",n.groupSet)}}function nf(e,t){if(1&e&&(I.Qb(0,"div",6),I.Qb(1,"multi-selection-field",18),I.Bc(2,tf,1,5,"field-option",19),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(1),I.gc("label",n.i18n.user.groupFilter),I.xb(1),I.gc("ngForOf",n.data.groups)}}function af(e,t){if(1&e){var n=I.Rb();I.Qb(0,"mobile-result"),I.Qb(1,"div",21),I.Qb(2,"div"),I.Qb(3,"label-value",22),I.Dc(4),I.Pb(),I.Qb(5,"label-value",22),I.Dc(6),I.Pb(),I.Qb(7,"label-value",22),I.Dc(8),I.ac(9,"date"),I.Pb(),I.Qb(10,"label-value",22),I.Dc(11),I.ac(12,"date"),I.Pb(),I.Qb(13,"label-value",22),I.Dc(14),I.ac(15,"date"),I.Pb(),I.Qb(16,"label-value",22),I.Dc(17),I.Pb(),I.Pb(),I.Qb(18,"div",23),I.Qb(19,"button",24),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit,a=I.Zb(2);return a.router.navigate(a.view(i)),e.stopPropagation(),e.preventDefault()})),I.Lb(20,"icon",25),I.Pb(),I.Pb(),I.Pb(),I.Pb()}if(2&e){var i=t.$implicit,a=I.Zb(2);I.xb(3),I.gc("label",a.i18n.general.user),I.xb(1),I.Fc(" ",i.user?i.user.display:a.i18n.token.unassigned," "),I.xb(1),I.gc("label",a.isNfc()?a.i18n.token.label:a.i18n.token.value),I.xb(1),I.Fc(" ",i.value," "),I.xb(1),I.gc("label",a.i18n.token.creationDate),I.xb(1),I.Fc(" ",I.bc(9,13,i.creationDate)," "),I.xb(2),I.gc("label",a.i18n.token.activationDate),I.xb(1),I.Fc(" ",I.bc(12,15,i.activationDate)," "),I.xb(2),I.gc("label",a.i18n.token.expiryDate),I.xb(1),I.Fc(" ",I.bc(15,17,i.expiryDate)," "),I.xb(2),I.gc("label",a.i18n.general.status),I.xb(1),I.Fc(" ",a.statusDisplay(i.status)," "),I.xb(2),I.gc("tooltip",a.i18n.general.view)}}function rf(e,t){if(1&e){var n=I.Rb();I.Qb(0,"tr",28),I.Xb("click",(function(e){I.sc(n);var i=t.$implicit,a=I.Zb(3);return a.router.navigate(a.view(i)),e.stopPropagation(),e.preventDefault()})),I.Qb(1,"td"),I.Dc(2),I.Pb(),I.Qb(3,"td"),I.Dc(4),I.Pb(),I.Qb(5,"td"),I.Dc(6),I.ac(7,"date"),I.Pb(),I.Qb(8,"td"),I.Dc(9),I.ac(10,"date"),I.Pb(),I.Qb(11,"td"),I.Dc(12),I.ac(13,"date"),I.Pb(),I.Qb(14,"td"),I.Dc(15),I.Pb(),I.Pb()}if(2&e){var i=t.$implicit,a=I.Zb(3);I.xb(2),I.Ec(i.user?i.user.display:a.i18n.token.unassigned),I.xb(2),I.Ec(i.value),I.xb(2),I.Ec(I.bc(7,6,i.creationDate)),I.xb(3),I.Ec(I.bc(10,8,i.activationDate)),I.xb(3),I.Ec(I.bc(13,10,i.expiryDate)),I.xb(3),I.Ec(a.statusDisplay(i.status))}}function of(e,t){if(1&e&&(I.Qb(0,"table",26),I.Qb(1,"thead"),I.Qb(2,"th"),I.Dc(3),I.Pb(),I.Qb(4,"th"),I.Dc(5),I.Pb(),I.Qb(6,"th"),I.Dc(7),I.Pb(),I.Qb(8,"th"),I.Dc(9),I.Pb(),I.Qb(10,"th"),I.Dc(11),I.Pb(),I.Qb(12,"th"),I.Dc(13),I.Pb(),I.Pb(),I.Qb(14,"tbody"),I.Bc(15,rf,16,12,"tr",27),I.ac(16,"async"),I.Pb(),I.Pb()),2&e){var n,i=I.Zb(2);I.xb(3),I.Ec(i.i18n.general.user),I.xb(2),I.Ec(i.isNfc()?i.i18n.token.label:i.i18n.token.value),I.xb(2),I.Ec(i.i18n.token.creationDate),I.xb(2),I.Ec(i.i18n.token.activationDate),I.xb(2),I.Ec(i.i18n.token.expiryDate),I.xb(2),I.Ec(i.i18n.general.status),I.xb(2),I.gc("ngForOf",null==(n=I.bc(16,7,i.results$))?null:n.results)}}function sf(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.ac(1,"async"),I.Qb(2,"form",4),I.Qb(3,"div",5),I.Qb(4,"div",6),I.Lb(5,"user-field",7),I.Pb(),I.Lb(6,"div",8),I.Qb(7,"div",6),I.Lb(8,"date-field",9),I.Pb(),I.Qb(9,"div",6),I.Lb(10,"date-field",10),I.Pb(),I.Lb(11,"div",8),I.Qb(12,"div",6),I.Lb(13,"date-field",11),I.Pb(),I.Qb(14,"div",6),I.Lb(15,"date-field",12),I.Pb(),I.Pb(),I.Qb(16,"div",6),I.Lb(17,"multi-selection-field",13),I.Pb(),I.Bc(18,nf,3,2,"div",14),I.Pb(),I.Pb(),I.Qb(19,"results-layout",15),I.ac(20,"async"),I.Bc(21,af,21,19,"mobile-result",16),I.Bc(22,of,17,9,"table",17),I.Pb()),2&e){var n=I.Zb();I.gc("heading",null==n.data?null:n.data.type.pluralName)("mobileHeading",null==n.data?null:n.data.type.pluralName)("headingActions",I.bc(1,15,n.headingActions$)),I.xb(2),I.gc("formGroup",n.form),I.xb(3),I.gc("label",n.i18n.general.user),I.xb(3),I.gc("label",n.i18n.token.activationBeginDate),I.xb(2),I.gc("label",n.i18n.token.activationEndDate),I.xb(3),I.gc("label",n.i18n.token.expiryBeginDate),I.xb(2),I.gc("label",n.i18n.token.expiryEndDate),I.xb(2),I.gc("emptyLabel",n.i18n.general.notApplied)("label",n.i18n.general.status)("fieldOptions",n.statusOptions),I.xb(1),I.gc("ngIf",(null==n.data.groups?null:n.data.groups.length)>1),I.xb(1),I.gc("results",I.bc(20,17,n.results$))("rendering$",n.rendering$)}}var cf,lf=((cf=function(e){l(n,e);var t=b(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e)).userHelper=i,s.modal=a,s.tokenService=o,s}return s(n,[{key:"getFormControlNames",value:function(){return["user","statuses","groups","activationBeginDate","activationEndDate","expiryBeginDate","expiryEndDate"]}},{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.type=this.route.snapshot.params.type,this.addSub(this.tokenService.getGeneralTokensDataForSearch({type:this.type}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;c(f(n.prototype),"onDataInitialized",this).call(this,e),e.type.physicalType!==et.ab.NFC_TAG&&(this.headingActions=[new Ie.c("add",this.i18n.general.add,(function(){t.modal.show(Hd,{class:"modal-form",initialState:{type:e.type,updateAction:function(){return t.reload()}}})}),!0)])}},{key:"doSearch",value:function(e){return this.tokenService.searchGeneralTokens$Response(e)}},{key:"toSearchParams",value:function(e){var t=e;return t.type=this.type,t.activationPeriod=h.a.dateRangeFilter(e.activationBeginDate,e.activationEndDate),t.expiryPeriod=h.a.dateRangeFilter(e.expiryBeginDate,e.expiryEndDate),t}},{key:"statusDisplay",value:function(e){return this.userHelper.tokenStatus(e)}},{key:"isNfc",value:function(){return this.data.type.physicalType===et.ab.NFC_TAG}},{key:"view",value:function(e){return["/users","tokens","view",e.id]}},{key:"resolveMenu",value:function(e){return new x.a(x.b.USER_TOKENS,{tokenType:e.type})}},{key:"statusOptions",get:function(){var e=this;return Object.values(et.vb).map((function(t){return{value:t,text:e.statusDisplay(t)}}))}}]),n}(Ue.a)).\u0275fac=function(e){return new(e||cf)(I.Kb(I.r),I.Kb(j.a),I.Kb(J.b),I.Kb(Ld.a))},cf.\u0275cmp=I.Eb({type:cf,selectors:[["search-token"]],features:[I.ub],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row","no-gutters"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","user",3,"label"],[1,"w-100"],["labelPosition","side","formControlName","activationBeginDate","minDate","past100","maxDate","today","fieldSize","full",3,"label"],["labelPosition","side","formControlName","activationEndDate","minDate","past100","fieldSize","full",3,"label"],["labelPosition","side","formControlName","expiryBeginDate","minDate","past100","fieldSize","full",3,"label"],["labelPosition","side","formControlName","expiryEndDate","minDate","past100","fieldSize","full",3,"label"],["labelPosition","side","formControlName","statuses",3,"emptyLabel","label","fieldOptions"],["class","col-12 col-md-6",4,"ngIf"],[3,"results","rendering$"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","groups",3,"label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],[1,"d-flex"],["labelPosition","above",3,"label"],[1,"ml-auto","text-right","d-flex","flex-column"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","search"],[1,"table","table-hover","cursor-pointer"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){if(1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,ef,1,0,"ng-container",1),I.Pb(),I.Bc(3,sf,23,19,"ng-template",null,2,I.Cc)),2&e){var n=I.qc(4);I.gc("ready",I.bc(1,3,t.data$)),I.xb(2),I.gc("ngIf",t.data)("ngIfThen",n)}},directives:[k.a,A.t,E.a,C.I,C.w,C.n,Ke.a,C.v,C.l,He.a,Ot.a,Y.a,W.a,ee.a,A.s,qe.a,te.a,_.a,N.b,ne.a],pipes:[A.b,ie.a],encapsulation:2,changeDetection:0}),cf);function uf(e,t){if(1&e&&I.Lb(0,"field-option",9),2&e){var n=t.$implicit;I.gc("value",n.id)("text",n.display)}}function bf(e,t){if(1&e&&(I.Qb(0,"single-selection-field",7),I.Bc(1,uf,1,2,"field-option",8),I.ac(2,"async"),I.Pb()),2&e){var n=I.Zb();I.gc("label",n.i18n.general.operator)("emptyOption",n.i18n.general.notSet),I.xb(1),I.gc("ngForOf",I.bc(2,3,n.operators$))}}function df(e,t){1&e&&I.Dc(0,"\xa0")}var ff,gf=((ff=function(e){l(n,e);var t=b(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e)).modalRef=i,s.tokensService=a,s.operatorsService=o,s.operators$=new Ht.a(null),s}return s(n,[{key:"ngOnInit",value:function(){var e=this;this.form=this.formBuilder.group({user:[null,C.G.required],operator:null}),this.form.get("user").valueChanges.subscribe((function(t){return e.fillOperatorsField(t)}))}},{key:"fillOperatorsField",value:function(e){var t=this;this.operatorsService.searchUserOperators$Response({user:e.id,skipTotalCount:!0,pageSize:999999}).subscribe((function(e){t.operators$.next(e.ok?e.body:null)}))}},{key:"submit",value:function(){var e=this;if(Object(y.F)(this.form),this.form.valid){var t=Object(P.a)(this.form.value);this.tokensService.assignToken({id:this.token,user:t.operator?t.operator:t.user}).subscribe((function(){e.notification.snackBar(e.i18n.token.action.done.assigned),e.updateAction()})),this.modalRef.hide()}}}]),n}(Qr.a)).\u0275fac=function(e){return new(e||ff)(I.Kb(I.r),I.Kb(J.a),I.Kb(Ld.a),I.Kb(rr.a))},ff.\u0275cmp=I.Eb({type:ff,selectors:[["assign-token"]],inputs:{token:"token",updateAction:"updateAction"},features:[I.ub],decls:12,vars:11,consts:[[1,"d-flex","flex-grow-1","flex-column",3,"formGroup"],["required","","formControlName","user",3,"label"],["formControlName","operator",3,"label","emptyOption",4,"ngIf"],["forceRow",""],[3,"label","disabled","action"],["blank",""],["outline","",3,"label","action"],["formControlName","operator",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"]],template:function(e,t){var n;1&e&&(I.Qb(0,"h1"),I.Dc(1),I.Pb(),I.Qb(2,"form",0),I.Lb(3,"user-field",1),I.Bc(4,bf,3,5,"single-selection-field",2),I.ac(5,"async"),I.Qb(6,"actions",3),I.Qb(7,"action-button",4),I.Xb("action",(function(){return t.submit()})),I.ac(8,"async"),I.Pb(),I.Bc(9,df,1,0,"ng-template",null,5,I.Cc),I.Qb(11,"action-button",6),I.Xb("action",(function(){return t.modalRef.hide()})),I.Pb(),I.Pb(),I.Pb()),2&e&&(I.xb(1),I.Ec(t.i18n.token.title.assign),I.xb(1),I.gc("formGroup",t.form),I.xb(1),I.gc("label",t.i18n.general.user),I.xb(1),I.gc("ngIf",(null==(n=I.bc(5,7,t.operators$))?null:n.length)>0),I.xb(3),I.gc("label",t.i18n.general.submit)("disabled",I.bc(8,9,t.requesting$)),I.xb(4),I.gc("label",t.i18n.general.cancel))},directives:[C.I,C.w,C.n,Ke.a,C.D,C.v,C.l,A.t,O.a,S.a,Ge.a,A.s,qe.a],pipes:[A.b],encapsulation:2,changeDetection:0}),ff);function mf(e,t){if(1&e&&(I.Qb(0,"label-value",7),I.Lb(1,"user-link",8),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.user),I.xb(1),I.gc("user",null!=n.data.user&&n.data.user.user?n.data.user.user:n.data.user)}}function pf(e,t){if(1&e&&(I.Qb(0,"label-value",7),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.operator),I.xb(1),I.Fc(" ",n.data.user.display," ")}}function hf(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.ac(2,"date"),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.creationDate),I.xb(1),I.Fc(" ",I.bc(2,2,n.data.creationDate)," ")}}function vf(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.ac(2,"date"),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.document.category),I.xb(1),I.Fc(" ",I.bc(2,2,n.data.activationDate)," ")}}function yf(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.status),I.xb(1),I.Fc(" ",n.statusDisplay(n.data.status)," ")}}function xf(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.ac(2,"date"),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.token.activationDeadline),I.xb(1),I.Fc(" ",n.data.activationDeadline?I.bc(2,2,n.data.activationDeadline):n.i18n.token.noDeadline," ")}}function Pf(e,t){if(1&e&&(I.Qb(0,"label-value",5),I.Dc(1),I.ac(2,"date"),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.token.expiryDate),I.xb(1),I.Fc(" ",n.data.expiryDate?I.bc(2,2,n.data.expiryDate):n.i18n.token.noExpiryDate," ")}}function If(e,t){1&e&&(I.Lb(0,"img",12),I.ac(1,"trust")),2&e&&I.gc("src",I.cc(1,1,t.ngIf,"url"),I.uc)}function kf(e,t){if(1&e&&(I.Qb(0,"div"),I.Lb(1,"hr",9),I.Qb(2,"div",10),I.Bc(3,If,2,4,"img",11),I.ac(4,"async"),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.xb(3),I.gc("ngIf",I.bc(4,1,n.qrCodeUrl$))}}function Ef(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div",3),I.Bc(2,mf,2,2,"label-value",4),I.Bc(3,pf,2,2,"label-value",4),I.Qb(4,"label-value",5),I.Dc(5),I.Pb(),I.Bc(6,hf,3,4,"label-value",6),I.Bc(7,vf,3,4,"label-value",6),I.Bc(8,yf,2,2,"label-value",6),I.Bc(9,xf,3,4,"label-value",6),I.Bc(10,Pf,3,4,"label-value",6),I.Bc(11,kf,5,3,"div",2),I.Pb(),I.Nb()),2&e){var n=I.Zb();I.xb(2),I.gc("ngIf",n.showUser()),I.xb(1),I.gc("ngIf",null==n.data.user?null:n.data.user.user),I.xb(1),I.gc("label",n.valueLabel()),I.xb(1),I.Fc(" ",n.data.value," "),I.xb(1),I.gc("ngIf",n.data.creationDate),I.xb(1),I.gc("ngIf",n.data.activationDate),I.xb(1),I.gc("ngIf",n.data.status),I.xb(1),I.gc("ngIf",n.showDeadLine()),I.xb(1),I.gc("ngIf",n.showExpiryDate()),I.xb(1),I.gc("ngIf",n.isQrCode(n.data))}}var Af,Cf,Df,Of=[{path:"",children:[{path:"search",component:yd},{path:"brokerings",component:yd,canActivate:[m.a]},{path:":user/brokerings",component:yd,canActivate:[m.a]},{path:":user/brokers",component:ht,canActivate:[m.a]},{path:":user/brokers/history",component:Ct,canActivate:[m.a]},{path:":user/brokers/new",component:rt,canActivate:[m.a]},{path:":user/profile",component:vl.b,resolve:{countries:g.a}},{path:":user/profile/edit",component:bl,canActivate:[m.a],resolve:{countries:g.a}},{path:"operators",component:lo,canActivate:[m.a]},{path:":user/operators",component:lo,canActivate:[m.a]},{path:":user/operators/registration",component:Or,canActivate:[m.a]},{path:"operators/:user",component:vl.b,canActivate:[m.a]},{path:"operators/:user/edit",component:bl,canActivate:[m.a]},{path:":user/status",component:Fd,canActivate:[m.a]},{path:":user/status/history",component:Od,canActivate:[m.a]},{path:":user/group",component:ti,canActivate:[m.a]},{path:":user/group/history",component:Xn,canActivate:[m.a]},{path:":user/agreements",component:Me,canActivate:[m.a]},{path:":user/agreements/history",component:Pe,canActivate:[m.a]},{path:"operator-groups",component:Wi,canActivate:[m.a]},{path:":user/operator-groups",component:Wi,canActivate:[m.a]},{path:":user/operator-groups/new",component:Aa,canActivate:[m.a]},{path:"operator-groups/:id",component:ar,canActivate:[m.a]},{path:"operator-groups/:id/edit",component:Aa,canActivate:[m.a]},{path:"contacts",component:Vb,canActivate:[m.a]},{path:"contacts/:user",component:vl.b,canActivate:[m.a],resolve:{countries:g.a}},{path:":user/passwords",component:No,canActivate:[m.a]},{path:":user/identity-providers",component:yi,canActivate:[m.a]},{path:"registration",component:wb,resolve:{countries:g.a}},{path:"validate-registration/:key",component:Rb},{path:"connected",component:$t},{path:"alerts",component:We},{path:"validate-email-change/:key",component:hl},{path:":user/notification-settings",component:qi,canActivate:[m.a]},{path:"documents",component:ln,canActivate:[m.a]},{path:":user/documents/search",component:Fn,canActivate:[m.a]},{path:"documents/edit/:id",component:Yt,canActivate:[m.a]},{path:"documents/view/:id",component:$n,canActivate:[m.a]},{path:":user/documents/new",component:Yt,canActivate:[m.a]},{path:"documents/process-dynamic/:id",component:vn,canActivate:[m.a]},{path:":user/tokens/:type",component:Wd,canActivate:[m.a]},{path:"tokens/search/:type",component:lf,canActivate:[m.a]},{path:"tokens/view/:id",component:(Af=function(e){l(n,e);var t=b(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e)).userHelper=i,s.modal=a,s.tokenService=o,s.qrCodeUrl$=new Ht.a(null),s}return s(n,[{key:"ngOnInit",value:function(){var e=this;c(f(n.prototype),"ngOnInit",this).call(this),this.id=this.route.snapshot.paramMap.get("id"),this.addSub(this.tokenService.viewToken({id:this.id}).subscribe((function(t){return e.data=t})))}},{key:"isQrCode",value:function(e){return e.type.physicalType===et.ab.QR_CODE}},{key:"onDataInitialized",value:function(e){var t=this;this.isQrCode(e)&&this.getTokenQrCodeUrl();var n=[];e.assign&&n.push(new Ie.c("account_box",this.i18n.token.action.assign,(function(){e.status===et.vb.UNASSIGNED&&t.modal.show(gf,{class:"modal-form",initialState:{token:t.id,updateAction:function(){return t.reload()}}})}))),e.setActivationDeadline&&n.push(new Ie.c("calendar_today",this.i18n.token.action.changeDeadline,(function(){t.notification.confirm({title:t.i18n.token.action.changeDeadline,customFields:[{internalName:"deadline",name:t.i18n.token.activationDeadline,type:et.p.DATE,required:!0}],callback:function(e){return t.tokenService.setTokenActivationDeadline({id:t.id,date:e.customValues.deadline}).subscribe((function(){return t.notifyDoneAndReload(t.i18n.token.action.done.deadlineChanged)}))}})}))),e.setExpiryDate&&n.push(new Ie.c("calendar_today",this.i18n.token.action.changeExpiry,(function(){t.notification.confirm({title:t.i18n.token.action.changeExpiry,customFields:[{internalName:"expiry",name:t.i18n.token.expiryDate,type:et.p.DATE,required:!0}],callback:function(e){return t.tokenService.setTokenExpiryDate({id:t.id,date:e.customValues.expiry}).subscribe((function(){return t.notifyDoneAndReload(t.i18n.token.action.done.expiryChanged)}))}})}))),e.block&&n.push(new Ie.c("lock",this.i18n.token.action.block,(function(){t.tokenService.blockToken({id:t.id}).subscribe((function(){return t.notifyDoneAndReload(t.i18n.token.action.done.blocked)}))}))),e.unblock&&n.push(new Ie.c("lock_open",this.i18n.token.action.unblock,(function(){t.tokenService.unblockToken({id:t.id}).subscribe((function(){return t.notifyDoneAndReload(t.i18n.token.action.done.unblocked)}))}))),e.activate&&n.push(new Ie.c("how_to_reg",this.i18n.token.action.activate,(function(){t.tokenService.activatePendingToken({id:t.id}).subscribe((function(){return t.notifyDoneAndReload(t.i18n.token.action.done.activated)}))}))),e.cancel&&n.push(new Ie.c("cancel",this.i18n.token.action.cancel,(function(){t.notification.confirm({title:t.i18n.token.action.cancel,message:t.i18n.token.action.message.cancel,callback:function(){return t.tokenService.cancelToken({id:t.id}).subscribe((function(){return t.notifyDoneAndReload(t.i18n.token.action.done.canceled)}))}})}))),this.headingActions=n}},{key:"notifyDoneAndReload",value:function(e){this.notification.snackBar(e),this.reload()}},{key:"getTokenQrCodeUrl",value:function(){var e=this;this.addSub(this.tokenService.getTokenQrCode({id:this.id,size:et.D.MEDIUM}).subscribe((function(t){return e.qrCodeUrl$.next(URL.createObjectURL(t))})))}},{key:"statusDisplay",value:function(e){return this.userHelper.tokenStatus(e)}},{key:"showUser",value:function(){var e;return!(this.authHelper.isSelf(this.data.user)||(null===(e=this.data.user)||void 0===e?void 0:e.user)&&this.authHelper.isSelf(this.data.user.user))}},{key:"valueLabel",value:function(){return this.data.type.physicalType===et.ab.NFC_TAG?this.i18n.token.label:this.i18n.token.value}},{key:"showDeadLine",value:function(){return this.data.status===et.vb.ACTIVATION_EXPIRED||this.data.status===et.vb.PENDING}},{key:"showExpiryDate",value:function(){return[et.vb.ACTIVE,et.vb.BLOCKED,et.vb.CANCELED,et.vb.EXPIRED].includes(this.data.status)}},{key:"resolveMenu",value:function(e){return this.dataForUiHolder.role===et.kb.ADMINISTRATOR?new x.a(x.b.USER_TOKENS,{tokenType:e.type}):this.authHelper.isSelf(e.user)?new x.a(x.b.MY_TOKENS,{tokenType:e.type}):e.user.user&&this.authHelper.isSelf(e.user.user)?x.b.MY_OPERATORS:this.dataForUiHolder.role===et.kb.BROKER?x.b.MY_BROKERED_USERS:x.b.SEARCH_USERS}}]),n}(X.a),Af.\u0275fac=function(e){return new(e||Af)(I.Kb(I.r),I.Kb(j.a),I.Kb(J.b),I.Kb(Ld.a))},Af.\u0275cmp=I.Eb({type:Af,selectors:[["view-token"]],features:[I.ub],decls:5,vars:9,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],["kind","fieldView","labelPosition","side",3,"label",4,"ngIf"],[3,"label"],[3,"label",4,"ngIf"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],[1,"mt-3"],[1,"qr-container","image","d-flex","justify-content-center","mb-4","align-self-center"],["alt","QR-code","class","mw-100",3,"src",4,"ngIf"],["alt","QR-code",1,"mw-100",3,"src"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Qb(2,"page-content",1),I.ac(3,"async"),I.Bc(4,Ef,12,10,"ng-container",2),I.Pb(),I.Pb()),2&e&&(I.gc("ready",I.bc(1,5,t.data$)),I.xb(2),I.gc("heading",t.i18n.token.title.view(null==t.data?null:t.data.type.name))("mobileHeading",t.i18n.token.mobileTitle.view(null==t.data?null:t.data.type.name))("headingActions",I.bc(3,7,t.headingActions$)),I.xb(2),I.gc("ngIf",t.data))},directives:[k.a,E.a,A.t,_.a,Gt.a],pipes:[A.b,ie.a,fn.a],encapsulation:2,changeDetection:0}),Af),canActivate:[m.a]},{path:":user/product-assignment",component:zo,canActivate:[m.a]},{path:":user/product-assignment/history",component:is,canActivate:[m.a]},{path:":user/privacy-settings",component:K,canActivate:[m.a]},{path:":user/privacy-settings/edit",component:Z,canActivate:[m.a]},{path:":user/references/search",component:$l,canActivate:[m.a]},{path:"references/view/:id",component:jl,canActivate:[m.a]},{path:"references/set/:from/:to",component:ql,canActivate:[m.a]},{path:"references/edit/:id",component:ql,canActivate:[m.a]}]}],Sf=((Df=function e(){r(this,e)}).\u0275mod=I.Ib({type:Df}),Df.\u0275inj=I.Hb({factory:function(e){return new(e||Df)},imports:[[d.i.forChild(Of)],d.i]}),Df),Qf=((Cf=function e(){r(this,e)}).\u0275mod=I.Ib({type:Cf}),Cf.\u0275inj=I.Hb({factory:function(e){return new(e||Cf)},imports:[[Sf,u.a]]}),Cf)}}])}();