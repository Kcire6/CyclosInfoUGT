!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var a=l(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/QoZ":function(t,i,o){"use strict";o.d(i,"a",(function(){return Ae})),o.d(i,"b",(function(){return ke}));var c=o("XDzf"),f=o("oWwz"),h=o("dt5f"),g=o("a/z7"),b=o("c/3O"),p=o("Ewue"),m=o("Jc6/"),v=o("tzq7"),d=o("tAww"),y=o("rCAV"),w=o("Pm8L"),A=o("ObUu"),k=o("QH++"),P=o("2Vo4"),x=o("u1E5"),I=o("8Y7J"),O=o("3qho"),S=o("SVse"),T=o("I0FJ"),F=o("eNTF"),L=o("Kiu2"),E=o("JFlR"),R=o("Ls5z"),_=o("H4pW"),B=o("nznZ"),D=o("iInd"),U=o("vOpc"),C=o("sifq"),M=o("5Wk5"),Q=o("BUNh"),N=o("yL40");function $(e,t){1&e&&I.Mb(0)}var Z=function(e){return{$implicit:e}};function V(e,t){if(1&e&&(I.Ob(0),I.Bc(1,$,1,0,"ng-container",19),I.Nb()),2&e){var n=t.$implicit;I.Zb(4);var i=I.qc(4);I.xb(1),I.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",I.jc(2,Z,n))}}function z(e,t){if(1&e&&(I.Qb(0,"div",16),I.Qb(1,"h2",17),I.Dc(2),I.Pb(),I.Bc(3,V,2,4,"ng-container",18),I.Pb()),2&e){var n=I.Zb(3);I.xb(2),I.Ec(n.i18n.user.profile.banking),I.xb(1),I.gc("ngForOf",n.bankingActions)}}function j(e,t){1&e&&I.Mb(0)}function H(e,t){if(1&e&&(I.Ob(0),I.Bc(1,j,1,0,"ng-container",19),I.Nb()),2&e){var n=t.$implicit;I.Zb(4);var i=I.qc(4);I.xb(1),I.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",I.jc(2,Z,n))}}function q(e,t){if(1&e&&(I.Qb(0,"div",16),I.Qb(1,"h2",17),I.Dc(2),I.Pb(),I.Bc(3,H,2,4,"ng-container",18),I.Pb()),2&e){var n=I.Zb(3);I.xb(2),I.Ec(n.i18n.user.profile.management),I.xb(1),I.gc("ngForOf",n.managementActions)}}function K(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"div",14),I.Bc(2,z,4,2,"div",15),I.Bc(3,q,4,2,"div",15),I.Pb(),I.Lb(4,"hr"),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.gc("ngIf",n.bankingActions.length>0),I.xb(1),I.gc("ngIf",n.managementActions.length>0)}}function G(e,t){if(1&e&&I.Lb(0,"profile-images",20),2&e){var n=I.Zb(2);I.gc("image",n.user.image)("additionalImages",n.user.additionalImages)}}function W(e,t){if(1&e&&I.Lb(0,"profile-images",21),2&e){var n=I.Zb(2);I.gc("image",n.user.image)("additionalImages",n.user.additionalImages)}}function Y(e,t){if(1&e&&(I.Qb(0,"label-value",22),I.Lb(1,"user-link",23),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.operatorOwner),I.xb(1),I.gc("user",n.user.user)}}function J(e,t){if(1&e&&I.Lb(0,"label-value",24),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.groupSet)("value",n.user.groupSet.name)}}function X(e,t){if(1&e&&I.Lb(0,"label-value",24),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.group)("value",n.user.group.name)}}function ee(e,t){if(1&e&&I.Lb(0,"label-value",24),2&e){var n=I.Zb(2);I.gc("label",n.i18n.general.status)("value",n.userHelper.userStatus(n.user.status))}}function te(e,t){if(1&e&&I.Lb(0,"label-value",24),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.name)("value",n.user.name)}}function ne(e,t){if(1&e&&I.Lb(0,"label-value",24),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.username)("value",n.user.username)}}function ie(e,t){if(1&e&&(I.Lb(0,"label-value",24),I.ac(1,"date")),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.registrationDate)("value",I.bc(1,2,n.user.registrationDate))}}function ae(e,t){if(1&e&&(I.Lb(0,"label-value",24),I.ac(1,"date")),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.activationDate)("value",I.bc(1,2,n.user.activationDate))}}function re(e,t){if(1&e&&(I.Qb(0,"label-value",22),I.Qb(1,"a",25),I.Lb(2,"icon",26),I.Qb(3,"span"),I.Dc(4),I.Pb(),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.email),I.xb(1),I.gc("href","mailto:"+n.user.email,I.uc),I.xb(3),I.Ec(n.user.email)}}function se(e,t){if(1&e&&(I.Qb(0,"label-value",22),I.Qb(1,"a",25),I.Lb(2,"icon",27),I.Qb(3,"span"),I.Dc(4),I.Pb(),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.phone.mobile),I.xb(1),I.gc("href","tel:"+n.mobilePhone.normalizedNumber,I.uc),I.xb(3),I.Ec(n.mobilePhone.number)}}function oe(e,t){if(1&e&&(I.Qb(0,"label-value",22),I.Qb(1,"a",25),I.Lb(2,"icon",27),I.Qb(3,"span"),I.Dc(4),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit;I.gc("label",n.name),I.xb(1),I.gc("href","tel:"+n.normalizedNumber,I.uc),I.xb(3),I.Ec(n.number)}}function ue(e,t){if(1&e&&(I.Qb(0,"label-value",22),I.Qb(1,"a",25),I.Lb(2,"icon",28),I.Qb(3,"span"),I.Dc(4),I.Pb(),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.phone.landLine),I.xb(1),I.gc("href","tel:"+n.landLinePhone.normalizedNumber,I.uc),I.xb(3),I.Ec(n.landLinePhone.number)}}function ce(e,t){if(1&e&&(I.Qb(0,"label-value",22),I.Qb(1,"a",25),I.Lb(2,"icon",28),I.Qb(3,"span"),I.Dc(4),I.Pb(),I.Pb(),I.Pb()),2&e){var n=t.$implicit;I.gc("label",n.name),I.xb(1),I.gc("href","tel:"+n.normalizedNumber,I.uc),I.xb(3),I.Ec(n.number)}}function le(e,t){1&e&&I.Lb(0,"custom-field-value",29),2&e&&I.gc("fieldValue",t.$implicit)}function fe(e,t){if(1&e&&I.Lb(0,"rating-stats",32),2&e){var n=I.Zb(3);I.gc("score",n.data.references.score)("textRight",n.data.references.count>1?n.i18n.reference.count.multi(n.data.references.count):n.i18n.reference.count.single)}}function he(e,t){if(1&e&&(I.Ob(0),I.Dc(1),I.Nb()),2&e){var n=I.Zb(3);I.xb(1),I.Fc(" ",n.i18n.reference.notGiven,"")}}function ge(e,t){if(1&e&&(I.Qb(0,"label-value",22),I.Qb(1,"a",30),I.Bc(2,fe,1,2,"rating-stats",31),I.Bc(3,he,2,1,"ng-container",4),I.Pb(),I.Pb()),2&e){var n=I.Zb(2);I.gc("label",n.i18n.user.profile.references),I.xb(1),I.gc("routerLink",n.referencesPath()),I.xb(1),I.gc("ngIf",n.data.references.count>0),I.xb(1),I.gc("ngIf",0===n.data.references.count)}}function be(e,t){if(1&e&&(I.Qb(0,"a",39),I.Dc(1),I.Pb()),2&e){var n=I.Zb().$implicit;I.gc("href","mailto:"+n.email,I.uc),I.xb(1),I.Fc(" ",n.email," ")}}function pe(e,t){if(1&e&&(I.Qb(0,"div"),I.Lb(1,"format-field-value",29),I.Pb()),2&e){var n=t.$implicit;I.xb(1),I.gc("fieldValue",n)}}function me(e,t){if(1&e&&(I.Qb(0,"div",41),I.Qb(1,"span",42),I.Dc(2),I.Pb(),I.Dc(3),I.Pb()),2&e){var n=I.Zb().$implicit,i=I.Zb(3);I.xb(2),I.Ec(i.i18n.user.contactInfoAtAddress),I.xb(1),I.Fc(" ",n.address.name," ")}}function ve(e,t){if(1&e&&(I.Qb(0,"div",35),I.Lb(1,"avatar",36),I.Qb(2,"div",37),I.Dc(3),I.Pb(),I.Bc(4,be,2,2,"a",38),I.Qb(5,"a",39),I.Dc(6),I.Pb(),I.Qb(7,"a",39),I.Dc(8),I.Pb(),I.Bc(9,pe,2,1,"div",18),I.Bc(10,me,4,2,"div",40),I.Pb()),2&e){var n=t.$implicit;I.xb(1),I.gc("image",n.image),I.xb(2),I.Ec(n.name),I.xb(1),I.gc("ngIf",n.email),I.xb(1),I.gc("href","tel:"+n.normalizedMobilePhone,I.uc),I.xb(1),I.Fc(" ",n.mobilePhone," "),I.xb(1),I.gc("href","tel:"+n.normalizedLandLinePhone,I.uc),I.xb(1),I.Fc(" ",n.landLinePhone," "),I.xb(1),I.gc("ngForOf",n.customValues),I.xb(1),I.gc("ngIf",n.address)}}function de(e,t){if(1&e&&(I.Ob(0),I.Qb(1,"h2",33),I.Dc(2),I.Pb(),I.Qb(3,"div",14),I.Bc(4,ve,11,9,"div",34),I.Pb(),I.Nb()),2&e){var n=I.Zb(2);I.xb(2),I.Ec(n.i18n.user.contactInfo),I.xb(2),I.gc("ngForOf",n.user.contactInfos)}}function ye(e,t){if(1&e&&(I.Qb(0,"page-content",3),I.ac(1,"async"),I.Bc(2,K,5,2,"ng-container",4),I.ac(3,"async"),I.Bc(4,G,1,2,"profile-images",5),I.ac(5,"async"),I.Qb(6,"div",6),I.Bc(7,W,1,2,"profile-images",7),I.ac(8,"async"),I.Qb(9,"div",8),I.Bc(10,Y,2,2,"label-value",9),I.Bc(11,J,1,2,"label-value",10),I.Bc(12,X,1,2,"label-value",10),I.Bc(13,ee,1,2,"label-value",10),I.Bc(14,te,1,2,"label-value",10),I.Bc(15,ne,1,2,"label-value",10),I.Bc(16,ie,2,4,"label-value",10),I.Bc(17,ae,2,4,"label-value",10),I.Bc(18,re,5,3,"label-value",9),I.Bc(19,se,5,3,"label-value",9),I.Bc(20,oe,5,3,"label-value",11),I.Bc(21,ue,5,3,"label-value",9),I.Bc(22,ce,5,3,"label-value",11),I.Bc(23,le,1,1,"custom-field-value",12),I.Bc(24,ge,4,4,"label-value",9),I.Pb(),I.Pb(),I.Qb(25,"div",8),I.Lb(26,"profile-addresses",13),I.Bc(27,de,5,2,"ng-container",4),I.Pb(),I.Pb()),2&e){var n=I.Zb();I.gc("heading",n.title)("mobileHeading",n.mobileTitle)("headingActions",I.bc(1,23,n.headingActions$)),I.xb(2),I.gc("ngIf",I.bc(3,25,n.showActions$)),I.xb(2),I.gc("ngIf",n.imageEnabled&&n.user.image&&I.bc(5,27,n.layout.ltsm$)),I.xb(3),I.gc("ngIf",n.imageEnabled&&I.bc(8,29,n.layout.gtxs$)),I.xb(3),I.gc("ngIf",n.showOperatorOwner),I.xb(1),I.gc("ngIf",n.user.groupSet),I.xb(1),I.gc("ngIf",n.user.group),I.xb(1),I.gc("ngIf",n.user.status),I.xb(1),I.gc("ngIf",n.user.name),I.xb(1),I.gc("ngIf",n.user.username),I.xb(1),I.gc("ngIf",n.user.registrationDate),I.xb(1),I.gc("ngIf",n.showActivationDate),I.xb(1),I.gc("ngIf",n.user.email),I.xb(1),I.gc("ngIf",n.mobilePhone),I.xb(1),I.gc("ngForOf",n.mobilePhones),I.xb(1),I.gc("ngIf",n.landLinePhone),I.xb(1),I.gc("ngForOf",n.landLinePhones),I.xb(1),I.gc("ngForOf",n.user.customValues),I.xb(1),I.gc("ngIf",n.data.references),I.xb(2),I.gc("addresses",n.user.addresses),I.xb(1),I.gc("ngIf",(null==n.user.contactInfos?null:n.user.contactInfos.length)>0)}}function we(e,t){if(1&e&&(I.Qb(0,"div",43),I.Lb(1,"heading-action-button",44),I.Pb()),2&e){var n=t.$implicit;I.xb(1),I.gc("action",n)}}var Ae=25,ke=function(){var t=function(t){s(o,t);var i=u(o);function o(e,t,a,r,s,u,c,l){var f;return n(this,o),(f=i.call(this,e)).usersService=t,f.contactsService=a,f.operationHelper=r,f.wizardHelper=s,f.recordHelper=u,f.maps=c,f.userHelper=l,f.showActions$=new P.a(!1),f.bankingActions=[],f.managementActions=[],f}return a(o,[{key:"ngOnInit",value:function(){var e=this;r(l(o.prototype),"ngOnInit",this).call(this),this.stateManager.manageValue(this.showActions$,"showActions"),this.param=this.route.snapshot.params.user||y.a.SELF,this.errorHandler.requestWithCustomErrorHandler((function(t){e.addSub(e.usersService.viewUser({user:e.param}).subscribe((function(t){e.data=t}),(function(n){[g.a.FORBIDDEN,g.a.UNAUTHORIZED].includes(n.status)?(e.notification.error(e.i18n.user.profile.noPermission),e.breadcrumb.back(),e.data={}):t(n)})))}))}},{key:"onDataInitialized",value:function(t){var n,i,a=this;this.shortName=Object(A.G)(t.name||t.display,Ae);var r=t.enabledProfileFields;this.imageEnabled=null==r||r.includes(c.j.IMAGE),this.mobilePhones=t.phones.filter((function(e){return e.type===c.Z.MOBILE})),this.landLinePhones=t.phones.filter((function(e){return e.type===c.Z.LAND_LINE})),1===this.mobilePhones.length&&(this.mobilePhone=this.mobilePhones[0],this.mobilePhones=[]),1===this.landLinePhones.length&&(this.landLinePhone=this.landLinePhones[0],this.landLinePhones=[]);var s=t.role===c.kb.OPERATOR,o=t.permissions||{},u=o.profile||{},l=o.passwords||{},f=o.identityProviders||{},h=(o.accounts||[]).map((function(e){return e.type})),g=o.contact||{},b=o.payment||{},p=o.paymentRequests||{},m=o.scheduledPayments||{},v=o.authorizedPayments||{},w=o.marketplace||{},k=w.simple||{},P=w.webshop||{},x=o.notificationSettings||{},I=o.status||{},O=o.group||{},S=o.agreements||{},T=o.operators||{},F=o.brokering||{},L=o.vouchers||{},E=o.documents||{},R=o.tokens||[],_=o.products||{};if(t.relationship===c.Mb.SELF){if(u.editProfile){var B=new d.c("edit",this.i18n.general.edit,(function(){a.router.navigateByUrl(a.router.url+"/edit")}),!0);this.headingActions=[B]}}else{var D,U=e(h);try{var C=function(){var e=D.value;a.bankingActions.push(new d.c("account_balance",a.i18n.user.profile.viewAccount(e.name),(function(){a.router.navigate(["/banking",a.param,"account",y.a.internalNameOrId(e)])})))};for(U.s();!(D=U.n()).done;)C()}catch(Y){U.e(Y)}finally{U.f()}b.systemToUser&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.paySystemToUser,(function(){a.router.navigate(["/banking",y.a.SYSTEM,"payment",a.param])}))),b.asUserToUser&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.payAsUserToUser,(function(){a.router.navigate(["/banking",a.param,"payment"])}))),b.asUserToSelf&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.payAsUserToSelf,(function(){a.router.navigate(["/banking",a.param,"payment",y.a.SELF])}))),b.asUserToSystem&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.payAsUserToSystem,(function(){a.router.navigate(["/banking",a.param,"payment",y.a.SYSTEM])}))),p.sendFromSystem&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.requestPaymentFromSystem,(function(){a.router.navigate(["/banking",y.a.SYSTEM,"payment-request",a.param])}))),p.sendFromUser&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.requestPaymentFromUser,(function(){a.router.navigate(["/banking",y.a.SELF,"payment-request",a.param])}))),p.sendAsUserToUser&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.requestPaymentAsUserFromUser,(function(){a.router.navigate(["/banking",a.param,"payment-request"])}))),p.sendAsUserToSystem&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.requestPaymentAsUserFromSystem,(function(){a.router.navigate(["/banking",a.param,"payment-request",y.a.SYSTEM])}))),p.view&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.viewPaymentRequests,(function(){a.router.navigate(["/banking",a.param,"payment-requests"])}))),m.view&&this.bankingActions.push(new d.c("schedule",this.i18n.user.profile.viewScheduledPayments,(function(){a.router.navigate(["/banking",a.param,"installments"])}))),(o.balanceLimits||{}).view&&this.bankingActions.push(new d.c("swap_vert",this.i18n.user.profile.accountsBalanceLimits,(function(){a.router.navigate(["/banking",a.param,"account-balance-limits"])}))),(o.paymentLimits||{}).view&&this.bankingActions.push(new d.c("swap_vert",this.i18n.user.profile.accountsPaymentLimits,(function(){a.router.navigate(["/banking",a.param,"account-payment-limits"])}))),v.view&&this.bankingActions.push(new d.c("assignment_turned_in",this.i18n.user.profile.viewAuthorizedPayments,(function(){a.router.navigate(["/banking",a.param,"authorized-payments"])}))),L.viewBought&&this.bankingActions.push(new d.c("local_play",this.i18n.user.profile.viewBoughtVouchers,(function(){a.router.navigate(["/banking",a.param,"vouchers","bought"])}))),L.buy&&this.bankingActions.push(new d.c("confirmation_number",this.i18n.user.profile.buyVouchers,(function(){a.router.navigate(["/banking",a.param,"vouchers","buy"])}))),L.viewRedeemed&&this.bankingActions.push(new d.c("search",this.i18n.user.profile.viewRedeemedVouchers,(function(){a.router.navigate(["/banking",a.param,"vouchers","redeemed"])}))),L.redeem&&this.bankingActions.push(new d.c("payment",this.i18n.user.profile.redeemVoucher,(function(){a.router.navigate(["/banking",a.param,"vouchers","redeem"])}))),u.editProfile&&this.managementActions.push(new d.c("edit",this.i18n.user.profile.edit,(function(){a.router.navigateByUrl(a.router.url+"/edit")}))),l.manage&&this.managementActions.push(new d.c("vpn_key",this.i18n.user.profile.managePasswords,(function(){a.router.navigate(["/users",a.param,"passwords"])}))),f.view&&this.managementActions.push(new d.c("perm_identity",this.i18n.user.profile.viewIdentityProviders,(function(){a.router.navigate(["/users",a.param,"identity-providers"])}))),I.view&&this.managementActions.push(new d.c("how_to_reg",s?this.i18n.user.profile.statusOperator:this.i18n.user.profile.statusUser,(function(){a.router.navigate(["/users",a.param,"status"])}))),O.view&&this.managementActions.push(new d.c("supervised_user_circle",s?this.i18n.user.profile.groupOperator:this.i18n.user.profile.groupUser,(function(){a.router.navigate(["/users",a.param,"group"])}))),S.view&&this.managementActions.push(new d.c("ballot",this.i18n.user.profile.agreements,(function(){a.router.navigate(["/users",a.param,"agreements"])}))),F.viewMembers&&this.managementActions.push(new d.c("assignment_ind",this.i18n.user.profile.viewBrokerings,(function(){a.router.navigate(["/users",a.param,"brokerings"])}))),F.viewBrokers&&this.managementActions.push(new d.c("assignment_ind",this.i18n.user.profile.viewBrokers,(function(){a.router.navigate(["/users",a.param,"brokers"])}))),T.viewOperators&&this.managementActions.push(new d.c("supervisor_account",this.i18n.user.profile.viewOperators,(function(){a.router.navigate(["/users",a.param,"operators"])}))),_.view&&this.managementActions.push(new d.c("admin_panel_settings",this.i18n.user.profile.products,(function(){a.router.navigate(["/users",a.param,"product-assignment"])}))),g.add&&this.managementActions.push(new d.c("add_circle_outline",this.i18n.user.profile.addContact,(function(){a.addContact()}))),g.remove&&this.managementActions.push(new d.c("remove_circle_outline",this.i18n.user.profile.removeContact,(function(){a.removeContact()}))),b.userToUser&&this.managementActions.push(new d.c("payment",this.i18n.user.profile.pay,(function(){a.router.navigate(["/banking",y.a.SELF,"payment",a.param])}))),k.view&&this.managementActions.push(new d.c("shopping_basket",this.i18n.user.profile.viewAds,(function(){a.router.navigate(["/marketplace",a.param,c.c.SIMPLE,"list"])}))),P.view&&this.managementActions.push(new d.c("shopping_basket",this.i18n.user.profile.viewWebshop,(function(){a.router.navigate(["/marketplace",a.param,c.c.WEBSHOP,"list"])}))),P.viewPurchases&&this.managementActions.push(new d.c("shop_two",this.i18n.user.profile.purchases,(function(){a.router.navigate(["/marketplace",a.param,"purchases"])}))),P.viewSales&&this.managementActions.push(new d.c("local_offer",this.i18n.user.profile.sales,(function(){a.router.navigate(["/marketplace",a.param,"sales"])}))),w.viewInterests&&this.managementActions.push(new d.c("star",this.i18n.user.profile.adInterests,(function(){a.router.navigate(["/marketplace",a.param,"ad-interests"])}))),P.viewSettings&&(this.managementActions.push(new d.c("local_shipping",this.i18n.user.profile.deliveryMethods,(function(){a.router.navigate(["/marketplace",a.param,"delivery-methods"])}))),this.managementActions.push(new d.c("store",this.i18n.user.profile.webshopSettings,(function(){a.router.navigate(["/marketplace",a.param,"webshop-settings","view"])}))));var M,Q=e(R);try{var N=function(){var e=M.value;a.managementActions.push(new d.c("vpn_key",e.type.pluralName,(function(){a.router.navigate(["/users",a.param,"tokens",e.type.id])})))};for(Q.s();!(M=Q.n()).done;)N()}catch(Y){Q.e(Y)}finally{Q.f()}x.view&&this.managementActions.push(new d.c("notifications_off",this.i18n.user.profile.notificationSettings,(function(){a.router.navigate(["/users",a.param,"notification-settings"])}))),(null===(n=o.privacySettings)||void 0===n?void 0:n.view)&&this.managementActions.push(new d.c("settings",this.i18n.user.profile.privacySettings,(function(){a.router.navigate(["/users",a.param,"privacy-settings"])}))),(null===(i=o.references)||void 0===i?void 0:i.view)&&this.managementActions.push(new d.c("stars",this.i18n.user.profile.references,(function(){a.router.navigate(["/users",a.param,"references","search"])}))),E.view&&this.managementActions.push(new d.c("library_books",this.i18n.document.title.list,(function(){a.router.navigate(["/users",a.param,"documents","search"])})));var $,Z=e(o.records||[]);try{var V=function(){var e=$.value,t=e.type,n=t.userProfileSection===c.Kb.BANKING?a.bankingActions:a.managementActions,i=a.recordHelper.icon(t);n.push(new d.c(i,a.i18n.record.action({type:t.pluralName,count:e.count}),(function(){a.router.navigateByUrl(a.recordHelper.resolvePath(e,a.param))})))};for(Z.s();!($=Z.n()).done;)V()}catch(Y){Z.e(Y)}finally{Z.f()}var z,j=e(o.operations||[]);try{for(j.s();!(z=j.n()).done;){var H=z.value;(H.userProfileSection===c.Kb.BANKING?this.bankingActions:this.managementActions).push(this.operationHelper.headingAction(H,t.id))}}catch(Y){j.e(Y)}finally{j.f()}var q,K=e(o.wizards||[]);try{for(K.s();!(q=K.n()).done;){var G=q.value;(G.userProfileSection===c.Kb.BANKING?this.bankingActions:this.managementActions).push(this.wizardHelper.headingAction(G,t.id))}}catch(Y){K.e(Y)}finally{K.f()}var W=Object(A.h)(this.bankingActions)?0:this.bankingActions.length;(W+=Object(A.h)(this.managementActions)?0:this.managementActions.length)>0&&(W<6?this.headingActions=(this.bankingActions||[]).concat(this.managementActions||[]):this.updateHeadingActions())}}},{key:"referencesPath",value:function(){return["/users",this.param,"references","search"]}},{key:"updateHeadingActions",value:function(){var e=this,t=!this.showActions$.value,n=new d.c(t?"play_circle_outline":"clear",t?this.i18n.user.profile.showActions:this.i18n.user.profile.hideActions,(function(){e.showActions$.next(t),e.updateHeadingActions()}),!0);this.headingActions=[n]}},{key:"addContact",value:function(){var e=this;this.addSub(this.contactsService.createContact({user:y.a.SELF,body:{contact:this.user.id}}).subscribe((function(){e.notification.snackBar(e.i18n.user.profile.addContactDone(e.shortName)),e.reload()})))}},{key:"removeContact",value:function(){var e=this;this.addSub(this.contactsService.deleteContact({id:this.user.contact.id}).subscribe((function(){e.notification.snackBar(e.i18n.user.profile.removeContactDone(e.shortName)),e.reload()})))}},{key:"resolveMenu",value:function(e){switch(e.relationship){case c.Mb.OWNER:case c.Mb.SAME_OWNER:return k.b.MY_OPERATORS;case c.Mb.BROKER:return k.b.MY_BROKERED_USERS;default:return this.login.user?k.b.SEARCH_USERS:k.b.PUBLIC_DIRECTORY}}},{key:"user",get:function(){return this.data}},{key:"myProfile",get:function(){return!!this.user&&(this.login.user||{}).id===this.user.id}},{key:"title",get:function(){return this.myProfile?this.i18n.user.title.myProfile:this.shortName}},{key:"mobileTitle",get:function(){return this.myProfile?this.i18n.user.mobileTitle.myProfile:this.i18n.user.mobileTitle.userProfile}},{key:"showActivationDate",get:function(){return this.user.activationDate&&this.format.formatAsDate(this.user.activationDate)!==this.format.formatAsDate(this.user.registrationDate)}},{key:"showOperatorOwner",get:function(){return this.user.role===c.kb.OPERATOR&&![c.Mb.OWNER,c.Mb.SAME_OWNER].includes(this.user.relationship)}}]),o}(w.a);return t.\u0275fac=function(e){return new(e||t)(I.Kb(I.r),I.Kb(h.a),I.Kb(f.a),I.Kb(p.a),I.Kb(x.a),I.Kb(m.a),I.Kb(b.a),I.Kb(v.a))},t.\u0275cmp=I.Eb({type:t,selectors:[["view-profile"]],features:[I.ub],decls:5,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["actionTpl",""],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["icon","user",3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],[3,"label",4,"ngIf"],[3,"label","value",4,"ngIf"],[3,"label",4,"ngFor","ngForOf"],[3,"fieldValue",4,"ngFor","ngForOf"],[3,"addresses"],[1,"row","no-gutters"],["class","col-12 col-sm-6",4,"ngIf"],[1,"col-12","col-sm-6"],[1,"border-0"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"image","additionalImages"],["icon","user",3,"image","additionalImages"],[3,"label"],[3,"user"],[3,"label","value"],[1,"link-with-icon",3,"href"],["icon","email"],["icon","smartphone"],["icon","phone"],[3,"fieldValue"],[3,"routerLink"],[3,"score","textRight",4,"ngIf"],[3,"score","textRight"],[1,"mt-3"],["class","text-center col-12 col-sm-6 col-md-4 col-lg-3 pb-3",4,"ngFor","ngForOf"],[1,"text-center","col-12","col-sm-6","col-md-4","col-lg-3","pb-3"],["size","140","useLightbox","",1,"mb-2",3,"image"],[1,"font-weight-bold"],["class","d-block",3,"href",4,"ngIf"],[1,"d-block",3,"href"],["class","text-accent",4,"ngIf"],[1,"text-accent"],[1,"inline-label"],[1,"profile-action"],[1,"heading-action-button",3,"action"]],template:function(e,t){1&e&&(I.Qb(0,"page-layout",0),I.ac(1,"async"),I.Bc(2,ye,28,31,"page-content",1),I.Pb(),I.Bc(3,we,2,1,"ng-template",null,2,I.Cc)),2&e&&(I.gc("ready",I.bc(1,2,t.data$)),I.xb(2),I.gc("ngIf",t.data))},directives:[O.a,S.t,T.a,S.s,F.a,S.A,L.a,E.a,R.a,_.a,B.a,D.h,U.a,C.a,M.a,Q.a],pipes:[S.b,N.a],encapsulation:2,changeDetection:0}),t}()},v4xg:function(t,i,o){"use strict";o.d(i,"a",(function(){return A}));var c=o("s7LF"),f=o("mwYl"),h=o("tAww"),g=o("rCAV"),b=o("uuU0"),p=o("Ky6R"),m=o("TFmz"),v=o("Muja"),d=o("2Vo4"),y=o("Kj3r"),w=o("8Y7J"),A=function(){var t=function(t){s(o,t);var i=u(o);function o(t){var a;n(this,o),(a=i.call(this,t)).ResultType=m.a,a.resultType$=new d.a(null),a.resultTypeControl=new c.j(null),a.results$=new d.a(null),a.allowedResultTypes$=new d.a([m.a.LIST]),a.rendering$=new d.a(!1),a.moreFilters$=new d.a(!1),a.ignoreNextUpdate=!1,a.nextRequestState=t.get(f.a);var r={page:0};r.resultType=a.getInitialResultType();var s,u=e(a.getFormControlNames()||[]);try{for(u.s();!(s=u.n()).done;){r[s.value]=null}}catch(l){u.e(l)}finally{u.f()}return a.form=a.formBuilder.group(r),a}return a(o,[{key:"getInitialFormValue",value:function(e){return e.query||{}}},{key:"onDataInitialized",value:function(e){var t=this;this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe((function(e){var n=t.previousResultType;t.previousResultType=e,t.resultType$.next(e),t.shouldUpdateOnResultTypeChange(e,n)&&t.update(),null!=n&&n===e||(t.rendering=!0,t.stateManager.set("resultType",e),t.onResultTypeChanged(e,n))}))),setTimeout((function(){t.addSub(t.form.valueChanges.pipe(Object(y.a)(g.a.DEBOUNCE_TIME)).subscribe((function(e){t.shouldUpdateOnChange(e)&&t.update(),t.previousValue=e})),!0),t.previousResultType!==m.a.CATEGORIES&&t.update()}),1)}},{key:"shouldUpdateOnResultTypeChange",value:function(e,t){return e!==m.a.CATEGORIES&&([m.a.LIST,m.a.TILES].includes(t)!==[m.a.LIST,m.a.TILES].includes(e)||t===m.a.MAP!=(e===m.a.MAP))}},{key:"shouldUpdateOnChange",value:function(e){return!Object(v.a)(this.previousValue,e)}},{key:"ngOnInit",value:function(){r(l(o.prototype),"ngOnInit",this).call(this),this.resultType=this.getInitialResultType()}},{key:"showMoreFiltersLabel",value:function(){return this.i18n.general.showMoreFilters}},{key:"showLessFiltersLabel",value:function(){return this.i18n.general.showLessFilters}},{key:"showMoreFiltersIcon",value:function(){return"filter_list"}},{key:"showLessFiltersIcon",value:function(){return"filter_list"}},{key:"onResultTypeChanged",value:function(e,t){}},{key:"getInitialResultType",value:function(){return m.a.LIST}},{key:"update",value:function(e){var t=this;if(!this.ignoreNextUpdate){e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;var n=this.form.value;n.pageSize=this.uiLayout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(n)).subscribe((function(e){t.resultType===m.a.CATEGORIES&&(t.resultType=t.allowedResultTypes.find((function(e){return e!==m.a.CATEGORIES}))),t.results=p.a.from(e)})))}}},{key:"resetPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.form.patchValue({page:0},{emitEvent:e})}},{key:"doIgnoringUpdate",value:function(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}},{key:"results",get:function(){return this.results$.value},set:function(e){this.results$.next(e)}},{key:"rendering",get:function(){return this.rendering$.value},set:function(e){this.rendering$.next(e)}},{key:"allowedResultTypes",get:function(){return this.allowedResultTypes$.value},set:function(e){this.allowedResultTypes$.next(e)}},{key:"moreFilters",get:function(){return this.moreFilters$.value},set:function(e){this.moreFilters$.next(e)}},{key:"pageData",get:function(){var e=this.form.value;return{page:e.page,pageSize:e.pageSize}},set:function(e){this.form.patchValue(e)}},{key:"resultType",get:function(){return this.resultTypeControl.value},set:function(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}},{key:"moreFiltersAction",get:function(){var e=this;return this._moreFiltersAction||(this._moreFiltersAction=new h.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),(function(){e.moreFilters=!e.moreFilters,e._moreFiltersAction.icon=e.moreFilters?e.showLessFiltersIcon():e.showMoreFiltersIcon(),e._moreFiltersAction.label=e.moreFilters?e.showLessFiltersLabel():e.showMoreFiltersLabel()}),!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}}]),o}(b.a);return t.\u0275fac=function(e){return new(e||t)(w.Kb(w.r))},t.\u0275dir=w.Fb({type:t,features:[w.ub]}),t}()}}])}();