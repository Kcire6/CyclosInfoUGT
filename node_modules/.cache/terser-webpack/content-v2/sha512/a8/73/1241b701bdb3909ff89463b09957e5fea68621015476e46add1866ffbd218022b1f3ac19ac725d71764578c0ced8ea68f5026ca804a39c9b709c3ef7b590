{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{oBd1:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"BankingModule\",(function(){return banking_module_BankingModule}));var models=__webpack_require__(\"XDzf\"),accounts_service=__webpack_require__(\"VeBv\"),banking_helper_service=__webpack_require__(\"t+Rn\"),api_helper=__webpack_require__(\"rCAV\"),base_search_page_component=__webpack_require__(\"v4xg\"),helper=__webpack_require__(\"ObUu\"),shared_menu=__webpack_require__(\"QH++\"),BehaviorSubject=__webpack_require__(\"2Vo4\"),tap=__webpack_require__(\"vkgz\"),core=__webpack_require__(\"8Y7J\"),page_layout_component=__webpack_require__(\"3qho\"),common=__webpack_require__(\"SVse\"),page_content_component=__webpack_require__(\"I0FJ\"),results_layout_component=__webpack_require__(\"Zilp\"),mobile_result_directive=__webpack_require__(\"IbGL\"),result_table_directive=__webpack_require__(\"Ae/X\"),fesm2015_forms=__webpack_require__(\"s7LF\"),label_value_component=__webpack_require__(\"JFlR\"),user_link_component=__webpack_require__(\"Ls5z\"),single_selection_field_component=__webpack_require__(\"WYBn\"),field_option_directive=__webpack_require__(\"chz4\"),multi_selection_field_component=__webpack_require__(\"4APx\"),date_field_component=__webpack_require__(\"6g1M\"),decimal_field_component=__webpack_require__(\"iXUt\"),input_field_component=__webpack_require__(\"DIHi\"),user_field_component=__webpack_require__(\"JbOn\"),mask_directive=__webpack_require__(\"Aw04\"),base_component=__webpack_require__(\"qCwG\"),currency_pipe=__webpack_require__(\"I9hm\");function AccountStatusViewComponent_div_0_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\",7)}function AccountStatusViewComponent_div_0_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",8),core.Dc(1),core.Pb()),2&rf){const ctx_r2=core.Zb(2);core.xb(1),core.Fc(\" \",ctx_r2.account.type.name,\" \")}}function AccountStatusViewComponent_div_0_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",9),core.Dc(2),core.Pb(),core.Qb(3,\"div\",10),core.Lb(4,\"user-link\",11),core.Pb(),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.Fc(\" \",ctx_r3.i18n.general.user,\" \"),core.xb(2),core.gc(\"user\",ctx_r3.account.user)}}function AccountStatusViewComponent_div_0_hr_5_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function AccountStatusViewComponent_div_0_ng_container_6_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.ac(2,\"currency\"),core.Nb()),2&rf){const indicator_r6=core.Zb().$implicit,ctx_r8=core.Zb(2);core.xb(1),core.Fc(\" \",core.cc(2,1,indicator_r6.amount,ctx_r8.currency),\" \")}}const _c0=function(a0,a1,a2){return{negative:a0,positive:a1,\"status-value-last\":a2}};function AccountStatusViewComponent_div_0_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",12),core.Qb(2,\"span\",13),core.Dc(3),core.Pb(),core.Pb(),core.Qb(4,\"div\",14),core.Bc(5,AccountStatusViewComponent_div_0_ng_container_6_ng_container_5_Template,3,4,\"ng-container\",5),core.Pb(),core.Nb()),2&rf){const indicator_r6=ctx.$implicit,last_r7=ctx.last,ctx_r5=core.Zb(2);core.xb(1),core.gc(\"ngClass\",last_r7?\"status-label-last\":\"\"),core.xb(2),core.Ec(indicator_r6.label),core.xb(1),core.gc(\"ngClass\",core.lc(4,_c0,indicator_r6.alwaysNegative||ctx_r5.format.isNegative(indicator_r6.amount),!indicator_r6.alwaysNegative&&ctx_r5.format.isPositive(indicator_r6.amount),last_r7)),core.xb(1),core.gc(\"ngIf\",indicator_r6.amount)}}function AccountStatusViewComponent_div_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",1),core.Bc(1,AccountStatusViewComponent_div_0_hr_1_Template,1,0,\"hr\",2),core.Qb(2,\"div\",3),core.Bc(3,AccountStatusViewComponent_div_0_div_3_Template,2,1,\"div\",4),core.Bc(4,AccountStatusViewComponent_div_0_ng_container_4_Template,5,2,\"ng-container\",5),core.Bc(5,AccountStatusViewComponent_div_0_hr_5_Template,1,0,\"hr\",5),core.Bc(6,AccountStatusViewComponent_div_0_ng_container_6_Template,6,8,\"ng-container\",6),core.Pb(),core.Pb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"ngIf\",ctx_r0.showSeparator),core.xb(2),core.gc(\"ngIf\",ctx_r0.showAccount),core.xb(1),core.gc(\"ngIf\",ctx_r0.account.user&&ctx_r0.showUser),core.xb(1),core.gc(\"ngIf\",ctx_r0.showAccount||ctx_r0.account.user&&ctx_r0.showUser),core.xb(1),core.gc(\"ngForOf\",ctx_r0.indicators$.value)}}let account_status_view_component_AccountStatusViewComponent=(()=>{class AccountStatusViewComponent extends base_component.a{constructor(injector){super(injector),this.mode=\"current\",this._showAccount=!1,this._showUser=!1,this._showSeparator=!1,this.indicators$=new BehaviorSubject.a(null)}get showAccount(){return this._showAccount}set showAccount(show){this._showAccount=Object(helper.E)(show)}get showUser(){return this._showUser}set showUser(show){this._showUser=Object(helper.E)(show)}get showSeparator(){return this._showSeparator}set showSeparator(show){this._showSeparator=Object(helper.E)(show)}ngOnInit(){this.updateIndicators()}get status(){return this.account.status}get currency(){return this.account.currency}updateIndicators(){const indicators=[],status=this.status,add=(amount,label,alwaysNegative=!1)=>{amount&&indicators.push({label:label,amount:amount,alwaysNegative:!this.format.isZero(amount)&&alwaysNegative})};if(\"current\"===this.mode)add(status.balance,this.i18n.account.balance),status.availableBalance!==status.balance&&add(status.availableBalance,this.i18n.account.availableBalance),status.reservedAmount&&!this.format.isZero(status.reservedAmount)&&add(status.reservedAmount,this.i18n.account.reservedAmount,!0),status.creditLimit&&!this.format.isZero(status.creditLimit)&&add(status.creditLimit,this.i18n.account.negativeLimit),status.upperCreditLimit&&!this.format.isZero(status.upperCreditLimit)&&add(status.upperCreditLimit,this.i18n.account.positiveLimit);else{if(this.layout.gtxxs&&null!=status.balanceAtBegin&&add(status.balanceAtBegin,this.i18n.account.balanceOn(this.format.formatAsDate(status.beginDate))),this.layout.gtxxs&&null!=status.balanceAtEnd&&add(status.balanceAtEnd,this.i18n.account.balanceOn(this.format.formatAsDate(status.endDate))),null!=status.incoming&&status.incoming.sum&&add(status.incoming.sum,this.i18n.account.totalIncome),null!=status.outgoing&&status.outgoing.sum){let outflow=status.outgoing.sum;this.format.isZero(outflow)||(outflow=\"-\"+outflow),add(outflow,this.i18n.account.totalOutflow)}null!=status.netInflow&&add(status.netInflow,this.i18n.account.netInflow)}this.indicators$.next(indicators)}ngOnChanges(changes){(changes.mode||changes.account||changes.showAccount)&&this.updateIndicators()}}return AccountStatusViewComponent.ɵfac=function(t){return new(t||AccountStatusViewComponent)(core.Kb(core.r))},AccountStatusViewComponent.ɵcmp=core.Eb({type:AccountStatusViewComponent,selectors:[[\"account-status-view\"]],inputs:{account:\"account\",mode:\"mode\",showAccount:\"showAccount\",showUser:\"showUser\",showSeparator:\"showSeparator\"},features:[core.ub,core.vb],decls:2,vars:3,consts:[[\"class\",\"container mw-100 px-0\",4,\"ngIf\"],[1,\"container\",\"mw-100\",\"px-0\"],[\"class\",\"mt-0\",4,\"ngIf\"],[1,\"row\",\"no-gutters\"],[\"class\",\"status-label col-12\",4,\"ngIf\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[1,\"mt-0\"],[1,\"status-label\",\"col-12\"],[1,\"status-label\",\"col-6\",\"col-md-3\",\"mb-0\"],[1,\"status-label\",\"col-6\",\"col-md-9\",\"mb-0\"],[3,\"user\"],[1,\"status-label\",\"col-6\",\"col-sm-3\",3,\"ngClass\"],[1,\"ellipsis\"],[1,\"status-value\",\"col-6\",\"col-sm-3\",3,\"ngClass\"]],template:function(rf,ctx){var tmp_0_0;1&rf&&(core.Bc(0,AccountStatusViewComponent_div_0_Template,7,5,\"div\",0),core.ac(1,\"async\")),2&rf&&core.gc(\"ngIf\",(null==(tmp_0_0=core.bc(1,1,ctx.indicators$))?null:tmp_0_0.length)>0)},directives:[common.t,common.s,user_link_component.a,common.q],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),AccountStatusViewComponent})();var spinner_component=__webpack_require__(\"oj/z\"),mobile_result_component=__webpack_require__(\"iM3x\"),avatar_component=__webpack_require__(\"sifq\"),router=__webpack_require__(\"iInd\"),date_pipe=__webpack_require__(\"yL40\");function AccountHistoryComponent_ng_container_3_Template(rf,ctx){1&rf&&core.Mb(0)}function AccountHistoryComponent_ng_template_4_form_2_ng_container_3_div_4_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",15)}function AccountHistoryComponent_ng_template_4_form_2_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",15),core.Qb(2,\"label-value\",16),core.Lb(3,\"user-link\",17),core.Pb(),core.Pb(),core.Bc(4,AccountHistoryComponent_ng_template_4_form_2_ng_container_3_div_4_Template,1,0,\"div\",12),core.Nb()),2&rf){const ctx_r9=core.Zb(3);core.xb(2),core.gc(\"label\",ctx_r9.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r9.data.account.user),core.xb(1),core.gc(\"ngIf\",ctx_r9.layout.gtsm$)}}function AccountHistoryComponent_ng_template_4_form_2_div_4_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",20),2&rf){const period_r19=ctx.$implicit;core.gc(\"id\",period_r19.id)(\"value\",period_r19)(\"text\",period_r19.name)}}function AccountHistoryComponent_ng_template_4_form_2_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Qb(1,\"single-selection-field\",18),core.Bc(2,AccountHistoryComponent_ng_template_4_form_2_div_4_field_option_2_Template,1,3,\"field-option\",19),core.Pb(),core.Pb()),2&rf){const ctx_r10=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r10.i18n.general.period),core.xb(1),core.gc(\"ngForOf\",ctx_r10.data.preselectedPeriods)}}function AccountHistoryComponent_ng_template_4_form_2_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",20),2&rf){const filter_r21=ctx.$implicit;core.gc(\"id\",filter_r21.id)(\"value\",filter_r21.id)(\"text\",filter_r21.name)}}function AccountHistoryComponent_ng_template_4_form_2_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Qb(1,\"multi-selection-field\",21),core.Bc(2,AccountHistoryComponent_ng_template_4_form_2_div_5_field_option_2_Template,1,3,\"field-option\",19),core.Pb(),core.Pb()),2&rf){const ctx_r11=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r11.i18n.account.transferFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r11.data.transferFilters)}}function AccountHistoryComponent_ng_template_4_form_2_ng_template_7_div_0_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",15)}function AccountHistoryComponent_ng_template_4_form_2_ng_template_7_Template(rf,ctx){if(1&rf&&core.Bc(0,AccountHistoryComponent_ng_template_4_form_2_ng_template_7_div_0_Template,1,0,\"div\",12),2&rf){const ctx_r13=core.Zb(3);core.gc(\"ngIf\",ctx_r13.layout.gtsm$)}}function AccountHistoryComponent_ng_template_4_form_2_div_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Lb(1,\"date-field\",22),core.Pb()),2&rf){const ctx_r14=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r14.i18n.general.beginDate)}}function AccountHistoryComponent_ng_template_4_form_2_div_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Lb(1,\"date-field\",23),core.Pb()),2&rf){const ctx_r15=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r15.i18n.general.endDate)}}function AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_11_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",38),2&rf){const group_r28=ctx.$implicit,ctx_r27=core.Zb(5);core.gc(\"value\",ctx_r27.ApiHelper.internalNameOrId(group_r28))(\"internalName\",group_r28.internalName)(\"id\",group_r28.id)(\"text\",group_r28.name)(\"parent\",group_r28.groupSet)}}function AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Qb(1,\"multi-selection-field\",36),core.Bc(2,AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_11_field_option_2_Template,1,5,\"field-option\",37),core.Pb(),core.Pb()),2&rf){const ctx_r23=core.Zb(4);core.xb(1),core.gc(\"emptyLabel\",ctx_r23.i18n.general.notApplied)(\"label\",ctx_r23.i18n.user.groupFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r23.data.groups)}}function AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_12_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",41),2&rf){const ch_r30=ctx.$implicit;core.gc(\"id\",ch_r30.id)(\"internalName\",ch_r30.internalName)(\"value\",ch_r30.internalName)(\"text\",ch_r30.name)}}function AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Qb(1,\"multi-selection-field\",39),core.Bc(2,AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_12_field_option_2_Template,1,4,\"field-option\",40),core.Pb(),core.Pb()),2&rf){const ctx_r24=core.Zb(4);core.xb(1),core.gc(\"emptyLabel\",ctx_r24.i18n.general.notApplied)(\"label\",ctx_r24.i18n.transaction.channel),core.xb(1),core.gc(\"ngForOf\",ctx_r24.data.channels)}}function AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_15_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Lb(1,\"input-field\",42),core.Pb()),2&rf){const ctx_r25=core.Zb(4);core.xb(1),core.gc(\"mask\",ctx_r25.data.transactionNumberMask)(\"label\",ctx_r25.i18n.transaction.number)}}function AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_16_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",45),2&rf){const operator_r32=ctx.$implicit;core.gc(\"value\",operator_r32.id)(\"text\",operator_r32.display)}}function AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_16_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Qb(1,\"single-selection-field\",43),core.Bc(2,AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_16_field_option_2_Template,1,2,\"field-option\",44),core.Pb(),core.Pb()),2&rf){const ctx_r26=core.Zb(4);core.xb(1),core.gc(\"label\",ctx_r26.i18n.general.operator)(\"emptyOption\",ctx_r26.i18n.general.notApplied),core.xb(1),core.gc(\"ngForOf\",ctx_r26.data.operators)}}function AccountHistoryComponent_ng_template_4_form_2_ng_container_13_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",15),core.Lb(2,\"decimal-field\",24),core.Pb(),core.Qb(3,\"div\",15),core.Lb(4,\"decimal-field\",25),core.Pb(),core.Qb(5,\"div\",15),core.Lb(6,\"input-field\",26),core.Pb(),core.Qb(7,\"div\",15),core.Qb(8,\"single-selection-field\",27),core.Lb(9,\"field-option\",28),core.Lb(10,\"field-option\",29),core.Pb(),core.Pb(),core.Bc(11,AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_11_Template,3,3,\"div\",12),core.Bc(12,AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_12_Template,3,3,\"div\",12),core.Qb(13,\"div\",15),core.Lb(14,\"user-field\",30),core.Pb(),core.Bc(15,AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_15_Template,2,2,\"div\",12),core.Bc(16,AccountHistoryComponent_ng_template_4_form_2_ng_container_13_div_16_Template,3,3,\"div\",12),core.Qb(17,\"div\",15),core.Qb(18,\"single-selection-field\",31),core.Lb(19,\"field-option\",32),core.Lb(20,\"field-option\",33),core.Lb(21,\"field-option\",34),core.Lb(22,\"field-option\",35),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r16=core.Zb(3);core.xb(2),core.gc(\"label\",ctx_r16.i18n.account.minAmount)(\"prefix\",ctx_r16.currency.prefix)(\"suffix\",ctx_r16.currency.suffix)(\"scale\",ctx_r16.currency.decimalDigits),core.xb(2),core.gc(\"label\",ctx_r16.i18n.account.maxAmount)(\"prefix\",ctx_r16.currency.prefix)(\"suffix\",ctx_r16.currency.suffix)(\"scale\",ctx_r16.currency.decimalDigits),core.xb(2),core.gc(\"label\",ctx_r16.i18n.general.description),core.xb(2),core.gc(\"label\",ctx_r16.i18n.account.direction)(\"emptyOption\",ctx_r16.i18n.general.notApplied),core.xb(1),core.gc(\"text\",ctx_r16.i18n.account.incoming),core.xb(1),core.gc(\"text\",ctx_r16.i18n.account.outgoing),core.xb(1),core.gc(\"ngIf\",(null==ctx_r16.data.groups?null:ctx_r16.data.groups.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r16.data.channels?null:ctx_r16.data.channels.length)>1),core.xb(2),core.gc(\"label\",ctx_r16.i18n.general.user),core.xb(1),core.gc(\"ngIf\",ctx_r16.data.transactionNumberMask),core.xb(1),core.gc(\"ngIf\",(null==ctx_r16.data.operators?null:ctx_r16.data.operators.length)>0),core.xb(2),core.gc(\"label\",ctx_r16.i18n.general.orderBy),core.xb(1),core.gc(\"text\",ctx_r16.i18n.account.orderBy.dateDesc),core.xb(1),core.gc(\"text\",ctx_r16.i18n.account.orderBy.dateAsc),core.xb(1),core.gc(\"text\",ctx_r16.i18n.account.orderBy.amountAsc),core.xb(1),core.gc(\"text\",ctx_r16.i18n.account.orderBy.amountDesc)}}const account_history_component_c0=function(a0){return{\"border-0\":a0}};function AccountHistoryComponent_ng_template_4_form_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"form\",10),core.ac(1,\"async\"),core.Qb(2,\"div\",11),core.Bc(3,AccountHistoryComponent_ng_template_4_form_2_ng_container_3_Template,5,3,\"ng-container\",6),core.Bc(4,AccountHistoryComponent_ng_template_4_form_2_div_4_Template,3,2,\"div\",12),core.Bc(5,AccountHistoryComponent_ng_template_4_form_2_div_5_Template,3,2,\"div\",13),core.ac(6,\"async\"),core.Bc(7,AccountHistoryComponent_ng_template_4_form_2_ng_template_7_Template,1,1,\"ng-template\",null,14,core.Cc),core.Bc(9,AccountHistoryComponent_ng_template_4_form_2_div_9_Template,2,1,\"div\",12),core.ac(10,\"async\"),core.Bc(11,AccountHistoryComponent_ng_template_4_form_2_div_11_Template,2,1,\"div\",12),core.ac(12,\"async\"),core.Bc(13,AccountHistoryComponent_ng_template_4_form_2_ng_container_13_Template,23,23,\"ng-container\",6),core.ac(14,\"async\"),core.Pb(),core.Pb()),2&rf){const _r12=core.qc(8),ctx_r5=core.Zb(2);var tmp_6_0,tmp_7_0;core.gc(\"formGroup\",ctx_r5.form)(\"ngClass\",core.jc(19,account_history_component_c0,core.bc(1,9,ctx_r5.noStatus$))),core.xb(3),core.gc(\"ngIf\",ctx_r5.data.account.user&&!ctx_r5.self),core.xb(1),core.gc(\"ngIf\",(null==ctx_r5.data.preselectedPeriods?null:ctx_r5.data.preselectedPeriods.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(6,11,ctx_r5.layout.gtxxs$)&&(null==ctx_r5.data.transferFilters?null:ctx_r5.data.transferFilters.length)>1)(\"ngIfElse\",_r12),core.xb(4),core.gc(\"ngIf\",null==(null==(tmp_6_0=ctx_r5.form.value||core.bc(10,13,ctx_r5.form.valueChanges))||null==tmp_6_0.preselectedPeriod?null:tmp_6_0.preselectedPeriod.begin)),core.xb(2),core.gc(\"ngIf\",null==(null==(tmp_7_0=ctx_r5.form.value||core.bc(12,15,ctx_r5.form.valueChanges))||null==tmp_7_0.preselectedPeriod?null:tmp_7_0.preselectedPeriod.end)),core.xb(2),core.gc(\"ngIf\",core.bc(14,17,ctx_r5.layout.gtxxs$))}}function AccountHistoryComponent_ng_template_4_ng_container_4_account_status_view_1_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"account-status-view\",47),core.ac(1,\"async\"),core.ac(2,\"async\"),core.ac(3,\"async\"),core.ac(4,\"async\")),2&rf){const ctx_r33=core.Zb(3);core.gc(\"account\",ctx_r33.status$.value)(\"mode\",core.bc(1,5,ctx_r33.moreFilters$)?\"period\":\"current\")(\"showSeparator\",core.bc(2,7,ctx_r33.showForm$))(\"showAccount\",core.bc(3,9,ctx_r33.layout.ltsm$)&&ctx_r33.multipleAccounts)(\"showUser\",!ctx_r33.self&&!1===core.bc(4,11,ctx_r33.showForm$))}}function AccountHistoryComponent_ng_template_4_ng_container_4_spinner_4_Template(rf,ctx){1&rf&&core.Lb(0,\"spinner\")}function AccountHistoryComponent_ng_template_4_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,AccountHistoryComponent_ng_template_4_ng_container_4_account_status_view_1_Template,5,13,\"account-status-view\",46),core.ac(2,\"async\"),core.ac(3,\"async\"),core.Bc(4,AccountHistoryComponent_ng_template_4_ng_container_4_spinner_4_Template,1,0,\"spinner\",6),core.ac(5,\"async\"),core.Nb()),2&rf){const ctx_r6=core.Zb(2);core.xb(1),core.gc(\"ngIf\",core.bc(2,2,ctx_r6.status$)&&(core.bc(3,4,ctx_r6.layout.gtxxs$)||0===(null==ctx_r6.results?null:ctx_r6.results.page))),core.xb(3),core.gc(\"ngIf\",null===core.bc(5,6,ctx_r6.status$))}}function AccountHistoryComponent_ng_template_4_mobile_result_8_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",48),core.Qb(1,\"div\",49),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r35=ctx.$implicit,ctx_r7=core.Zb(2);core.gc(\"avatarImage\",ctx_r7.avatarImage(row_r35))(\"avatarIcon\",ctx_r7.avatarIcon(row_r35))(\"date\",row_r35.date)(\"amount\",row_r35.amount)(\"currency\",ctx_r7.currency),core.xb(2),core.Fc(\" \",ctx_r7.subjectName(row_r35),\" \")}}function AccountHistoryComponent_ng_template_4_table_9_th_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"th\",55),core.Dc(1),core.Pb()),2&rf){const ctx_r36=core.Zb(3);core.xb(1),core.Ec(ctx_r36.i18n.general.description)}}function AccountHistoryComponent_ng_template_4_table_9_ng_container_12_td_11_a_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"a\",61),core.Dc(1),core.Pb()),2&rf){const row_r38=core.Zb(2).$implicit,ctx_r40=core.Zb(3);core.gc(\"routerLink\",ctx_r40.path(row_r38)),core.xb(1),core.Fc(\" \",row_r38.description,\" \")}}function AccountHistoryComponent_ng_template_4_table_9_ng_container_12_td_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Bc(1,AccountHistoryComponent_ng_template_4_table_9_ng_container_12_td_11_a_1_Template,2,2,\"a\",60),core.Pb()),2&rf){const row_r38=core.Zb().$implicit;core.xb(1),core.gc(\"ngIf\",row_r38.description)}}const _c1=function(a0,a1){return{positive:a0,negative:a1}};function AccountHistoryComponent_ng_template_4_table_9_ng_container_12_Template(rf,ctx){if(1&rf){const _r44=core.Rb();core.Ob(0),core.Qb(1,\"tr\",56),core.Xb(\"click\",(function(){core.sc(_r44);const row_r38=ctx.$implicit,ctx_r43=core.Zb(3);return ctx_r43.router.navigate(ctx_r43.path(row_r38))})),core.Qb(2,\"td\",51),core.Lb(3,\"avatar\",57),core.Pb(),core.Qb(4,\"td\"),core.Qb(5,\"a\",58),core.Dc(6),core.ac(7,\"date\"),core.Pb(),core.Pb(),core.Qb(8,\"td\"),core.Qb(9,\"a\",58),core.Dc(10),core.Pb(),core.Pb(),core.Bc(11,AccountHistoryComponent_ng_template_4_table_9_ng_container_12_td_11_Template,2,1,\"td\",6),core.ac(12,\"async\"),core.Qb(13,\"td\",53),core.Qb(14,\"a\",59),core.Dc(15),core.ac(16,\"currency\"),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r38=ctx.$implicit,ctx_r37=core.Zb(3);core.xb(3),core.gc(\"image\",ctx_r37.avatarImage(row_r38))(\"icon\",ctx_r37.avatarIcon(row_r38)),core.xb(2),core.gc(\"routerLink\",ctx_r37.path(row_r38)),core.xb(1),core.Fc(\" \",core.bc(7,10,row_r38.date),\" \"),core.xb(3),core.gc(\"routerLink\",ctx_r37.path(row_r38)),core.xb(1),core.Fc(\" \",ctx_r37.subjectName(row_r38),\" \"),core.xb(1),core.gc(\"ngIf\",core.bc(12,12,ctx_r37.layout.gtsm$)),core.xb(3),core.gc(\"routerLink\",ctx_r37.path(row_r38))(\"ngClass\",core.kc(18,_c1,ctx_r37.format.isPositive(row_r38.amount),ctx_r37.format.isNegative(row_r38.amount))),core.xb(1),core.Fc(\" \",core.dc(16,14,row_r38.amount,ctx_r37.currency,!0),\" \")}}function AccountHistoryComponent_ng_template_4_table_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",50),core.Qb(1,\"thead\"),core.Lb(2,\"th\",51),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Bc(7,AccountHistoryComponent_ng_template_4_table_9_th_7_Template,2,1,\"th\",52),core.ac(8,\"async\"),core.Qb(9,\"th\",53),core.Dc(10),core.Pb(),core.Pb(),core.Qb(11,\"tbody\"),core.Bc(12,AccountHistoryComponent_ng_template_4_table_9_ng_container_12_Template,17,21,\"ng-container\",54),core.ac(13,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r8=core.Zb(2);var tmp_4_0;core.xb(4),core.Ec(ctx_r8.i18n.general.date),core.xb(2),core.Ec(ctx_r8.i18n.transaction.fromTo),core.xb(1),core.gc(\"ngIf\",core.bc(8,5,ctx_r8.layout.gtsm$)),core.xb(3),core.Ec(ctx_r8.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",null==(tmp_4_0=core.bc(13,7,ctx_r8.results$))?null:tmp_4_0.results)}}function AccountHistoryComponent_ng_template_4_Template(rf,ctx){if(1&rf){const _r46=core.Rb();core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Bc(2,AccountHistoryComponent_ng_template_4_form_2_Template,15,21,\"form\",5),core.ac(3,\"async\"),core.Bc(4,AccountHistoryComponent_ng_template_4_ng_container_4_Template,6,8,\"ng-container\",6),core.ac(5,\"async\"),core.Pb(),core.Qb(6,\"results-layout\",7),core.Xb(\"update\",(function($event){return core.sc(_r46),core.Zb().update($event)})),core.ac(7,\"async\"),core.Bc(8,AccountHistoryComponent_ng_template_4_mobile_result_8_Template,3,6,\"mobile-result\",8),core.Bc(9,AccountHistoryComponent_ng_template_4_table_9_Template,14,9,\"table\",9),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.title)(\"mobileHeading\",ctx_r2.i18n.account.mobileTitle)(\"headingActions\",core.bc(1,8,ctx_r2.headingActions$)),core.xb(2),core.gc(\"ngIf\",core.bc(3,10,ctx_r2.showForm$)),core.xb(2),core.gc(\"ngIf\",!1===core.bc(5,12,ctx_r2.noStatus$)),core.xb(2),core.gc(\"results\",core.bc(7,14,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)}}function AccountHistoryComponent_ng_template_6_Template(rf,ctx){1&rf&&core.Lb(0,\"spinner\",62)}let account_history_component_AccountHistoryComponent=(()=>{class AccountHistoryComponent extends base_search_page_component.a{constructor(injector,accountsService,bankingHelper){super(injector),this.accountsService=accountsService,this.bankingHelper=bankingHelper,this.status$=new BehaviorSubject.a(null),this.noStatus$=new BehaviorSubject.a(!1),this.showForm$=new BehaviorSubject.a(!1)}get type(){return null==this.data?null:this.data.account.type}get number(){return null==this.data?null:this.data.account.number}get currency(){return null==this.data?null:this.data.account.currency}get preselectedPeriods(){return null==this.data?null:this.data.preselectedPeriods}get transferFilters(){return null==this.data?null:this.data.transferFilters}get title(){const type=this.type;if(null==type)return null;const accountNumber=this.layout.ltsm?null:this.number;return null==accountNumber?type.name:type.name+\" - \"+accountNumber}getFormControlNames(){return[\"transferFilters\",\"preselectedPeriod\",\"periodBegin\",\"periodEnd\",\"minAmount\",\"maxAmount\",\"transactionNumber\",\"direction\",\"user\",\"by\",\"orderBy\",\"groups\",\"channels\",\"description\"]}ngOnInit(){super.ngOnInit();const params=this.route.snapshot.params;this.ownerParam=params.owner,this.typeParam=params.type,this.self=this.authHelper.isSelf(this.ownerParam),this.multipleAccounts=this.accountTypes.length>1,this.stateManager.cache(\"data\",this.accountsService.getAccountHistoryDataByOwnerAndType({owner:this.ownerParam,accountType:this.typeParam})).subscribe(data=>{this.data=data})}onDataInitialized(data){super.onDataInitialized(data),this.exportActions=this.exportHelper.headingActions(data.exportFormats,f=>this.accountsService.exportAccountHistory$Response(Object.assign({format:f.internalName},this.toSearchParams(this.form.value)))),this.bankingHelper.preProcessPreselectedPeriods(data,this.form),this.addSub(this.layout.xxs$.subscribe(()=>this.updateShowForm(data))),this.addSub(this.moreFilters$.subscribe(()=>this.updateShowForm(data))),this.updateShowForm(data)}updateShowForm(data){this.showForm$.next(this.layout.xxs&&!Object(helper.h)(data.preselectedPeriods)||this.moreFilters)}toSearchParams(value){const query=value;return query.datePeriod=this.bankingHelper.resolveDatePeriod(value),query.amountRange=api_helper.a.rangeFilter(value.minAmount,value.maxAmount),query.fields=[],query.owner=this.ownerParam,query.accountType=this.typeParam,query}doSearch(query){return this.accountsService.searchAccountHistory$Response(query).pipe(Object(tap.a)(()=>{query.fields=[\"status\"],this.addSub(this.accountsService.getAccountStatusByOwnerAndType(query).subscribe(status=>{const accountWithStatus=Object.assign(Object.assign({},this.data.account),{status:(status||{}).status});null==accountWithStatus.status?(this.noStatus$.next(!0),this.moreFilters=!0,this.headingActions=this.exportActions):this.headingActions=[this.moreFiltersAction,...this.exportActions],this.status$.next(accountWithStatus)}))}))}get accountTypes(){return(((this.login.auth||{}).permissions||{}).banking.accounts.filter(a=>!1!==a.visible)||[]).map(a=>a.account.type)}subjectName(row){return this.bankingHelper.subjectName(row.relatedAccount)}path(row){return[\"/banking\",\"transfer\",this.data.account.id,this.bankingHelper.transactionNumberOrId(row)]}avatarIcon(row){return\"user\"===row.relatedAccount.kind?\"user\":\"account_balance_circle\"}avatarImage(row){return\"user\"===row.relatedAccount.kind?row.relatedAccount.user.image:null}showMoreFiltersLabel(){return this.i18n.general.showFilters}showLessFiltersLabel(){return this.i18n.general.hideFilters}get toLink(){return row=>this.path(row)}resolveMenu(data){const menu=new shared_menu.a(shared_menu.b.ACCOUNT_HISTORY,{accountType:data.account.type});return data.account.kind===models.a.SYSTEM?menu:this.menu.userMenu(data.account.user,menu)}}return AccountHistoryComponent.ɵfac=function(t){return new(t||AccountHistoryComponent)(core.Kb(core.r),core.Kb(accounts_service.a),core.Kb(banking_helper_service.a))},AccountHistoryComponent.ɵcmp=core.Eb({type:AccountHistoryComponent,selectors:[[\"account-history\"]],features:[core.ub],decls:8,vars:7,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"loadingIndicators\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[\"class\",\"filters-form\",3,\"formGroup\",\"ngClass\",4,\"ngIf\"],[4,\"ngIf\"],[\"resultType\",\"list\",3,\"results\",\"toLink\",\"rendering$\",\"update\"],[\"forceSign\",\"\",3,\"avatarImage\",\"avatarIcon\",\"date\",\"amount\",\"currency\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"filters-form\",3,\"formGroup\",\"ngClass\"],[1,\"row\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\",\"ngIfElse\"],[\"noTransferFilters\",\"\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"kind\",\"fieldView\",3,\"label\"],[3,\"user\"],[\"labelPosition\",\"side\",\"formControlName\",\"preselectedPeriod\",3,\"label\"],[3,\"id\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"transferFilters\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodBegin\",\"minDate\",\"past5\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodEnd\",\"minDate\",\"past5\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"minAmount\",\"fieldSize\",\"full\",3,\"label\",\"prefix\",\"suffix\",\"scale\"],[\"labelPosition\",\"side\",\"formControlName\",\"maxAmount\",\"fieldSize\",\"full\",3,\"label\",\"prefix\",\"suffix\",\"scale\"],[\"type\",\"text\",\"formControlName\",\"description\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"direction\",3,\"label\",\"emptyOption\"],[\"value\",\"credit\",3,\"text\"],[\"value\",\"debit\",3,\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"orderBy\",3,\"label\"],[\"value\",\"dateDesc\",3,\"text\"],[\"value\",\"dateAsc\",3,\"text\"],[\"value\",\"amountAsc\",3,\"text\"],[\"value\",\"amountDesc\",3,\"text\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"groups\",3,\"emptyLabel\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\"],[\"labelPosition\",\"side\",\"formControlName\",\"channels\",3,\"emptyLabel\",\"label\"],[3,\"id\",\"internalName\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"internalName\",\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"transactionNumber\",3,\"mask\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"by\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[3,\"account\",\"mode\",\"showSeparator\",\"showAccount\",\"showUser\",4,\"ngIf\"],[3,\"account\",\"mode\",\"showSeparator\",\"showAccount\",\"showUser\"],[\"forceSign\",\"\",3,\"avatarImage\",\"avatarIcon\",\"date\",\"amount\",\"currency\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"avatar\"],[\"width\",\"30%\",4,\"ngIf\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[\"width\",\"30%\"],[3,\"click\"],[3,\"image\",\"icon\"],[3,\"routerLink\"],[3,\"routerLink\",\"ngClass\"],[\"class\",\"d-inline-block\",3,\"routerLink\",4,\"ngIf\"],[1,\"d-inline-block\",3,\"routerLink\"],[1,\"p-3\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,AccountHistoryComponent_ng_container_3_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(4,AccountHistoryComponent_ng_template_4_Template,10,16,\"ng-template\",null,2,core.Cc),core.Bc(6,AccountHistoryComponent_ng_template_6_Template,1,0,\"ng-template\",null,3,core.Cc)),2&rf){const _r1=core.qc(5);core.gc(\"ready\",core.bc(1,3,ctx.noStatus$)||core.bc(2,5,ctx.status$)),core.xb(3),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,common.q,label_value_component.a,user_link_component.a,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.s,field_option_directive.a,multi_selection_field_component.a,date_field_component.a,decimal_field_component.a,input_field_component.a,user_field_component.a,mask_directive.a,account_status_view_component_AccountStatusViewComponent,spinner_component.a,mobile_result_component.a,avatar_component.a,router.h],pipes:[common.b,date_pipe.a,currency_pipe.a],encapsulation:2,changeDetection:0}),AccountHistoryComponent})();var result_type=__webpack_require__(\"TFmz\"),result_type_field_component=__webpack_require__(\"+HmS\"),result_info_window_directive=__webpack_require__(\"XvX2\"),max_distance_field_component=__webpack_require__(\"9AzD\"),basic_profile_field_filter_component=__webpack_require__(\"fe3a\"),custom_field_filter_component=__webpack_require__(\"uao2\");function BalancesSummaryComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",4),core.Dc(2),core.Pb(),core.Qb(3,\"div\",5),core.Dc(4),core.ac(5,\"currency\"),core.Pb(),core.Qb(6,\"div\",6),core.Dc(7),core.ac(8,\"currency\"),core.Pb(),core.Qb(9,\"div\",7),core.Dc(10),core.ac(11,\"currency\"),core.Pb(),core.Qb(12,\"div\",4),core.Dc(13),core.ac(14,\"currency\"),core.Pb(),core.Qb(15,\"div\",4),core.Dc(16),core.Pb(),core.Qb(17,\"div\",5),core.Dc(18),core.ac(19,\"currency\"),core.Pb(),core.Qb(20,\"div\",6),core.Dc(21),core.ac(22,\"currency\"),core.Pb(),core.Qb(23,\"div\",7),core.Dc(24),core.ac(25,\"currency\"),core.Pb(),core.Qb(26,\"div\",4),core.Dc(27),core.ac(28,\"currency\"),core.Pb(),core.Qb(29,\"div\",4),core.Dc(30),core.Pb(),core.Qb(31,\"div\",5),core.Dc(32),core.Pb(),core.Qb(33,\"div\",6),core.Dc(34),core.Pb(),core.Qb(35,\"div\",7),core.Dc(36),core.Pb(),core.Qb(37,\"div\",4),core.Dc(38),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(2),core.Fc(\" \",ctx_r0.i18n.account.userBalances.balancesSum,\" \"),core.xb(2),core.Fc(\" \",core.cc(5,15,ctx_r0.summary.low.sum,ctx_r0.currency),\" \"),core.xb(3),core.Fc(\" \",core.cc(8,18,ctx_r0.summary.medium.sum,ctx_r0.currency),\" \"),core.xb(3),core.Fc(\" \",core.cc(11,21,ctx_r0.summary.high.sum,ctx_r0.currency),\" \"),core.xb(3),core.Fc(\" \",ctx_r0.totalSum(core.cc(14,24,ctx_r0.summary.total.sum,ctx_r0.currency)),\" \"),core.xb(3),core.Fc(\" \",ctx_r0.i18n.account.userBalances.balancesAverage,\" \"),core.xb(2),core.Fc(\" \",core.cc(19,27,ctx_r0.summary.low.average,ctx_r0.currency),\" \"),core.xb(3),core.Fc(\" \",core.cc(22,30,ctx_r0.summary.medium.average,ctx_r0.currency),\" \"),core.xb(3),core.Fc(\" \",core.cc(25,33,ctx_r0.summary.high.average,ctx_r0.currency),\" \"),core.xb(3),core.Fc(\" \",ctx_r0.totalSum(core.cc(28,36,ctx_r0.summary.total.average,ctx_r0.currency)),\" \"),core.xb(3),core.Fc(\" \",ctx_r0.i18n.account.userBalances.balancesCount,\" \"),core.xb(2),core.Fc(\" \",ctx_r0.summary.low.count,\" \"),core.xb(2),core.Fc(\" \",ctx_r0.summary.medium.count,\" \"),core.xb(2),core.Fc(\" \",ctx_r0.summary.high.count,\" \"),core.xb(2),core.Fc(\" \",ctx_r0.totalSum(ctx_r0.summary.total.count),\" \")}}function BalancesSummaryComponent_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",8),core.Dc(2),core.Pb(),core.Qb(3,\"div\",9),core.Dc(4),core.ac(5,\"currency\"),core.Pb(),core.Qb(6,\"div\",8),core.Dc(7),core.Pb(),core.Qb(8,\"div\",9),core.Dc(9),core.ac(10,\"currency\"),core.Pb(),core.Qb(11,\"div\",8),core.Dc(12),core.Pb(),core.Qb(13,\"div\",9),core.Dc(14),core.Pb(),core.Nb()),2&rf){const ctx_r1=core.Zb();core.xb(2),core.Fc(\" \",ctx_r1.i18n.account.userBalances.balancesSum,\" \"),core.xb(2),core.Fc(\" \",core.cc(5,6,ctx_r1.summary.total.sum,ctx_r1.currency),\" \"),core.xb(3),core.Fc(\" \",ctx_r1.i18n.account.userBalances.balancesAverage,\" \"),core.xb(2),core.Fc(\" \",core.cc(10,9,ctx_r1.summary.total.average,ctx_r1.currency),\" \"),core.xb(3),core.Fc(\" \",ctx_r1.i18n.account.userBalances.balancesCount,\" \"),core.xb(2),core.Fc(\" \",ctx_r1.summary.total.count,\" \")}}let balances_summary_component_BalancesSummaryComponent=(()=>{class BalancesSummaryComponent extends base_component.a{constructor(injector){super(injector),this.hasYellowRange$=new BehaviorSubject.a(!1)}get summary(){return this.summary$.value}ngOnInit(){this.summary$.subscribe(summary=>this.hasYellowRange$.next(!!summary.low))}totalSum(totalSum){return this.i18n.account.userBalances.total+\": \"+totalSum}}return BalancesSummaryComponent.ɵfac=function(t){return new(t||BalancesSummaryComponent)(core.Kb(core.r))},BalancesSummaryComponent.ɵcmp=core.Eb({type:BalancesSummaryComponent,selectors:[[\"balances-summary\"]],inputs:{summary$:\"summary$\",currency:\"currency\"},features:[core.ub],decls:7,vars:6,consts:[[1,\"p-1\"],[1,\"mt-0\",\"mb-0\"],[1,\"row\",\"no-gutters\",\"pt-1\"],[4,\"ngIf\"],[1,\"col-12\",\"col-sm-3\"],[1,\"col-12\",\"col-sm-2\",\"low-balance\"],[1,\"col-12\",\"col-sm-2\",\"medium-balance\"],[1,\"col-12\",\"col-sm-2\",\"high-balance\"],[1,\"col-6\",\"col-sm-3\"],[1,\"col-6\",\"col-sm-9\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"div\",0),core.Lb(1,\"hr\",1),core.Qb(2,\"div\",2),core.Bc(3,BalancesSummaryComponent_ng_container_3_Template,39,39,\"ng-container\",3),core.ac(4,\"async\"),core.Bc(5,BalancesSummaryComponent_ng_container_5_Template,15,12,\"ng-container\",3),core.ac(6,\"async\"),core.Pb(),core.Pb()),2&rf&&(core.xb(3),core.gc(\"ngIf\",core.bc(4,2,ctx.hasYellowRange$)),core.xb(2),core.gc(\"ngIf\",!core.bc(6,4,ctx.hasYellowRange$)))},directives:[common.t],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),BalancesSummaryComponent})();var map_result_component=__webpack_require__(\"IJ5G\");function SearchUserBalancesComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchUserBalancesComponent_ng_template_3_field_option_6_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",19),2&rf){const accountType_r13=ctx.$implicit;core.gc(\"id\",accountType_r13.id)(\"value\",accountType_r13.id)(\"internalName\",accountType_r13.internalName)(\"text\",accountType_r13.name)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Lb(1,\"max-distance-field\",37),core.Pb()),2&rf){const ctx_r14=core.Zb(3);core.xb(1),core.gc(\"data\",ctx_r14.data.searchByDistanceData)(\"label\",ctx_r14.i18n.general.distanceFilter)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_11_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",40),2&rf){const group_r22=ctx.$implicit,ctx_r21=core.Zb(4);core.gc(\"value\",ctx_r21.ApiHelper.internalNameOrId(group_r22))(\"internalName\",group_r22.internalName)(\"id\",group_r22.id)(\"text\",group_r22.name)(\"parent\",group_r22.groupSet)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"multi-selection-field\",38),core.Bc(2,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_11_field_option_2_Template,1,5,\"field-option\",39),core.Pb(),core.Pb()),2&rf){const ctx_r15=core.Zb(3);core.xb(1),core.gc(\"emptyLabel\",ctx_r15.i18n.general.notApplied)(\"label\",ctx_r15.i18n.user.groupFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r15.data.groups)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_12_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",43),2&rf){const prod_r24=ctx.$implicit,ctx_r23=core.Zb(4);core.gc(\"value\",ctx_r23.ApiHelper.internalNameOrId(prod_r24))(\"internalName\",prod_r24.internalName)(\"id\",prod_r24.id)(\"text\",prod_r24.name)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"multi-selection-field\",41),core.Bc(2,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_12_field_option_2_Template,1,4,\"field-option\",42),core.Pb(),core.Pb()),2&rf){const ctx_r16=core.Zb(3);core.xb(1),core.gc(\"emptyLabel\",ctx_r16.i18n.general.notApplied)(\"label\",ctx_r16.i18n.user.assignedProducts),core.xb(1),core.gc(\"ngForOf\",ctx_r16.data.products)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_13_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",43),2&rf){const agr_r26=ctx.$implicit,ctx_r25=core.Zb(4);core.gc(\"value\",ctx_r25.ApiHelper.internalNameOrId(agr_r26))(\"internalName\",agr_r26.internalName)(\"id\",agr_r26.id)(\"text\",agr_r26.name)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_13_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"multi-selection-field\",44),core.Bc(2,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_13_field_option_2_Template,1,4,\"field-option\",42),core.Pb(),core.Pb()),2&rf){const ctx_r17=core.Zb(3);core.xb(1),core.gc(\"emptyLabel\",ctx_r17.i18n.general.notApplied)(\"label\",ctx_r17.i18n.user.acceptedAgreements),core.xb(1),core.gc(\"ngForOf\",ctx_r17.data.agreements)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_14_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",43),2&rf){const agr_r28=ctx.$implicit,ctx_r27=core.Zb(4);core.gc(\"value\",ctx_r27.ApiHelper.internalNameOrId(agr_r28))(\"internalName\",agr_r28.internalName)(\"id\",agr_r28.id)(\"text\",agr_r28.name)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_14_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"multi-selection-field\",45),core.Bc(2,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_14_field_option_2_Template,1,4,\"field-option\",42),core.Pb(),core.Pb()),2&rf){const ctx_r18=core.Zb(3);core.xb(1),core.gc(\"emptyLabel\",ctx_r18.i18n.general.notApplied)(\"label\",ctx_r18.i18n.user.notAcceptedAgreements),core.xb(1),core.gc(\"ngForOf\",ctx_r18.data.agreements)}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_37_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Lb(1,\"basic-profile-field-filter\",46),core.Pb()),2&rf){const f_r29=ctx.$implicit,ctx_r19=core.Zb(3);core.xb(1),core.gc(\"field\",f_r29)(\"formControl\",ctx_r19.form.get(\"profileFields\").get(f_r29.field))}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_div_38_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Lb(1,\"custom-field-filter\",46),core.Pb()),2&rf){const cf_r30=ctx.$implicit,ctx_r20=core.Zb(3);core.xb(1),core.gc(\"field\",cf_r30)(\"formControl\",ctx_r20.form.get(\"profileFields\").get(cf_r30.internalName))}}function SearchUserBalancesComponent_ng_template_3_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"div\",20),core.Qb(2,\"div\",7),core.Lb(3,\"decimal-field\",21),core.Pb(),core.Qb(4,\"div\",7),core.Lb(5,\"decimal-field\",22),core.Pb(),core.Qb(6,\"div\",7),core.Lb(7,\"decimal-field\",23),core.Pb(),core.Qb(8,\"div\",7),core.Lb(9,\"decimal-field\",24),core.Pb(),core.Bc(10,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_10_Template,2,2,\"div\",25),core.Bc(11,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_11_Template,3,3,\"div\",25),core.Bc(12,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_12_Template,3,3,\"div\",25),core.Bc(13,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_13_Template,3,3,\"div\",25),core.Bc(14,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_14_Template,3,3,\"div\",25),core.Qb(15,\"div\",26),core.Qb(16,\"div\",7),core.Lb(17,\"date-field\",27),core.Pb(),core.Qb(18,\"div\",7),core.Lb(19,\"date-field\",28),core.Pb(),core.Pb(),core.Qb(20,\"div\",26),core.Qb(21,\"div\",7),core.Lb(22,\"date-field\",29),core.Pb(),core.Qb(23,\"div\",7),core.Lb(24,\"date-field\",30),core.Pb(),core.Pb(),core.Qb(25,\"div\",26),core.Qb(26,\"div\",7),core.Lb(27,\"date-field\",31),core.Pb(),core.Qb(28,\"div\",7),core.Lb(29,\"date-field\",32),core.Pb(),core.Pb(),core.Qb(30,\"div\",26),core.Qb(31,\"div\",7),core.Lb(32,\"date-field\",33),core.Pb(),core.Qb(33,\"div\",7),core.Lb(34,\"date-field\",34),core.Pb(),core.Pb(),core.Qb(35,\"div\",7),core.Lb(36,\"user-field\",35),core.Pb(),core.Bc(37,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_37_Template,2,2,\"div\",36),core.Bc(38,SearchUserBalancesComponent_ng_template_3_ng_container_7_div_38_Template,2,2,\"div\",36),core.Nb()),2&rf){const ctx_r6=core.Zb(2);core.xb(3),core.gc(\"label\",ctx_r6.i18n.account.userBalances.minBalance)(\"scale\",0),core.xb(2),core.gc(\"label\",ctx_r6.i18n.account.userBalances.maxBalance)(\"scale\",0),core.xb(2),core.gc(\"label\",ctx_r6.i18n.account.userBalances.fromYellowBalance)(\"scale\",0),core.xb(2),core.gc(\"label\",ctx_r6.i18n.account.userBalances.toYellowBalance)(\"scale\",0),core.xb(1),core.gc(\"ngIf\",ctx_r6.data.searchByDistanceData),core.xb(1),core.gc(\"ngIf\",(null==ctx_r6.data.groups?null:ctx_r6.data.groups.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r6.data.products?null:ctx_r6.data.products.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r6.data.agreements?null:ctx_r6.data.agreements.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r6.data.agreements?null:ctx_r6.data.agreements.length)>1),core.xb(3),core.gc(\"label\",ctx_r6.i18n.user.creationBegin),core.xb(2),core.gc(\"label\",ctx_r6.i18n.user.creationEnd),core.xb(3),core.gc(\"label\",ctx_r6.i18n.user.beginUserActivationDate),core.xb(2),core.gc(\"label\",ctx_r6.i18n.user.endUserActivationDate),core.xb(3),core.gc(\"label\",ctx_r6.i18n.user.beginLastLoginDate),core.xb(2),core.gc(\"label\",ctx_r6.i18n.user.endLastLoginDate),core.xb(3),core.gc(\"label\",ctx_r6.i18n.account.userBalances.beginNegativeSince),core.xb(2),core.gc(\"label\",ctx_r6.i18n.account.userBalances.endNegativeSince),core.xb(2),core.gc(\"label\",ctx_r6.i18n.general.usersOfBroker)(\"filters\",ctx_r6.userSearchFilters()),core.xb(1),core.gc(\"ngForOf\",ctx_r6.data.basicFields),core.xb(1),core.gc(\"ngForOf\",ctx_r6.customFieldsInSearch)}}function SearchUserBalancesComponent_ng_template_3_div_14_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",47),core.Qb(1,\"single-selection-field\",48),core.Lb(2,\"field-option\",49),core.Lb(3,\"field-option\",50),core.Lb(4,\"field-option\",51),core.Lb(5,\"field-option\",52),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.xb(1),core.gc(\"formControl\",ctx_r7.form.get(\"orderBy\"))(\"display\",ctx_r7.i18n.general.orderBy),core.xb(1),core.gc(\"text\",ctx_r7.i18n.account.userBalances.orderBy.alphabeticallyDesc),core.xb(1),core.gc(\"text\",ctx_r7.i18n.account.userBalances.orderBy.alphabeticallyAsc),core.xb(1),core.gc(\"text\",ctx_r7.i18n.account.userBalances.orderBy.balanceDesc),core.xb(1),core.gc(\"text\",ctx_r7.i18n.account.userBalances.orderBy.balanceAsc)}}function SearchUserBalancesComponent_ng_template_3_balances_summary_17_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"balances-summary\",53),core.ac(1,\"async\")),2&rf){const ctx_r8=core.Zb(2);core.gc(\"summary$\",ctx_r8.summary$)(\"currency\",core.bc(1,2,ctx_r8.currency$))}}function SearchUserBalancesComponent_ng_template_3_spinner_19_Template(rf,ctx){1&rf&&core.Lb(0,\"spinner\")}function SearchUserBalancesComponent_ng_template_3_mobile_result_23_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",54),core.Qb(1,\"div\",55),core.Qb(2,\"div\",56),core.Dc(3),core.Pb(),core.Qb(4,\"div\",57),core.Dc(5),core.ac(6,\"currency\"),core.Pb(),core.Pb(),core.Pb()),2&rf){const row_r31=ctx.$implicit,ctx_r10=core.Zb(2);core.gc(\"avatarImage\",row_r31.image)(\"avatarIcon\",\"user\"),core.xb(3),core.Fc(\" \",row_r31.name,\" \"),core.xb(2),core.Fc(\" \",core.cc(6,4,row_r31.balance,ctx_r10.findCurrency()),\" \")}}function SearchUserBalancesComponent_ng_template_3_table_24_ng_container_12_Template(rf,ctx){if(1&rf){const _r35=core.Rb();core.Ob(0),core.Qb(1,\"tr\",62),core.Xb(\"click\",(function(){core.sc(_r35);const row_r33=ctx.$implicit,ctx_r34=core.Zb(3);return ctx_r34.router.navigate(ctx_r34.path(row_r33))})),core.Qb(2,\"td\",59),core.Lb(3,\"avatar\",63),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.Pb(),core.Qb(8,\"td\"),core.Dc(9),core.ac(10,\"date\"),core.Pb(),core.Qb(11,\"td\",60),core.Dc(12),core.ac(13,\"currency\"),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r33=ctx.$implicit,ctx_r32=core.Zb(3);core.xb(3),core.gc(\"image\",row_r33.image)(\"icon\",\"user\"),core.xb(2),core.Ec(row_r33.name),core.xb(2),core.Ec(row_r33.accountNumber),core.xb(2),core.Ec(core.bc(10,6,row_r33.negativeSince)),core.xb(3),core.Fc(\" \",core.cc(13,8,row_r33.balance,ctx_r32.findCurrency()),\" \")}}function SearchUserBalancesComponent_ng_template_3_table_24_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",58),core.Qb(1,\"thead\"),core.Lb(2,\"th\",59),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Qb(9,\"th\",60),core.Dc(10),core.Pb(),core.Pb(),core.Qb(11,\"tbody\"),core.Bc(12,SearchUserBalancesComponent_ng_template_3_table_24_ng_container_12_Template,14,11,\"ng-container\",61),core.ac(13,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r11=core.Zb(2);var tmp_4_0;core.xb(4),core.Ec(ctx_r11.i18n.general.user),core.xb(2),core.Ec(ctx_r11.i18n.account.number),core.xb(2),core.Ec(ctx_r11.i18n.account.userBalances.negativeSince),core.xb(2),core.Ec(ctx_r11.i18n.account.balance),core.xb(2),core.gc(\"ngForOf\",null==(tmp_4_0=core.bc(13,5,ctx_r11.results$))?null:tmp_4_0.results)}}function SearchUserBalancesComponent_ng_template_3_map_result_25_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",66),core.Dc(1),core.Pb()),2&rf){const row_r36=core.Zb().$implicit;core.xb(1),core.Fc(\" \",row_r36.name,\"\")}}function SearchUserBalancesComponent_ng_template_3_map_result_25_div_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.Pb()),2&rf){const row_r36=core.Zb().$implicit;core.xb(1),core.Fc(\" \",row_r36.username,\"\")}}function SearchUserBalancesComponent_ng_template_3_map_result_25_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"map-result\",64),core.Bc(1,SearchUserBalancesComponent_ng_template_3_map_result_25_div_1_Template,2,1,\"div\",65),core.Bc(2,SearchUserBalancesComponent_ng_template_3_map_result_25_div_2_Template,2,1,\"div\",10),core.Qb(3,\"div\",66),core.Dc(4),core.ac(5,\"currency\"),core.Pb(),core.Pb()),2&rf){const row_r36=ctx.$implicit,ctx_r12=core.Zb(2);core.gc(\"image\",row_r36.image)(\"address\",row_r36.address),core.xb(1),core.gc(\"ngIf\",row_r36.name),core.xb(1),core.gc(\"ngIf\",row_r36.username),core.xb(2),core.Fc(\" \",core.cc(5,5,row_r36.balance,ctx_r12.findCurrency()),\"\")}}const search_user_balances_component_c0=function(a0){return{\"mb-0\":a0}};function SearchUserBalancesComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r42=core.Rb();core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Qb(2,\"form\",5),core.Qb(3,\"div\",6),core.Qb(4,\"div\",7),core.Qb(5,\"single-selection-field\",8),core.Bc(6,SearchUserBalancesComponent_ng_template_3_field_option_6_Template,1,4,\"field-option\",9),core.Pb(),core.Pb(),core.Bc(7,SearchUserBalancesComponent_ng_template_3_ng_container_7_Template,39,25,\"ng-container\",10),core.ac(8,\"async\"),core.Pb(),core.Pb(),core.Qb(9,\"div\",6),core.Qb(10,\"div\",11),core.ac(11,\"async\"),core.Lb(12,\"result-type-field\",12),core.ac(13,\"async\"),core.Pb(),core.Bc(14,SearchUserBalancesComponent_ng_template_3_div_14_Template,6,6,\"div\",13),core.ac(15,\"async\"),core.Pb(),core.Ob(16),core.Bc(17,SearchUserBalancesComponent_ng_template_3_balances_summary_17_Template,2,4,\"balances-summary\",14),core.ac(18,\"async\"),core.Bc(19,SearchUserBalancesComponent_ng_template_3_spinner_19_Template,1,0,\"spinner\",10),core.ac(20,\"async\"),core.Nb(),core.Pb(),core.Qb(21,\"results-layout\",15),core.Xb(\"update\",(function($event){return core.sc(_r42),core.Zb().update($event)})),core.ac(22,\"async\"),core.Bc(23,SearchUserBalancesComponent_ng_template_3_mobile_result_23_Template,7,7,\"mobile-result\",16),core.Bc(24,SearchUserBalancesComponent_ng_template_3_table_24_Template,14,7,\"table\",17),core.Bc(25,SearchUserBalancesComponent_ng_template_3_map_result_25_Template,6,8,\"map-result\",18),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.account.userBalances.title)(\"mobileHeading\",ctx_r2.i18n.account.userBalances.mobileTitle)(\"headingActions\",core.bc(1,18,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(3),core.gc(\"label\",ctx_r2.i18n.account.account),core.xb(1),core.gc(\"ngForOf\",ctx_r2.data.accountTypes),core.xb(1),core.gc(\"ngIf\",core.bc(8,20,ctx_r2.moreFilters$)),core.xb(3),core.gc(\"ngClass\",core.jc(34,search_user_balances_component_c0,core.bc(11,22,ctx_r2.layout.xs$))),core.xb(2),core.gc(\"allowedResultTypes\",core.bc(13,24,ctx_r2.allowedResultTypes$))(\"formControl\",ctx_r2.resultTypeControl),core.xb(2),core.gc(\"ngIf\",\"map\"!==core.bc(15,26,ctx_r2.resultType$)),core.xb(3),core.gc(\"ngIf\",core.bc(18,28,ctx_r2.summary$)),core.xb(2),core.gc(\"ngIf\",null===core.bc(20,30,ctx_r2.summary$)),core.xb(2),core.gc(\"resultType\",ctx_r2.resultType)(\"results\",core.bc(22,32,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)(\"toAddress\",ctx_r2.toAddress)}}function SearchUserBalancesComponent_ng_template_5_Template(rf,ctx){1&rf&&core.Lb(0,\"spinner\",67)}let search_user_balances_component_SearchUserBalancesComponent=(()=>{class SearchUserBalancesComponent extends base_search_page_component.a{constructor(injector,accountsService,bankingHelper){super(injector),this.accountsService=accountsService,this.bankingHelper=bankingHelper,this.summary$=new BehaviorSubject.a(null),this.currency$=new BehaviorSubject.a(null)}getFormControlNames(){return[\"accountType\",\"minMediumRange\",\"maxMediumRange\",\"minBalance\",\"maxBalance\",\"orderBy\",\"groups\",\"distanceFilter\",\"brokers\",\"beginActivationPeriod\",\"endActivationPeriod\",\"beginCreationPeriod\",\"endCreationPeriod\",\"beginLastLoginPeriod\",\"customValues\",\"endLastLoginPeriod\",\"beginNegativeSincePeriod\",\"endNegativeSincePeriod\",\"notAcceptedAgreements\",\"acceptedAgreements\",\"products\"]}ngOnInit(){super.ngOnInit(),this.stateManager.cache(\"data\",this.accountsService.getUserBalancesData()).subscribe(data=>this.data=data),this.allowedResultTypes=(((this.login.auth||{}).permissions||{}).users||{}).map?[result_type.a.LIST,result_type.a.MAP]:[result_type.a.LIST]}onDataInitialized(data){super.onDataInitialized(data),this.customFieldsInSearch=data.customFields.filter(cf=>data.fieldsInSearch.includes(cf.internalName)),this.form.setControl(\"profileFields\",this.fieldHelper.profileFieldsForSearchFormGroup(data.basicFields,this.customFieldsInSearch));const filterAction=this.moreFiltersAction;filterAction.breakpoint=null,this.headingActions=[filterAction],this.exportHelper.headingActions(data.exportFormats,f=>this.accountsService.exportUsersWithBalances$Response(Object.assign({format:f.internalName},this.toSearchParams(this.form.value)))).forEach(a=>this.headingActions.push(a)),this.bankingHelper.preProcessPreselectedPeriods(data,this.form),this.addSub(this.form.controls.accountType.valueChanges.subscribe(accountTypeId=>{const accType=this.data.accountTypes.find(a=>a.id===accountTypeId);this.updateYellowRange(accType),this.currency$.next(accType.currency)}));const type=data.accountTypes[0];this.currency$.next(type.currency),this.updateYellowRange(type)}onResultTypeChanged(resultType,previousResultType){super.onResultTypeChanged(resultType,previousResultType),this.resetPage()}updateYellowRange(type){null!=type.defaultMediumBalanceRange?(this.form.controls.minMediumRange.patchValue(type.defaultMediumBalanceRange.min),this.form.controls.maxMediumRange.patchValue(type.defaultMediumBalanceRange.max)):(this.form.controls.minMediumRange.patchValue(null),this.form.controls.maxMediumRange.patchValue(null))}userSearchFilters(){return{roles:[models.kb.BROKER]}}mapBalance(balance){return this.i18n.account.balance+\": \"+balance}toAddress(user){return user.address}getInitialResultType(){return result_type.a.LIST}toSearchParams(value){const query=value;query.activationPeriod=api_helper.a.dateRangeFilter(value.beginActivationPeriod,value.endActivationPeriod),query.creationPeriod=api_helper.a.dateRangeFilter(value.beginCreationPeriod,value.endCreationPeriod),query.lastLoginPeriod=api_helper.a.dateRangeFilter(value.beginLastLoginPeriod,value.endLastLoginPeriod),query.negativeSincePeriod=api_helper.a.dateRangeFilter(value.beginNegativeSincePeriod,value.endNegativeSincePeriod),value.minBalance&&value.maxBalance&&(query.balanceRange=[value.minBalance,value.maxBalance]),null!=value.minMediumRange&&null!=value.maxMediumRange&&(query.mediumBalanceRange=[value.minMediumRange,value.maxMediumRange]),query.addressResult=this.resultType===result_type.a.MAP?models.Eb.ALL:null,query.profileFields=this.fieldHelper.toProfileFieldsFilter(value.profileFields);const distanceFilter=value.distanceFilter;return distanceFilter&&(query.maxDistance=distanceFilter.maxDistance,query.latitude=distanceFilter.latitude,query.longitude=distanceFilter.longitude),query.fields=[],query}doSearch(query){return this.accountsService.searchUsersWithBalances$Response(query).pipe(Object(tap.a)(()=>{this.addSub(this.accountsService.getUserBalancesSummary(query).subscribe(summary=>this.summary$.next(summary)))}))}findCurrency(){const accountId=this.form.controls.accountType.value;return accountId?this.data.accountTypes.find(at=>at.id===accountId).currency:this.currency$.value}currencyDecimalDigits(){const c=this.findCurrency();return c?c.decimalDigits:2}currencyPrefix(){const c=this.findCurrency();return c?c.prefix:null}currencySuffix(){const c=this.findCurrency();return c?c.suffix:null}path(row){return[\"/users\",row.id,\"profile\"]}showMoreFiltersLabel(){return this.i18n.general.showFilters}showLessFiltersLabel(){return this.i18n.general.hideFilters}get toLink(){return row=>this.path(row)}resolveMenu(){return shared_menu.b.USER_BALANCES_OVERVIEW}}return SearchUserBalancesComponent.ɵfac=function(t){return new(t||SearchUserBalancesComponent)(core.Kb(core.r),core.Kb(accounts_service.a),core.Kb(banking_helper_service.a))},SearchUserBalancesComponent.ɵcmp=core.Eb({type:SearchUserBalancesComponent,selectors:[[\"search-user-balances\"]],features:[core.ub],decls:7,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"loadingIndicators\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",\"border-bottom\",3,\"formGroup\"],[1,\"row\",\"filters-row\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"accountType\",3,\"label\"],[3,\"id\",\"value\",\"internalName\",\"text\",4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[1,\"col-12\",\"col-md-9\",\"col-xs-5\",\"mb-1\",3,\"ngClass\"],[3,\"allowedResultTypes\",\"formControl\"],[\"class\",\"col-12 col-md-3 col-xs-7\",4,\"ngIf\"],[3,\"summary$\",\"currency\",4,\"ngIf\"],[3,\"resultType\",\"results\",\"toLink\",\"rendering$\",\"toAddress\",\"update\"],[3,\"avatarImage\",\"avatarIcon\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[3,\"image\",\"address\",4,\"resultInfoWindow\"],[3,\"id\",\"value\",\"internalName\",\"text\"],[1,\"w-100\"],[\"labelPosition\",\"side\",\"formControlName\",\"minBalance\",\"fieldSize\",\"full\",\"allowNegative\",\"\",3,\"label\",\"scale\"],[\"labelPosition\",\"side\",\"formControlName\",\"maxBalance\",\"fieldSize\",\"full\",\"allowNegative\",\"\",3,\"label\",\"scale\"],[\"labelPosition\",\"side\",\"formControlName\",\"minMediumRange\",\"fieldSize\",\"full\",3,\"label\",\"scale\"],[\"labelPosition\",\"side\",\"formControlName\",\"maxMediumRange\",\"fieldSize\",\"full\",3,\"label\",\"scale\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[1,\"row\",\"no-gutters\",\"col-12\"],[\"labelPosition\",\"side\",\"formControlName\",\"beginCreationPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"endCreationPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"beginActivationPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"endActivationPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"beginLastLoginPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"endLastLoginPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"beginNegativeSincePeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"endNegativeSincePeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"brokers\",3,\"label\",\"filters\"],[\"class\",\"col-12 col-md-6\",4,\"ngFor\",\"ngForOf\"],[\"labelPosition\",\"side\",\"formControlName\",\"distanceFilter\",3,\"data\",\"label\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"groups\",3,\"emptyLabel\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\"],[\"labelPosition\",\"side\",\"formControlName\",\"products\",3,\"emptyLabel\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"acceptedAgreements\",3,\"emptyLabel\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"notAcceptedAgreements\",3,\"emptyLabel\",\"label\"],[\"labelPosition\",\"side\",3,\"field\",\"formControl\"],[1,\"col-12\",\"col-md-3\",\"col-xs-7\"],[3,\"formControl\",\"display\"],[\"value\",\"alphabeticallyDesc\",3,\"text\"],[\"value\",\"alphabeticallyAsc\",3,\"text\"],[\"value\",\"balanceDesc\",3,\"text\"],[\"value\",\"balanceAsc\",3,\"text\"],[3,\"summary$\",\"currency\"],[3,\"avatarImage\",\"avatarIcon\"],[1,\"cell-text\",\"cell-main\",\"row\"],[1,\"col-6\",\"align-text-start\"],[1,\"col-6\",\"align-text-end\",\"amount\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"avatar\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[3,\"image\",\"icon\"],[3,\"image\",\"address\"],[\"class\",\"font-weight-bold\",4,\"ngIf\"],[1,\"font-weight-bold\"],[1,\"p-3\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchUserBalancesComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchUserBalancesComponent_ng_template_3_Template,26,36,\"ng-template\",null,2,core.Cc),core.Bc(5,SearchUserBalancesComponent_ng_template_5_Template,1,0,\"ng-template\",null,3,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.s,common.q,result_type_field_component.a,fesm2015_forms.k,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,result_info_window_directive.a,field_option_directive.a,decimal_field_component.a,date_field_component.a,user_field_component.a,max_distance_field_component.a,multi_selection_field_component.a,basic_profile_field_filter_component.a,custom_field_filter_component.a,balances_summary_component_BalancesSummaryComponent,spinner_component.a,mobile_result_component.a,avatar_component.a,map_result_component.a],pipes:[common.b,currency_pipe.a,date_pipe.a],encapsulation:2,changeDetection:0}),SearchUserBalancesComponent})();var balance_limits_service=__webpack_require__(\"ZXJw\"),base_page_component=__webpack_require__(\"uuU0\"),cloneDeep=__webpack_require__(\"XIp8\"),actions_component=__webpack_require__(\"UXR7\"),action_button_component=__webpack_require__(\"OTwK\"),textarea_field_component=__webpack_require__(\"YG2p\");function EditAccountBalanceLimitsComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0,4),core.Qb(1,\"label-value\",5),core.Lb(2,\"user-link\",6),core.Pb(),core.Qb(3,\"label-value\",7),core.Dc(4),core.Pb(),core.Qb(5,\"div\",8),core.Qb(6,\"h3\"),core.Dc(7),core.Pb(),core.Lb(8,\"single-selection-field\",9),core.Lb(9,\"decimal-field\",10),core.ac(10,\"async\"),core.ac(11,\"async\"),core.Qb(12,\"label-value\",11),core.ac(13,\"async\"),core.Dc(14),core.ac(15,\"currency\"),core.Pb(),core.Pb(),core.Qb(16,\"div\",8),core.Qb(17,\"h3\"),core.Dc(18),core.Pb(),core.Lb(19,\"single-selection-field\",12),core.Lb(20,\"decimal-field\",13),core.ac(21,\"async\"),core.ac(22,\"async\"),core.ac(23,\"async\"),core.ac(24,\"async\"),core.Qb(25,\"label-value\",11),core.ac(26,\"async\"),core.Dc(27),core.ac(28,\"currency\"),core.Pb(),core.Pb(),core.Lb(29,\"textarea-field\",14),core.Nb()),2&rf){const ctx_r0=core.Zb();core.gc(\"formGroup\",ctx_r0.form),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r0.data.user),core.xb(1),core.gc(\"label\",ctx_r0.i18n.account.account),core.xb(1),core.Fc(\" \",ctx_r0.data.account.type.name,\" \"),core.xb(3),core.Ec(ctx_r0.i18n.account.balanceLimits.negativeLimit),core.xb(1),core.gc(\"label\",ctx_r0.i18n.account.limits.mode)(\"fieldOptions\",ctx_r0.negativeModeOptions),core.xb(1),core.gc(\"hidden\",core.bc(10,30,ctx_r0.isDefaultCreditLimit$))(\"required\",!core.bc(11,32,ctx_r0.isDefaultCreditLimit$))(\"label\",ctx_r0.i18n.account.balanceLimits.negativeLimit)(\"scale\",ctx_r0.data.account.currency.decimalDigits)(\"prefix\",ctx_r0.data.account.currency.prefix)(\"suffix\",ctx_r0.data.account.currency.suffix),core.xb(3),core.gc(\"hidden\",!core.bc(13,34,ctx_r0.isDefaultCreditLimit$))(\"label\",ctx_r0.i18n.account.balanceLimits.negativeLimit),core.xb(2),core.Fc(\" \",core.cc(15,36,ctx_r0.data.defaultCreditLimit?ctx_r0.data.defaultCreditLimit:0,ctx_r0.data.account.currency),\" \"),core.xb(4),core.Ec(ctx_r0.i18n.account.balanceLimits.positiveLimit),core.xb(1),core.gc(\"label\",ctx_r0.i18n.account.limits.mode)(\"fieldOptions\",ctx_r0.positiveModeOptions),core.xb(1),core.gc(\"hidden\",core.bc(21,39,ctx_r0.isDefaultUpperCreditLimit$)||core.bc(22,41,ctx_r0.isUnlimitedUpperCreditLimit$))(\"required\",!(core.bc(23,43,ctx_r0.isDefaultUpperCreditLimit$)||core.bc(24,45,ctx_r0.isUnlimitedUpperCreditLimit$)))(\"label\",ctx_r0.i18n.account.balanceLimits.positiveLimit)(\"scale\",ctx_r0.data.account.currency.decimalDigits)(\"prefix\",ctx_r0.data.account.currency.prefix)(\"suffix\",ctx_r0.data.account.currency.suffix),core.xb(5),core.gc(\"hidden\",!core.bc(26,47,ctx_r0.isDefaultUpperCreditLimit$))(\"label\",ctx_r0.i18n.account.balanceLimits.positiveLimit),core.xb(2),core.Fc(\" \",ctx_r0.data.defaultUpperCreditLimit?core.cc(28,49,ctx_r0.data.defaultUpperCreditLimit,ctx_r0.data.account.currency):ctx_r0.i18n.account.limits.unlimited,\" \"),core.xb(2),core.gc(\"label\",ctx_r0.i18n.general.comments)}}let edit_account_balance_limits_component_EditAccountBalanceLimitsComponent=(()=>{class EditAccountBalanceLimitsComponent extends base_page_component.a{constructor(injector,balanceLimitsService){super(injector),this.balanceLimitsService=balanceLimitsService,this.isDefaultCreditLimit$=new BehaviorSubject.a(null),this.isDefaultUpperCreditLimit$=new BehaviorSubject.a(null),this.isUnlimitedUpperCreditLimit$=new BehaviorSubject.a(null)}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.accountType=this.route.snapshot.params.accountType,this.addSub(this.balanceLimitsService.getAccountBalanceLimits({user:this.user,accountType:this.accountType}).subscribe(data=>this.data=data))}get positiveModeOptions(){const options=[{value:\"default\",text:this.i18n.account.limits.productDefault}];return options.push({value:\"personalized\",text:this.i18n.account.limits.personalized}),options.push({value:\"unlimited\",text:this.i18n.account.limits.unlimited}),options}get negativeModeOptions(){const options=[{value:\"default\",text:this.i18n.account.limits.productDefault}];return options.push({value:\"personalized\",text:this.i18n.account.limits.personalized}),options}onDataInitialized(data){super.onDataInitialized(data);const negativeMode=data.customCreditLimit?\"personalized\":\"default\",positiveMode=data.customUpperCreditLimit?data.upperCreditLimit?\"personalized\":\"unlimited\":\"default\";this.form=this.formBuilder.group({creditLimitMode:negativeMode,creditLimit:data.creditLimit,upperCreditLimitMode:positiveMode,upperCreditLimit:data.upperCreditLimit,comment:null}),this.formControl(\"creditLimitMode\").valueChanges.subscribe(value=>this.onCreditLimitModeChange(value)),this.formControl(\"upperCreditLimitMode\").valueChanges.subscribe(value=>this.onUpperCreditLimitModeChange(value)),this.isDefaultCreditLimit$.next(\"default\"===negativeMode),this.isDefaultUpperCreditLimit$.next(\"default\"===positiveMode),this.isUnlimitedUpperCreditLimit$.next(\"unlimited\"===positiveMode)}onCreditLimitModeChange(value){this.isDefaultCreditLimit$.next(\"default\"===value)}onUpperCreditLimitModeChange(value){this.isDefaultUpperCreditLimit$.next(\"default\"===value),this.isUnlimitedUpperCreditLimit$.next(\"unlimited\"===value)}save(){if(Object(helper.F)(this.form),!this.form.valid)return;const value=Object(cloneDeep.a)(this.form.value);value.customCreditLimit=\"default\"!==value.creditLimitMode,value.customCreditLimit||delete value.creditLimit,value.customUpperCreditLimit=\"default\"!==value.upperCreditLimitMode,\"unlimited\"!==value.upperCreditLimitMode&&value.customUpperCreditLimit||delete value.upperCreditLimit,delete value.creditLimitMode,delete value.upperCreditLimitMode,this.data.confirmationPasswordInput?this.notification.confirm({title:this.i18n.general.confirm,message:this.i18n.account.balanceLimits.confirm,createDeviceConfirmation:this.balanceLimitsDeviceConfirmation(),passwordInput:this.data.confirmationPasswordInput,callback:res=>this.doSave(value,res.confirmationPassword)}):this.doSave(value)}doSave(value,confirmationPassword){this.addSub(this.balanceLimitsService.setAccountBalanceLimits({user:this.user,accountType:this.accountType,confirmationPassword:confirmationPassword,body:value}).subscribe(()=>{this.notification.snackBar(this.i18n.account.balanceLimits.saved),this.reload()}))}balanceLimitsDeviceConfirmation(){return()=>({type:models.s.CHANGE_ACCOUNT_LIMITS,account:this.data.account.id})}formControl(internalName){return this.form.get(internalName)}resolveMenu(){return this.menu.searchUsersMenu()}}return EditAccountBalanceLimitsComponent.ɵfac=function(t){return new(t||EditAccountBalanceLimitsComponent)(core.Kb(core.r),core.Kb(balance_limits_service.a))},EditAccountBalanceLimitsComponent.ɵcmp=core.Eb({type:EditAccountBalanceLimitsComponent,selectors:[[\"edit-account-balance-limits\"]],features:[core.ub],decls:8,vars:13,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"formGroup\",4,\"ngIf\"],[3,\"disabled\",\"label\",\"action\"],[3,\"formGroup\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[3,\"label\"],[1,\"mt-3\"],[\"labelPosition\",\"side\",\"formControlName\",\"creditLimitMode\",3,\"label\",\"fieldOptions\"],[\"formControlName\",\"creditLimit\",\"negative\",\"\",3,\"hidden\",\"required\",\"label\",\"scale\",\"prefix\",\"suffix\"],[3,\"hidden\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"upperCreditLimitMode\",3,\"label\",\"fieldOptions\"],[\"formControlName\",\"upperCreditLimit\",3,\"hidden\",\"required\",\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"comment\",1,\"mt-4\",3,\"label\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Qb(2,\"page-content\",1),core.ac(3,\"async\"),core.Bc(4,EditAccountBalanceLimitsComponent_ng_container_4_Template,30,52,\"ng-container\",2),core.Qb(5,\"actions\"),core.Qb(6,\"action-button\",3),core.Xb(\"action\",(function(){return ctx.save()})),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,7,ctx.data$)),core.xb(2),core.gc(\"heading\",ctx.i18n.account.balanceLimits.title.edit)(\"mobileHeading\",ctx.i18n.account.balanceLimits.mobileTitle.edit)(\"headingActions\",core.bc(3,9,ctx.headingActions$)),core.xb(2),core.gc(\"ngIf\",ctx.data),core.xb(2),core.gc(\"disabled\",core.bc(7,11,ctx.requesting$))(\"label\",ctx.i18n.general.save))},directives:[page_layout_component.a,page_content_component.a,common.t,actions_component.a,action_button_component.a,fesm2015_forms.w,fesm2015_forms.n,label_value_component.a,user_link_component.a,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,decimal_field_component.a,fesm2015_forms.D,textarea_field_component.a],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),EditAccountBalanceLimitsComponent})();var user_info_component=__webpack_require__(\"s7Af\");function ListAccountsBalanceLimitsComponent_ng_container_2_table_5_tr_9_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Qb(0,\"tr\",8),core.Xb(\"click\",(function($event){core.sc(_r5);const row_r3=ctx.$implicit,ctx_r4=core.Zb(3);return ctx_r4.router.navigate(ctx_r4.path(row_r3.account.type)),$event.stopPropagation()})),core.Qb(1,\"td\",9),core.Dc(2),core.Pb(),core.Qb(3,\"td\"),core.Dc(4),core.ac(5,\"currency\"),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.ac(8,\"currency\"),core.Pb(),core.Pb()}if(2&rf){const row_r3=ctx.$implicit,ctx_r2=core.Zb(3);core.xb(2),core.Ec(row_r3.account.type.name),core.xb(2),core.Ec(core.cc(5,3,row_r3.creditLimit,row_r3.account.currency)),core.xb(3),core.Fc(\" \",row_r3.upperCreditLimit?core.cc(8,6,row_r3.upperCreditLimit,row_r3.account.currency):ctx_r2.i18n.account.limits.unlimited,\" \")}}function ListAccountsBalanceLimitsComponent_ng_container_2_table_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",6),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Pb(),core.Qb(8,\"tbody\"),core.Bc(9,ListAccountsBalanceLimitsComponent_ng_container_2_table_5_tr_9_Template,9,9,\"tr\",7),core.Pb(),core.Pb()),2&rf){const ctx_r1=core.Zb(2);core.xb(3),core.Ec(ctx_r1.i18n.account.account),core.xb(2),core.Ec(ctx_r1.i18n.account.balanceLimits.negativeLimit),core.xb(2),core.Ec(ctx_r1.i18n.account.balanceLimits.positiveLimit),core.xb(2),core.gc(\"ngForOf\",ctx_r1.data.accountLimits)}}function ListAccountsBalanceLimitsComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Lb(3,\"user-info\",3),core.Pb(),core.Qb(4,\"results-layout\",4),core.Bc(5,ListAccountsBalanceLimitsComponent_ng_container_2_table_5_Template,10,4,\"table\",5),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"mode\",\"normal\")(\"heading\",ctx_r0.i18n.account.balanceLimits.title.list)(\"mobileHeading\",ctx_r0.i18n.account.balanceLimits.mobileTitle.list)(\"headingActions\",core.bc(2,6,ctx_r0.headingActions$)),core.xb(2),core.gc(\"user\",ctx_r0.data.user),core.xb(1),core.gc(\"results\",ctx_r0.data.accountLimits)}}let list_accounts_balance_limits_component_ListAccountsBalanceLimitsComponent=(()=>{class ListAccountsBalanceLimitsComponent extends base_page_component.a{constructor(injector,balanceLimitsService){super(injector),this.balanceLimitsService=balanceLimitsService}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.balanceLimitsService.getDataForUserBalanceLimits({user:this.user}).subscribe(data=>{1===data.accountLimits.length&&this.router.navigate(this.path(data.accountLimits[0].account.type)),this.data=data}))}path(accountType){return[\"/banking\",this.user,\"account-balance-limits\",accountType.id]}resolveMenu(){return this.menu.searchUsersMenu()}}return ListAccountsBalanceLimitsComponent.ɵfac=function(t){return new(t||ListAccountsBalanceLimitsComponent)(core.Kb(core.r),core.Kb(balance_limits_service.a))},ListAccountsBalanceLimitsComponent.ɵcmp=core.Eb({type:ListAccountsBalanceLimitsComponent,selectors:[[\"list-accounts-balance-limits\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[3,\"mode\",\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"user\"],[3,\"results\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[\"width\",\"20%\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ListAccountsBalanceLimitsComponent_ng_container_2_Template,6,8,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,results_layout_component.a,result_table_directive.a,common.s],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),ListAccountsBalanceLimitsComponent})();function SearchBalanceLimitsOverviewComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchBalanceLimitsOverviewComponent_ng_template_3_div_4_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",14),2&rf){const group_r9=ctx.$implicit,ctx_r8=core.Zb(3);core.gc(\"value\",ctx_r8.ApiHelper.internalNameOrId(group_r9))(\"internalName\",group_r9.internalName)(\"id\",group_r9.id)(\"text\",group_r9.name)(\"parent\",group_r9.groupSet)}}function SearchBalanceLimitsOverviewComponent_ng_template_3_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"multi-selection-field\",12),core.Bc(2,SearchBalanceLimitsOverviewComponent_ng_template_3_div_4_field_option_2_Template,1,5,\"field-option\",13),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r3.i18n.user.groupFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.groups)}}function SearchBalanceLimitsOverviewComponent_ng_template_3_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",17),2&rf){const currency_r11=ctx.$implicit;core.gc(\"value\",currency_r11.id)(\"text\",currency_r11.name)}}function SearchBalanceLimitsOverviewComponent_ng_template_3_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"single-selection-field\",15),core.Bc(2,SearchBalanceLimitsOverviewComponent_ng_template_3_div_5_field_option_2_Template,1,2,\"field-option\",16),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r4.i18n.general.currency)(\"emptyOption\",ctx_r4.i18n.general.notApplied),core.xb(1),core.gc(\"ngForOf\",ctx_r4.currencies)}}function SearchBalanceLimitsOverviewComponent_ng_template_3_ng_container_6_div_1_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",31),2&rf){const accountType_r14=ctx.$implicit;core.gc(\"id\",accountType_r14.id)(\"value\",accountType_r14.id)(\"text\",accountType_r14.name)}}function SearchBalanceLimitsOverviewComponent_ng_template_3_ng_container_6_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"single-selection-field\",29),core.Bc(2,SearchBalanceLimitsOverviewComponent_ng_template_3_ng_container_6_div_1_field_option_2_Template,1,3,\"field-option\",30),core.Pb(),core.Pb()),2&rf){const ctx_r12=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r12.i18n.account.account)(\"emptyOption\",ctx_r12.i18n.general.all),core.xb(1),core.gc(\"ngForOf\",ctx_r12.accountTypes())}}function SearchBalanceLimitsOverviewComponent_ng_template_3_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,SearchBalanceLimitsOverviewComponent_ng_template_3_ng_container_6_div_1_Template,3,3,\"div\",6),core.Qb(2,\"div\",11),core.Lb(3,\"single-selection-field\",18),core.Pb(),core.Lb(4,\"div\",19),core.ac(5,\"async\"),core.Qb(6,\"div\",20),core.ac(7,\"async\"),core.Lb(8,\"decimal-field\",21),core.Pb(),core.Qb(9,\"div\",20),core.ac(10,\"async\"),core.Lb(11,\"decimal-field\",22),core.Pb(),core.Qb(12,\"div\",11),core.Lb(13,\"single-selection-field\",23),core.Pb(),core.Lb(14,\"div\",19),core.ac(15,\"async\"),core.Qb(16,\"div\",20),core.ac(17,\"async\"),core.Lb(18,\"decimal-field\",24),core.Pb(),core.Qb(19,\"div\",20),core.ac(20,\"async\"),core.Lb(21,\"decimal-field\",25),core.Pb(),core.Qb(22,\"div\",11),core.Lb(23,\"user-field\",26),core.Pb(),core.Qb(24,\"div\",11),core.Lb(25,\"user-field\",27),core.Pb(),core.Qb(26,\"div\",11),core.Lb(27,\"user-field\",28),core.Pb(),core.Nb()),2&rf){const ctx_r5=core.Zb(2);core.xb(1),core.gc(\"ngIf\",(null==ctx_r5.data.accountTypes?null:ctx_r5.data.accountTypes.length)>1),core.xb(2),core.gc(\"fieldOptions\",ctx_r5.customLimitOptions)(\"emptyOption\",ctx_r5.i18n.general.all)(\"label\",ctx_r5.i18n.account.balanceLimits.personalizedNegativeLimit),core.xb(1),core.gc(\"hidden\",!core.bc(5,37,ctx_r5.isCustomLimit$)),core.xb(2),core.gc(\"hidden\",!core.bc(7,39,ctx_r5.isCustomLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.balanceLimits.fromNegativeLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(1),core.gc(\"hidden\",!core.bc(10,41,ctx_r5.isCustomLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.balanceLimits.toNegativeLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(2),core.gc(\"fieldOptions\",ctx_r5.customLimitOptions)(\"emptyOption\",ctx_r5.i18n.general.all)(\"label\",ctx_r5.i18n.account.balanceLimits.personalizedPositiveLimit),core.xb(1),core.gc(\"hidden\",!core.bc(15,43,ctx_r5.isCustomUpperLimit$)),core.xb(2),core.gc(\"hidden\",!core.bc(17,45,ctx_r5.isCustomUpperLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.balanceLimits.fromPositiveLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(1),core.gc(\"hidden\",!core.bc(20,47,ctx_r5.isCustomUpperLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.balanceLimits.toPositiveLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.user)(\"allowContacts\",!1),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.usersOfBroker)(\"filters\",ctx_r5.userSearchFilters(!0))(\"allowContacts\",!1),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.changedBy)(\"filters\",ctx_r5.userSearchFilters(!1))(\"allowContacts\",!1)}}function SearchBalanceLimitsOverviewComponent_ng_template_3_mobile_result_10_Template(rf,ctx){if(1&rf){const _r17=core.Rb();core.Qb(0,\"mobile-result\",32),core.Xb(\"click\",(function($event){core.sc(_r17);const row_r15=ctx.$implicit,ctx_r16=core.Zb(2);return ctx_r16.router.navigate(ctx_r16.view(row_r15)),$event.stopPropagation()})),core.Qb(1,\"div\",33),core.Qb(2,\"div\",34),core.Qb(3,\"label-value\",35),core.Dc(4),core.Pb(),core.Qb(5,\"label-value\",35),core.Dc(6),core.Pb(),core.Qb(7,\"label-value\",35),core.Dc(8),core.ac(9,\"currency\"),core.Pb(),core.Qb(10,\"label-value\",35),core.Dc(11),core.ac(12,\"currency\"),core.Pb(),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const row_r15=ctx.$implicit,ctx_r6=core.Zb(2);core.xb(3),core.gc(\"label\",ctx_r6.i18n.general.user),core.xb(1),core.Fc(\" \",row_r15.user.display,\" \"),core.xb(1),core.gc(\"label\",ctx_r6.i18n.account.account),core.xb(1),core.Fc(\" \",row_r15.account.type.name,\" \"),core.xb(1),core.gc(\"label\",ctx_r6.i18n.account.balanceLimits.negative),core.xb(1),core.Fc(\" \",row_r15.customCreditLimit?core.cc(9,8,row_r15.creditLimit,row_r15.account.currency):ctx_r6.i18n.account.limits.productDefault,\" \"),core.xb(2),core.gc(\"label\",ctx_r6.i18n.account.balanceLimits.positive),core.xb(1),core.Fc(\" \",row_r15.customUpperCreditLimit?row_r15.upperCreditLimit?core.cc(12,11,row_r15.upperCreditLimit,row_r15.account.currency):ctx_r6.i18n.account.limits.unlimited:ctx_r6.i18n.account.limits.productDefault,\" \")}}function SearchBalanceLimitsOverviewComponent_ng_template_3_table_11_tr_11_Template(rf,ctx){if(1&rf){const _r21=core.Rb();core.Qb(0,\"tr\",32),core.Xb(\"click\",(function($event){core.sc(_r21);const row_r19=ctx.$implicit,ctx_r20=core.Zb(3);return ctx_r20.router.navigate(ctx_r20.view(row_r19)),$event.stopPropagation()})),core.Qb(1,\"td\",38),core.Dc(2),core.Pb(),core.Qb(3,\"td\",38),core.Dc(4),core.Pb(),core.Qb(5,\"td\"),core.Dc(6),core.ac(7,\"currency\"),core.Pb(),core.Qb(8,\"td\"),core.Dc(9),core.ac(10,\"currency\"),core.Pb(),core.Pb()}if(2&rf){const row_r19=ctx.$implicit,ctx_r18=core.Zb(3);core.xb(2),core.Ec(row_r19.user.display),core.xb(2),core.Ec(row_r19.account.type.name),core.xb(2),core.Fc(\" \",row_r19.customCreditLimit?core.cc(7,4,row_r19.creditLimit,row_r19.account.currency):ctx_r18.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Fc(\" \",row_r19.customUpperCreditLimit?row_r19.upperCreditLimit?core.cc(10,7,row_r19.upperCreditLimit,row_r19.account.currency):ctx_r18.i18n.account.limits.unlimited:ctx_r18.i18n.account.limits.productDefault,\" \")}}function SearchBalanceLimitsOverviewComponent_ng_template_3_table_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",36),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Pb(),core.Qb(10,\"tbody\"),core.Bc(11,SearchBalanceLimitsOverviewComponent_ng_template_3_table_11_tr_11_Template,11,10,\"tr\",37),core.ac(12,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);var tmp_4_0;core.xb(3),core.Ec(ctx_r7.i18n.general.user),core.xb(2),core.Ec(ctx_r7.i18n.account.account),core.xb(2),core.Ec(ctx_r7.i18n.account.balanceLimits.negativeLimit),core.xb(2),core.Ec(ctx_r7.i18n.account.balanceLimits.positiveLimit),core.xb(2),core.gc(\"ngForOf\",null==(tmp_4_0=core.bc(12,5,ctx_r7.results$))?null:tmp_4_0.results)}}function SearchBalanceLimitsOverviewComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r23=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"form\",4),core.Qb(3,\"div\",5),core.Bc(4,SearchBalanceLimitsOverviewComponent_ng_template_3_div_4_Template,3,2,\"div\",6),core.Bc(5,SearchBalanceLimitsOverviewComponent_ng_template_3_div_5_Template,3,3,\"div\",6),core.Bc(6,SearchBalanceLimitsOverviewComponent_ng_template_3_ng_container_6_Template,28,49,\"ng-container\",7),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Qb(8,\"results-layout\",8),core.Xb(\"update\",(function($event){return core.sc(_r23),core.Zb().update($event)})),core.ac(9,\"async\"),core.Bc(10,SearchBalanceLimitsOverviewComponent_ng_template_3_mobile_result_10_Template,13,14,\"mobile-result\",9),core.Bc(11,SearchBalanceLimitsOverviewComponent_ng_template_3_table_11_Template,13,7,\"table\",10),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.account.balanceLimits.title.overview)(\"mobileHeading\",ctx_r2.i18n.account.balanceLimits.mobileTitle.overview)(\"headingActions\",core.bc(1,9,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",(null==ctx_r2.data.groups?null:ctx_r2.data.groups.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.currencies?null:ctx_r2.currencies.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(7,11,ctx_r2.moreFilters$)),core.xb(2),core.gc(\"results\",core.bc(9,13,ctx_r2.results$))(\"rendering$\",ctx_r2.rendering$)}}let search_balance_limits_overview_component_SearchBalanceLimitsOverviewComponent=(()=>{class SearchBalanceLimitsOverviewComponent extends base_search_page_component.a{constructor(injector,balanceLimitsService){super(injector),this.balanceLimitsService=balanceLimitsService,this.isCustomLimit$=new BehaviorSubject.a(!1),this.isCustomUpperLimit$=new BehaviorSubject.a(!1),this.currencies=[]}getFormControlNames(){return[\"accountType\",\"broker\",\"brokers\",\"by\",\"currency\",\"customLimit\",\"limitFrom\",\"limitTo\",\"customUpperLimit\",\"upperLimitFrom\",\"upperLimitTo\",\"groups\",\"user\"]}ngOnInit(){super.ngOnInit(),this.addSub(this.balanceLimitsService.getAccountBalanceLimitsData().subscribe(data=>this.data=data))}onDataInitialized(data){super.onDataInitialized(data),(data.accountTypes||[]).forEach(at=>this.currencies.push(at.currency)),this.singleCurrency=1===this.currencies.length?this.currencies[0]:null,this.form.get(\"customUpperLimit\").valueChanges.subscribe(value=>this.isCustomUpperLimit$.next(\"yes\"===value)),this.form.get(\"customLimit\").valueChanges.subscribe(value=>this.isCustomLimit$.next(\"yes\"===value)),this.addSub(this.form.controls.currency.valueChanges.subscribe(currencyId=>this.updateAccountTypes(currencyId))),this.headingActions=[this.moreFiltersAction]}doSearch(value){return this.balanceLimitsService.searchAccountBalanceLimits$Response(value)}toSearchParams(value){const params=value;return this.isCustomLimit$.value?(params.customLimit=!0,params.customLimitRange=api_helper.a.rangeFilter(value.limitFrom,value.limitTo)):params.customLimit=!value.customLimit&&null,this.isCustomUpperLimit$.value?(params.customUpperLimit=!0,params.customUpperLimitRange=api_helper.a.rangeFilter(value.upperLimitFrom,value.upperLimitTo)):params.customUpperLimit=!value.customUpperLimit&&null,params}get customLimitOptions(){const options=[{value:\"yes\",text:this.i18n.general.yes}];return options.push({value:\"no\",text:this.i18n.general.no}),options}userSearchFilters(onlyBrokers){const filters={roles:[models.kb.BROKER]};return onlyBrokers||filters.roles.push(models.kb.ADMINISTRATOR),filters}updateAccountTypes(currencyId){const selectedAccount=this.form.controls.accountType.value;currencyId&&selectedAccount&&this.data.accountTypes.find(at=>at.id===selectedAccount).currency.id!==currencyId&&this.form.controls.accountType.setValue(null)}accountTypes(){const currency=this.findCurrency(!1),types=this.data.accountTypes||[];return currency?types.filter(t=>t.currency.id===currency.id):types}findCurrency(useAccountType){if(this.singleCurrency)return this.singleCurrency;const currency=this.form.controls.currency.value;if(currency)return this.currencies.find(c=>c.id===currency);const accountId=this.form.controls.accountType.value;return useAccountType&&accountId?this.data.accountTypes.find(at=>at.id===accountId).currency:null}currencyDecimalDigits(){const c=this.findCurrency(!0);return c?c.decimalDigits:2}currencyPrefix(){const c=this.findCurrency(!0);return c?c.prefix:null}currencySuffix(){const c=this.findCurrency(!0);return c?c.suffix:null}showMoreFiltersLabel(){return this.i18n.general.moreFilters}showLessFiltersLabel(){return this.i18n.general.lessFilters}view(row){return[\"/banking\",row.user.id,\"account-balance-limits\",row.account.type.id]}resolveMenu(){return new shared_menu.a(shared_menu.b.ACCOUNT_BALANCE_LIMITS_OVERVIEW)}}return SearchBalanceLimitsOverviewComponent.ɵfac=function(t){return new(t||SearchBalanceLimitsOverviewComponent)(core.Kb(core.r),core.Kb(balance_limits_service.a))},SearchBalanceLimitsOverviewComponent.ɵcmp=core.Eb({type:SearchBalanceLimitsOverviewComponent,selectors:[[\"search-balance-limits-overview\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\",\"no-gutters\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"results\",\"rendering$\",\"update\"],[3,\"click\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"groups\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\"],[\"labelPosition\",\"side\",\"formControlName\",\"currency\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"customLimit\",3,\"fieldOptions\",\"emptyOption\",\"label\"],[1,\"w-100\",3,\"hidden\"],[1,\"col-12\",\"col-md-6\",3,\"hidden\"],[\"formControlName\",\"limitFrom\",\"negative\",\"\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"limitTo\",\"negative\",\"\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"customUpperLimit\",3,\"fieldOptions\",\"emptyOption\",\"label\"],[\"formControlName\",\"upperLimitFrom\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"upperLimitTo\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\",\"allowContacts\"],[\"labelPosition\",\"side\",\"formControlName\",\"broker\",3,\"label\",\"filters\",\"allowContacts\"],[\"labelPosition\",\"side\",\"formControlName\",\"by\",3,\"label\",\"filters\",\"allowContacts\"],[\"labelPosition\",\"side\",\"formControlName\",\"accountType\",3,\"label\",\"emptyOption\"],[3,\"id\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"value\",\"text\"],[3,\"click\"],[1,\"d-flex\"],[1,\"w-100\"],[\"labelPosition\",\"sideForced\",3,\"label\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"width\",\"25%\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchBalanceLimitsOverviewComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchBalanceLimitsOverviewComponent_ng_template_3_Template,12,15,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,multi_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.s,field_option_directive.a,single_selection_field_component.a,decimal_field_component.a,user_field_component.a,mobile_result_component.a,label_value_component.a],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchBalanceLimitsOverviewComponent})();var shared_action=__webpack_require__(\"tAww\");function ViewAccountBalanceLimitsComponent_page_content_3_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"label-value\",5),core.Lb(2,\"user-link\",6),core.Pb(),core.Qb(3,\"label-value\",7),core.Dc(4),core.Pb(),core.Qb(5,\"h3\"),core.Dc(6),core.Pb(),core.Qb(7,\"label-value\",7),core.Dc(8),core.ac(9,\"currency\"),core.Pb(),core.Qb(10,\"label-value\",7),core.Dc(11),core.Pb(),core.Qb(12,\"h3\"),core.Dc(13),core.Pb(),core.Qb(14,\"label-value\",7),core.Dc(15),core.ac(16,\"currency\"),core.Pb(),core.Qb(17,\"label-value\",7),core.Dc(18),core.Pb(),core.Nb()),2&rf){const ctx_r2=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r2.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r2.data.user),core.xb(1),core.gc(\"label\",ctx_r2.i18n.account.account),core.xb(1),core.Fc(\" \",ctx_r2.data.account.type.name,\" \"),core.xb(2),core.Ec(ctx_r2.i18n.account.balanceLimits.negativeLimit),core.xb(1),core.gc(\"label\",ctx_r2.i18n.account.balanceLimits.negativeLimit),core.xb(1),core.Fc(\" \",core.cc(9,14,ctx_r2.data.creditLimit,ctx_r2.data.account.currency),\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.account.limits.mode),core.xb(1),core.Fc(\" \",ctx_r2.data.customCreditLimit?ctx_r2.i18n.account.limits.personalized:ctx_r2.i18n.account.limits.productDefault,\" \"),core.xb(2),core.Ec(ctx_r2.i18n.account.balanceLimits.positiveLimit),core.xb(1),core.gc(\"label\",ctx_r2.i18n.account.balanceLimits.positiveLimit),core.xb(1),core.Fc(\" \",ctx_r2.data.upperCreditLimit?core.cc(16,17,ctx_r2.data.upperCreditLimit,ctx_r2.data.account.currency):ctx_r2.i18n.account.limits.unlimited,\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.account.limits.mode),core.xb(1),core.Fc(\" \",ctx_r2.upperCreditLimitMode(),\" \")}}function ViewAccountBalanceLimitsComponent_page_content_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Bc(2,ViewAccountBalanceLimitsComponent_page_content_3_ng_container_2_Template,19,20,\"ng-container\",4),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.account.balanceLimits.title.view)(\"mobileHeading\",ctx_r0.i18n.account.balanceLimits.mobileTitle.view)(\"headingActions\",core.bc(1,4,ctx_r0.headingActions$)),core.xb(2),core.gc(\"ngIf\",ctx_r0.data)}}function ViewAccountBalanceLimitsComponent_ng_container_4_table_5_tr_13_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\"),core.Qb(1,\"td\"),core.Dc(2),core.ac(3,\"date\"),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.ac(8,\"currency\"),core.Pb(),core.Qb(9,\"td\"),core.Dc(10),core.ac(11,\"currency\"),core.Pb(),core.Qb(12,\"td\"),core.Dc(13),core.Pb(),core.Pb()),2&rf){const row_r5=ctx.$implicit,ctx_r4=core.Zb(3);core.xb(2),core.Ec(core.bc(3,5,row_r5.date)),core.xb(3),core.Ec(row_r5.by.display),core.xb(2),core.Fc(\" \",row_r5.customCreditLimit?core.cc(8,7,row_r5.creditLimit,ctx_r4.data.account.currency):ctx_r4.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Fc(\" \",row_r5.customUpperCreditLimit?row_r5.upperCreditLimit?core.cc(11,10,row_r5.upperCreditLimit,ctx_r4.data.account.currency):ctx_r4.i18n.account.limits.unlimited:ctx_r4.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Ec(row_r5.comment)}}function ViewAccountBalanceLimitsComponent_ng_container_4_table_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",11),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Qb(10,\"th\"),core.Dc(11),core.Pb(),core.Pb(),core.Qb(12,\"tbody\"),core.Bc(13,ViewAccountBalanceLimitsComponent_ng_container_4_table_5_tr_13_Template,14,13,\"tr\",12),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(3),core.Ec(ctx_r3.i18n.general.date),core.xb(2),core.Ec(ctx_r3.i18n.general.performedBy),core.xb(2),core.Ec(ctx_r3.i18n.account.balanceLimits.negative),core.xb(2),core.Ec(ctx_r3.i18n.account.balanceLimits.positive),core.xb(2),core.Ec(ctx_r3.i18n.general.comments),core.xb(2),core.gc(\"ngForOf\",ctx_r3.data.history)}}function ViewAccountBalanceLimitsComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",8),core.ac(2,\"async\"),core.Lb(3,\"user-info\",6),core.Pb(),core.Qb(4,\"results-layout\",9),core.Bc(5,ViewAccountBalanceLimitsComponent_ng_container_4_table_5_Template,14,6,\"table\",10),core.Pb(),core.Nb()),2&rf){const ctx_r1=core.Zb();core.xb(1),core.gc(\"mode\",\"empty\")(\"heading\",ctx_r1.i18n.account.balanceLimits.title.history)(\"mobileHeading\",ctx_r1.i18n.account.balanceLimits.mobileTitle.history)(\"headingActions\",core.bc(2,6,ctx_r1.headingActions$)),core.xb(2),core.gc(\"user\",ctx_r1.data.user),core.xb(1),core.gc(\"results\",ctx_r1.data.history)}}let view_account_balance_limits_component_ViewAccountBalanceLimitsComponent=(()=>{class ViewAccountBalanceLimitsComponent extends base_page_component.a{constructor(injector,balanceLimitsService){super(injector),this.balanceLimitsService=balanceLimitsService,this.step$=new BehaviorSubject.a(\"details\")}get step(){return this.step$.value}set step(step){this.step$.next(step)}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.accountType=this.route.snapshot.params.accountType,this.addSub(this.balanceLimitsService.getAccountBalanceLimits({user:this.user,accountType:this.accountType}).subscribe(data=>this.data=data))}onDataInitialized(data){super.onDataInitialized(data),this.detailsHeadingActions=data.editable?[new shared_action.c(\"edit\",this.i18n.general.edit,()=>this.navigateToEdit())]:[],this.detailsHeadingActions.push(new shared_action.c(\"history\",this.i18n.general.viewHistory,()=>this.showHistory())),this.headingActions=this.detailsHeadingActions,this.historyHeadingActions=data.editable?[new shared_action.c(\"edit\",this.i18n.general.edit,()=>this.navigateToEdit())]:[],this.historyHeadingActions.push(new shared_action.c(\"arrow_back\",this.i18n.general.details,()=>this.showView()))}upperCreditLimitMode(){return this.data.upperCreditLimit?this.data.customUpperCreditLimit?this.i18n.account.limits.personalized:this.i18n.account.limits.productDefault:this.data.customUpperCreditLimit?this.i18n.account.limits.unlimited:this.i18n.account.limits.productDefault}showHistory(){this.headingActions=this.historyHeadingActions,this.step=\"history\"}showView(){this.headingActions=this.detailsHeadingActions,this.step=\"details\"}navigateToEdit(){this.router.navigate([\"/banking\",this.user,\"account-balance-limits\",this.accountType,\"edit\"])}resolveMenu(){return this.menu.searchUsersMenu()}}return ViewAccountBalanceLimitsComponent.ɵfac=function(t){return new(t||ViewAccountBalanceLimitsComponent)(core.Kb(core.r),core.Kb(balance_limits_service.a))},ViewAccountBalanceLimitsComponent.ɵcmp=core.Eb({type:ViewAccountBalanceLimitsComponent,selectors:[[\"view-account-balance-limits\"]],features:[core.ub],decls:5,vars:8,consts:[[3,\"ready\",\"ngSwitch\"],[3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngSwitchCase\"],[4,\"ngSwitchCase\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[4,\"ngIf\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[3,\"label\"],[3,\"mode\",\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"results\"],[\"class\",\"table\",4,\"resultTable\"],[1,\"table\"],[4,\"ngFor\",\"ngForOf\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,ViewAccountBalanceLimitsComponent_page_content_3_Template,3,6,\"page-content\",1),core.Bc(4,ViewAccountBalanceLimitsComponent_ng_container_4_Template,6,8,\"ng-container\",2),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,4,ctx.data$))(\"ngSwitch\",core.bc(2,6,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"details\"),core.xb(1),core.gc(\"ngSwitchCase\",\"history\"))},directives:[page_layout_component.a,common.x,common.y,page_content_component.a,common.t,label_value_component.a,user_link_component.a,user_info_component.a,results_layout_component.a,result_table_directive.a,common.s],pipes:[common.b,currency_pipe.a,date_pipe.a],encapsulation:2,changeDetection:0}),ViewAccountBalanceLimitsComponent})();var payment_limits_service=__webpack_require__(\"TJod\");function EditAccountPaymentLimitsComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0,4),core.Qb(1,\"label-value\",5),core.Lb(2,\"user-link\",6),core.Pb(),core.Qb(3,\"label-value\",7),core.Dc(4),core.Pb(),core.Qb(5,\"div\",8),core.Qb(6,\"h3\"),core.Dc(7),core.Pb(),core.Lb(8,\"single-selection-field\",9),core.Lb(9,\"decimal-field\",10),core.ac(10,\"async\"),core.ac(11,\"async\"),core.Qb(12,\"label-value\",11),core.ac(13,\"async\"),core.Dc(14),core.ac(15,\"currency\"),core.Pb(),core.Pb(),core.Qb(16,\"div\",8),core.Qb(17,\"h3\"),core.Dc(18),core.Pb(),core.Lb(19,\"single-selection-field\",12),core.Lb(20,\"decimal-field\",13),core.ac(21,\"async\"),core.ac(22,\"async\"),core.Qb(23,\"label-value\",11),core.ac(24,\"async\"),core.Dc(25),core.ac(26,\"currency\"),core.Pb(),core.Pb(),core.Qb(27,\"div\",8),core.Qb(28,\"h3\"),core.Dc(29),core.Pb(),core.Lb(30,\"single-selection-field\",14),core.Lb(31,\"decimal-field\",15),core.ac(32,\"async\"),core.ac(33,\"async\"),core.Qb(34,\"label-value\",11),core.ac(35,\"async\"),core.Dc(36),core.ac(37,\"currency\"),core.Pb(),core.Pb(),core.Qb(38,\"div\",8),core.Qb(39,\"h3\"),core.Dc(40),core.Pb(),core.Lb(41,\"single-selection-field\",16),core.Lb(42,\"decimal-field\",17),core.ac(43,\"async\"),core.ac(44,\"async\"),core.Qb(45,\"label-value\",11),core.ac(46,\"async\"),core.Dc(47),core.ac(48,\"currency\"),core.Pb(),core.Pb(),core.Lb(49,\"textarea-field\",18),core.Nb()),2&rf){const ctx_r0=core.Zb();core.gc(\"formGroup\",ctx_r0.form),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r0.data.user),core.xb(1),core.gc(\"label\",ctx_r0.i18n.account.account),core.xb(1),core.Fc(\" \",ctx_r0.data.account.type.name,\" \"),core.xb(3),core.Ec(ctx_r0.i18n.account.paymentLimits.paymentLimit),core.xb(1),core.gc(\"label\",ctx_r0.i18n.account.limits.mode)(\"fieldOptions\",ctx_r0.modeOptions),core.xb(1),core.gc(\"hidden\",core.bc(10,54,ctx_r0.isDefaultPaymentLimit$))(\"required\",!core.bc(11,56,ctx_r0.isDefaultPaymentLimit$))(\"label\",ctx_r0.i18n.account.paymentLimits.paymentLimit)(\"scale\",ctx_r0.data.account.currency.decimalDigits)(\"prefix\",ctx_r0.data.account.currency.prefix)(\"suffix\",ctx_r0.data.account.currency.suffix),core.xb(3),core.gc(\"hidden\",!core.bc(13,58,ctx_r0.isDefaultPaymentLimit$))(\"label\",ctx_r0.i18n.account.paymentLimits.paymentLimit),core.xb(2),core.Fc(\" \",core.cc(15,60,ctx_r0.data.productAmountLimit?ctx_r0.data.productAmountLimit:0,ctx_r0.data.account.currency),\" \"),core.xb(4),core.Ec(ctx_r0.i18n.account.paymentLimits.dailyLimit),core.xb(1),core.gc(\"label\",ctx_r0.i18n.account.limits.mode)(\"fieldOptions\",ctx_r0.modeOptions),core.xb(1),core.gc(\"hidden\",core.bc(21,63,ctx_r0.isDefaultDailyLimit$))(\"required\",!core.bc(22,65,ctx_r0.isDefaultDailyLimit$))(\"label\",ctx_r0.i18n.account.paymentLimits.dailyLimit)(\"scale\",ctx_r0.data.account.currency.decimalDigits)(\"prefix\",ctx_r0.data.account.currency.prefix)(\"suffix\",ctx_r0.data.account.currency.suffix),core.xb(3),core.gc(\"hidden\",!core.bc(24,67,ctx_r0.isDefaultDailyLimit$))(\"label\",ctx_r0.i18n.account.paymentLimits.dailyLimit),core.xb(2),core.Fc(\" \",core.cc(26,69,ctx_r0.data.productAmountPerDayLimit?ctx_r0.data.productAmountPerDayLimit:0,ctx_r0.data.account.currency),\" \"),core.xb(4),core.Ec(ctx_r0.i18n.account.paymentLimits.weeklyLimit),core.xb(1),core.gc(\"label\",ctx_r0.i18n.account.limits.mode)(\"fieldOptions\",ctx_r0.modeOptions),core.xb(1),core.gc(\"hidden\",core.bc(32,72,ctx_r0.isDefaultWeeklyLimit$))(\"required\",!core.bc(33,74,ctx_r0.isDefaultWeeklyLimit$))(\"label\",ctx_r0.i18n.account.paymentLimits.weeklyLimit)(\"scale\",ctx_r0.data.account.currency.decimalDigits)(\"prefix\",ctx_r0.data.account.currency.prefix)(\"suffix\",ctx_r0.data.account.currency.suffix),core.xb(3),core.gc(\"hidden\",!core.bc(35,76,ctx_r0.isDefaultWeeklyLimit$))(\"label\",ctx_r0.i18n.account.paymentLimits.weeklyLimit),core.xb(2),core.Fc(\" \",core.cc(37,78,ctx_r0.data.productAmountPerWeekLimit?ctx_r0.data.productAmountPerWeekLimit:0,ctx_r0.data.account.currency),\" \"),core.xb(4),core.Ec(ctx_r0.i18n.account.paymentLimits.monthlyLimit),core.xb(1),core.gc(\"label\",ctx_r0.i18n.account.limits.mode)(\"fieldOptions\",ctx_r0.modeOptions),core.xb(1),core.gc(\"hidden\",core.bc(43,81,ctx_r0.isDefaultMonthlyLimit$))(\"required\",!core.bc(44,83,ctx_r0.isDefaultMonthlyLimit$))(\"label\",ctx_r0.i18n.account.paymentLimits.monthlyLimit)(\"scale\",ctx_r0.data.account.currency.decimalDigits)(\"prefix\",ctx_r0.data.account.currency.prefix)(\"suffix\",ctx_r0.data.account.currency.suffix),core.xb(3),core.gc(\"hidden\",!core.bc(46,85,ctx_r0.isDefaultMonthlyLimit$))(\"label\",ctx_r0.i18n.account.paymentLimits.monthlyLimit),core.xb(2),core.Fc(\" \",core.cc(48,87,ctx_r0.data.productAmountPerMonthLimit?ctx_r0.data.productAmountPerMonthLimit:0,ctx_r0.data.account.currency),\" \"),core.xb(2),core.gc(\"label\",ctx_r0.i18n.general.comments)}}let edit_account_payment_limits_component_EditAccountPaymentLimitsComponent=(()=>{class EditAccountPaymentLimitsComponent extends base_page_component.a{constructor(injector,paymentLimitsService){super(injector),this.paymentLimitsService=paymentLimitsService,this.isDefaultPaymentLimit$=new BehaviorSubject.a(null),this.isDefaultDailyLimit$=new BehaviorSubject.a(null),this.isDefaultWeeklyLimit$=new BehaviorSubject.a(null),this.isDefaultMonthlyLimit$=new BehaviorSubject.a(null)}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.accountType=this.route.snapshot.params.accountType,this.addSub(this.paymentLimitsService.getAccountPaymentLimits({user:this.user,accountType:this.accountType}).subscribe(data=>this.data=data))}get modeOptions(){const options=[{value:\"default\",text:this.i18n.account.limits.productDefault}];return options.push({value:\"personalized\",text:this.i18n.account.limits.personalized}),options}mode(custom){return custom?\"personalized\":\"default\"}onDataInitialized(data){super.onDataInitialized(data);const paymentMode=this.mode(data.customAmountLimit),dailyMode=this.mode(data.customAmountPerDayLimit),weeklyMode=this.mode(data.customAmountPerWeekLimit),monthlyMode=this.mode(data.customAmountPerMonthLimit);this.form=this.formBuilder.group({paymentLimitMode:paymentMode,amountLimit:data.amountLimit,dailyLimitMode:dailyMode,amountPerDayLimit:data.amountPerDayLimit,weeklyLimitMode:weeklyMode,amountPerWeekLimit:data.amountPerWeekLimit,monthlyLimitMode:monthlyMode,amountPerMonthLimit:data.amountPerMonthLimit,comment:null}),this.formControl(\"paymentLimitMode\").valueChanges.subscribe(value=>this.isDefaultPaymentLimit$.next(\"default\"===value)),this.isDefaultPaymentLimit$.next(\"default\"===paymentMode),this.formControl(\"dailyLimitMode\").valueChanges.subscribe(value=>this.isDefaultDailyLimit$.next(\"default\"===value)),this.isDefaultDailyLimit$.next(\"default\"===dailyMode),this.formControl(\"weeklyLimitMode\").valueChanges.subscribe(value=>this.isDefaultWeeklyLimit$.next(\"default\"===value)),this.isDefaultWeeklyLimit$.next(\"default\"===weeklyMode),this.formControl(\"monthlyLimitMode\").valueChanges.subscribe(value=>this.isDefaultMonthlyLimit$.next(\"default\"===value)),this.isDefaultMonthlyLimit$.next(\"default\"===monthlyMode)}save(){if(Object(helper.F)(this.form),!this.form.valid)return;const value=Object(cloneDeep.a)(this.form.value);value.customAmountLimit=\"default\"!==value.paymentLimitMode,value.customAmountLimit||delete value.amountLimit,value.customAmountPerDayLimit=\"default\"!==value.dailyLimitMode,value.customAmountPerDayLimit||delete value.amountPerDayLimit,value.customAmountPerWeekLimit=\"default\"!==value.weeklyLimitMode,value.customAmountPerWeekLimit||delete value.amountPerWeekLimit,value.customAmountPerMonthLimit=\"default\"!==value.monthlyLimitMode,value.customAmountPerMonthLimit||delete value.amountPerMonthLimit,delete value.creditLimitMode,delete value.upperCreditLimitMode,this.data.confirmationPasswordInput?this.notification.confirm({title:this.i18n.general.confirm,message:this.i18n.account.paymentLimits.confirm,createDeviceConfirmation:this.paymentLimitsDeviceConfirmation(),passwordInput:this.data.confirmationPasswordInput,callback:res=>this.doSave(value,res.confirmationPassword)}):this.doSave(value)}doSave(value,confirmationPassword){this.addSub(this.paymentLimitsService.setAccountPaymentLimits({user:this.user,accountType:this.accountType,confirmationPassword:confirmationPassword,body:value}).subscribe(()=>{this.notification.snackBar(this.i18n.account.paymentLimits.saved),this.reload()}))}paymentLimitsDeviceConfirmation(){return()=>({type:models.s.CHANGE_ACCOUNT_LIMITS,account:this.data.account.id})}formControl(internalName){return this.form.get(internalName)}resolveMenu(){return this.menu.searchUsersMenu()}}return EditAccountPaymentLimitsComponent.ɵfac=function(t){return new(t||EditAccountPaymentLimitsComponent)(core.Kb(core.r),core.Kb(payment_limits_service.a))},EditAccountPaymentLimitsComponent.ɵcmp=core.Eb({type:EditAccountPaymentLimitsComponent,selectors:[[\"edit-account-payment-limits\"]],features:[core.ub],decls:8,vars:13,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"formGroup\",4,\"ngIf\"],[3,\"disabled\",\"label\",\"action\"],[3,\"formGroup\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[3,\"label\"],[1,\"mt-3\"],[\"labelPosition\",\"side\",\"formControlName\",\"paymentLimitMode\",3,\"label\",\"fieldOptions\"],[\"formControlName\",\"amountLimit\",3,\"hidden\",\"required\",\"label\",\"scale\",\"prefix\",\"suffix\"],[3,\"hidden\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"dailyLimitMode\",3,\"label\",\"fieldOptions\"],[\"formControlName\",\"amountPerDayLimit\",3,\"hidden\",\"required\",\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"weeklyLimitMode\",3,\"label\",\"fieldOptions\"],[\"formControlName\",\"amountPerWeekLimit\",3,\"hidden\",\"required\",\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"monthlyLimitMode\",3,\"label\",\"fieldOptions\"],[\"formControlName\",\"amountPerMonthLimit\",3,\"hidden\",\"required\",\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"comment\",1,\"mt-4\",3,\"label\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Qb(2,\"page-content\",1),core.ac(3,\"async\"),core.Bc(4,EditAccountPaymentLimitsComponent_ng_container_4_Template,50,90,\"ng-container\",2),core.Qb(5,\"actions\"),core.Qb(6,\"action-button\",3),core.Xb(\"action\",(function(){return ctx.save()})),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,7,ctx.data$)),core.xb(2),core.gc(\"heading\",ctx.i18n.account.paymentLimits.title.edit)(\"mobileHeading\",ctx.i18n.account.paymentLimits.mobileTitle.edit)(\"headingActions\",core.bc(3,9,ctx.headingActions$)),core.xb(2),core.gc(\"ngIf\",ctx.data),core.xb(2),core.gc(\"disabled\",core.bc(7,11,ctx.requesting$))(\"label\",ctx.i18n.general.save))},directives:[page_layout_component.a,page_content_component.a,common.t,actions_component.a,action_button_component.a,fesm2015_forms.w,fesm2015_forms.n,label_value_component.a,user_link_component.a,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,decimal_field_component.a,fesm2015_forms.D,textarea_field_component.a],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),EditAccountPaymentLimitsComponent})();function ListAccountsPaymentLimitsComponent_ng_container_2_table_5_tr_13_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Qb(0,\"tr\",8),core.Xb(\"click\",(function($event){core.sc(_r5);const row_r3=ctx.$implicit,ctx_r4=core.Zb(3);return ctx_r4.router.navigate(ctx_r4.path(row_r3.account.type)),$event.stopPropagation()})),core.Qb(1,\"td\",9),core.Dc(2),core.Pb(),core.Qb(3,\"td\"),core.Dc(4),core.ac(5,\"currency\"),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.ac(8,\"currency\"),core.Pb(),core.Qb(9,\"td\"),core.Dc(10),core.ac(11,\"currency\"),core.Pb(),core.Qb(12,\"td\"),core.Dc(13),core.ac(14,\"currency\"),core.Pb(),core.Pb()}if(2&rf){const row_r3=ctx.$implicit,ctx_r2=core.Zb(3);core.xb(2),core.Ec(row_r3.account.type.name),core.xb(2),core.Fc(\" \",row_r3.amountLimit?core.cc(5,5,row_r3.amountLimit,row_r3.account.currency):ctx_r2.i18n.account.limits.unlimited,\" \"),core.xb(3),core.Fc(\" \",row_r3.amountPerDayLimit?core.cc(8,8,row_r3.amountPerDayLimit,row_r3.account.currency):ctx_r2.i18n.account.limits.unlimited,\" \"),core.xb(3),core.Fc(\" \",row_r3.amountPerWeekLimit?core.cc(11,11,row_r3.amountPerWeekLimit,row_r3.account.currency):ctx_r2.i18n.account.limits.unlimited,\" \"),core.xb(3),core.Fc(\" \",row_r3.amountPerMonthLimit?core.cc(14,14,row_r3.amountPerMonthLimit,row_r3.account.currency):ctx_r2.i18n.account.limits.unlimited,\" \")}}function ListAccountsPaymentLimitsComponent_ng_container_2_table_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",6),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Qb(10,\"th\"),core.Dc(11),core.Pb(),core.Pb(),core.Qb(12,\"tbody\"),core.Bc(13,ListAccountsPaymentLimitsComponent_ng_container_2_table_5_tr_13_Template,15,17,\"tr\",7),core.Pb(),core.Pb()),2&rf){const ctx_r1=core.Zb(2);core.xb(3),core.Ec(ctx_r1.i18n.account.account),core.xb(2),core.Ec(ctx_r1.i18n.account.paymentLimits.paymentLimit),core.xb(2),core.Ec(ctx_r1.i18n.account.paymentLimits.dailyLimit),core.xb(2),core.Ec(ctx_r1.i18n.account.paymentLimits.weeklyLimit),core.xb(2),core.Ec(ctx_r1.i18n.account.paymentLimits.monthlyLimit),core.xb(2),core.gc(\"ngForOf\",ctx_r1.data.accountLimits)}}function ListAccountsPaymentLimitsComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Lb(3,\"user-info\",3),core.Pb(),core.Qb(4,\"results-layout\",4),core.Bc(5,ListAccountsPaymentLimitsComponent_ng_container_2_table_5_Template,14,6,\"table\",5),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"mode\",\"normal\")(\"heading\",ctx_r0.i18n.account.paymentLimits.title.list)(\"mobileHeading\",ctx_r0.i18n.account.paymentLimits.mobileTitle.list)(\"headingActions\",core.bc(2,6,ctx_r0.headingActions$)),core.xb(2),core.gc(\"user\",ctx_r0.data.user),core.xb(1),core.gc(\"results\",ctx_r0.data.accountLimits)}}let list_accounts_payment_limits_component_ListAccountsPaymentLimitsComponent=(()=>{class ListAccountsPaymentLimitsComponent extends base_page_component.a{constructor(injector,paymentLimitsService){super(injector),this.paymentLimitsService=paymentLimitsService}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.paymentLimitsService.getDataForUserPaymentLimits({user:this.user}).subscribe(data=>{1===data.accountLimits.length&&this.router.navigate(this.path(data.accountLimits[0].account.type)),this.data=data}))}path(accountType){return[\"/banking\",this.user,\"account-payment-limits\",accountType.id]}resolveMenu(){return this.menu.searchUsersMenu()}}return ListAccountsPaymentLimitsComponent.ɵfac=function(t){return new(t||ListAccountsPaymentLimitsComponent)(core.Kb(core.r),core.Kb(payment_limits_service.a))},ListAccountsPaymentLimitsComponent.ɵcmp=core.Eb({type:ListAccountsPaymentLimitsComponent,selectors:[[\"list-accounts-payment-limits\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[3,\"mode\",\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"user\"],[3,\"results\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[\"width\",\"20%\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ListAccountsPaymentLimitsComponent_ng_container_2_Template,6,8,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,results_layout_component.a,result_table_directive.a,common.s],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),ListAccountsPaymentLimitsComponent})();function SearchPaymentLimitsOverviewComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchPaymentLimitsOverviewComponent_ng_template_3_div_4_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",14),2&rf){const group_r9=ctx.$implicit,ctx_r8=core.Zb(3);core.gc(\"value\",ctx_r8.ApiHelper.internalNameOrId(group_r9))(\"internalName\",group_r9.internalName)(\"id\",group_r9.id)(\"text\",group_r9.name)(\"parent\",group_r9.groupSet)}}function SearchPaymentLimitsOverviewComponent_ng_template_3_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"multi-selection-field\",12),core.Bc(2,SearchPaymentLimitsOverviewComponent_ng_template_3_div_4_field_option_2_Template,1,5,\"field-option\",13),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r3.i18n.user.groupFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.groups)}}function SearchPaymentLimitsOverviewComponent_ng_template_3_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",17),2&rf){const currency_r11=ctx.$implicit;core.gc(\"value\",currency_r11.id)(\"text\",currency_r11.name)}}function SearchPaymentLimitsOverviewComponent_ng_template_3_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"single-selection-field\",15),core.Bc(2,SearchPaymentLimitsOverviewComponent_ng_template_3_div_5_field_option_2_Template,1,2,\"field-option\",16),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r4.i18n.general.currency)(\"emptyOption\",ctx_r4.i18n.general.notApplied),core.xb(1),core.gc(\"ngForOf\",ctx_r4.currencies)}}function SearchPaymentLimitsOverviewComponent_ng_template_3_ng_container_6_div_1_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",37),2&rf){const accountType_r14=ctx.$implicit;core.gc(\"id\",accountType_r14.id)(\"value\",accountType_r14.id)(\"text\",accountType_r14.name)}}function SearchPaymentLimitsOverviewComponent_ng_template_3_ng_container_6_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"single-selection-field\",35),core.Bc(2,SearchPaymentLimitsOverviewComponent_ng_template_3_ng_container_6_div_1_field_option_2_Template,1,3,\"field-option\",36),core.Pb(),core.Pb()),2&rf){const ctx_r12=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r12.i18n.account.account)(\"emptyOption\",ctx_r12.i18n.general.all),core.xb(1),core.gc(\"ngForOf\",ctx_r12.accountTypes())}}function SearchPaymentLimitsOverviewComponent_ng_template_3_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,SearchPaymentLimitsOverviewComponent_ng_template_3_ng_container_6_div_1_Template,3,3,\"div\",6),core.Qb(2,\"div\",11),core.Lb(3,\"single-selection-field\",18),core.Pb(),core.Lb(4,\"div\",19),core.ac(5,\"async\"),core.Qb(6,\"div\",20),core.ac(7,\"async\"),core.Lb(8,\"decimal-field\",21),core.Pb(),core.Qb(9,\"div\",20),core.ac(10,\"async\"),core.Lb(11,\"decimal-field\",22),core.Pb(),core.Qb(12,\"div\",11),core.Lb(13,\"single-selection-field\",23),core.Pb(),core.Lb(14,\"div\",19),core.ac(15,\"async\"),core.Qb(16,\"div\",20),core.ac(17,\"async\"),core.Lb(18,\"decimal-field\",24),core.Pb(),core.Qb(19,\"div\",20),core.ac(20,\"async\"),core.Lb(21,\"decimal-field\",25),core.Pb(),core.Qb(22,\"div\",11),core.Lb(23,\"single-selection-field\",26),core.Pb(),core.Lb(24,\"div\",19),core.ac(25,\"async\"),core.Qb(26,\"div\",20),core.ac(27,\"async\"),core.Lb(28,\"decimal-field\",27),core.Pb(),core.Qb(29,\"div\",20),core.ac(30,\"async\"),core.Lb(31,\"decimal-field\",28),core.Pb(),core.Qb(32,\"div\",11),core.Lb(33,\"single-selection-field\",29),core.Pb(),core.Lb(34,\"div\",19),core.ac(35,\"async\"),core.Qb(36,\"div\",20),core.ac(37,\"async\"),core.Lb(38,\"decimal-field\",30),core.Pb(),core.Qb(39,\"div\",20),core.ac(40,\"async\"),core.Lb(41,\"decimal-field\",31),core.Pb(),core.Qb(42,\"div\",11),core.Lb(43,\"user-field\",32),core.Pb(),core.Qb(44,\"div\",11),core.Lb(45,\"user-field\",33),core.Pb(),core.Qb(46,\"div\",11),core.Lb(47,\"user-field\",34),core.Pb(),core.Nb()),2&rf){const ctx_r5=core.Zb(2);core.xb(1),core.gc(\"ngIf\",(null==ctx_r5.data.accountTypes?null:ctx_r5.data.accountTypes.length)>1),core.xb(2),core.gc(\"fieldOptions\",ctx_r5.customLimitOptions)(\"emptyOption\",ctx_r5.i18n.general.all)(\"label\",ctx_r5.i18n.account.paymentLimits.personalizedPaymentLimit),core.xb(1),core.gc(\"hidden\",!core.bc(5,65,ctx_r5.isCustomPaymentLimit$)),core.xb(2),core.gc(\"hidden\",!core.bc(7,67,ctx_r5.isCustomPaymentLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.paymentLimits.fromPaymentLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(1),core.gc(\"hidden\",!core.bc(10,69,ctx_r5.isCustomPaymentLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.paymentLimits.toPaymentLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(2),core.gc(\"fieldOptions\",ctx_r5.customLimitOptions)(\"emptyOption\",ctx_r5.i18n.general.all)(\"label\",ctx_r5.i18n.account.paymentLimits.personalizedDailyLimit),core.xb(1),core.gc(\"hidden\",!core.bc(15,71,ctx_r5.isCustomDailyLimit$)),core.xb(2),core.gc(\"hidden\",!core.bc(17,73,ctx_r5.isCustomDailyLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.paymentLimits.fromDailyLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(1),core.gc(\"hidden\",!core.bc(20,75,ctx_r5.isCustomDailyLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.paymentLimits.toDailyLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(2),core.gc(\"fieldOptions\",ctx_r5.customLimitOptions)(\"emptyOption\",ctx_r5.i18n.general.all)(\"label\",ctx_r5.i18n.account.paymentLimits.personalizedWeeklyLimit),core.xb(1),core.gc(\"hidden\",!core.bc(25,77,ctx_r5.isCustomWeeklyLimit$)),core.xb(2),core.gc(\"hidden\",!core.bc(27,79,ctx_r5.isCustomWeeklyLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.paymentLimits.fromWeeklyLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(1),core.gc(\"hidden\",!core.bc(30,81,ctx_r5.isCustomWeeklyLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.paymentLimits.toWeeklyLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(2),core.gc(\"fieldOptions\",ctx_r5.customLimitOptions)(\"emptyOption\",ctx_r5.i18n.general.all)(\"label\",ctx_r5.i18n.account.paymentLimits.personalizedMonthlyLimit),core.xb(1),core.gc(\"hidden\",!core.bc(35,83,ctx_r5.isCustomMonthlyLimit$)),core.xb(2),core.gc(\"hidden\",!core.bc(37,85,ctx_r5.isCustomMonthlyLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.paymentLimits.fromMonthlyLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(1),core.gc(\"hidden\",!core.bc(40,87,ctx_r5.isCustomMonthlyLimit$)),core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.paymentLimits.toMonthlyLimit)(\"scale\",ctx_r5.currencyDecimalDigits())(\"prefix\",ctx_r5.currencyPrefix())(\"suffix\",ctx_r5.currencySuffix()),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.user)(\"allowContacts\",!1),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.usersOfBroker)(\"filters\",ctx_r5.userSearchFilters(!0))(\"allowContacts\",!1),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.changedBy)(\"filters\",ctx_r5.userSearchFilters(!1))(\"allowContacts\",!1)}}function SearchPaymentLimitsOverviewComponent_ng_template_3_mobile_result_10_Template(rf,ctx){if(1&rf){const _r17=core.Rb();core.Qb(0,\"mobile-result\",38),core.Xb(\"click\",(function($event){core.sc(_r17);const row_r15=ctx.$implicit,ctx_r16=core.Zb(2);return ctx_r16.router.navigate(ctx_r16.view(row_r15)),$event.stopPropagation()})),core.Qb(1,\"div\",39),core.Qb(2,\"div\",40),core.Qb(3,\"label-value\",41),core.Dc(4),core.Pb(),core.Qb(5,\"label-value\",41),core.Dc(6),core.Pb(),core.Qb(7,\"label-value\",41),core.Dc(8),core.ac(9,\"currency\"),core.Pb(),core.Qb(10,\"label-value\",41),core.Dc(11),core.ac(12,\"currency\"),core.Pb(),core.Qb(13,\"label-value\",41),core.Dc(14),core.ac(15,\"currency\"),core.Pb(),core.Qb(16,\"label-value\",41),core.Dc(17),core.ac(18,\"currency\"),core.Pb(),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const row_r15=ctx.$implicit,ctx_r6=core.Zb(2);core.xb(3),core.gc(\"label\",ctx_r6.i18n.general.user),core.xb(1),core.Fc(\" \",row_r15.user.display,\" \"),core.xb(1),core.gc(\"label\",ctx_r6.i18n.account.account),core.xb(1),core.Fc(\" \",row_r15.account.type.name,\" \"),core.xb(1),core.gc(\"label\",ctx_r6.i18n.account.paymentLimits.paymentLimit),core.xb(1),core.Fc(\" \",row_r15.customAmountLimit?core.cc(9,12,row_r15.amountLimit,row_r15.account.currency):ctx_r6.i18n.account.limits.productDefault,\" \"),core.xb(2),core.gc(\"label\",ctx_r6.i18n.account.paymentLimits.dailyLimit),core.xb(1),core.Fc(\" \",row_r15.customAmountPerDayLimit?core.cc(12,15,row_r15.amountPerDayLimit,row_r15.account.currency):ctx_r6.i18n.account.limits.productDefault,\" \"),core.xb(2),core.gc(\"label\",ctx_r6.i18n.account.paymentLimits.weeklyLimit),core.xb(1),core.Fc(\" \",row_r15.customAmountPerWeekLimit?core.cc(15,18,row_r15.amountPerWeekLimit,row_r15.account.currency):ctx_r6.i18n.account.limits.productDefault,\" \"),core.xb(2),core.gc(\"label\",ctx_r6.i18n.account.paymentLimits.monthlyLimit),core.xb(1),core.Fc(\" \",row_r15.customAmountPerMonthLimit?core.cc(18,21,row_r15.amountPerMonthLimit,row_r15.account.currency):ctx_r6.i18n.account.limits.productDefault,\" \")}}function SearchPaymentLimitsOverviewComponent_ng_template_3_table_11_tr_15_Template(rf,ctx){if(1&rf){const _r21=core.Rb();core.Qb(0,\"tr\",38),core.Xb(\"click\",(function($event){core.sc(_r21);const row_r19=ctx.$implicit,ctx_r20=core.Zb(3);return ctx_r20.router.navigate(ctx_r20.view(row_r19)),$event.stopPropagation()})),core.Qb(1,\"td\"),core.Dc(2),core.Pb(),core.Qb(3,\"td\"),core.Dc(4),core.Pb(),core.Qb(5,\"td\"),core.Dc(6),core.ac(7,\"currency\"),core.Pb(),core.Qb(8,\"td\"),core.Dc(9),core.ac(10,\"currency\"),core.Pb(),core.Qb(11,\"td\"),core.Dc(12),core.ac(13,\"currency\"),core.Pb(),core.Qb(14,\"td\"),core.Dc(15),core.ac(16,\"currency\"),core.Pb(),core.Pb()}if(2&rf){const row_r19=ctx.$implicit,ctx_r18=core.Zb(3);core.xb(2),core.Ec(row_r19.user.display),core.xb(2),core.Ec(row_r19.account.type.name),core.xb(2),core.Fc(\" \",row_r19.customAmountLimit?core.cc(7,6,row_r19.amountLimit,row_r19.account.currency):ctx_r18.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Fc(\" \",row_r19.customAmountPerDayLimit?core.cc(10,9,row_r19.amountPerDayLimit,row_r19.account.currency):ctx_r18.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Fc(\" \",row_r19.customAmountPerWeekLimit?core.cc(13,12,row_r19.amountPerWeekLimit,row_r19.account.currency):ctx_r18.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Fc(\" \",row_r19.customAmountPerMonthLimit?core.cc(16,15,row_r19.amountPerMonthLimit,row_r19.account.currency):ctx_r18.i18n.account.limits.productDefault,\" \")}}function SearchPaymentLimitsOverviewComponent_ng_template_3_table_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",42),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Qb(10,\"th\"),core.Dc(11),core.Pb(),core.Qb(12,\"th\"),core.Dc(13),core.Pb(),core.Pb(),core.Qb(14,\"tbody\"),core.Bc(15,SearchPaymentLimitsOverviewComponent_ng_template_3_table_11_tr_15_Template,17,18,\"tr\",43),core.ac(16,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);var tmp_6_0;core.xb(3),core.Ec(ctx_r7.i18n.general.user),core.xb(2),core.Ec(ctx_r7.i18n.account.account),core.xb(2),core.Ec(ctx_r7.i18n.account.paymentLimits.paymentLimit),core.xb(2),core.Ec(ctx_r7.i18n.account.paymentLimits.dailyLimit),core.xb(2),core.Ec(ctx_r7.i18n.account.paymentLimits.weeklyLimit),core.xb(2),core.Ec(ctx_r7.i18n.account.paymentLimits.monthlyLimit),core.xb(2),core.gc(\"ngForOf\",null==(tmp_6_0=core.bc(16,7,ctx_r7.results$))?null:tmp_6_0.results)}}function SearchPaymentLimitsOverviewComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r23=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"form\",4),core.Qb(3,\"div\",5),core.Bc(4,SearchPaymentLimitsOverviewComponent_ng_template_3_div_4_Template,3,2,\"div\",6),core.Bc(5,SearchPaymentLimitsOverviewComponent_ng_template_3_div_5_Template,3,3,\"div\",6),core.Bc(6,SearchPaymentLimitsOverviewComponent_ng_template_3_ng_container_6_Template,48,89,\"ng-container\",7),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Qb(8,\"results-layout\",8),core.Xb(\"update\",(function($event){return core.sc(_r23),core.Zb().update($event)})),core.ac(9,\"async\"),core.Bc(10,SearchPaymentLimitsOverviewComponent_ng_template_3_mobile_result_10_Template,19,24,\"mobile-result\",9),core.Bc(11,SearchPaymentLimitsOverviewComponent_ng_template_3_table_11_Template,17,9,\"table\",10),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.account.paymentLimits.title.overview)(\"mobileHeading\",ctx_r2.i18n.account.paymentLimits.mobileTitle.overview)(\"headingActions\",core.bc(1,9,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",(null==ctx_r2.data.groups?null:ctx_r2.data.groups.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.currencies?null:ctx_r2.currencies.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(7,11,ctx_r2.moreFilters$)),core.xb(2),core.gc(\"results\",core.bc(9,13,ctx_r2.results$))(\"rendering$\",ctx_r2.rendering$)}}let search_payment_limits_overview_component_SearchPaymentLimitsOverviewComponent=(()=>{class SearchPaymentLimitsOverviewComponent extends base_search_page_component.a{constructor(injector,paymentLimitsService){super(injector),this.paymentLimitsService=paymentLimitsService,this.isCustomPaymentLimit$=new BehaviorSubject.a(!1),this.isCustomDailyLimit$=new BehaviorSubject.a(!1),this.isCustomWeeklyLimit$=new BehaviorSubject.a(!1),this.isCustomMonthlyLimit$=new BehaviorSubject.a(!1),this.currencies=[]}getFormControlNames(){return[\"accountType\",\"broker\",\"brokers\",\"by\",\"currency\",\"customAmountLimit\",\"paymentLimitFrom\",\"paymentLimitTo\",\"dailyLimitFrom\",\"dailyLimitTo\",\"customAmountPerDayLimit\",\"customAmountPerWeekLimit\",\"weeklyLimitFrom\",\"weeklyLimitTo\",\"customAmountPerMonthLimit\",\"monthlyLimitFrom\",\"monthlyLimitTo\",\"groups\",\"user\"]}ngOnInit(){super.ngOnInit(),this.addSub(this.paymentLimitsService.getAccountPaymentLimitsData().subscribe(data=>this.data=data))}onDataInitialized(data){super.onDataInitialized(data),(data.accountTypes||[]).forEach(at=>this.currencies.push(at.currency)),this.singleCurrency=1===this.currencies.length?this.currencies[0]:null,this.form.get(\"customAmountLimit\").valueChanges.subscribe(value=>this.isCustomPaymentLimit$.next(\"yes\"===value)),this.form.get(\"customAmountPerDayLimit\").valueChanges.subscribe(value=>this.isCustomDailyLimit$.next(\"yes\"===value)),this.form.get(\"customAmountPerWeekLimit\").valueChanges.subscribe(value=>this.isCustomWeeklyLimit$.next(\"yes\"===value)),this.form.get(\"customAmountPerMonthLimit\").valueChanges.subscribe(value=>this.isCustomMonthlyLimit$.next(\"yes\"===value)),this.addSub(this.form.controls.currency.valueChanges.subscribe(currencyId=>this.updateAccountTypes(currencyId))),this.headingActions=[this.moreFiltersAction]}doSearch(value){return this.paymentLimitsService.searchAccountPaymentLimits$Response(value)}toSearchParams(value){const params=value;return this.isCustomPaymentLimit$.value?(params.customAmountLimit=!0,params.customAmountLimitRange=api_helper.a.rangeFilter(value.paymentLimitFrom,value.paymentLimitTo)):params.customAmountLimit=!value.customAmountLimit&&null,this.isCustomDailyLimit$.value?(params.customAmountPerDayLimit=!0,params.customAmountPerDayLimitRange=api_helper.a.rangeFilter(value.dailyLimitFrom,value.dailyLimitTo)):params.customAmountPerDayLimit=!value.customAmountPerDayLimit&&null,this.isCustomWeeklyLimit$.value?(params.customAmountPerWeekLimit=!0,params.customAmountPerWeekLimitRange=api_helper.a.rangeFilter(value.weeklyLimitFrom,value.weeklyLimitTo)):params.customAmountPerWeekLimit=!value.customAmountPerWeekLimit&&null,this.isCustomMonthlyLimit$.value?(params.customAmountPerMonthLimit=!0,params.customAmountPerMonthLimitRange=api_helper.a.rangeFilter(value.monthlyLimitFrom,value.monthlyLimitTo)):params.customAmountPerMonthLimit=!value.customAmountPerMonthLimit&&null,params}get customLimitOptions(){const options=[{value:\"yes\",text:this.i18n.general.yes}];return options.push({value:\"no\",text:this.i18n.general.no}),options}userSearchFilters(onlyBrokers){const filters={roles:[models.kb.BROKER]};return onlyBrokers||filters.roles.push(models.kb.ADMINISTRATOR),filters}updateAccountTypes(currencyId){const selectedAccount=this.form.controls.accountType.value;currencyId&&selectedAccount&&this.data.accountTypes.find(at=>at.id===selectedAccount).currency.id!==currencyId&&this.form.controls.accountType.setValue(null)}accountTypes(){const currency=this.findCurrency(!1),types=this.data.accountTypes||[];return currency?types.filter(t=>t.currency.id===currency.id):types}findCurrency(useAccountType){if(this.singleCurrency)return this.singleCurrency;const currency=this.form.controls.currency.value;if(currency)return this.currencies.find(c=>c.id===currency);const accountId=this.form.controls.accountType.value;return useAccountType&&accountId?this.data.accountTypes.find(at=>at.id===accountId).currency:null}currencyDecimalDigits(){const c=this.findCurrency(!0);return c?c.decimalDigits:2}currencyPrefix(){const c=this.findCurrency(!0);return c?c.prefix:null}currencySuffix(){const c=this.findCurrency(!0);return c?c.suffix:null}showMoreFiltersLabel(){return this.i18n.general.moreFilters}showLessFiltersLabel(){return this.i18n.general.lessFilters}view(row){return[\"/banking\",row.user.id,\"account-payment-limits\",row.account.type.id]}resolveMenu(){return new shared_menu.a(shared_menu.b.ACCOUNT_PAYMENT_LIMITS_OVERVIEW)}}return SearchPaymentLimitsOverviewComponent.ɵfac=function(t){return new(t||SearchPaymentLimitsOverviewComponent)(core.Kb(core.r),core.Kb(payment_limits_service.a))},SearchPaymentLimitsOverviewComponent.ɵcmp=core.Eb({type:SearchPaymentLimitsOverviewComponent,selectors:[[\"search-payment-limits-overview\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\",\"no-gutters\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"results\",\"rendering$\",\"update\"],[3,\"click\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"groups\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\"],[\"labelPosition\",\"side\",\"formControlName\",\"currency\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"customAmountLimit\",3,\"fieldOptions\",\"emptyOption\",\"label\"],[1,\"w-100\",3,\"hidden\"],[1,\"col-12\",\"col-md-6\",3,\"hidden\"],[\"formControlName\",\"paymentLimitFrom\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"paymentLimitTo\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"customAmountPerDayLimit\",3,\"fieldOptions\",\"emptyOption\",\"label\"],[\"formControlName\",\"dailyLimitFrom\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"dailyLimitTo\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"customAmountPerWeekLimit\",3,\"fieldOptions\",\"emptyOption\",\"label\"],[\"formControlName\",\"weeklyLimitFrom\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"weeklyLimitTo\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"customAmountPerMonthLimit\",3,\"fieldOptions\",\"emptyOption\",\"label\"],[\"formControlName\",\"monthlyLimitFrom\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"monthlyLimitTo\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\",\"allowContacts\"],[\"labelPosition\",\"side\",\"formControlName\",\"broker\",3,\"label\",\"filters\",\"allowContacts\"],[\"labelPosition\",\"side\",\"formControlName\",\"by\",3,\"label\",\"filters\",\"allowContacts\"],[\"labelPosition\",\"side\",\"formControlName\",\"accountType\",3,\"label\",\"emptyOption\"],[3,\"id\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"value\",\"text\"],[3,\"click\"],[1,\"d-flex\"],[1,\"w-100\"],[\"labelPosition\",\"sideForced\",3,\"label\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchPaymentLimitsOverviewComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchPaymentLimitsOverviewComponent_ng_template_3_Template,12,15,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,multi_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.s,field_option_directive.a,single_selection_field_component.a,decimal_field_component.a,user_field_component.a,mobile_result_component.a,label_value_component.a],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchPaymentLimitsOverviewComponent})();function ViewAccountPaymentLimitsComponent_page_content_3_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"label-value\",5),core.Lb(2,\"user-link\",6),core.Pb(),core.Qb(3,\"label-value\",7),core.Dc(4),core.Pb(),core.Qb(5,\"h3\"),core.Dc(6),core.Pb(),core.Qb(7,\"label-value\",7),core.Dc(8),core.ac(9,\"currency\"),core.Pb(),core.Qb(10,\"label-value\",7),core.Dc(11),core.Pb(),core.Qb(12,\"h3\"),core.Dc(13),core.Pb(),core.Qb(14,\"label-value\",7),core.Dc(15),core.ac(16,\"currency\"),core.Pb(),core.Qb(17,\"label-value\",7),core.Dc(18),core.Pb(),core.Qb(19,\"h3\"),core.Dc(20),core.Pb(),core.Qb(21,\"label-value\",7),core.Dc(22),core.ac(23,\"currency\"),core.Pb(),core.Qb(24,\"label-value\",7),core.Dc(25),core.Pb(),core.Qb(26,\"h3\"),core.Dc(27),core.Pb(),core.Qb(28,\"label-value\",7),core.Dc(29),core.ac(30,\"currency\"),core.Pb(),core.Qb(31,\"label-value\",7),core.Dc(32),core.Pb(),core.Nb()),2&rf){const ctx_r2=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r2.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r2.data.user),core.xb(1),core.gc(\"label\",ctx_r2.i18n.account.account),core.xb(1),core.Fc(\" \",ctx_r2.data.account.type.name,\" \"),core.xb(2),core.Ec(ctx_r2.i18n.account.paymentLimits.paymentLimit),core.xb(1),core.gc(\"label\",ctx_r2.i18n.account.paymentLimits.paymentLimit),core.xb(1),core.Fc(\" \",core.cc(9,24,ctx_r2.data.amountLimit,ctx_r2.data.account.currency),\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.account.limits.mode),core.xb(1),core.Fc(\" \",ctx_r2.limitMode(ctx_r2.data.customAmountLimit),\" \"),core.xb(2),core.Ec(ctx_r2.i18n.account.paymentLimits.dailyLimit),core.xb(1),core.gc(\"label\",ctx_r2.i18n.account.paymentLimits.dailyLimit),core.xb(1),core.Fc(\" \",core.cc(16,27,ctx_r2.data.amountLimit,ctx_r2.data.account.currency),\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.account.limits.mode),core.xb(1),core.Fc(\" \",ctx_r2.limitMode(ctx_r2.data.customAmountLimit),\" \"),core.xb(2),core.Ec(ctx_r2.i18n.account.paymentLimits.weeklyLimit),core.xb(1),core.gc(\"label\",ctx_r2.i18n.account.paymentLimits.weeklyLimit),core.xb(1),core.Fc(\" \",core.cc(23,30,ctx_r2.data.amountLimit,ctx_r2.data.account.currency),\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.account.limits.mode),core.xb(1),core.Fc(\" \",ctx_r2.limitMode(ctx_r2.data.customAmountLimit),\" \"),core.xb(2),core.Ec(ctx_r2.i18n.account.paymentLimits.monthlyLimit),core.xb(1),core.gc(\"label\",ctx_r2.i18n.account.paymentLimits.monthlyLimit),core.xb(1),core.Fc(\" \",core.cc(30,33,ctx_r2.data.amountLimit,ctx_r2.data.account.currency),\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.account.limits.mode),core.xb(1),core.Fc(\" \",ctx_r2.limitMode(ctx_r2.data.customAmountLimit),\" \")}}function ViewAccountPaymentLimitsComponent_page_content_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Bc(2,ViewAccountPaymentLimitsComponent_page_content_3_ng_container_2_Template,33,36,\"ng-container\",4),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.account.paymentLimits.title.view)(\"mobileHeading\",ctx_r0.i18n.account.paymentLimits.mobileTitle.view)(\"headingActions\",core.bc(1,4,ctx_r0.headingActions$)),core.xb(2),core.gc(\"ngIf\",ctx_r0.data)}}function ViewAccountPaymentLimitsComponent_ng_container_4_table_5_tr_17_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\"),core.Qb(1,\"td\"),core.Dc(2),core.ac(3,\"date\"),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.ac(8,\"currency\"),core.Pb(),core.Qb(9,\"td\"),core.Dc(10),core.ac(11,\"currency\"),core.Pb(),core.Qb(12,\"td\"),core.Dc(13),core.ac(14,\"currency\"),core.Pb(),core.Qb(15,\"td\"),core.Dc(16),core.ac(17,\"currency\"),core.Pb(),core.Qb(18,\"td\"),core.Dc(19),core.Pb(),core.Pb()),2&rf){const row_r5=ctx.$implicit,ctx_r4=core.Zb(3);core.xb(2),core.Ec(core.bc(3,7,row_r5.date)),core.xb(3),core.Ec(row_r5.by.display),core.xb(2),core.Fc(\" \",row_r5.customAmountLimit?core.cc(8,9,row_r5.amountLimit,ctx_r4.data.account.currency):ctx_r4.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Fc(\" \",row_r5.customAmountPerDayLimit?core.cc(11,12,row_r5.amountPerDayLimit,ctx_r4.data.account.currency):ctx_r4.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Fc(\" \",row_r5.customAmountPerWeekLimit?core.cc(14,15,row_r5.amountPerWeekLimit,ctx_r4.data.account.currency):ctx_r4.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Fc(\" \",row_r5.customAmountPerMonthLimit?core.cc(17,18,row_r5.amountPerMonthLimit,ctx_r4.data.account.currency):ctx_r4.i18n.account.limits.productDefault,\" \"),core.xb(3),core.Ec(row_r5.comment)}}function ViewAccountPaymentLimitsComponent_ng_container_4_table_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",11),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Qb(10,\"th\"),core.Dc(11),core.Pb(),core.Qb(12,\"th\"),core.Dc(13),core.Pb(),core.Qb(14,\"th\"),core.Dc(15),core.Pb(),core.Pb(),core.Qb(16,\"tbody\"),core.Bc(17,ViewAccountPaymentLimitsComponent_ng_container_4_table_5_tr_17_Template,20,21,\"tr\",12),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(3),core.Ec(ctx_r3.i18n.general.date),core.xb(2),core.Ec(ctx_r3.i18n.general.performedBy),core.xb(2),core.Ec(ctx_r3.i18n.account.paymentLimits.paymentLimit),core.xb(2),core.Ec(ctx_r3.i18n.account.paymentLimits.dailyLimit),core.xb(2),core.Ec(ctx_r3.i18n.account.paymentLimits.weeklyLimit),core.xb(2),core.Ec(ctx_r3.i18n.account.paymentLimits.monthlyLimit),core.xb(2),core.Ec(ctx_r3.i18n.general.comments),core.xb(2),core.gc(\"ngForOf\",ctx_r3.data.history)}}function ViewAccountPaymentLimitsComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",8),core.ac(2,\"async\"),core.Lb(3,\"user-info\",6),core.Pb(),core.Qb(4,\"results-layout\",9),core.Bc(5,ViewAccountPaymentLimitsComponent_ng_container_4_table_5_Template,18,8,\"table\",10),core.Pb(),core.Nb()),2&rf){const ctx_r1=core.Zb();core.xb(1),core.gc(\"mode\",\"empty\")(\"heading\",ctx_r1.i18n.account.paymentLimits.title.history)(\"mobileHeading\",ctx_r1.i18n.account.paymentLimits.mobileTitle.history)(\"headingActions\",core.bc(2,6,ctx_r1.headingActions$)),core.xb(2),core.gc(\"user\",ctx_r1.data.user),core.xb(1),core.gc(\"results\",ctx_r1.data.history)}}let view_account_payment_limits_component_ViewAccountPaymentLimitsComponent=(()=>{class ViewAccountPaymentLimitsComponent extends base_page_component.a{constructor(injector,paymentLimitsService){super(injector),this.paymentLimitsService=paymentLimitsService,this.step$=new BehaviorSubject.a(\"details\")}get step(){return this.step$.value}set step(step){this.step$.next(step)}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.accountType=this.route.snapshot.params.accountType,this.addSub(this.paymentLimitsService.getAccountPaymentLimits({user:this.user,accountType:this.accountType}).subscribe(data=>this.data=data))}onDataInitialized(data){super.onDataInitialized(data),this.detailsHeadingActions=data.editable?[new shared_action.c(\"edit\",this.i18n.general.edit,()=>this.navigateToEdit())]:[],this.detailsHeadingActions.push(new shared_action.c(\"history\",this.i18n.general.viewHistory,()=>this.showHistory())),this.headingActions=this.detailsHeadingActions,this.historyHeadingActions=data.editable?[new shared_action.c(\"edit\",this.i18n.general.edit,()=>this.navigateToEdit())]:[],this.historyHeadingActions.push(new shared_action.c(\"arrow_back\",this.i18n.general.details,()=>this.showView()))}limitMode(custom){return custom?this.i18n.account.limits.personalized:this.i18n.account.limits.productDefault}showHistory(){this.headingActions=this.historyHeadingActions,this.step=\"history\"}showView(){this.headingActions=this.detailsHeadingActions,this.step=\"details\"}navigateToEdit(){this.router.navigate([\"/banking\",this.user,\"account-payment-limits\",this.accountType,\"edit\"])}resolveMenu(){return this.menu.searchUsersMenu()}}return ViewAccountPaymentLimitsComponent.ɵfac=function(t){return new(t||ViewAccountPaymentLimitsComponent)(core.Kb(core.r),core.Kb(payment_limits_service.a))},ViewAccountPaymentLimitsComponent.ɵcmp=core.Eb({type:ViewAccountPaymentLimitsComponent,selectors:[[\"view-account-payment-limits\"]],features:[core.ub],decls:5,vars:8,consts:[[3,\"ready\",\"ngSwitch\"],[3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngSwitchCase\"],[4,\"ngSwitchCase\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[4,\"ngIf\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[3,\"label\"],[3,\"mode\",\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"results\"],[\"class\",\"table\",4,\"resultTable\"],[1,\"table\"],[4,\"ngFor\",\"ngForOf\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,ViewAccountPaymentLimitsComponent_page_content_3_Template,3,6,\"page-content\",1),core.Bc(4,ViewAccountPaymentLimitsComponent_ng_container_4_Template,6,8,\"ng-container\",2),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,4,ctx.data$))(\"ngSwitch\",core.bc(2,6,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"details\"),core.xb(1),core.gc(\"ngSwitchCase\",\"history\"))},directives:[page_layout_component.a,common.x,common.y,page_content_component.a,common.t,label_value_component.a,user_link_component.a,user_info_component.a,results_layout_component.a,result_table_directive.a,common.s],pipes:[common.b,currency_pipe.a,date_pipe.a],encapsulation:2,changeDetection:0}),ViewAccountPaymentLimitsComponent})();var payments_service=__webpack_require__(\"PmQH\"),pos_service=__webpack_require__(\"dVyd\"),confirmation_mode=__webpack_require__(\"9d5G\"),isEqual=__webpack_require__(\"Muja\"),first=__webpack_require__(\"SxV6\");function PaymentComponent_page_content_3_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Qb(2,\"payment-step-form\",5),core.Xb(\"availablePaymentTypes\",(function($event){return core.sc(_r5),core.Zb().availablePaymentTypes=$event})),core.ac(3,\"async\"),core.Pb(),core.Qb(4,\"actions\",6),core.Qb(5,\"action-button\",7),core.Xb(\"action\",(function(){return core.sc(_r5),core.Zb().toConfirm()})),core.ac(6,\"async\"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.title)(\"mobileHeading\",ctx_r0.mobileTitle)(\"mode\",core.bc(1,11,ctx_r0.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"data\",ctx_r0.data)(\"pos\",ctx_r0.pos)(\"form\",ctx_r0.form)(\"currency\",core.bc(3,13,ctx_r0.currency$))(\"paymentTypeData$\",ctx_r0.paymentTypeData$)(\"customValuesControlGetter\",ctx_r0.customValuesControlGetter),core.xb(3),core.gc(\"disabled\",core.bc(6,15,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.next)}}function PaymentComponent_page_content_4_action_button_4_Template(rf,ctx){if(1&rf){const _r11=core.Rb();core.Qb(0,\"action-button\",7),core.Xb(\"action\",(function(){return core.sc(_r11),core.Zb(2).perform()})),core.ac(1,\"async\"),core.Pb()}if(2&rf){const ctx_r7=core.Zb(2);core.gc(\"disabled\",!ctx_r7.canConfirm||core.bc(1,2,ctx_r7.requesting$))(\"label\",ctx_r7.i18n.general.confirm)}}function PaymentComponent_page_content_4_ng_template_6_Template(rf,ctx){1&rf&&core.Dc(0,\" \")}const payment_component_c0=function(){return[]};function PaymentComponent_page_content_4_Template(rf,ctx){if(1&rf){const _r13=core.Rb();core.Qb(0,\"page-content\",8),core.ac(1,\"async\"),core.Qb(2,\"payment-step-confirm\",9),core.Xb(\"confirmationModeChanged\",(function($event){return core.sc(_r13),core.Zb().confirmationMode$.next($event)}))(\"confirmed\",(function($event){return core.sc(_r13),core.Zb().perform($event)})),core.Pb(),core.Qb(3,\"actions\",6),core.Bc(4,PaymentComponent_page_content_4_action_button_4_Template,2,4,\"action-button\",10),core.ac(5,\"async\"),core.Bc(6,PaymentComponent_page_content_4_ng_template_6_Template,1,0,\"ng-template\",null,11,core.Cc),core.Qb(8,\"action-button\",12),core.Xb(\"action\",(function(){return core.sc(_r13),core.Zb().backToForm()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const _r8=core.qc(7),ctx_r1=core.Zb();core.gc(\"heading\",ctx_r1.i18n.transaction.title.paymentConfirmation)(\"mobileHeading\",ctx_r1.i18n.transaction.mobileTitle.paymentConfirmation)(\"mode\",core.bc(1,10,ctx_r1.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"pos\",ctx_r1.pos)(\"preview\",ctx_r1.preview)(\"confirmationPassword\",ctx_r1.confirmationPassword)(\"showPaymentType\",(ctx_r1.availablePaymentTypes||core.ic(14,payment_component_c0)).length>1),core.xb(2),core.gc(\"ngIf\",core.bc(5,12,ctx_r1.confirmationMode$)!=ctx_r1.ConfirmationMode.Device)(\"ngIfElse\",_r8),core.xb(4),core.gc(\"label\",ctx_r1.i18n.general.previous)}}function PaymentComponent_page_content_5_Template(rf,ctx){if(1&rf){const _r17=core.Rb();core.Qb(0,\"page-content\",8),core.ac(1,\"async\"),core.Lb(2,\"payment-step-done\",13),core.Qb(3,\"actions\",6),core.Qb(4,\"action-button\",14),core.Xb(\"action\",(function(){return core.sc(_r17),core.Zb().viewPerformed()})),core.Pb(),core.Qb(5,\"action-button\",12),core.Xb(\"action\",(function(){return core.sc(_r17),core.Zb().reload()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.doneTitle)(\"mobileHeading\",ctx_r2.doneMobileTitle)(\"mode\",core.bc(1,6,ctx_r2.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"performed\",ctx_r2.performed),core.xb(2),core.gc(\"label\",ctx_r2.i18n.transaction.doneView),core.xb(1),core.gc(\"label\",ctx_r2.i18n.transaction.doneNew)}}function PaymentComponent_page_content_6_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}const FIRST_INSTALLMENT_DATE_VAL=control=>{const parent=control.parent;if(parent){const scheduling=parent.get(\"scheduling\").value,firstInstallmentIsNow=parent.get(\"firstInstallmentIsNow\").value;if(Object(helper.h)(control.value)&&(\"futureDate\"===scheduling||scheduling===models.Y.SCHEDULED&&!firstInstallmentIsNow))return{required:!0}}return null},OCCURRENCES_COUNT_VAL=control=>{const parent=control.parent;if(parent){const scheduling=parent.get(\"scheduling\").value,repeatUntilCanceled=parent.get(\"repeatUntilCanceled\").value;if(scheduling===models.Y.RECURRING&&!repeatUntilCanceled){const value=parseInt(control.value,10);return isNaN(value)?{required:!0}:fesm2015_forms.G.min(2)(control)}}return null},FIRST_OCCURRENCE_DATE_VAL=control=>{const parent=control.parent;if(parent){const scheduling=parent.get(\"scheduling\").value,firstOccurrenceIsNow=parent.get(\"firstOccurrenceIsNow\").value;if(Object(helper.h)(control.value)&&scheduling===models.Y.RECURRING&&!firstOccurrenceIsNow)return{required:!0}}return null};let payment_component_PaymentComponent=(()=>{class PaymentComponent extends base_page_component.a{constructor(injector,bankingHelper,paymentsService,posService,changeDetector){super(injector),this.bankingHelper=bankingHelper,this.paymentsService=paymentsService,this.posService=posService,this.changeDetector=changeDetector,this.ConfirmationMode=confirmation_mode.a,this.steps=[\"form\",\"confirm\",\"done\"],this.step$=new BehaviorSubject.a(null),this.currency$=new BehaviorSubject.a(null),this.paymentTypeData$=new BehaviorSubject.a(null),this.customValuesControls=new Map,this.confirmationMode$=new BehaviorSubject.a(null)}get step(){return this.step$.value}set step(step){this.step$.next(step)}get currency(){return this.currency$.value}set currency(currency){this.currency$.next(currency)}get paymentTypeData(){return this.paymentTypeData$.value}set paymentTypeData(data){this.paymentTypeData$.next(data),this.updatePaymentTypeData(data)}ngOnInit(){super.ngOnInit();const route=this.route.snapshot;this.pos=\"pos\"===route.url[route.url.length-1].path,this.pos||(this.fromParam=route.params.from,this.fromSelf=this.authHelper.isSelf(this.fromParam),this.fromSystem=this.authHelper.isSystem(this.fromParam),this.toParam=route.params.to,this.toSelf=null!=this.toParam&&this.authHelper.isSelf(this.toParam),this.toSystem=null!=this.toParam&&this.authHelper.isSystem(this.toParam)),this.pos?(this.title=this.i18n.transaction.title.pos,this.mobileTitle=this.i18n.transaction.mobileTitle.pos):this.fromSystem?this.toSystem?(this.title=this.i18n.transaction.title.paymentSystemToSystem,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentSystemToSystem):(this.title=this.i18n.transaction.title.paymentSystemToUser,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentSystemToUser):this.toSelf?(this.title=this.i18n.transaction.title.paymentToSelf,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentToSelf):this.toSystem?(this.title=this.i18n.transaction.title.paymentToSystem,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentToSystem):(this.title=this.i18n.transaction.title.paymentToUser,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentToUser),this.form=this.buildForm(),this.confirmationPassword=this.formBuilder.control(null),this.addSub(this.pos?this.posService.dataForReceivePayment({}).subscribe(data=>this.data=data):this.paymentsService.dataForPerformPayment({owner:this.fromParam,to:this.toParam}).subscribe(data=>this.data=data)),this.addSub(this.form.get(\"account\").valueChanges.subscribe(type=>this.updateCurrency(this.data,type))),this.addSub(this.paymentTypeData$.subscribe(typeData=>{null!=this.lastPaymentTypeData&&Object(isEqual.a)(this.lastPaymentTypeData,typeData)||this.adjustForm(typeData),this.lastPaymentTypeData=typeData})),this.addSub(this.form.valueChanges.subscribe(value=>this.adjustFormValidators(value)))}buildForm(){return this.formBuilder.group({account:null,subject:[this.pos?null:this.toParam,fesm2015_forms.G.required],type:[null,fesm2015_forms.G.required],amount:[null,fesm2015_forms.G.required],description:null,scheduling:[models.Y.DIRECT,fesm2015_forms.G.required],installmentsCount:null,firstInstallmentIsNow:!0,firstInstallmentDate:[null,FIRST_INSTALLMENT_DATE_VAL],repeatUntilCanceled:!0,occurrencesCount:[null,OCCURRENCES_COUNT_VAL],firstOccurrenceIsNow:!0,firstOccurrenceDate:[null,FIRST_OCCURRENCE_DATE_VAL]})}updateCurrency(data,type){let account=null;!Object(helper.h)(type)&&data&&data.accounts&&(account=data.accounts.find(a=>a.type.id===type)),this.currency=account?account.currency:null}adjustForm(typeData){const description=this.form.get(\"description\");(typeData||{}).descriptionAvailability===models.i.REQUIRED?description.setValidators(fesm2015_forms.G.required):Object(helper.c)(description)}adjustFormValidators(value){if(this.lastValue&&Object(isEqual.a)(this.lastValue,value))return;this.lastValue=value;const firstInstallmentDate=this.form.get(\"firstInstallmentDate\");\"futureDate\"===value.scheduling||value.scheduling===models.Y.SCHEDULED&&!value.firstInstallmentIsNow?firstInstallmentDate.setValidators(fesm2015_forms.G.required):Object(helper.c)(firstInstallmentDate);const installmentsCount=this.form.get(\"installmentsCount\");value.scheduling===models.Y.SCHEDULED?installmentsCount.setValidators(fesm2015_forms.G.compose([fesm2015_forms.G.required,fesm2015_forms.G.min(2)])):Object(helper.c)(installmentsCount);const occurrencesCount=this.form.get(\"occurrencesCount\"),firstOccurrenceDate=this.form.get(\"firstOccurrenceDate\");value.scheduling===models.Y.RECURRING?(value.repeatUntilCanceled?Object(helper.c)(occurrencesCount):occurrencesCount.setValidators(fesm2015_forms.G.compose([fesm2015_forms.G.required,fesm2015_forms.G.min(2)])),value.firstOccurrenceIsNow?Object(helper.c)(firstOccurrenceDate):firstOccurrenceDate.setValidators(fesm2015_forms.G.required)):(Object(helper.c)(occurrencesCount),Object(helper.c)(firstOccurrenceDate)),this.changeDetector.detectChanges()}onDataInitialized(data){if(Object(helper.h)(data.accounts))this.notification.error(this.i18n.transaction.noAccounts);else{this.step=\"form\";const type=data.accounts[0].type.id;this.form.patchValue({account:type},{emitEvent:!1}),this.updateCurrency(data,type)}}updatePaymentTypeData(data){const amount=this.form.get(\"amount\");data&&data.fixedAmount?(amount.setValue(data.fixedAmount),amount.disable()):amount.disabled&&amount.enable()}backToForm(){this.step=\"form\"}toConfirm(){const customValueControls={},typeData=this.paymentTypeData;if(typeData&&typeData.customFields)for(const cf of typeData.customFields)customValueControls[cf.internalName]=this.customValuesControlGetter(cf);this.form.setControl(\"customValues\",new fesm2015_forms.m(customValueControls)),Object(helper.F)(this.form)&&this.addSub(this.confirmDataRequest().subscribe(preview=>{this.preview=preview,this.step=\"confirm\",this.canConfirm=this.authHelper.canConfirm(preview.confirmationPasswordInput),this.canConfirm||this.notification.warning(this.authHelper.getConfirmationMessage(preview.confirmationPasswordInput)),this.confirmationPassword.setValidators(preview.confirmationPasswordInput?fesm2015_forms.G.required:null),Object(helper.y)()}))}perform(password){if(password&&this.confirmationPassword.setValue(password),!Object(helper.F)(this.confirmationPassword))return;let request;request=this.pos?this.posService.receivePayment({body:this.preview.payment,confirmationPassword:this.confirmationPassword.value}):this.paymentsService.performPayment({owner:this.fromParam,body:this.preview.payment,confirmationPassword:this.confirmationPassword.value}),request.pipe(Object(first.a)()).subscribe(performed=>{this.performed=performed,this.step=\"done\",Object(helper.y)()})}confirmDataRequest(){const value=Object(cloneDeep.a)(this.form.value),payment=value;switch(value.scheduling){case\"futureDate\":payment.scheduling=models.Y.SCHEDULED,payment.installmentsCount=1;break;case models.Y.SCHEDULED:value.firstInstallmentIsNow&&(payment.firstInstallmentDate=null);break;case models.Y.RECURRING:value.repeatUntilCanceled&&(payment.occurrencesCount=null),value.firstOccurrenceIsNow&&(payment.firstOccurrenceDate=null)}return delete value.firstInstallmentIsNow,delete value.repeatUntilCanceled,delete value.firstOccurrenceIsNow,this.pos?this.posService.previewReceivePayment({body:payment}):this.paymentsService.previewPayment({owner:this.fromParam,body:payment})}get doneTitle(){if(this.performed)return this.performed.authorizationStatus===models.yb.PENDING?this.i18n.transaction.title.pendingPayment:this.i18n.transaction.title.processedPayment}get doneMobileTitle(){if(this.performed)return this.performed.authorizationStatus===models.yb.PENDING?this.i18n.transaction.mobileTitle.pendingPayment:this.i18n.transaction.mobileTitle.processedPayment}viewPerformed(){this.router.navigate([\"banking\",\"transaction\",this.bankingHelper.transactionNumberOrId(this.performed)])}reload(){this.step=null,this.currency=null,this.paymentTypeData=null,super.reload()}locateControl(locator){return Object(helper.t)(this.form,locator)}get customValuesControlGetter(){return cf=>{const name=cf.internalName;let control=this.customValuesControls.get(name);return null==control&&(control=this.formBuilder.control(cf.defaultValue,cf.required?fesm2015_forms.G.required:null),this.customValuesControls.set(name,control)),control}}resolveMenu(data){return this.pos?shared_menu.b.POS:this.fromSystem?this.toSystem?shared_menu.b.PAYMENT_TO_SYSTEM:shared_menu.b.PAYMENT_TO_USER:this.menu.userMenu(data.fromUser,this.toSystem?shared_menu.b.PAYMENT_TO_SYSTEM:this.toSelf?shared_menu.b.PAYMENT_TO_SELF:shared_menu.b.PAYMENT_TO_USER)}}return PaymentComponent.ɵfac=function(t){return new(t||PaymentComponent)(core.Kb(core.r),core.Kb(banking_helper_service.a),core.Kb(payments_service.a),core.Kb(pos_service.a),core.Kb(core.h))},PaymentComponent.ɵcmp=core.Eb({type:PaymentComponent,selectors:[[\"payment\"]],features:[core.ub],decls:7,vars:9,consts:[[3,\"ready\",\"ngSwitch\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[4,\"ngSwitchDefault\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",\"d-flex\",\"flex-column\",3,\"data\",\"pos\",\"form\",\"currency\",\"paymentTypeData$\",\"customValuesControlGetter\",\"availablePaymentTypes\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",\"d-flex\",\"flex-column\",3,\"pos\",\"preview\",\"confirmationPassword\",\"showPaymentType\",\"confirmationModeChanged\",\"confirmed\"],[3,\"disabled\",\"label\",\"action\",4,\"ngIf\",\"ngIfElse\"],[\"spacer\",\"\"],[\"outline\",\"\",3,\"label\",\"action\"],[1,\"flex-grow-1\",\"d-flex\",\"flex-column\",3,\"performed\"],[3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,PaymentComponent_page_content_3_Template,7,17,\"page-content\",1),core.Bc(4,PaymentComponent_page_content_4_Template,9,15,\"page-content\",2),core.Bc(5,PaymentComponent_page_content_5_Template,6,8,\"page-content\",2),core.Bc(6,PaymentComponent_page_content_6_Template,2,0,\"page-content\",3),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,5,ctx.data$))(\"ngSwitch\",core.bc(2,7,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"form\"),core.xb(1),core.gc(\"ngSwitchCase\",\"confirm\"),core.xb(1),core.gc(\"ngSwitchCase\",\"done\"))},encapsulation:2,changeDetection:0}),PaymentComponent})();var payment_requests_service=__webpack_require__(\"DvBi\"),shortcut_service=__webpack_require__(\"+MtR\"),ngx_bootstrap_tooltip=__webpack_require__(\"978R\"),notification_component=__webpack_require__(\"cvAk\"),custom_field_value_component=__webpack_require__(\"nznZ\"),confirmation_password_component=__webpack_require__(\"lS/A\"),focused_directive=__webpack_require__(\"bBjs\");function AcceptPaymentRequestStepConfirmComponent_notification_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"notification\",9),core.Dc(1),core.Pb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.Fc(\" \",ctx_r0.i18n.transaction.requiresAuthorization,\"\\n\")}}function AcceptPaymentRequestStepConfirmComponent_label_value_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Lb(1,\"user-link\",11),core.Pb()),2&rf){const ctx_r1=core.Zb();core.gc(\"label\",ctx_r1.i18n.transaction.fromUser),core.xb(1),core.gc(\"user\",ctx_r1.fromUser)}}function AcceptPaymentRequestStepConfirmComponent_label_value_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Dc(1),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"label\",ctx_r2.i18n.transaction.fromAccount),core.xb(1),core.Fc(\" \",ctx_r2.preview.fromAccount.type.name,\"\\n\")}}function AcceptPaymentRequestStepConfirmComponent_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Lb(1,\"user-link\",11),core.Pb()),2&rf){const ctx_r3=core.Zb();core.gc(\"label\",ctx_r3.i18n.transaction.toUser),core.xb(1),core.gc(\"user\",ctx_r3.toUser)}}function AcceptPaymentRequestStepConfirmComponent_label_value_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Dc(1),core.Pb()),2&rf){const ctx_r4=core.Zb();core.gc(\"label\",ctx_r4.i18n.transaction.toAccount),core.xb(1),core.Fc(\" \",ctx_r4.preview.toAccount.type.name,\"\\n\")}}function AcceptPaymentRequestStepConfirmComponent_label_value_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Dc(1),core.Pb()),2&rf){const ctx_r5=core.Zb();core.gc(\"label\",ctx_r5.i18n.transaction.type),core.xb(1),core.Fc(\" \",ctx_r5.preview.paymentType.name,\"\\n\")}}function AcceptPaymentRequestStepConfirmComponent_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Dc(1),core.ac(2,\"currency\"),core.Pb()),2&rf){const ctx_r6=core.Zb();core.gc(\"label\",ctx_r6.i18n.transaction.amount),core.xb(1),core.Fc(\" \",core.cc(2,2,ctx_r6.preview.mainAmount,ctx_r6.preview.currency),\"\\n\")}}function AcceptPaymentRequestStepConfirmComponent_label_value_7_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.ac(2,\"currency\"),core.Pb()),2&rf){const feePreview_r18=ctx.$implicit,ctx_r17=core.Zb(2);core.xb(1),core.Gc(\" \",feePreview_r18.fee.name,\": \",core.cc(2,2,feePreview_r18.amount,ctx_r17.preview.currency),\" \")}}function AcceptPaymentRequestStepConfirmComponent_label_value_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Bc(1,AcceptPaymentRequestStepConfirmComponent_label_value_7_div_1_Template,3,5,\"div\",12),core.Pb()),2&rf){const ctx_r7=core.Zb();core.gc(\"label\",ctx_r7.i18n.transaction.appliedFees),core.xb(1),core.gc(\"ngForOf\",ctx_r7.fees)}}function AcceptPaymentRequestStepConfirmComponent_custom_field_value_8_Template(rf,ctx){1&rf&&core.Lb(0,\"custom-field-value\",13),2&rf&&core.gc(\"fieldValue\",ctx.$implicit)}function AcceptPaymentRequestStepConfirmComponent_label_value_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Dc(1),core.ac(2,\"date\"),core.Pb()),2&rf){const ctx_r9=core.Zb();core.gc(\"label\",ctx_r9.i18n.transaction.dueDate),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r9.preview.installments[0].dueDate),\"\\n\")}}function AcceptPaymentRequestStepConfirmComponent_label_value_10_thead_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"thead\"),core.Qb(1,\"th\"),core.Dc(2),core.Pb(),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\",15),core.Dc(6),core.Pb(),core.Pb()),2&rf){const ctx_r20=core.Zb(2);core.xb(2),core.Ec(ctx_r20.i18n.transaction.installmentNumber),core.xb(2),core.Ec(ctx_r20.i18n.transaction.dueDate),core.xb(2),core.Ec(ctx_r20.i18n.transaction.amount)}}function AcceptPaymentRequestStepConfirmComponent_label_value_10_tr_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\"),core.Qb(1,\"td\"),core.Dc(2),core.Pb(),core.Qb(3,\"td\"),core.Dc(4),core.ac(5,\"date\"),core.Pb(),core.Qb(6,\"td\",15),core.Dc(7),core.ac(8,\"currency\"),core.Pb(),core.Pb()),2&rf){const installment_r22=ctx.$implicit,ctx_r21=core.Zb(2);core.xb(2),core.Fc(\" \",installment_r22.number,\" \"),core.xb(2),core.Fc(\" \",core.bc(5,3,installment_r22.dueDate),\" \"),core.xb(3),core.Fc(\" \",core.cc(8,5,installment_r22.mainAmount,ctx_r21.preview.currency),\" \")}}function AcceptPaymentRequestStepConfirmComponent_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Qb(1,\"table\",14),core.Bc(2,AcceptPaymentRequestStepConfirmComponent_label_value_10_thead_2_Template,7,3,\"thead\",4),core.ac(3,\"async\"),core.Qb(4,\"tbody\"),core.Bc(5,AcceptPaymentRequestStepConfirmComponent_label_value_10_tr_5_Template,9,8,\"tr\",12),core.Pb(),core.Pb(),core.Pb()),2&rf){const ctx_r10=core.Zb();core.gc(\"label\",ctx_r10.i18n.transaction.installments),core.xb(2),core.gc(\"ngIf\",core.bc(3,3,ctx_r10.layout.gtxs$)),core.xb(3),core.gc(\"ngForOf\",ctx_r10.preview.installments)}}function AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Nb()),2&rf){const ctx_r26=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r26.i18n.transaction.recurringPaymentNowManual,\" \")}}function AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Nb()),2&rf){const ctx_r27=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r27.i18n.transaction.recurringPaymentNowFixed(ctx_r27.preview.payment.occurrencesCount),\" \")}}function AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_container_1_ng_container_1_Template,2,1,\"ng-container\",4),core.Bc(2,AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_container_1_ng_container_2_Template,2,1,\"ng-container\",4),core.Nb()),2&rf){const ctx_r23=core.Zb(2);core.xb(1),core.gc(\"ngIf\",null==ctx_r23.preview.payment.occurrencesCount),core.xb(1),core.gc(\"ngIf\",null!=ctx_r23.preview.payment.occurrencesCount)}}function AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_template_2_ng_container_0_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.ac(2,\"date\"),core.Nb()),2&rf){const ctx_r28=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r28.i18n.transaction.recurringPaymentDateManual(core.bc(2,1,ctx_r28.preview.payment.firstOccurrenceDate)),\" \")}}const accept_payment_request_step_confirm_component_c0=function(a0,a1){return{date:a0,count:a1}};function AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_template_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.ac(2,\"date\"),core.Nb()),2&rf){const ctx_r29=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r29.i18n.transaction.recurringPaymentDateFixed(core.kc(3,accept_payment_request_step_confirm_component_c0,core.bc(2,1,ctx_r29.preview.payment.firstOccurrenceDate),ctx_r29.preview.payment.occurrencesCount)),\" \")}}function AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_template_2_Template(rf,ctx){if(1&rf&&(core.Bc(0,AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_template_2_ng_container_0_Template,3,3,\"ng-container\",4),core.Bc(1,AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_template_2_ng_container_1_Template,3,6,\"ng-container\",4)),2&rf){const ctx_r25=core.Zb(2);core.gc(\"ngIf\",null==ctx_r25.preview.payment.occurrencesCount),core.xb(1),core.gc(\"ngIf\",null!=ctx_r25.preview.payment.occurrencesCount)}}function AcceptPaymentRequestStepConfirmComponent_label_value_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Bc(1,AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_container_1_Template,3,2,\"ng-container\",16),core.Bc(2,AcceptPaymentRequestStepConfirmComponent_label_value_11_ng_template_2_Template,2,2,\"ng-template\",null,17,core.Cc),core.Pb()),2&rf){const _r24=core.qc(3),ctx_r11=core.Zb();core.gc(\"label\",ctx_r11.i18n.transaction.recurringPayment),core.xb(1),core.gc(\"ngIf\",null==ctx_r11.preview.payment.firstOccurrenceDate)(\"ngIfElse\",_r24)}}function AcceptPaymentRequestStepConfirmComponent_label_value_12_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",18),2&rf){const ctx_r12=core.Zb();core.gc(\"label\",ctx_r12.i18n.general.description)(\"value\",ctx_r12.preview.payment.description)}}function AcceptPaymentRequestStepConfirmComponent_hr_13_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function AcceptPaymentRequestStepConfirmComponent_ng_container_18_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function AcceptPaymentRequestStepConfirmComponent_ng_container_18_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,AcceptPaymentRequestStepConfirmComponent_ng_container_18_hr_1_Template,1,0,\"hr\",4),core.ac(2,\"async\"),core.Qb(3,\"div\",19),core.Dc(4),core.Pb(),core.Nb()),2&rf){const ctx_r14=core.Zb();core.xb(1),core.gc(\"ngIf\",core.bc(2,2,ctx_r14.layout.gtxxs$)),core.xb(3),core.Ec(ctx_r14.preview.confirmationMessage)}}function AcceptPaymentRequestStepConfirmComponent_hr_20_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function AcceptPaymentRequestStepConfirmComponent_ng_container_24_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function AcceptPaymentRequestStepConfirmComponent_ng_container_24_Template(rf,ctx){if(1&rf){const _r33=core.Rb();core.Ob(0),core.Bc(1,AcceptPaymentRequestStepConfirmComponent_ng_container_24_hr_1_Template,1,0,\"hr\",4),core.ac(2,\"async\"),core.Qb(3,\"confirmation-password\",20),core.Xb(\"confirmationModeChanged\",(function($event){return core.sc(_r33),core.Zb().confirmationModeChanged.emit($event)}))(\"confirmed\",(function($event){return core.sc(_r33),core.Zb().confirmed.emit($event)})),core.Pb(),core.Nb()}if(2&rf){const ctx_r16=core.Zb();core.xb(1),core.gc(\"ngIf\",core.bc(2,3,ctx_r16.layout.gtxxs$)),core.xb(2),core.gc(\"passwordInput\",ctx_r16.preview.confirmationPasswordInput)(\"createDeviceConfirmation\",ctx_r16.createDeviceConfirmation)}}let accept_payment_request_step_confirm_component_AcceptPaymentRequestStepConfirmComponent=(()=>{class AcceptPaymentRequestStepConfirmComponent extends base_component.a{constructor(injector){super(injector),this.confirmationModeChanged=new core.n,this.confirmed=new core.n}ngOnInit(){super.ngOnInit(),this.fromUser=this.preview.fromAccount.user,this.fromSelf=this.fromUser&&this.authHelper.isSelf(this.fromUser),this.fromSystem=this.preview.fromAccount.kind===models.a.SYSTEM,this.toUser=this.preview.toAccount.user,this.toSelf=this.toUser&&this.authHelper.isSelf(this.toUser),this.toSystem=this.preview.toAccount.kind===models.a.SYSTEM,this.form.setControl(\"confirmationPassword\",this.confirmationPassword),this.fees=this.preview.fees,Object(helper.h)(this.fees)&&1===(this.preview.installments||[]).length&&(this.fees=this.preview.installments[0].fees),this.createDeviceConfirmation=()=>({type:models.s.MANAGE_PAYMENT_REQUEST,transaction:this.transaction,paymentRequestAction:models.V.ACCEPT}),this.preview.confirmationPasswordInput||this.addShortcut(shortcut_service.k,()=>this.confirmed.emit())}}return AcceptPaymentRequestStepConfirmComponent.ɵfac=function(t){return new(t||AcceptPaymentRequestStepConfirmComponent)(core.Kb(core.r))},AcceptPaymentRequestStepConfirmComponent.ɵcmp=core.Eb({type:AcceptPaymentRequestStepConfirmComponent,selectors:[[\"accept-payment-request-step-confirm\"]],inputs:{form:\"form\",preview:\"preview\",transaction:\"transaction\",confirmationPassword:\"confirmationPassword\",showPaymentType:\"showPaymentType\"},outputs:{confirmationModeChanged:\"confirmationModeChanged\",confirmed:\"confirmed\"},features:[core.ub],decls:25,vars:30,consts:[[\"class\",\"mb-3\",\"type\",\"warning\",4,\"ngIf\"],[3,\"label\",4,\"ngIf\"],[3,\"fieldValue\",4,\"ngFor\",\"ngForOf\"],[\"valueFormat\",\"break\",3,\"label\",\"value\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"totalAmount\",3,\"label\"],[3,\"formGroup\"],[\"labelPosition\",\"side\",\"formControlName\",\"processDate\",\"minDate\",\"tomorrow\",\"maxDate\",\"future100\",\"fieldSize\",\"full\",3,\"label\",\"tooltip\"],[\"formControlName\",\"comments\",3,\"label\"],[\"type\",\"warning\",1,\"mb-3\"],[3,\"label\"],[3,\"user\"],[4,\"ngFor\",\"ngForOf\"],[3,\"fieldValue\"],[1,\"table\",\"table-hover\"],[1,\"text-right\"],[4,\"ngIf\",\"ngIfElse\"],[\"occurrencesDateSet\",\"\"],[\"valueFormat\",\"break\",3,\"label\",\"value\"],[1,\"break-nl\"],[\"focused\",\"\",\"formControlName\",\"confirmationPassword\",3,\"passwordInput\",\"createDeviceConfirmation\",\"confirmationModeChanged\",\"confirmed\"]],template:function(rf,ctx){1&rf&&(core.Bc(0,AcceptPaymentRequestStepConfirmComponent_notification_0_Template,2,1,\"notification\",0),core.Bc(1,AcceptPaymentRequestStepConfirmComponent_label_value_1_Template,2,2,\"label-value\",1),core.Bc(2,AcceptPaymentRequestStepConfirmComponent_label_value_2_Template,2,2,\"label-value\",1),core.Bc(3,AcceptPaymentRequestStepConfirmComponent_label_value_3_Template,2,2,\"label-value\",1),core.Bc(4,AcceptPaymentRequestStepConfirmComponent_label_value_4_Template,2,2,\"label-value\",1),core.Bc(5,AcceptPaymentRequestStepConfirmComponent_label_value_5_Template,2,2,\"label-value\",1),core.Bc(6,AcceptPaymentRequestStepConfirmComponent_label_value_6_Template,3,5,\"label-value\",1),core.Bc(7,AcceptPaymentRequestStepConfirmComponent_label_value_7_Template,2,2,\"label-value\",1),core.Bc(8,AcceptPaymentRequestStepConfirmComponent_custom_field_value_8_Template,1,1,\"custom-field-value\",2),core.Bc(9,AcceptPaymentRequestStepConfirmComponent_label_value_9_Template,3,4,\"label-value\",1),core.Bc(10,AcceptPaymentRequestStepConfirmComponent_label_value_10_Template,6,5,\"label-value\",1),core.Bc(11,AcceptPaymentRequestStepConfirmComponent_label_value_11_Template,4,3,\"label-value\",1),core.Bc(12,AcceptPaymentRequestStepConfirmComponent_label_value_12_Template,1,2,\"label-value\",3),core.Bc(13,AcceptPaymentRequestStepConfirmComponent_hr_13_Template,1,0,\"hr\",4),core.ac(14,\"async\"),core.Qb(15,\"label-value\",5),core.Dc(16),core.ac(17,\"currency\"),core.Pb(),core.Bc(18,AcceptPaymentRequestStepConfirmComponent_ng_container_18_Template,5,4,\"ng-container\",4),core.Qb(19,\"form\",6),core.Bc(20,AcceptPaymentRequestStepConfirmComponent_hr_20_Template,1,0,\"hr\",4),core.ac(21,\"async\"),core.Lb(22,\"date-field\",7),core.Lb(23,\"textarea-field\",8),core.Bc(24,AcceptPaymentRequestStepConfirmComponent_ng_container_24_Template,4,5,\"ng-container\",4),core.Pb()),2&rf&&(core.gc(\"ngIf\",ctx.preview.pendingAuthorization),core.xb(1),core.gc(\"ngIf\",!ctx.fromSelf&&ctx.fromUser),core.xb(1),core.gc(\"ngIf\",ctx.fromSystem),core.xb(1),core.gc(\"ngIf\",ctx.toUser),core.xb(1),core.gc(\"ngIf\",ctx.toSystem),core.xb(1),core.gc(\"ngIf\",ctx.showPaymentType),core.xb(1),core.gc(\"ngIf\",null!=ctx.preview.mainAmount&&ctx.preview.totalAmount!==ctx.preview.mainAmount),core.xb(1),core.gc(\"ngIf\",(null==ctx.fees?null:ctx.fees.length)>0),core.xb(1),core.gc(\"ngForOf\",ctx.preview.customValues),core.xb(1),core.gc(\"ngIf\",1===(null==ctx.preview.installments?null:ctx.preview.installments.length)),core.xb(1),core.gc(\"ngIf\",(null==ctx.preview.installments?null:ctx.preview.installments.length)>1),core.xb(1),core.gc(\"ngIf\",\"recurring\"===ctx.preview.payment.scheduling),core.xb(1),core.gc(\"ngIf\",ctx.preview.payment.description),core.xb(1),core.gc(\"ngIf\",core.bc(14,23,ctx.layout.gtxxs$)),core.xb(2),core.gc(\"label\",ctx.i18n.transaction.totalAmount),core.xb(1),core.Fc(\" \",core.cc(17,25,ctx.preview.totalAmount,ctx.preview.currency),\"\\n\"),core.xb(2),core.gc(\"ngIf\",(ctx.preview.confirmationMessage||\"\").length>0),core.xb(1),core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngIf\",core.bc(21,28,ctx.layout.gtxxs$)),core.xb(2),core.gc(\"label\",ctx.i18n.transaction.processDate)(\"tooltip\",ctx.i18n.transaction.processDateTooltip),core.xb(1),core.gc(\"label\",ctx.i18n.general.comments),core.xb(1),core.gc(\"ngIf\",ctx.preview.confirmationPasswordInput))},directives:[common.t,common.s,label_value_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,date_field_component.a,fesm2015_forms.v,fesm2015_forms.l,ngx_bootstrap_tooltip.b,textarea_field_component.a,notification_component.a,user_link_component.a,custom_field_value_component.a,confirmation_password_component.a,focused_directive.a],pipes:[common.b,currency_pipe.a,date_pipe.a],encapsulation:2,changeDetection:0}),AcceptPaymentRequestStepConfirmComponent})();var icon_component=__webpack_require__(\"H4pW\");let request_payment_step_done_component_RequestPaymentStepDoneComponent=(()=>{class RequestPaymentStepDoneComponent extends base_component.a{constructor(injector,bankingHelper){super(injector),this.bankingHelper=bankingHelper}ngOnInit(){var _a,_b;super.ngOnInit();let addShortcut=!0;(null===(_a=this.performed)||void 0===_a?void 0:_a.kind)===models.zb.PAYMENT_REQUEST?(this.icon=\"done\",this.message=this.performed.kind?this.i18n.transaction.processedPaymentRequestWithNumber(this.performed.transactionNumber):this.i18n.transaction.processedPaymentRequest):(null===(_b=this.performed)||void 0===_b?void 0:_b.authorizationStatus)===models.yb.PENDING?(this.icon=\"scheduled\",this.message=this.performed.transactionNumber?this.i18n.transaction.pendingWithNumber(this.performed.transactionNumber):this.i18n.transaction.pending):this.performed?(this.icon=\"done\",this.message=this.performed.transactionNumber?this.i18n.transaction.processedWithNumber(this.performed.transactionNumber):this.i18n.transaction.processed):(this.icon=\"scheduled\",this.message=this.i18n.transaction.acceptedScheduledPaymentRequest(this.processDate),addShortcut=!1),addShortcut&&this.addShortcut(shortcut_service.k,()=>this.router.navigate([\"banking\",\"transaction\",this.bankingHelper.transactionNumberOrId(this.performed)]))}}return RequestPaymentStepDoneComponent.ɵfac=function(t){return new(t||RequestPaymentStepDoneComponent)(core.Kb(core.r),core.Kb(banking_helper_service.a))},RequestPaymentStepDoneComponent.ɵcmp=core.Eb({type:RequestPaymentStepDoneComponent,selectors:[[\"request-payment-step-done\"]],inputs:{performed:\"performed\",processDate:\"processDate\"},features:[core.ub],decls:6,vars:2,consts:[[1,\"text-center\",\"text-sm-left\",\"px-3\"],[1,\"d-inline-flex\",\"flex-column\",\"flex-sm-row\",\"align-items-center\"],[1,\"d-flex\",\"justify-content-center\",\"py-4\",\"positive\",\"pr-0\",\"pr-sm-4\"],[\"size\",\"3rem\",3,\"icon\"],[1,\"py-4\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"div\",0),core.Qb(1,\"div\",1),core.Qb(2,\"div\",2),core.Lb(3,\"icon\",3),core.Pb(),core.Qb(4,\"div\",4),core.Dc(5),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.xb(3),core.gc(\"icon\",ctx.icon),core.xb(2),core.Ec(ctx.message))},directives:[icon_component.a],encapsulation:2,changeDetection:0}),RequestPaymentStepDoneComponent})();function AcceptPaymentRequestComponent_page_content_3_action_button_4_Template(rf,ctx){if(1&rf){const _r7=core.Rb();core.Qb(0,\"action-button\",9),core.Xb(\"action\",(function(){return core.sc(_r7),core.Zb(2).perform()})),core.ac(1,\"async\"),core.Pb()}if(2&rf){const ctx_r3=core.Zb(2);core.gc(\"disabled\",!ctx_r3.canConfirm||core.bc(1,2,ctx_r3.requesting$))(\"label\",ctx_r3.i18n.general.confirm)}}function AcceptPaymentRequestComponent_page_content_3_ng_template_6_Template(rf,ctx){1&rf&&core.Dc(0,\" \")}function AcceptPaymentRequestComponent_page_content_3_Template(rf,ctx){if(1&rf){const _r9=core.Rb();core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Qb(2,\"accept-payment-request-step-confirm\",5),core.Xb(\"confirmationModeChanged\",(function($event){return core.sc(_r9),core.Zb().confirmationMode$.next($event)}))(\"confirmed\",(function($event){return core.sc(_r9),core.Zb().perform($event)})),core.Pb(),core.Qb(3,\"actions\",6),core.Bc(4,AcceptPaymentRequestComponent_page_content_3_action_button_4_Template,2,4,\"action-button\",7),core.ac(5,\"async\"),core.Bc(6,AcceptPaymentRequestComponent_page_content_3_ng_template_6_Template,1,0,\"ng-template\",null,8,core.Cc),core.Pb(),core.Pb()}if(2&rf){const _r4=core.qc(7),ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.transaction.title.paymentConfirmation)(\"mobileHeading\",ctx_r0.i18n.transaction.mobileTitle.paymentConfirmation)(\"mode\",core.bc(1,10,ctx_r0.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"transaction\",ctx_r0.transactionKey)(\"preview\",ctx_r0.data)(\"confirmationPassword\",ctx_r0.confirmationPassword)(\"form\",ctx_r0.form)(\"showPaymentType\",!0),core.xb(2),core.gc(\"ngIf\",core.bc(5,12,ctx_r0.confirmationMode$)!=ctx_r0.ConfirmationMode.Device)(\"ngIfElse\",_r4)}}function AcceptPaymentRequestComponent_page_content_4_Template(rf,ctx){if(1&rf){const _r12=core.Rb();core.Qb(0,\"page-content\",10),core.ac(1,\"async\"),core.Lb(2,\"request-payment-step-done\",11),core.ac(3,\"date\"),core.Qb(4,\"actions\",6),core.Qb(5,\"action-button\",12),core.Xb(\"action\",(function(){return core.sc(_r12),core.Zb().viewPerformed()})),core.Pb(),core.Qb(6,\"action-button\",13),core.Xb(\"action\",(function(){return core.sc(_r12),core.Zb().reload()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r1=core.Zb();core.gc(\"heading\",ctx_r1.doneTitle)(\"mobileHeading\",ctx_r1.doneMobileTitle)(\"mode\",core.bc(1,7,ctx_r1.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"performed\",ctx_r1.performed)(\"processDate\",core.bc(3,9,ctx_r1.form.value.processDate)),core.xb(3),core.gc(\"label\",ctx_r1.i18n.transaction.doneView),core.xb(1),core.gc(\"label\",ctx_r1.i18n.transaction.doneNew)}}function AcceptPaymentRequestComponent_page_content_5_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}let accept_payment_request_component_AcceptPaymentRequestComponent=(()=>{class AcceptPaymentRequestComponent extends base_page_component.a{constructor(injector,bankingHelper,paymentRequestsService){super(injector),this.bankingHelper=bankingHelper,this.paymentRequestsService=paymentRequestsService,this.ConfirmationMode=confirmation_mode.a,this.steps=[\"confirm\",\"done\"],this.step$=new BehaviorSubject.a(null),this.confirmationMode$=new BehaviorSubject.a(null)}get step(){return this.step$.value}set step(step){this.step$.next(step)}ngOnInit(){super.ngOnInit(),this.transactionKey=this.route.snapshot.params.key,this.addSub(this.paymentRequestsService.previewPaymentRequest({key:this.transactionKey}).subscribe(preview=>this.data=preview))}onDataInitialized(data){this.form=this.formBuilder.group({processDate:null,comments:null}),this.confirmationPassword=this.formBuilder.control(null),this.step=\"confirm\",this.canConfirm=this.authHelper.canConfirm(data.confirmationPasswordInput),this.canConfirm||this.notification.warning(this.authHelper.getConfirmationMessage(data.confirmationPasswordInput)),this.confirmationPassword.setValidators(data.confirmationPasswordInput?fesm2015_forms.G.required:null)}perform(password){if(!Object(helper.F)(this.form)||!Object(helper.F)(this.confirmationPassword))return;password&&this.confirmationPassword.setValue(password);const value=Object(cloneDeep.a)(this.form.value);this.addSub(this.paymentRequestsService.acceptPaymentRequest({key:this.transactionKey,confirmationPassword:this.confirmationPassword.value,body:value}).subscribe(performed=>{this.performed=performed,this.step=\"done\",Object(helper.y)()}))}get doneTitle(){if(this.performed)return this.performed.authorizationStatus===models.yb.PENDING?this.i18n.transaction.title.pendingPayment:this.i18n.transaction.title.processedPayment}get doneMobileTitle(){if(this.performed)return this.performed.authorizationStatus===models.yb.PENDING?this.i18n.transaction.mobileTitle.pendingPayment:this.i18n.transaction.mobileTitle.processedPayment}viewPerformed(){this.router.navigate([\"banking\",\"transaction\",this.bankingHelper.transactionNumberOrId(this.performed)])}locateControl(locator){return Object(helper.t)(this.form,locator)}resolveMenu(){return shared_menu.b.PAYMENT_REQUESTS}}return AcceptPaymentRequestComponent.ɵfac=function(t){return new(t||AcceptPaymentRequestComponent)(core.Kb(core.r),core.Kb(banking_helper_service.a),core.Kb(payment_requests_service.a))},AcceptPaymentRequestComponent.ɵcmp=core.Eb({type:AcceptPaymentRequestComponent,selectors:[[\"accept-payment-request\"]],features:[core.ub],decls:6,vars:8,consts:[[3,\"ready\",\"ngSwitch\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[4,\"ngSwitchDefault\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",\"d-flex\",\"flex-column\",3,\"transaction\",\"preview\",\"confirmationPassword\",\"form\",\"showPaymentType\",\"confirmationModeChanged\",\"confirmed\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\",4,\"ngIf\",\"ngIfElse\"],[\"spacer\",\"\"],[3,\"disabled\",\"label\",\"action\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",\"d-flex\",\"flex-column\",3,\"performed\",\"processDate\"],[3,\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,AcceptPaymentRequestComponent_page_content_3_Template,8,14,\"page-content\",1),core.Bc(4,AcceptPaymentRequestComponent_page_content_4_Template,7,11,\"page-content\",2),core.Bc(5,AcceptPaymentRequestComponent_page_content_5_Template,2,0,\"page-content\",3),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,4,ctx.data$))(\"ngSwitch\",core.bc(2,6,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"confirm\"),core.xb(1),core.gc(\"ngSwitchCase\",\"done\"))},directives:[page_layout_component.a,common.x,common.y,common.z,page_content_component.a,accept_payment_request_step_confirm_component_AcceptPaymentRequestStepConfirmComponent,actions_component.a,common.t,action_button_component.a,request_payment_step_done_component_RequestPaymentStepDoneComponent,spinner_component.a],pipes:[common.b,date_pipe.a],encapsulation:2,changeDetection:0}),AcceptPaymentRequestComponent})();var error_status=__webpack_require__(\"a/z7\"),distinctUntilChanged=__webpack_require__(\"/uUt\"),debounceTime=__webpack_require__(\"Kj3r\"),field_errors_component=__webpack_require__(\"Xel3\"),custom_field_input_component=__webpack_require__(\"Y+zs\"),numbers_only_directive=__webpack_require__(\"Zcpn\"),boolean_field_component=__webpack_require__(\"yHfF\"),radio_group_field_component=__webpack_require__(\"wR2l\");const request_payment_step_form_component_c0=[\"toUser\"],request_payment_step_form_component_c1=[\"amount\"];function RequestPaymentStepFormComponent_label_value_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",13),core.Lb(1,\"user-link\",14),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.toSystem?ctx_r0.i18n.transaction.receiver:ctx_r0.i18n.transaction.fromUser),core.xb(1),core.gc(\"user\",ctx_r0.fromUser)}}function RequestPaymentStepFormComponent_ng_container_2_div_2_ng_container_7_br_1_Template(rf,ctx){1&rf&&core.Lb(0,\"br\")}function RequestPaymentStepFormComponent_ng_container_2_div_2_ng_container_7_ng_template_3_Template(rf,ctx){1&rf&&core.Dc(0,\" - \")}function RequestPaymentStepFormComponent_ng_container_2_div_2_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,RequestPaymentStepFormComponent_ng_container_2_div_2_ng_container_7_br_1_Template,1,0,\"br\",24),core.ac(2,\"async\"),core.Bc(3,RequestPaymentStepFormComponent_ng_container_2_div_2_ng_container_7_ng_template_3_Template,1,0,\"ng-template\",null,25,core.Cc),core.Dc(5),core.Nb()),2&rf){const _r16=core.qc(4),account_r12=core.Zb().$implicit,ctx_r14=core.Zb(2);core.xb(1),core.gc(\"ngIf\",core.bc(2,3,ctx_r14.layout.ltsm$))(\"ngIfElse\",_r16),core.xb(4),core.Fc(\" \",account_r12.number,\" \")}}function RequestPaymentStepFormComponent_ng_container_2_div_2_Template(rf,ctx){if(1&rf){const _r20=core.Rb();core.Qb(0,\"div\",18),core.Qb(1,\"div\",19),core.Qb(2,\"input\",20,21),core.Xb(\"keyup.enter\",(function(){return core.sc(_r20),core.qc(3).click()})),core.Pb(),core.Qb(4,\"label\",22),core.Qb(5,\"div\",23),core.Dc(6),core.Bc(7,RequestPaymentStepFormComponent_ng_container_2_div_2_ng_container_7_Template,6,5,\"ng-container\",2),core.Pb(),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const account_r12=ctx.$implicit;core.xb(2),core.gc(\"id\",\"from_\"+account_r12.id)(\"value\",account_r12.type.id),core.xb(2),core.gc(\"for\",\"from_\"+account_r12.id),core.xb(2),core.Fc(\" \",account_r12.type.name,\" \"),core.xb(1),core.gc(\"ngIf\",account_r12.number)}}function RequestPaymentStepFormComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"label-value\",15),core.Bc(2,RequestPaymentStepFormComponent_ng_container_2_div_2_Template,8,5,\"div\",16),core.Lb(3,\"field-errors\",17),core.Pb(),core.Nb()),2&rf){const ctx_r1=core.Zb();core.xb(1),core.gc(\"label\",ctx_r1.i18n.transaction.toAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r1.data.accounts),core.xb(1),core.gc(\"control\",ctx_r1.form.get(\"account\"))}}function RequestPaymentStepFormComponent_label_value_3_single_selection_field_1_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",31),2&rf){const user_r25=ctx.$implicit;core.gc(\"value\",user_r25.id)(\"text\",user_r25.display)}}function RequestPaymentStepFormComponent_label_value_3_single_selection_field_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",29),core.Bc(1,RequestPaymentStepFormComponent_label_value_3_single_selection_field_1_field_option_1_Template,1,2,\"field-option\",30),core.Pb()),2&rf){const ctx_r21=core.Zb(2);core.xb(1),core.gc(\"ngForOf\",ctx_r21.data.allowedUsers)}}const _c2=function(a0){return[a0]},_c3=function(a0){return{usersToExclude:a0}};function RequestPaymentStepFormComponent_label_value_3_ng_template_2_Template(rf,ctx){if(1&rf){const _r28=core.Rb();core.Qb(0,\"user-field\",32,33),core.Xb(\"selected\",(function($event){core.sc(_r28),core.Zb(2);const _r5=core.qc(8);return $event?_r5.focus():null})),core.Pb()}if(2&rf){const ctx_r23=core.Zb(2);core.gc(\"autoSearch\",!ctx_r23.allowPrincipal)(\"filters\",core.jc(9,_c3,ctx_r23.fromUser&&!ctx_r23.fromSelf?core.jc(7,_c2,ctx_r23.fromParam):null))(\"allowContacts\",ctx_r23.allowContacts)(\"allowSearch\",ctx_r23.allowSearch)(\"allowPrincipal\",ctx_r23.allowPrincipal)(\"allowQrCode\",ctx_r23.allowQrCode)(\"principalTypes\",ctx_r23.data.principalTypes)}}function RequestPaymentStepFormComponent_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",26),core.Bc(1,RequestPaymentStepFormComponent_label_value_3_single_selection_field_1_Template,2,1,\"single-selection-field\",27),core.Bc(2,RequestPaymentStepFormComponent_label_value_3_ng_template_2_Template,2,11,\"ng-template\",null,28,core.Cc),core.Pb()),2&rf){const _r22=core.qc(3),ctx_r2=core.Zb();core.gc(\"label\",ctx_r2.i18n.transaction.receiver),core.xb(1),core.gc(\"ngIf\",ctx_r2.fixedUsersList)(\"ngIfElse\",_r22)}}function RequestPaymentStepFormComponent_label_value_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",34),core.Lb(1,\"user-link\",14),core.Pb()),2&rf){const ctx_r3=core.Zb();core.gc(\"label\",ctx_r3.i18n.transaction.receiver),core.xb(1),core.gc(\"user\",ctx_r3.toUser)}}function RequestPaymentStepFormComponent_single_selection_field_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",31),2&rf){const pt_r31=ctx.$implicit;core.gc(\"value\",pt_r31.id)(\"text\",pt_r31.name)}}function RequestPaymentStepFormComponent_single_selection_field_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",35,36),core.Bc(2,RequestPaymentStepFormComponent_single_selection_field_5_field_option_2_Template,1,2,\"field-option\",30),core.ac(3,\"async\"),core.Pb()),2&rf){const ctx_r4=core.Zb();core.gc(\"label\",ctx_r4.i18n.transaction.type),core.xb(2),core.gc(\"ngForOf\",core.bc(3,2,ctx_r4.paymentTypes$))}}function RequestPaymentStepFormComponent_custom_field_input_10_Template(rf,ctx){if(1&rf&&core.Lb(0,\"custom-field-input\",37),2&rf){const cf_r32=ctx.$implicit,ctx_r6=core.Zb();core.gc(\"field\",cf_r32)(\"formControl\",ctx_r6.customValuesControlGetter(cf_r32))}}function RequestPaymentStepFormComponent_single_selection_field_12_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",43),2&rf){const ctx_r33=core.Zb(2);core.gc(\"text\",ctx_r33.i18n.transaction.schedulingSingle)}}function RequestPaymentStepFormComponent_single_selection_field_12_field_option_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",44),2&rf){const ctx_r34=core.Zb(2);core.gc(\"text\",ctx_r34.i18n.transaction.schedulingInstallments)}}function RequestPaymentStepFormComponent_single_selection_field_12_field_option_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",45),2&rf){const ctx_r35=core.Zb(2);core.gc(\"text\",ctx_r35.i18n.transaction.schedulingRecurring)}}function RequestPaymentStepFormComponent_single_selection_field_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",38),core.Lb(1,\"field-option\",39),core.Bc(2,RequestPaymentStepFormComponent_single_selection_field_12_field_option_2_Template,1,1,\"field-option\",40),core.Bc(3,RequestPaymentStepFormComponent_single_selection_field_12_field_option_3_Template,1,1,\"field-option\",41),core.Bc(4,RequestPaymentStepFormComponent_single_selection_field_12_field_option_4_Template,1,1,\"field-option\",42),core.Pb()),2&rf){const ctx_r7=core.Zb();core.gc(\"label\",ctx_r7.i18n.transaction.scheduling),core.xb(1),core.gc(\"text\",ctx_r7.i18n.transaction.schedulingDirect),core.xb(1),core.gc(\"ngIf\",(null==ctx_r7.paymentTypeData$.value?null:ctx_r7.paymentTypeData$.value.maxInstallments)>0),core.xb(1),core.gc(\"ngIf\",(null==ctx_r7.paymentTypeData$.value?null:ctx_r7.paymentTypeData$.value.maxInstallments)>1),core.xb(1),core.gc(\"ngIf\",null==ctx_r7.paymentTypeData$.value?null:ctx_r7.paymentTypeData$.value.allowsRecurringPayments)}}function RequestPaymentStepFormComponent_ng_container_16_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"input-field\",46),core.Lb(2,\"boolean-field\",47),core.Nb()),2&rf){const ctx_r8=core.Zb();core.xb(1),core.gc(\"label\",ctx_r8.i18n.transaction.installmentsCount),core.xb(1),core.gc(\"label\",ctx_r8.i18n.transaction.firstInstallmentIsImmediate)}}function RequestPaymentStepFormComponent_ng_container_17_input_field_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",51),2&rf){const ctx_r36=core.Zb(2);core.gc(\"label\",ctx_r36.i18n.transaction.occurrencesCount)}}function RequestPaymentStepFormComponent_ng_container_17_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"boolean-field\",48),core.Qb(2,\"radio-group-field\",49),core.Lb(3,\"field-option\",31),core.Lb(4,\"field-option\",31),core.Pb(),core.Bc(5,RequestPaymentStepFormComponent_ng_container_17_input_field_5_Template,1,1,\"input-field\",50),core.Nb()),2&rf){const ctx_r9=core.Zb();core.xb(1),core.gc(\"label\",ctx_r9.i18n.transaction.firstOccurrenceIsImmediate),core.xb(1),core.gc(\"label\",ctx_r9.i18n.transaction.repeatUntil),core.xb(1),core.gc(\"value\",!0)(\"text\",ctx_r9.i18n.transaction.repeatUntilManual),core.xb(1),core.gc(\"value\",!1)(\"text\",ctx_r9.i18n.transaction.repeatUntilFixed),core.xb(1),core.gc(\"ngIf\",!1===ctx_r9.form.value.repeatUntilCanceled)}}function RequestPaymentStepFormComponent_ng_container_18_textarea_field_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"textarea-field\",53),2&rf){const descriptionAvailability_r37=core.Zb().ngIf,ctx_r38=core.Zb();core.gc(\"required\",\"required\"===descriptionAvailability_r37)(\"label\",ctx_r38.i18n.general.description)}}function RequestPaymentStepFormComponent_ng_container_18_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,RequestPaymentStepFormComponent_ng_container_18_textarea_field_1_Template,1,2,\"textarea-field\",52),core.Nb()),2&rf){const descriptionAvailability_r37=ctx.ngIf;core.xb(1),core.gc(\"ngIf\",\"disabled\"!==descriptionAvailability_r37)}}const IGNORED_STATUSES=[error_status.a.FORBIDDEN,error_status.a.UNAUTHORIZED,error_status.a.NOT_FOUND];let request_payment_step_form_component_RequestPaymentStepFormComponent=(()=>{class RequestPaymentStepFormComponent extends base_component.a{constructor(injector,bankingHelper,paymentRequestsService){super(injector),this.bankingHelper=bankingHelper,this.paymentRequestsService=paymentRequestsService,this.availablePaymentTypes=new core.n,this.accountBalanceLabel$=new BehaviorSubject.a(null),this.fixedDestination=!1,this.paymentTypes$=new BehaviorSubject.a(null)}ngOnInit(){super.ngOnInit(),this.fromParam=this.route.snapshot.params.from,this.dataCache=this.stateManager.get(\"dataCache\",()=>new Map),this.fixedDestination=null!=this.data.toKind,this.fromUser=this.data.fromUser,this.fromSelf=this.authHelper.isSelf(this.fromUser),this.toUser=this.data.toUser,this.fixedDestination?this.setFetchedPaymentTypes(this.data):this.addSub(this.form.get(\"subject\").valueChanges.pipe(Object(distinctUntilChanged.a)(),Object(debounceTime.a)(api_helper.a.DEBOUNCE_TIME)).subscribe(()=>this.fetchPaymentTypes())),this.addSub(this.form.get(\"account\").valueChanges.pipe(Object(distinctUntilChanged.a)(),Object(debounceTime.a)(api_helper.a.DEBOUNCE_TIME)).subscribe(()=>this.adjustPaymentTypes())),this.addSub(this.form.get(\"type\").valueChanges.pipe(Object(distinctUntilChanged.a)(),Object(debounceTime.a)(api_helper.a.DEBOUNCE_TIME)).subscribe(type=>this.fetchPaymentTypeData(type))),this.addSub(this.layout.xxs$.subscribe(()=>this.updateAccountBalanceLabel())),this.updateAccountBalanceLabel()}updateAccountBalanceLabel(){this.accountBalanceLabel$.next(this.layout.xxs?this.i18n.account.balance:this.i18n.transaction.accountBalance)}fetchPaymentTypes(){this.dataCache.clear(),this.fetchedPaymentTypes=null;const subject=api_helper.a.escapeNumeric(this.form.value.subject);\"\"!==subject&&this.errorHandler.requestWithCustomErrorHandler(defaultHandling=>{this.addSub(this.paymentRequestsService.dataForSendPaymentRequest({owner:this.fromParam,to:subject,fields:[\"toUser\",\"paymentTypes\",\"paymentTypeData\"]}).subscribe(data=>{this.setFetchedPaymentTypes(data)},err=>{if(this.allowPrincipal&&this.userField&&err.status===error_status.a.NOT_FOUND){let error=err.error;if(\"string\"==typeof error)try{error=JSON.parse(error)}catch(e){error={}}const entityType=error.entityType;if(!Object(helper.a)(entityType)&&entityType.endsWith(\"User\"))return void this.userField.search()}IGNORED_STATUSES.includes(err.status)||defaultHandling(err)}))})}adjustPaymentTypes(){const value=this.form.value;if(0===(value.subject||\"\").trim().length)return;const allPaymentTypes=this.fetchedPaymentTypes||[];Object(helper.h)(allPaymentTypes)&&this.notification.error(this.i18n.transaction.noTypes);const paymentTypes=allPaymentTypes.filter(tt=>tt.from.id===value.account);let type=this.form.value.type,error=null;Object(helper.h)(paymentTypes)?error={message:this.i18n.transaction.noTypesSelection}:(this.paymentTypes$.next(paymentTypes),paymentTypes.find(t=>t.id===type)||(type=paymentTypes[0].id),this.form.get(\"account\").setErrors(null)),this.form.patchValue({type:type}),this.form.get(\"account\").setErrors(error),this.form.get(\"account\").markAsTouched(),Object(helper.h)(type)||this.fetchPaymentTypeData(type),this.availablePaymentTypes.emit(paymentTypes)}setFetchedPaymentTypes(data){this.userField&&(this.userField.user=data.toUser),this.fetchedPaymentTypes=data.paymentTypes;const typeData=data.paymentTypeData;typeData&&this.dataCache.set(typeData.id,typeData),this.adjustPaymentTypes()}fetchPaymentTypeData(type){const value=this.form.value;if(Object(helper.h)(value.subject)||Object(helper.h)(type))return;const cached=this.dataCache.get(type);cached?this.setPaymentTypeData(cached):(this.setPaymentTypeData(null),this.errorHandler.requestWithCustomErrorHandler(defaultHandling=>{this.addSub(this.paymentRequestsService.dataForSendPaymentRequest({owner:this.fromParam,to:value.subject,type:type,fields:[\"paymentTypeData\"]}).subscribe(data=>{this.setPaymentTypeData(data.paymentTypeData)},err=>{IGNORED_STATUSES.includes(err.status)||defaultHandling(err)}))}))}setPaymentTypeData(typeData){((this.paymentTypeData$.value||{}).id||null)!==((typeData||{}).id||null)&&(typeData&&(this.dataCache.set(typeData.id,typeData),Object(helper.j)(this.amountField)),this.paymentTypeData$.next(typeData))}get fixedUsersList(){return!Object(helper.h)(this.data.allowedUsers)}get allowQrCode(){return this.allowPrincipal&&this.data.allowScanQrCode}get allowPrincipal(){return!Object(helper.h)(this.data.principalTypes)}get allowSearch(){return this.data.allowAutocomplete}get allowContacts(){return this.data.allowContacts}get singleAccount(){const accounts=this.data.accounts||[];return 1===accounts.length?accounts[0]:null}}return RequestPaymentStepFormComponent.ɵfac=function(t){return new(t||RequestPaymentStepFormComponent)(core.Kb(core.r),core.Kb(banking_helper_service.a),core.Kb(payment_requests_service.a))},RequestPaymentStepFormComponent.ɵcmp=core.Eb({type:RequestPaymentStepFormComponent,selectors:[[\"request-payment-step-form\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core.Hc(request_payment_step_form_component_c0,!0),core.yc(request_payment_step_form_component_c1,!0)),2&rf&&(core.pc(_t=core.Yb())&&(ctx.userField=_t.first),core.pc(_t=core.Yb())&&(ctx.amountField=_t.first))},inputs:{data:\"data\",form:\"form\",currency:\"currency\",paymentTypeData$:\"paymentTypeData$\",toSystem:\"toSystem\",customValuesControlGetter:\"customValuesControlGetter\"},outputs:{availablePaymentTypes:\"availablePaymentTypes\"},features:[core.ub],decls:20,vars:28,consts:[[3,\"formGroup\"],[\"kind\",\"field\",3,\"label\",4,\"ngIf\"],[4,\"ngIf\"],[\"kind\",\"field\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[\"kind\",\"fieldView\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"type\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"amount\",\"required\",\"\",3,\"focused\",\"label\",\"scale\",\"prefix\",\"suffix\"],[\"amount\",\"\"],[\"formControlName\",\"expirationDate\",\"required\",\"\",\"minDate\",\"tomorrow\",\"maxDate\",\"future5\",3,\"label\"],[3,\"field\",\"formControl\",4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"scheduling\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[3,\"ngSwitch\"],[4,\"ngSwitchCase\"],[\"kind\",\"field\",3,\"label\"],[3,\"user\"],[\"required\",\"\",\"kind\",\"field\",3,\"label\"],[\"class\",\"w-100 row no-gutters mb-2\",4,\"ngFor\",\"ngForOf\"],[3,\"control\"],[1,\"w-100\",\"row\",\"no-gutters\",\"mb-2\"],[1,\"custom-control\",\"custom-radio\"],[\"type\",\"radio\",\"formControlName\",\"account\",1,\"custom-control-input\",3,\"id\",\"value\",\"keyup.enter\"],[\"radio\",\"\"],[1,\"custom-control-label\",3,\"for\"],[1,\"ml-1\"],[4,\"ngIf\",\"ngIfElse\"],[\"separator\",\"\"],[\"kind\",\"field\",\"required\",\"\",3,\"label\"],[\"focused\",\"\",\"formControlName\",\"subject\",4,\"ngIf\",\"ngIfElse\"],[\"toUserField\",\"\"],[\"focused\",\"\",\"formControlName\",\"subject\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"focused\",\"\",\"formControlName\",\"subject\",3,\"autoSearch\",\"filters\",\"allowContacts\",\"allowSearch\",\"allowPrincipal\",\"allowQrCode\",\"principalTypes\",\"selected\"],[\"toUser\",\"\"],[\"kind\",\"fieldView\",3,\"label\"],[\"formControlName\",\"type\",\"required\",\"\",3,\"label\"],[\"type\",\"\"],[3,\"field\",\"formControl\"],[\"formControlName\",\"scheduling\",\"required\",\"\",3,\"label\"],[\"value\",\"direct\",3,\"text\"],[\"value\",\"futureDate\",3,\"text\",4,\"ngIf\"],[\"value\",\"scheduled\",3,\"text\",4,\"ngIf\"],[\"value\",\"recurring\",3,\"text\",4,\"ngIf\"],[\"value\",\"futureDate\",3,\"text\"],[\"value\",\"scheduled\",3,\"text\"],[\"value\",\"recurring\",3,\"text\"],[\"type\",\"number\",\"fieldSize\",\"small\",\"required\",\"\",\"numbersOnly\",\"\",\"formControlName\",\"installmentsCount\",3,\"label\"],[\"formControlName\",\"firstInstallmentIsImmediate\",3,\"label\"],[\"formControlName\",\"firstOccurrenceIsImmediate\",3,\"label\"],[\"formControlName\",\"repeatUntilCanceled\",3,\"label\"],[\"type\",\"number\",\"fieldSize\",\"small\",\"numbersOnly\",\"\",\"formControlName\",\"occurrencesCount\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[\"type\",\"number\",\"fieldSize\",\"small\",\"numbersOnly\",\"\",\"formControlName\",\"occurrencesCount\",\"required\",\"\",3,\"label\"],[\"formControlName\",\"description\",\"required\",\"\",3,\"required\",\"label\",4,\"ngIf\"],[\"formControlName\",\"description\",\"required\",\"\",3,\"required\",\"label\"]],template:function(rf,ctx){if(1&rf&&(core.Ob(0,0),core.Bc(1,RequestPaymentStepFormComponent_label_value_1_Template,2,2,\"label-value\",1),core.Bc(2,RequestPaymentStepFormComponent_ng_container_2_Template,4,3,\"ng-container\",2),core.Bc(3,RequestPaymentStepFormComponent_label_value_3_Template,4,3,\"label-value\",3),core.Bc(4,RequestPaymentStepFormComponent_label_value_4_Template,2,2,\"label-value\",4),core.Bc(5,RequestPaymentStepFormComponent_single_selection_field_5_Template,4,4,\"single-selection-field\",5),core.ac(6,\"async\"),core.Lb(7,\"decimal-field\",6,7),core.Lb(9,\"date-field\",8),core.Bc(10,RequestPaymentStepFormComponent_custom_field_input_10_Template,1,2,\"custom-field-input\",9),core.ac(11,\"async\"),core.Bc(12,RequestPaymentStepFormComponent_single_selection_field_12_Template,5,5,\"single-selection-field\",10),core.ac(13,\"async\"),core.ac(14,\"async\"),core.Ob(15,11),core.Bc(16,RequestPaymentStepFormComponent_ng_container_16_Template,3,2,\"ng-container\",12),core.Bc(17,RequestPaymentStepFormComponent_ng_container_17_Template,6,7,\"ng-container\",12),core.Nb(),core.Bc(18,RequestPaymentStepFormComponent_ng_container_18_Template,2,1,\"ng-container\",2),core.ac(19,\"async\"),core.Nb()),2&rf){var tmp_5_0,tmp_12_0,tmp_17_0,tmp_13_0=null;core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngIf\",ctx.fromUser&&!ctx.fromSelf),core.xb(1),core.gc(\"ngIf\",!ctx.singleAccount),core.xb(1),core.gc(\"ngIf\",!ctx.fixedDestination),core.xb(1),core.gc(\"ngIf\",ctx.fixedDestination&&ctx.toUser),core.xb(1),core.gc(\"ngIf\",(null==(tmp_5_0=core.bc(6,18,ctx.paymentTypes$))?null:tmp_5_0.length)>1),core.xb(2),core.gc(\"focused\",ctx.fixedDestination)(\"label\",ctx.i18n.transaction.amount)(\"scale\",null==ctx.currency?null:ctx.currency.decimalDigits)(\"prefix\",null==ctx.currency?null:ctx.currency.prefix)(\"suffix\",null==ctx.currency?null:ctx.currency.suffix),core.xb(2),core.gc(\"label\",ctx.i18n.general.expirationDate),core.xb(1),core.gc(\"ngForOf\",null==(tmp_12_0=core.bc(11,20,ctx.paymentTypeData$))?null:tmp_12_0.customFields),core.xb(2),core.gc(\"ngIf\",(null==(tmp_13_0=core.bc(13,22,ctx.paymentTypeData$))?null:tmp_13_0.allowsRecurringPayments)||(null==(tmp_13_0=core.bc(14,24,ctx.paymentTypeData$))?null:tmp_13_0.maxInstallments)>0),core.xb(3),core.gc(\"ngSwitch\",ctx.form.value.scheduling),core.xb(1),core.gc(\"ngSwitchCase\",\"scheduled\"),core.xb(1),core.gc(\"ngSwitchCase\",\"recurring\"),core.xb(1),core.gc(\"ngIf\",(null==(tmp_17_0=core.bc(19,26,ctx.paymentTypeData$))?null:tmp_17_0.descriptionAvailability)||\"disabled\")}},directives:[fesm2015_forms.w,fesm2015_forms.n,common.t,decimal_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,focused_directive.a,date_field_component.a,common.s,common.x,common.y,label_value_component.a,user_link_component.a,field_errors_component.a,fesm2015_forms.A,fesm2015_forms.e,single_selection_field_component.a,field_option_directive.a,user_field_component.a,custom_field_input_component.a,fesm2015_forms.k,input_field_component.a,numbers_only_directive.a,boolean_field_component.a,radio_group_field_component.a,textarea_field_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),RequestPaymentStepFormComponent})();function RequestPaymentComponent_page_content_3_Template(rf,ctx){if(1&rf){const _r4=core.Rb();core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Qb(2,\"request-payment-step-form\",5),core.Xb(\"availablePaymentTypes\",(function($event){return core.sc(_r4),core.Zb().availablePaymentTypes=$event})),core.ac(3,\"async\"),core.Pb(),core.Qb(4,\"actions\",6),core.Qb(5,\"action-button\",7),core.Xb(\"action\",(function(){return core.sc(_r4),core.Zb().perform()})),core.ac(6,\"async\"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.title)(\"mobileHeading\",ctx_r0.mobileTitle)(\"mode\",core.bc(1,11,ctx_r0.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"data\",ctx_r0.data)(\"form\",ctx_r0.form)(\"currency\",core.bc(3,13,ctx_r0.currency$))(\"paymentTypeData$\",ctx_r0.paymentTypeData$)(\"toSystem\",ctx_r0.toSystem)(\"customValuesControlGetter\",ctx_r0.customValuesControlGetter),core.xb(3),core.gc(\"disabled\",core.bc(6,15,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.confirm)}}function RequestPaymentComponent_page_content_4_Template(rf,ctx){if(1&rf){const _r7=core.Rb();core.Qb(0,\"page-content\",8),core.ac(1,\"async\"),core.Lb(2,\"request-payment-step-done\",9),core.Qb(3,\"actions\",6),core.Qb(4,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r7),core.Zb().viewPerformed()})),core.Pb(),core.Qb(5,\"action-button\",11),core.Xb(\"action\",(function(){return core.sc(_r7),core.Zb().reload()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r1=core.Zb();core.gc(\"heading\",ctx_r1.i18n.transaction.title.paymentRequestSent)(\"mobileHeading\",ctx_r1.i18n.transaction.mobileTitle.paymentRequestSent)(\"mode\",core.bc(1,6,ctx_r1.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"performed\",ctx_r1.performed),core.xb(2),core.gc(\"label\",ctx_r1.i18n.transaction.doneView),core.xb(1),core.gc(\"label\",ctx_r1.i18n.transaction.doneNew)}}function RequestPaymentComponent_page_content_5_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}const request_payment_component_OCCURRENCES_COUNT_VAL=control=>{const parent=control.parent;if(parent){const scheduling=parent.get(\"scheduling\").value,repeatUntilCanceled=parent.get(\"repeatUntilCanceled\").value;if(scheduling===models.Y.RECURRING&&!repeatUntilCanceled){const value=parseInt(control.value,10);return isNaN(value)?{required:!0}:fesm2015_forms.G.min(2)(control)}}return null};let request_payment_component_RequestPaymentComponent=(()=>{class RequestPaymentComponent extends base_page_component.a{constructor(injector,bankingHelper,paymentRequestsService,changeDetector){super(injector),this.bankingHelper=bankingHelper,this.paymentRequestsService=paymentRequestsService,this.changeDetector=changeDetector,this.steps=[\"form\",\"done\"],this.step$=new BehaviorSubject.a(null),this.currency$=new BehaviorSubject.a(null),this.paymentTypeData$=new BehaviorSubject.a(null),this.customValuesControls=new Map}get step(){return this.step$.value}set step(step){this.step$.next(step)}get currency(){return this.currency$.value}set currency(currency){this.currency$.next(currency)}get paymentTypeData(){return this.paymentTypeData$.value}set paymentTypeData(data){this.paymentTypeData$.next(data),this.updatePaymentTypeData(data)}ngOnInit(){super.ngOnInit();const route=this.route.snapshot;this.fromParam=route.params.from,this.fromSelf=this.authHelper.isSelf(this.fromParam),this.fromSystem=this.authHelper.isSystem(this.fromParam),this.toParam=route.params.to,this.toSelf=null!=this.toParam&&this.authHelper.isSelf(this.toParam),this.toSystem=null!=this.toParam&&this.authHelper.isSystem(this.toParam),this.fromSystem?(this.title=this.i18n.transaction.title.paymentRequestSystemToUser,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentRequestSystemToUser):this.toSystem?(this.title=this.i18n.transaction.title.paymentRequestToSystem,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentRequestToSystem):(this.title=this.i18n.transaction.title.paymentRequestToUser,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentRequestToUser),this.form=this.buildForm(),this.addSub(this.paymentRequestsService.dataForSendPaymentRequest({owner:this.fromParam,to:this.toParam}).subscribe(data=>this.data=data)),this.addSub(this.form.get(\"account\").valueChanges.subscribe(type=>this.updateCurrency(this.data,type))),this.addSub(this.paymentTypeData$.subscribe(typeData=>{null!=this.lastPaymentTypeData&&Object(isEqual.a)(this.lastPaymentTypeData,typeData)||this.adjustForm(typeData),this.lastPaymentTypeData=typeData})),this.addSub(this.form.valueChanges.subscribe(value=>this.adjustFormValidators(value)))}buildForm(){return this.formBuilder.group({account:null,subject:[this.toParam,fesm2015_forms.G.required],type:[null,fesm2015_forms.G.required],amount:[null,fesm2015_forms.G.required],expirationDate:[null,fesm2015_forms.G.required],description:null,scheduling:[models.Y.DIRECT,fesm2015_forms.G.required],installmentsCount:null,firstInstallmentIsImmediate:!1,repeatUntilCanceled:!0,occurrencesCount:[null,request_payment_component_OCCURRENCES_COUNT_VAL],firstOccurrenceIsImmediate:!1})}updateCurrency(data,type){let account=null;!Object(helper.h)(type)&&data&&data.accounts&&(account=data.accounts.find(a=>a.type.id===type)),this.currency=account?account.currency:null}adjustForm(typeData){const description=this.form.get(\"description\");(typeData||{}).descriptionAvailability===models.i.REQUIRED?description.setValidators(fesm2015_forms.G.required):Object(helper.c)(description)}adjustFormValidators(value){if(this.lastValue&&Object(isEqual.a)(this.lastValue,value))return;this.lastValue=value;const installmentsCount=this.form.get(\"installmentsCount\");value.scheduling===models.Y.SCHEDULED?installmentsCount.setValidators(fesm2015_forms.G.compose([fesm2015_forms.G.required,fesm2015_forms.G.min(2)])):Object(helper.c)(installmentsCount);const occurrencesCount=this.form.get(\"occurrencesCount\");value.scheduling===models.Y.RECURRING?value.repeatUntilCanceled?Object(helper.c)(occurrencesCount):occurrencesCount.setValidators(fesm2015_forms.G.compose([fesm2015_forms.G.required,fesm2015_forms.G.min(2)])):Object(helper.c)(occurrencesCount),this.changeDetector.detectChanges()}onDataInitialized(data){if(Object(helper.h)(data.accounts))this.notification.error(this.i18n.transaction.noAccounts);else{this.step=\"form\";const type=data.accounts[0].type.id;this.form.patchValue({account:type},{emitEvent:!1}),this.updateCurrency(data,type)}}updatePaymentTypeData(data){const amount=this.form.get(\"amount\");data&&data.fixedAmount?(amount.setValue(data.fixedAmount),amount.disable()):amount.disabled&&amount.enable()}perform(){const customValueControls={},typeData=this.paymentTypeData;if(typeData&&typeData.customFields)for(const cf of typeData.customFields)customValueControls[cf.internalName]=this.customValuesControlGetter(cf);this.form.setControl(\"customValues\",new fesm2015_forms.m(customValueControls)),Object(helper.F)(this.form)&&this.notification.confirm({title:this.i18n.general.confirm,message:this.i18n.transaction.confirmPaymentRequest,callback:()=>this.paymentRequestsService.sendPaymentRequest({owner:this.fromParam,body:this.confirmDataRequest()}).pipe(Object(first.a)()).subscribe(performed=>{this.performed=performed,this.step=\"done\",Object(helper.y)()})})}confirmDataRequest(){const value=Object(cloneDeep.a)(this.form.value),payment=value;switch(value.scheduling){case\"futureDate\":payment.scheduling=models.W.SCHEDULED,payment.installmentsCount=1;break;case models.W.RECURRING:value.repeatUntilCanceled&&(payment.occurrencesCount=null)}return payment.expirationDate=api_helper.a.shiftToDayEnd(payment.expirationDate),delete value.firstInstallmentIsNow,delete value.repeatUntilCanceled,delete value.firstOccurrenceIsNow,payment}viewPerformed(){this.router.navigate([\"banking\",\"transaction\",this.bankingHelper.transactionNumberOrId(this.performed)])}reload(){this.step=null,this.currency=null,this.paymentTypeData=null,super.reload()}locateControl(locator){return Object(helper.t)(this.form,locator)}get customValuesControlGetter(){return cf=>{const name=cf.internalName;let control=this.customValuesControls.get(name);return null==control&&(control=this.formBuilder.control(cf.defaultValue,cf.required?fesm2015_forms.G.required:null),this.customValuesControls.set(name,control)),control}}resolveMenu(data){return this.fromSystem?shared_menu.b.PAYMENT_REQUEST_TO_USER:this.menu.userMenu(data.fromUser,this.toSystem?shared_menu.b.PAYMENT_REQUEST_TO_SYSTEM:shared_menu.b.PAYMENT_REQUEST_TO_USER)}}return RequestPaymentComponent.ɵfac=function(t){return new(t||RequestPaymentComponent)(core.Kb(core.r),core.Kb(banking_helper_service.a),core.Kb(payment_requests_service.a),core.Kb(core.h))},RequestPaymentComponent.ɵcmp=core.Eb({type:RequestPaymentComponent,selectors:[[\"request-payment\"]],features:[core.ub],decls:6,vars:8,consts:[[3,\"ready\",\"ngSwitch\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[4,\"ngSwitchDefault\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",\"d-flex\",\"flex-column\",3,\"data\",\"form\",\"currency\",\"paymentTypeData$\",\"toSystem\",\"customValuesControlGetter\",\"availablePaymentTypes\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",\"d-flex\",\"flex-column\",3,\"performed\"],[3,\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,RequestPaymentComponent_page_content_3_Template,7,17,\"page-content\",1),core.Bc(4,RequestPaymentComponent_page_content_4_Template,6,8,\"page-content\",2),core.Bc(5,RequestPaymentComponent_page_content_5_Template,2,0,\"page-content\",3),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,4,ctx.data$))(\"ngSwitch\",core.bc(2,6,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"form\"),core.xb(1),core.gc(\"ngSwitchCase\",\"done\"))},directives:[page_layout_component.a,common.x,common.y,common.z,page_content_component.a,request_payment_step_form_component_RequestPaymentStepFormComponent,actions_component.a,action_button_component.a,request_payment_step_done_component_RequestPaymentStepDoneComponent,spinner_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),RequestPaymentComponent})();var tickets_service=__webpack_require__(\"cBGn\"),push_notifications_service=__webpack_require__(\"/q9M\");function ReceiveQrPaymentComponent_page_content_3_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Lb(2,\"receive-qr-payment-step-form\",5),core.ac(3,\"async\"),core.ac(4,\"async\"),core.ac(5,\"async\"),core.Qb(6,\"actions\",6),core.Qb(7,\"action-button\",7),core.Xb(\"action\",(function(){return core.sc(_r5),core.Zb().toPending()})),core.ac(8,\"async\"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.transaction.title.receiveQrPayment)(\"mobileHeading\",ctx_r0.i18n.transaction.mobileTitle.receiveQrPayment)(\"mode\",core.bc(1,10,ctx_r0.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"data\",ctx_r0.data)(\"form\",ctx_r0.form)(\"transferTypes\",core.bc(3,12,ctx_r0.paymentTypes$))(\"type\",core.bc(4,14,ctx_r0.paymentType$))(\"typeData\",core.bc(5,16,ctx_r0.paymentTypeData$)),core.xb(5),core.gc(\"disabled\",core.bc(8,18,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.next)}}function ReceiveQrPaymentComponent_page_content_4_action_button_6_Template(rf,ctx){if(1&rf){const _r10=core.Rb();core.Qb(0,\"action-button\",13),core.Xb(\"action\",(function(){return core.sc(_r10),core.Zb(2).share()})),core.ac(1,\"async\"),core.Pb()}if(2&rf){const ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.general.share)(\"disabled\",core.bc(1,2,ctx_r6.requesting$))}}function ReceiveQrPaymentComponent_page_content_4_ng_template_7_Template(rf,ctx){1&rf&&core.Lb(0,\"span\")}function ReceiveQrPaymentComponent_page_content_4_Template(rf,ctx){if(1&rf){const _r12=core.Rb();core.Qb(0,\"page-content\",8),core.ac(1,\"async\"),core.Lb(2,\"receive-qr-payment-step-pending\",9),core.ac(3,\"async\"),core.ac(4,\"async\"),core.Qb(5,\"actions\",6),core.Bc(6,ReceiveQrPaymentComponent_page_content_4_action_button_6_Template,2,4,\"action-button\",10),core.Bc(7,ReceiveQrPaymentComponent_page_content_4_ng_template_7_Template,1,0,\"ng-template\",null,11,core.Cc),core.Qb(9,\"action-button\",12),core.Xb(\"action\",(function(){return core.sc(_r12),core.Zb().reload()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const _r7=core.qc(8),ctx_r1=core.Zb();core.gc(\"heading\",ctx_r1.i18n.transaction.title.receiveQrPayment)(\"mobileHeading\",ctx_r1.i18n.transaction.mobileTitle.receiveQrPayment)(\"mode\",core.bc(1,8,ctx_r1.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"ticket\",core.bc(3,10,ctx_r1.ticket$))(\"qrCodeUrl\",core.bc(4,12,ctx_r1.qrCodeUrl$)),core.xb(4),core.gc(\"ngIf\",ctx_r1.supportsShare)(\"ngIfElse\",_r7),core.xb(3),core.gc(\"label\",ctx_r1.i18n.general.previous)}}function ReceiveQrPaymentComponent_page_content_5_Template(rf,ctx){if(1&rf){const _r14=core.Rb();core.Qb(0,\"page-content\",8),core.ac(1,\"async\"),core.Lb(2,\"receive-qr-payment-step-done\",14),core.ac(3,\"async\"),core.Qb(4,\"actions\",6),core.Qb(5,\"action-button\",15),core.Xb(\"action\",(function(){return core.sc(_r14),core.Zb().viewPerformed()})),core.Pb(),core.Qb(6,\"action-button\",12),core.Xb(\"action\",(function(){return core.sc(_r14),core.Zb().reload()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.transaction.title.receiveQrPayment)(\"mobileHeading\",ctx_r2.i18n.transaction.mobileTitle.receiveQrPayment)(\"mode\",core.bc(1,6,ctx_r2.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"payment\",core.bc(3,8,ctx_r2.payment$)),core.xb(3),core.gc(\"label\",ctx_r2.i18n.transaction.doneView),core.xb(1),core.gc(\"label\",ctx_r2.i18n.transaction.doneNew)}}function ReceiveQrPaymentComponent_page_content_6_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}let receive_qr_payment_component_ReceiveQrPaymentComponent=(()=>{class ReceiveQrPaymentComponent extends base_page_component.a{constructor(injector,ticketsService,pushNotifications,bankingHelper){super(injector),this.ticketsService=ticketsService,this.pushNotifications=pushNotifications,this.bankingHelper=bankingHelper,this.step$=new BehaviorSubject.a(null),this.ticket$=new BehaviorSubject.a(null),this.paymentTypes$=new BehaviorSubject.a([]),this.paymentType$=new BehaviorSubject.a(null),this.paymentTypeData$=new BehaviorSubject.a(null),this.payment$=new BehaviorSubject.a(null),this.paymentTypeDataCache=new Map,this.qrCodeUrl$=new BehaviorSubject.a(null),this.supportsShare=Object(helper.C)()}ngOnInit(){super.ngOnInit(),this.addSub(this.ticketsService.dataForNewTicket().subscribe(data=>this.data=data)),this.addSub(this.step$.subscribe(step=>this.onStepChanged(step)))}ngOnDestroy(){super.ngOnDestroy(),this.unsubscribePush(),this.destroyQrCode()}onDataInitialized(data){Object(helper.h)(data.accounts)||Object(helper.h)(data.paymentTypes)?this.notification.error(this.i18n.transaction.noAccounts):(this.form=this.formBuilder.group({account:[null,fesm2015_forms.G.required],type:[null,fesm2015_forms.G.required],amount:[null,fesm2015_forms.G.required],description:null}),this.paymentTypeDataCache.set(data.paymentTypes[0].id,data.paymentTypeData),this.addSub(this.form.controls.type.valueChanges.pipe(Object(distinctUntilChanged.a)()).subscribe(id=>this.onPaymentTypeChange(id))),this.addSub(this.form.controls.account.valueChanges.pipe(Object(distinctUntilChanged.a)()).subscribe(id=>this.onAccountChange(id,data))),this.form.patchValue({account:data.accounts[0].id}),this.step$.next(\"form\"))}onAccountChange(id,data){const account=data.accounts.find(a=>a.id===id),paymentTypes=account?data.paymentTypes.filter(tt=>tt.to.id===account.type.id):[];this.paymentTypes$.next(paymentTypes),this.form.patchValue({type:0===paymentTypes.length?null:paymentTypes[0].id})}onPaymentTypeChange(id){const type=(this.paymentTypes$.value||[]).find(t=>t.id===id);if(!type)return void this.notification.error(this.i18n.transaction.noTypes);const set=d=>{(this.paymentType$.value||{}).id!==id&&(this.paymentTypeDataCache.set(id,d),this.paymentType$.next(type),this.paymentTypeData$.next(d),this.form.setControl(\"customValues\",this.fieldHelper.customValuesFormGroup(d.customFields)),this.form.controls.type.setValidators(d.descriptionAvailability===models.i.REQUIRED?fesm2015_forms.G.required:null))},cached=this.paymentTypeDataCache.get(id);cached?set(cached):this.addSub(this.ticketsService.dataForNewTicket({type:id}).subscribe(data=>{set(data.paymentTypeData)}))}toPending(){Object(helper.F)(this.form)&&this.addSub(this.ticketsService.newTicket({body:this.form.value}).subscribe(ticket=>{this.ticket$.next(ticket),this.addSub(this.ticketsService.getTicketQrCode({ticket:ticket.ticketNumber,size:models.D.MEDIUM}).subscribe(qrCode=>{this.qrCodeUrl$.next(URL.createObjectURL(qrCode))})),this.step$.next(\"pending\")}))}viewPerformed(){this.router.navigate([\"banking\",\"transaction\",this.bankingHelper.transactionNumberOrId(this.payment$.value)])}onStepChanged(step){\"pending\"===step?this.pushSub=this.pushNotifications.ticket$.subscribe(ticket=>{const current=this.ticket$.value;current&&current.id===ticket.id&&(this.payment$.next(ticket.transaction),this.step$.next(\"done\"))}):(this.unsubscribePush(),this.destroyQrCode())}unsubscribePush(){this.pushSub&&(this.pushSub.unsubscribe(),this.pushSub=null)}destroyQrCode(){this.qrCodeUrl$.value&&(URL.revokeObjectURL(this.qrCodeUrl$.value),this.qrCodeUrl$.next(null))}share(){const ticket=this.ticket$.value;navigator.share&&navigator.share({url:ticket.approveUrl,title:this.i18n.transaction.ticketShareTitle,text:this.i18n.transaction.ticketShareText({user:ticket.to.user.display,amount:this.format.formatAsCurrency(ticket.currency,ticket.amount)})})}resolveMenu(){return shared_menu.b.RECEIVE_QR_PAYMENT}}return ReceiveQrPaymentComponent.ɵfac=function(t){return new(t||ReceiveQrPaymentComponent)(core.Kb(core.r),core.Kb(tickets_service.a),core.Kb(push_notifications_service.a),core.Kb(banking_helper_service.a))},ReceiveQrPaymentComponent.ɵcmp=core.Eb({type:ReceiveQrPaymentComponent,selectors:[[\"receive-qr-payment\"]],features:[core.ub],decls:7,vars:9,consts:[[3,\"ready\",\"ngSwitch\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[4,\"ngSwitchDefault\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",\"d-flex\",\"flex-column\",3,\"data\",\"form\",\"transferTypes\",\"type\",\"typeData\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[3,\"ticket\",\"qrCodeUrl\"],[3,\"label\",\"disabled\",\"action\",4,\"ngIf\",\"ngIfElse\"],[\"empty\",\"\"],[\"outline\",\"\",3,\"label\",\"action\"],[3,\"label\",\"disabled\",\"action\"],[3,\"payment\"],[3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,ReceiveQrPaymentComponent_page_content_3_Template,9,20,\"page-content\",1),core.Bc(4,ReceiveQrPaymentComponent_page_content_4_Template,10,14,\"page-content\",2),core.Bc(5,ReceiveQrPaymentComponent_page_content_5_Template,7,10,\"page-content\",2),core.Bc(6,ReceiveQrPaymentComponent_page_content_6_Template,2,0,\"page-content\",3),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,5,ctx.data$))(\"ngSwitch\",core.bc(2,7,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"form\"),core.xb(1),core.gc(\"ngSwitchCase\",\"pending\"),core.xb(1),core.gc(\"ngSwitchCase\",\"done\"))},encapsulation:2,changeDetection:0}),ReceiveQrPaymentComponent})();var installments_service=__webpack_require__(\"QnlI\");function SearchOwnerInstallmentsComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchOwnerInstallmentsComponent_ng_template_3_ng_container_4_div_4_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",7)}function SearchOwnerInstallmentsComponent_ng_template_3_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",7),core.Qb(2,\"label-value\",13),core.Lb(3,\"user-link\",14),core.Pb(),core.Pb(),core.Bc(4,SearchOwnerInstallmentsComponent_ng_template_3_ng_container_4_div_4_Template,1,0,\"div\",9),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.gc(\"label\",ctx_r3.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r3.data.user),core.xb(1),core.gc(\"ngIf\",ctx_r3.layout.gtsm$)}}function SearchOwnerInstallmentsComponent_ng_template_3_div_7_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",17),2&rf){const at_r10=ctx.$implicit;core.gc(\"value\",at_r10.id)(\"text\",at_r10.name)}}function SearchOwnerInstallmentsComponent_ng_template_3_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"single-selection-field\",15),core.Bc(2,SearchOwnerInstallmentsComponent_ng_template_3_div_7_field_option_2_Template,1,2,\"field-option\",16),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r4.i18n.transaction.account)(\"emptyOption\",ctx_r4.i18n.general.notApplied),core.xb(1),core.gc(\"ngForOf\",ctx_r4.data.accountTypes)}}function SearchOwnerInstallmentsComponent_ng_template_3_ng_container_8_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Lb(1,\"input-field\",24),core.Pb()),2&rf){const ctx_r11=core.Zb(3);core.xb(1),core.gc(\"mask\",ctx_r11.transactionNumberPattern)(\"label\",ctx_r11.i18n.transaction.number)}}function SearchOwnerInstallmentsComponent_ng_template_3_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",7),core.Qb(2,\"single-selection-field\",18),core.Lb(3,\"field-option\",19),core.Lb(4,\"field-option\",20),core.Pb(),core.Pb(),core.Bc(5,SearchOwnerInstallmentsComponent_ng_template_3_ng_container_8_div_5_Template,2,2,\"div\",9),core.Qb(6,\"div\",7),core.Lb(7,\"date-field\",21),core.Pb(),core.Qb(8,\"div\",7),core.Lb(9,\"date-field\",22),core.Pb(),core.Qb(10,\"div\",7),core.Lb(11,\"user-field\",23),core.Pb(),core.Nb()),2&rf){const ctx_r5=core.Zb(2);core.xb(2),core.gc(\"label\",ctx_r5.i18n.account.direction)(\"emptyOption\",ctx_r5.i18n.general.notApplied),core.xb(1),core.gc(\"text\",ctx_r5.i18n.account.incoming),core.xb(1),core.gc(\"text\",ctx_r5.i18n.account.outgoing),core.xb(1),core.gc(\"ngIf\",ctx_r5.hasTransactionNumber),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.beginDate),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.endDate),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.user)}}function SearchOwnerInstallmentsComponent_ng_template_3_mobile_result_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",25),core.Qb(1,\"div\",26),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r12=ctx.$implicit,ctx_r6=core.Zb(2);core.gc(\"date\",row_r12.date)(\"amount\",row_r12.amount)(\"avatarImage\",ctx_r6.bankingHelper.avatarImage(row_r12.transaction.related))(\"avatarIcon\",ctx_r6.bankingHelper.avatarIcon(row_r12.transaction.related))(\"currency\",ctx_r6.currencies.get(row_r12.currency)),core.xb(2),core.Fc(\" \",ctx_r6.bankingHelper.subjectName(row_r12.transaction.related),\" \")}}const search_owner_installments_component_c0=function(a0){return{\"pb-0\":a0}},search_owner_installments_component_c1=function(a0,a1){return{positive:a0,negative:a1}};function SearchOwnerInstallmentsComponent_ng_template_3_table_13_ng_container_12_Template(rf,ctx){if(1&rf){const _r16=core.Rb();core.Ob(0),core.Qb(1,\"tr\",31),core.Xb(\"click\",(function(){core.sc(_r16);const row_r14=ctx.$implicit,ctx_r15=core.Zb(3);return ctx_r15.router.navigate(ctx_r15.bankingHelper.transactionPath(row_r14.transaction))})),core.Qb(2,\"td\",32),core.ac(3,\"async\"),core.Lb(4,\"avatar\",33),core.Pb(),core.Qb(5,\"td\"),core.Qb(6,\"a\",34),core.Dc(7),core.ac(8,\"date\"),core.Pb(),core.Pb(),core.Qb(9,\"td\"),core.Qb(10,\"a\",34),core.Dc(11),core.Pb(),core.Pb(),core.Qb(12,\"td\"),core.Qb(13,\"a\",35),core.Dc(14),core.Pb(),core.Pb(),core.Qb(15,\"td\",29),core.Qb(16,\"a\",36),core.Dc(17),core.ac(18,\"currency\"),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r14=ctx.$implicit,ctx_r13=core.Zb(3);core.xb(2),core.gc(\"ngClass\",core.jc(20,search_owner_installments_component_c0,core.bc(3,12,ctx_r13.layout.xxs$))),core.xb(2),core.gc(\"image\",ctx_r13.bankingHelper.avatarImage(row_r14.transaction.related))(\"icon\",ctx_r13.bankingHelper.avatarIcon(row_r14.transaction.related)),core.xb(2),core.gc(\"routerLink\",ctx_r13.bankingHelper.transactionPath(row_r14.transaction)),core.xb(1),core.Fc(\" \",core.bc(8,14,row_r14.dueDate),\" \"),core.xb(3),core.gc(\"routerLink\",ctx_r13.bankingHelper.transactionPath(row_r14.transaction)),core.xb(1),core.Fc(\" \",ctx_r13.bankingHelper.subjectName(row_r14.transaction.related),\" \"),core.xb(2),core.gc(\"routerLink\",ctx_r13.bankingHelper.transactionPath(row_r14.transaction)),core.xb(1),core.Fc(\" \",ctx_r13.number(row_r14),\" \"),core.xb(2),core.gc(\"routerLink\",ctx_r13.bankingHelper.transactionPath(row_r14.transaction))(\"ngClass\",core.kc(22,search_owner_installments_component_c1,ctx_r13.format.isPositive(row_r14.amount),ctx_r13.format.isNegative(row_r14.amount))),core.xb(1),core.Fc(\" \",core.dc(18,16,row_r14.amount,ctx_r13.currencies.get(row_r14.transaction.currency),!0),\" \")}}function SearchOwnerInstallmentsComponent_ng_template_3_table_13_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",27),core.Qb(1,\"thead\"),core.Lb(2,\"th\",28),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Qb(9,\"th\",29),core.Dc(10),core.Pb(),core.Pb(),core.Qb(11,\"tbody\"),core.Bc(12,SearchOwnerInstallmentsComponent_ng_template_3_table_13_ng_container_12_Template,19,25,\"ng-container\",30),core.ac(13,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);var tmp_4_0;core.xb(4),core.Ec(ctx_r7.i18n.transaction.dueDate),core.xb(2),core.Ec(ctx_r7.i18n.transaction.fromTo),core.xb(2),core.Ec(ctx_r7.i18n.transaction.installmentNumber),core.xb(2),core.Ec(ctx_r7.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",null==(tmp_4_0=core.bc(13,5,ctx_r7.results$))?null:tmp_4_0.results)}}function SearchOwnerInstallmentsComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r18=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"form\",4),core.Qb(3,\"div\",5),core.Bc(4,SearchOwnerInstallmentsComponent_ng_template_3_ng_container_4_Template,5,3,\"ng-container\",6),core.Qb(5,\"div\",7),core.Lb(6,\"single-selection-field\",8),core.Pb(),core.Bc(7,SearchOwnerInstallmentsComponent_ng_template_3_div_7_Template,3,3,\"div\",9),core.Bc(8,SearchOwnerInstallmentsComponent_ng_template_3_ng_container_8_Template,12,8,\"ng-container\",6),core.ac(9,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Qb(10,\"results-layout\",10),core.Xb(\"update\",(function($event){return core.sc(_r18),core.Zb().update($event)})),core.ac(11,\"async\"),core.Bc(12,SearchOwnerInstallmentsComponent_ng_template_3_mobile_result_12_Template,3,6,\"mobile-result\",11),core.Bc(13,SearchOwnerInstallmentsComponent_ng_template_3_table_13_Template,14,7,\"table\",12),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.transaction.title.scheduled)(\"mobileHeading\",ctx_r2.i18n.transaction.mobileTitle.scheduled)(\"headingActions\",core.bc(1,12,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",ctx_r2.data.user&&!ctx_r2.self),core.xb(2),core.gc(\"label\",ctx_r2.i18n.general.status)(\"fieldOptions\",ctx_r2.statusOptions),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.data.accountTypes?null:ctx_r2.data.accountTypes.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(9,14,ctx_r2.moreFilters$)),core.xb(2),core.gc(\"results\",core.bc(11,16,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)}}let search_owner_installments_component_SearchOwnerInstallmentsComponent=(()=>{class SearchOwnerInstallmentsComponent extends base_search_page_component.a{constructor(injector,installmentsService,bankingHelper){super(injector),this.installmentsService=installmentsService,this.bankingHelper=bankingHelper,this.currencies=new Map}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.owner,this.self=this.authHelper.isSelf(this.param),this.stateManager.cache(\"data\",this.installmentsService.getInstallmentsDataForSearch({owner:this.param,fields:[\"user\",\"accountTypes\",\"query\"]})).subscribe(data=>{this.bankingHelper.preProcessPreselectedPeriods(data,this.form),(data.accountTypes||[]).forEach(at=>{const currency=at.currency;this.currencies.set(currency.id,currency),Object(helper.h)(currency.internalName)||this.currencies.set(currency.internalName,currency)}),this.data=data})}onDataInitialized(data){super.onDataInitialized(data);const transactionNumberPatterns=(data.accountTypes||[]).map(a=>{var _a;return null===(_a=a.currency)||void 0===_a?void 0:_a.transactionNumberPattern}).filter(p=>p).reduce((unique,item)=>unique.includes(item)?unique:[...unique,item],[]);this.hasTransactionNumber=transactionNumberPatterns.length>0,this.transactionNumberPattern=1===transactionNumberPatterns.length?transactionNumberPatterns[0]:null,this.headingActions=[this.moreFiltersAction]}getFormControlNames(){return[\"status\",\"accountType\",\"transferFilter\",\"user\",\"preselectedPeriod\",\"periodBegin\",\"periodEnd\",\"direction\",\"transactionNumber\"]}getInitialFormValue(data){const value=super.getInitialFormValue(data);return value.status=models.G.SCHEDULED,value}get statusOptions(){return Object.values(models.G).map(st=>({value:st,text:this.apiI18n.installmentStatus(st)}))}toSearchParams(value){const params=value;return params.owner=this.param,params.accountTypes=value.accountType?[value.accountType]:null,params.transferFilters=value.transferFilter?[value.transferFilter]:null,params.datePeriod=this.bankingHelper.resolveDatePeriod(value),params.statuses=[value.status],params}showMoreFiltersLabel(){return this.i18n.general.moreFilters}showLessFiltersLabel(){return this.i18n.general.lessFilters}resolveMenu(data){return this.menu.userMenu(data.user,shared_menu.b.SCHEDULED_PAYMENTS)}doSearch(filter){return this.installmentsService.searchInstallments$Response(filter)}get toLink(){return row=>this.bankingHelper.transactionPath(row.transaction)}number(row){return row.totalInstallments?this.i18n.transaction.installmentNumberOfTotal({number:row.number,total:row.totalInstallments}):String(row.number)}}return SearchOwnerInstallmentsComponent.ɵfac=function(t){return new(t||SearchOwnerInstallmentsComponent)(core.Kb(core.r),core.Kb(installments_service.a),core.Kb(banking_helper_service.a))},SearchOwnerInstallmentsComponent.ɵcmp=core.Eb({type:SearchOwnerInstallmentsComponent,selectors:[[\"search-owner-installments\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",3,\"formGroup\"],[1,\"row\"],[4,\"ngIf\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"status\",3,\"label\",\"fieldOptions\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[\"resultType\",\"list\",3,\"results\",\"toLink\",\"rendering$\",\"update\"],[\"forceSign\",\"\",3,\"date\",\"amount\",\"avatarImage\",\"avatarIcon\",\"currency\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"kind\",\"fieldView\",3,\"label\"],[3,\"user\"],[\"labelPosition\",\"side\",\"formControlName\",\"accountType\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"direction\",3,\"label\",\"emptyOption\"],[\"value\",\"credit\",3,\"text\"],[\"value\",\"debit\",3,\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodBegin\",\"minDate\",\"past5\",\"maxDate\",\"future5\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodEnd\",\"minDate\",\"past5\",\"maxDate\",\"future5\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"transactionNumber\",3,\"mask\",\"label\"],[\"forceSign\",\"\",3,\"date\",\"amount\",\"avatarImage\",\"avatarIcon\",\"currency\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"avatar\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[1,\"avatar\",3,\"ngClass\"],[3,\"image\",\"icon\"],[3,\"routerLink\"],[1,\"d-inline-block\",3,\"routerLink\"],[3,\"routerLink\",\"ngClass\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchOwnerInstallmentsComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchOwnerInstallmentsComponent_ng_template_3_Template,14,18,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,label_value_component.a,user_link_component.a,common.s,field_option_directive.a,date_field_component.a,user_field_component.a,input_field_component.a,mask_directive.a,mobile_result_component.a,common.q,avatar_component.a,router.h],pipes:[common.b,date_pipe.a,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchOwnerInstallmentsComponent})();var transactions_service=__webpack_require__(\"v6Le\");function SearchOwnerTransactionsComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchOwnerTransactionsComponent_ng_template_3_ng_container_3_div_4_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",7)}function SearchOwnerTransactionsComponent_ng_template_3_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",7),core.Qb(2,\"label-value\",14),core.Lb(3,\"user-link\",15),core.Pb(),core.Pb(),core.Bc(4,SearchOwnerTransactionsComponent_ng_template_3_ng_container_3_div_4_Template,1,0,\"div\",9),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.gc(\"label\",ctx_r3.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r3.data.user),core.xb(1),core.gc(\"ngIf\",ctx_r3.layout.gtsm$)}}function SearchOwnerTransactionsComponent_ng_template_3_div_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"single-selection-field\",16),core.Lb(2,\"field-option\",17),core.Lb(3,\"field-option\",18),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r4.i18n.transaction.direction)(\"emptyOption\",ctx_r4.i18n.general.all),core.xb(1),core.gc(\"text\",ctx_r4.i18n.transaction.sent),core.xb(1),core.gc(\"text\",ctx_r4.i18n.transaction.received)}}function SearchOwnerTransactionsComponent_ng_template_3_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Lb(1,\"input-field\",19),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.xb(1),core.gc(\"mask\",ctx_r5.transactionNumberPattern)(\"label\",ctx_r5.i18n.transaction.number)}}function SearchOwnerTransactionsComponent_ng_template_3_div_8_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",22),2&rf){const at_r15=ctx.$implicit;core.gc(\"value\",at_r15.id)(\"text\",at_r15.name)}}function SearchOwnerTransactionsComponent_ng_template_3_div_8_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"single-selection-field\",20),core.Bc(2,SearchOwnerTransactionsComponent_ng_template_3_div_8_field_option_2_Template,1,2,\"field-option\",21),core.Pb(),core.Pb()),2&rf){const ctx_r6=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r6.i18n.transaction.account)(\"emptyOption\",ctx_r6.i18n.general.notApplied),core.xb(1),core.gc(\"ngForOf\",ctx_r6.data.accountTypes)}}function SearchOwnerTransactionsComponent_ng_template_3_div_9_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",25),2&rf){const period_r17=ctx.$implicit;core.gc(\"id\",period_r17.id)(\"value\",period_r17)(\"text\",period_r17.name)}}function SearchOwnerTransactionsComponent_ng_template_3_div_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"single-selection-field\",23),core.Bc(2,SearchOwnerTransactionsComponent_ng_template_3_div_9_field_option_2_Template,1,3,\"field-option\",24),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r7.i18n.general.period),core.xb(1),core.gc(\"ngForOf\",ctx_r7.data.preselectedPeriods)}}function SearchOwnerTransactionsComponent_ng_template_3_ng_container_10_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"div\",26),core.Qb(2,\"div\",7),core.Lb(3,\"date-field\",27),core.Pb(),core.Nb()),2&rf){const ctx_r8=core.Zb(2);core.xb(3),core.gc(\"label\",ctx_r8.i18n.general.beginDate)}}function SearchOwnerTransactionsComponent_ng_template_3_div_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Lb(1,\"date-field\",28),core.Pb()),2&rf){const ctx_r9=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r9.i18n.general.endDate)}}function SearchOwnerTransactionsComponent_ng_template_3_div_14_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",31),2&rf){const filter_r19=ctx.$implicit;core.gc(\"value\",filter_r19)(\"id\",filter_r19.id)(\"text\",filter_r19.name)}}function SearchOwnerTransactionsComponent_ng_template_3_div_14_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"single-selection-field\",29),core.Bc(2,SearchOwnerTransactionsComponent_ng_template_3_div_14_field_option_2_Template,1,3,\"field-option\",30),core.Pb(),core.Pb()),2&rf){const ctx_r10=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r10.i18n.account.transferFilter)(\"emptyOption\",ctx_r10.i18n.general.notApplied),core.xb(1),core.gc(\"ngForOf\",ctx_r10.transferFilters$.value)}}function SearchOwnerTransactionsComponent_ng_template_3_mobile_result_20_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",32),core.Qb(1,\"div\",33),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r20=ctx.$implicit,ctx_r11=core.Zb(2);core.gc(\"avatarImage\",ctx_r11.bankingHelper.avatarImage(row_r20.related))(\"avatarIcon\",ctx_r11.bankingHelper.avatarIcon(row_r20.related))(\"date\",row_r20.date)(\"amount\",row_r20.amount)(\"currency\",ctx_r11.currencies.get(row_r20.currency)),core.xb(2),core.Fc(\" \",ctx_r11.bankingHelper.subjectName(row_r20.related),\" \")}}function SearchOwnerTransactionsComponent_ng_template_3_table_21_th_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"th\"),core.Dc(1),core.Pb()),2&rf){const ctx_r21=core.Zb(3);core.xb(1),core.Ec(ctx_r21.i18n.transaction.fromTo)}}function SearchOwnerTransactionsComponent_ng_template_3_table_21_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"th\"),core.Dc(2),core.Pb(),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Nb()),2&rf){const ctx_r22=core.Zb(3);core.xb(2),core.Ec(ctx_r22.i18n.transaction.senderOrReceiver),core.xb(2),core.Ec(ctx_r22.i18n.general.status)}}function SearchOwnerTransactionsComponent_ng_template_3_table_21_ng_container_12_td_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Dc(1),core.Pb()),2&rf){const row_r24=core.Zb().$implicit,ctx_r25=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r25.apiI18n.transactionStatus(row_r24),\" \")}}const search_owner_transactions_component_c0=function(a0,a1,a2){return{\"pb-0\":a0,positive:a1,negative:a2}};function SearchOwnerTransactionsComponent_ng_template_3_table_21_ng_container_12_Template(rf,ctx){if(1&rf){const _r28=core.Rb();core.Ob(0),core.Qb(1,\"tr\",38),core.Xb(\"click\",(function(){core.sc(_r28);const row_r24=ctx.$implicit,ctx_r27=core.Zb(3);return ctx_r27.router.navigate(ctx_r27.bankingHelper.transactionPath(row_r24))})),core.Qb(2,\"td\",35),core.Lb(3,\"avatar\",39),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.ac(6,\"date\"),core.Pb(),core.Qb(7,\"td\"),core.Dc(8),core.Pb(),core.Bc(9,SearchOwnerTransactionsComponent_ng_template_3_table_21_ng_container_12_td_9_Template,2,1,\"td\",6),core.Qb(10,\"td\"),core.Dc(11),core.Pb(),core.Qb(12,\"td\",40),core.ac(13,\"async\"),core.Dc(14),core.ac(15,\"currency\"),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r24=ctx.$implicit,ctx_r23=core.Zb(3);core.xb(3),core.gc(\"image\",ctx_r23.bankingHelper.avatarImage(row_r24.related))(\"icon\",ctx_r23.bankingHelper.avatarIcon(row_r24.related)),core.xb(2),core.Fc(\" \",core.bc(6,8,row_r24.date),\" \"),core.xb(3),core.Fc(\" \",ctx_r23.bankingHelper.subjectName(row_r24.related),\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r23.isPaymentRequest()),core.xb(2),core.Fc(\" \",ctx_r23.bankingHelper.scheduling(row_r24),\" \"),core.xb(1),core.gc(\"ngClass\",core.lc(16,search_owner_transactions_component_c0,core.bc(13,10,ctx_r23.layout.xxs$),ctx_r23.format.isPositive(row_r24.amount),ctx_r23.format.isNegative(row_r24.amount))),core.xb(2),core.Fc(\" \",core.dc(15,12,row_r24.amount,ctx_r23.currencies.get(row_r24.currency),!0),\" \")}}function SearchOwnerTransactionsComponent_ng_template_3_table_21_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",34),core.Qb(1,\"thead\"),core.Lb(2,\"th\",35),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Bc(5,SearchOwnerTransactionsComponent_ng_template_3_table_21_th_5_Template,2,1,\"th\",6),core.Bc(6,SearchOwnerTransactionsComponent_ng_template_3_table_21_ng_container_6_Template,5,2,\"ng-container\",6),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Qb(9,\"th\",36),core.Dc(10),core.Pb(),core.Pb(),core.Qb(11,\"tbody\"),core.Bc(12,SearchOwnerTransactionsComponent_ng_template_3_table_21_ng_container_12_Template,16,20,\"ng-container\",37),core.ac(13,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r12=core.Zb(2);var tmp_5_0;core.xb(4),core.Ec(ctx_r12.i18n.general.date),core.xb(1),core.gc(\"ngIf\",!ctx_r12.isPaymentRequest()),core.xb(1),core.gc(\"ngIf\",ctx_r12.isPaymentRequest()),core.xb(2),core.Ec(ctx_r12.i18n.transaction.scheduling),core.xb(2),core.Ec(ctx_r12.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",null==(tmp_5_0=core.bc(13,6,ctx_r12.results$))?null:tmp_5_0.results)}}function SearchOwnerTransactionsComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r30=core.Rb();core.Qb(0,\"page-content\",3),core.Qb(1,\"form\",4),core.Qb(2,\"div\",5),core.Bc(3,SearchOwnerTransactionsComponent_ng_template_3_ng_container_3_Template,5,3,\"ng-container\",6),core.Qb(4,\"div\",7),core.Lb(5,\"single-selection-field\",8),core.Pb(),core.Bc(6,SearchOwnerTransactionsComponent_ng_template_3_div_6_Template,4,4,\"div\",9),core.Bc(7,SearchOwnerTransactionsComponent_ng_template_3_div_7_Template,2,2,\"div\",9),core.Bc(8,SearchOwnerTransactionsComponent_ng_template_3_div_8_Template,3,3,\"div\",9),core.Bc(9,SearchOwnerTransactionsComponent_ng_template_3_div_9_Template,3,2,\"div\",9),core.Bc(10,SearchOwnerTransactionsComponent_ng_template_3_ng_container_10_Template,4,1,\"ng-container\",6),core.ac(11,\"async\"),core.Bc(12,SearchOwnerTransactionsComponent_ng_template_3_div_12_Template,2,1,\"div\",9),core.ac(13,\"async\"),core.Bc(14,SearchOwnerTransactionsComponent_ng_template_3_div_14_Template,3,3,\"div\",9),core.ac(15,\"async\"),core.Qb(16,\"div\",7),core.Lb(17,\"user-field\",10),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Qb(18,\"results-layout\",11),core.Xb(\"update\",(function($event){return core.sc(_r30),core.Zb().update($event)})),core.ac(19,\"async\"),core.Bc(20,SearchOwnerTransactionsComponent_ng_template_3_mobile_result_20_Template,3,6,\"mobile-result\",12),core.Bc(21,SearchOwnerTransactionsComponent_ng_template_3_table_21_Template,14,8,\"table\",13),core.Pb()}if(2&rf){const ctx_r2=core.Zb();var tmp_11_0=null,tmp_12_0=null;core.gc(\"heading\",ctx_r2.heading)(\"mobileHeading\",ctx_r2.mobileHeading),core.xb(1),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",ctx_r2.data.user&&!ctx_r2.self),core.xb(2),core.gc(\"label\",ctx_r2.i18n.general.status)(\"fieldOptions\",ctx_r2.statusOptions)(\"emptyOption\",ctx_r2.i18n.general.notApplied),core.xb(1),core.gc(\"ngIf\",ctx_r2.isPaymentRequest()),core.xb(1),core.gc(\"ngIf\",ctx_r2.hasTransactionNumber),core.xb(1),core.gc(\"ngIf\",!ctx_r2.isPaymentRequest()&&(null==ctx_r2.data.accountTypes?null:ctx_r2.data.accountTypes.length)>1),core.xb(1),core.gc(\"ngIf\",ctx_r2.usePreselectedPeriods&&(null==ctx_r2.data.preselectedPeriods?null:ctx_r2.data.preselectedPeriods.length)>0),core.xb(1),core.gc(\"ngIf\",!ctx_r2.usePreselectedPeriods||null==(null==(tmp_11_0=ctx_r2.form.value||core.bc(11,18,ctx_r2.form.valueChanges))||null==tmp_11_0.preselectedPeriod?null:tmp_11_0.preselectedPeriod.begin)),core.xb(2),core.gc(\"ngIf\",!ctx_r2.usePreselectedPeriods||null==(null==(tmp_12_0=ctx_r2.form.value||core.bc(13,20,ctx_r2.form.valueChanges))||null==tmp_12_0.preselectedPeriod?null:tmp_12_0.preselectedPeriod.end)),core.xb(2),core.gc(\"ngIf\",core.bc(15,22,ctx_r2.transferFilters$).length>0),core.xb(3),core.gc(\"label\",ctx_r2.i18n.general.user),core.xb(1),core.gc(\"results\",core.bc(19,24,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)}}let search_owner_transactions_component_SearchOwnerTransactionsComponent=(()=>{class SearchOwnerTransactionsComponent extends base_search_page_component.a{constructor(injector,transactionsService,bankingHelper){super(injector),this.transactionsService=transactionsService,this.bankingHelper=bankingHelper,this.transferFilters$=new BehaviorSubject.a([]),this.currencies=new Map,this.usePreselectedPeriods=!1}ngOnInit(){super.ngOnInit();const route=this.route.snapshot;switch(this.kind=route.data.kind,this.param=route.params.owner,this.self=this.authHelper.isSelf(this.param),this.kind){case\"authorized\":this.heading=this.i18n.transaction.title.authorizations,this.mobileHeading=this.i18n.transaction.mobileTitle.authorizations,this.usePreselectedPeriods=!0;break;case\"payment-request\":this.heading=this.i18n.transaction.title.paymentRequests,this.mobileHeading=this.i18n.transaction.mobileTitle.paymentRequests}this.stateManager.cache(\"data\",this.transactionsService.getTransactionsDataForSearch({owner:this.param,fields:[\"user\",\"accountTypes\",\"visibleKinds\",\"transferFilters\",...this.usePreselectedPeriods?[\"preselectedPeriods\"]:[],\"query\"]})).subscribe(data=>{this.bankingHelper.preProcessPreselectedPeriods(data,this.form),(data.accountTypes||[]).forEach(at=>{const currency=at.currency;this.currencies.set(currency.id,currency),Object(helper.h)(currency.internalName)||this.currencies.set(currency.internalName,currency)}),this.data=data}),this.addSub(this.form.get(\"accountType\").valueChanges.subscribe(at=>{this.form.patchValue({transferFilter:null},{emitEvent:!1});const filters=this.data.transferFilters.filter(tf=>tf.accountType.id===at);this.transferFilters$.next(filters)}))}onDataInitialized(data){super.onDataInitialized(data);const transactionNumberPatterns=Array.from(this.currencies.values()).map(c=>c.transactionNumberPattern).filter(p=>p).reduce((unique,item)=>unique.includes(item)?unique:[...unique,item],[]);this.hasTransactionNumber=transactionNumberPatterns.length>0,this.transactionNumberPattern=1===transactionNumberPatterns.length?transactionNumberPatterns[0]:null,this.headingActions=this.exportHelper.headingActions(data.exportFormats,f=>this.transactionsService.exportTransactions$Response(Object.assign({format:f.internalName},this.toSearchParams(this.form.value))))}isPaymentRequest(){return\"payment-request\"===this.kind}doSearch(value){return this.transactionsService.searchTransactions$Response(value)}getFormControlNames(){return[\"status\",\"accountType\",\"transferFilter\",\"user\",\"preselectedPeriod\",\"periodBegin\",\"periodEnd\",\"direction\",\"transactionNumber\"]}getInitialFormValue(data){const value=super.getInitialFormValue(data);switch(this.kind){case\"authorized\":value.status=models.yb.PENDING;break;case\"payment-request\":value.status=models.X.OPEN}return value}get statusOptions(){switch(this.kind){case\"authorized\":return Object.values(models.yb).map(st=>({value:st,text:this.apiI18n.authorizationStatus(st)}));case\"payment-request\":return Object.values(models.X).map(st=>({value:st,text:this.apiI18n.paymentRequestStatus(st)}))}}toSearchParams(value){const params=value;switch(params.owner=this.param,params.accountTypes=value.accountType?[value.accountType]:null,params.transferFilters=value.transferFilter?[value.transferFilter]:null,params.datePeriod=this.bankingHelper.resolveDatePeriod(value),this.kind){case\"authorized\":params.authorizationStatuses=[value.status],params.authorized=!0;break;case\"payment-request\":params.paymentRequestStatuses=[value.status],params.kinds=[models.zb.PAYMENT_REQUEST]}return params}resolveMenu(data){let menu;switch(this.kind){case\"authorized\":menu=shared_menu.b.AUTHORIZED_PAYMENTS;break;case\"payment-request\":menu=shared_menu.b.PAYMENT_REQUESTS}return this.menu.userMenu(data.user,menu)}get toLink(){return row=>this.bankingHelper.transactionPath(row)}}return SearchOwnerTransactionsComponent.ɵfac=function(t){return new(t||SearchOwnerTransactionsComponent)(core.Kb(core.r),core.Kb(transactions_service.a),core.Kb(banking_helper_service.a))},SearchOwnerTransactionsComponent.ɵcmp=core.Eb({type:SearchOwnerTransactionsComponent,selectors:[[\"search-owner-transactions\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\"],[1,\"filters-form\",3,\"formGroup\"],[1,\"row\"],[4,\"ngIf\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"status\",3,\"label\",\"fieldOptions\",\"emptyOption\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[\"resultType\",\"list\",3,\"results\",\"toLink\",\"rendering$\",\"update\"],[\"forceSign\",\"\",3,\"avatarImage\",\"avatarIcon\",\"date\",\"amount\",\"currency\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"kind\",\"fieldView\",3,\"label\"],[3,\"user\"],[\"labelPosition\",\"side\",\"formControlName\",\"direction\",3,\"label\",\"emptyOption\"],[\"value\",\"credit\",3,\"text\"],[\"value\",\"debit\",3,\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"transactionNumber\",3,\"mask\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"accountType\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"preselectedPeriod\",3,\"label\"],[3,\"id\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"value\",\"text\"],[1,\"w-100\",\"d-none\",\"d-sm-block\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodBegin\",\"minDate\",\"past5\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodEnd\",\"minDate\",\"past5\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"transferFilter\",3,\"label\",\"emptyOption\"],[3,\"value\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"id\",\"text\"],[\"forceSign\",\"\",3,\"avatarImage\",\"avatarIcon\",\"date\",\"amount\",\"currency\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"avatar\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[3,\"image\",\"icon\"],[1,\"amount\",3,\"ngClass\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchOwnerTransactionsComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchOwnerTransactionsComponent_ng_template_3_Template,22,26,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,user_field_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,label_value_component.a,user_link_component.a,field_option_directive.a,input_field_component.a,mask_directive.a,common.s,date_field_component.a,mobile_result_component.a,avatar_component.a,common.q],pipes:[common.b,date_pipe.a,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchOwnerTransactionsComponent})();function SearchTransactionsOverviewComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchTransactionsOverviewComponent_ng_template_3_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Lb(1,\"single-selection-field\",12),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r3.i18n.general.status)(\"fieldOptions\",ctx_r3.statusOptions)(\"emptyOption\",ctx_r3.i18n.general.notApplied)}}function SearchTransactionsOverviewComponent_ng_template_3_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",15),2&rf){const currency_r9=ctx.$implicit;core.gc(\"value\",currency_r9.id)(\"text\",currency_r9.name)}}function SearchTransactionsOverviewComponent_ng_template_3_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"single-selection-field\",13),core.Bc(2,SearchTransactionsOverviewComponent_ng_template_3_div_5_field_option_2_Template,1,2,\"field-option\",14),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r4.i18n.general.currency)(\"emptyOption\",ctx_r4.i18n.general.notApplied),core.xb(1),core.gc(\"ngForOf\",ctx_r4.currencies)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_1_field_option_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",21),2&rf){const at_r18=ctx.$implicit;core.gc(\"value\",at_r18.id)(\"internalName\",at_r18.internalName)(\"id\",at_r18.id)(\"text\",at_r18.name)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_1_field_option_7_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",21),2&rf){const at_r19=ctx.$implicit;core.gc(\"value\",at_r19.id)(\"internalName\",at_r19.internalName)(\"id\",at_r19.id)(\"text\",at_r19.name)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"div\",17),core.Qb(2,\"div\",11),core.Qb(3,\"single-selection-field\",18),core.Bc(4,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_1_field_option_4_Template,1,4,\"field-option\",19),core.Pb(),core.Pb(),core.Qb(5,\"div\",11),core.Qb(6,\"single-selection-field\",20),core.Bc(7,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_1_field_option_7_Template,1,4,\"field-option\",19),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r10=core.Zb(3);core.xb(3),core.gc(\"emptyOption\",ctx_r10.i18n.general.notApplied)(\"label\",ctx_r10.i18n.transaction.fromAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r10.accountTypes()),core.xb(2),core.gc(\"emptyOption\",ctx_r10.i18n.general.notApplied)(\"label\",ctx_r10.i18n.transaction.toAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r10.accountTypes())}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_div_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Lb(1,\"input-field\",22),core.Pb()),2&rf){const ctx_r11=core.Zb(3);core.xb(1),core.gc(\"mask\",ctx_r11.transactionNumberPattern)(\"label\",ctx_r11.i18n.transaction.number)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_div_1_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",25),2&rf){const period_r24=ctx.$implicit;core.gc(\"id\",period_r24.id)(\"value\",period_r24)(\"text\",period_r24.name)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"single-selection-field\",23),core.Bc(2,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_div_1_field_option_2_Template,1,3,\"field-option\",24),core.Pb(),core.Pb()),2&rf){const ctx_r20=core.Zb(4);core.xb(1),core.gc(\"label\",ctx_r20.i18n.general.period),core.xb(1),core.gc(\"ngForOf\",ctx_r20.data.preselectedPeriods)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"div\",17),core.Qb(2,\"div\",11),core.Lb(3,\"date-field\",26),core.Pb(),core.Nb()),2&rf){const ctx_r21=core.Zb(4);core.xb(3),core.gc(\"label\",ctx_r21.i18n.general.beginDate)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Lb(1,\"date-field\",27),core.Pb()),2&rf){const ctx_r22=core.Zb(4);core.xb(1),core.gc(\"label\",ctx_r22.i18n.general.endDate)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_div_1_Template,3,2,\"div\",6),core.Bc(2,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_ng_container_2_Template,4,1,\"ng-container\",7),core.ac(3,\"async\"),core.Bc(4,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_div_4_Template,2,1,\"div\",6),core.ac(5,\"async\"),core.Nb()),2&rf){const ctx_r12=core.Zb(3);var tmp_1_0=null,tmp_2_0=null;core.xb(1),core.gc(\"ngIf\",ctx_r12.usePreselectedPeriod&&(null==ctx_r12.data.preselectedPeriods?null:ctx_r12.data.preselectedPeriods.length)>0),core.xb(1),core.gc(\"ngIf\",!ctx_r12.usePreselectedPeriod||null==(null==(tmp_1_0=ctx_r12.form.value||core.bc(3,3,ctx_r12.form.valueChanges))||null==tmp_1_0.preselectedPeriod?null:tmp_1_0.preselectedPeriod.begin)),core.xb(2),core.gc(\"ngIf\",!ctx_r12.usePreselectedPeriod||null==(null==(tmp_2_0=ctx_r12.form.value||core.bc(5,5,ctx_r12.form.valueChanges))||null==tmp_2_0.preselectedPeriod?null:tmp_2_0.preselectedPeriod.end))}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_div_4_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",30),2&rf){const transferType_r26=ctx.$implicit;core.gc(\"value\",transferType_r26.id)(\"internalName\",transferType_r26.internalName)(\"id\",transferType_r26.id)(\"text\",transferType_r26.name)(\"category\",transferType_r26.from.name)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Qb(1,\"multi-selection-field\",28),core.Bc(2,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_div_4_field_option_2_Template,1,5,\"field-option\",29),core.Pb(),core.Pb()),2&rf){const ctx_r13=core.Zb(3);core.xb(1),core.gc(\"emptyLabel\",ctx_r13.i18n.general.notApplied)(\"label\",ctx_r13.i18n.account.transferFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r13.data.authorizablePaymentTypes)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",11),core.Lb(2,\"date-field\",31),core.Pb(),core.Qb(3,\"div\",11),core.Lb(4,\"date-field\",32),core.Pb(),core.Nb()),2&rf){const ctx_r14=core.Zb(3);core.xb(2),core.gc(\"label\",ctx_r14.i18n.general.expirationBeginDate),core.xb(2),core.gc(\"label\",ctx_r14.i18n.general.expirationEndDate)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_div_8_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Lb(1,\"user-field\",33),core.Pb()),2&rf){const ctx_r15=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r15.i18n.transaction.actionPerformedBy)}}function SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_1_Template,8,6,\"ng-container\",7),core.Bc(2,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_div_2_Template,2,2,\"div\",6),core.Bc(3,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_3_Template,6,7,\"ng-container\",7),core.Bc(4,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_div_4_Template,3,3,\"div\",6),core.Bc(5,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_ng_container_5_Template,5,2,\"ng-container\",7),core.Qb(6,\"div\",11),core.Lb(7,\"user-field\",16),core.Pb(),core.Bc(8,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_div_8_Template,2,1,\"div\",6),core.Nb()),2&rf){const ctx_r5=core.Zb(2);core.xb(1),core.gc(\"ngIf\",(ctx_r5.isAuthorized()||ctx_r5.isPaymentRequest())&&(null==ctx_r5.data.accountTypes?null:ctx_r5.data.accountTypes.length)>1),core.xb(1),core.gc(\"ngIf\",!ctx_r5.isMyAuth()&&ctx_r5.hasTransactionNumber),core.xb(1),core.gc(\"ngIf\",ctx_r5.usePeriod),core.xb(1),core.gc(\"ngIf\",ctx_r5.isMyAuth()&&(null==ctx_r5.data.authorizablePaymentTypes?null:ctx_r5.data.authorizablePaymentTypes.length)>0),core.xb(1),core.gc(\"ngIf\",ctx_r5.isPaymentRequest()),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.user),core.xb(1),core.gc(\"ngIf\",ctx_r5.isAuthorized())}}const search_transactions_overview_component_c0=function(a0,a1){return{from:a0,to:a1}};function SearchTransactionsOverviewComponent_ng_template_3_mobile_result_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",34),core.Qb(1,\"div\",35),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r27=ctx.$implicit,ctx_r6=core.Zb(2);core.gc(\"date\",row_r27.date)(\"amount\",row_r27.amount)(\"currency\",ctx_r6.currenciesByKey.get(row_r27.currency)),core.xb(2),core.Fc(\" \",ctx_r6.i18n.transaction.fromToText(core.kc(4,search_transactions_overview_component_c0,ctx_r6.bankingHelper.subjectName(ctx_r6.isPaymentRequest()?row_r27.to:row_r27.from),ctx_r6.bankingHelper.subjectName(ctx_r6.isPaymentRequest()?row_r27.from:row_r27.to))),\" \")}}function SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"th\"),core.Dc(2),core.Pb(),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Nb()),2&rf){const ctx_r28=core.Zb(3);core.xb(2),core.Ec(ctx_r28.i18n.transaction.from),core.xb(2),core.Ec(ctx_r28.i18n.transaction.to),core.xb(2),core.Ec(ctx_r28.i18n.transaction.scheduling)}}function SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"th\"),core.Dc(2),core.Pb(),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Qb(9,\"th\"),core.Dc(10),core.Pb(),core.Nb()),2&rf){const ctx_r29=core.Zb(3);core.xb(2),core.Ec(ctx_r29.i18n.transaction.number),core.xb(2),core.Ec(ctx_r29.i18n.transaction.sender),core.xb(2),core.Ec(ctx_r29.i18n.transaction.receiver),core.xb(2),core.Ec(ctx_r29.i18n.general.status),core.xb(2),core.Ec(ctx_r29.i18n.general.expirationDate)}}function SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_9_td_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Qb(1,\"a\",40),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r31=core.Zb().$implicit,ctx_r32=core.Zb(3);core.xb(1),core.gc(\"routerLink\",ctx_r32.bankingHelper.transactionPath(row_r31)),core.xb(1),core.Fc(\" \",row_r31.transactionNumber,\" \")}}function SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_9_ng_container_13_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"td\"),core.Qb(2,\"a\",42),core.Dc(3),core.Pb(),core.Pb(),core.Qb(4,\"td\"),core.Qb(5,\"a\",40),core.Dc(6),core.ac(7,\"date\"),core.Pb(),core.Pb(),core.Nb()),2&rf){const row_r31=core.Zb().$implicit,ctx_r33=core.Zb(3);core.xb(2),core.gc(\"routerLink\",ctx_r33.bankingHelper.transactionPath(row_r31)),core.xb(1),core.Fc(\" \",ctx_r33.apiI18n.transactionStatus(row_r31),\" \"),core.xb(2),core.gc(\"routerLink\",ctx_r33.bankingHelper.transactionPath(row_r31)),core.xb(1),core.Fc(\" \",core.bc(7,4,row_r31.expirationDate),\" \")}}function SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_9_td_14_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Qb(1,\"a\",42),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r31=core.Zb().$implicit,ctx_r34=core.Zb(3);core.xb(1),core.gc(\"routerLink\",ctx_r34.bankingHelper.transactionPath(row_r31)),core.xb(1),core.Fc(\" \",ctx_r34.bankingHelper.scheduling(row_r31),\" \")}}const search_transactions_overview_component_c1=function(a0){return{\"pb-0\":a0}};function SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_9_Template(rf,ctx){if(1&rf){const _r39=core.Rb();core.Ob(0),core.Qb(1,\"tr\",39),core.Xb(\"click\",(function(){core.sc(_r39);const row_r31=ctx.$implicit,ctx_r38=core.Zb(3);return ctx_r38.router.navigate(ctx_r38.bankingHelper.transactionPath(row_r31))})),core.Qb(2,\"td\"),core.Qb(3,\"a\",40),core.Dc(4),core.ac(5,\"date\"),core.Pb(),core.Pb(),core.Bc(6,SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_9_td_6_Template,3,2,\"td\",7),core.Qb(7,\"td\"),core.Qb(8,\"a\",40),core.Dc(9),core.Pb(),core.Pb(),core.Qb(10,\"td\"),core.Qb(11,\"a\",40),core.Dc(12),core.Pb(),core.Pb(),core.Bc(13,SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_9_ng_container_13_Template,8,6,\"ng-container\",7),core.Bc(14,SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_9_td_14_Template,3,2,\"td\",7),core.Qb(15,\"td\",41),core.ac(16,\"async\"),core.Qb(17,\"a\",40),core.Dc(18),core.ac(19,\"currency\"),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r31=ctx.$implicit,ctx_r30=core.Zb(3);core.xb(3),core.gc(\"routerLink\",ctx_r30.bankingHelper.transactionPath(row_r31)),core.xb(1),core.Fc(\" \",core.bc(5,12,row_r31.date),\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r30.isPaymentRequest()),core.xb(2),core.gc(\"routerLink\",ctx_r30.bankingHelper.transactionPath(row_r31)),core.xb(1),core.Fc(\" \",ctx_r30.bankingHelper.subjectName(ctx_r30.isPaymentRequest()?row_r31.to:row_r31.from),\" \"),core.xb(2),core.gc(\"routerLink\",ctx_r30.bankingHelper.transactionPath(row_r31)),core.xb(1),core.Fc(\" \",ctx_r30.bankingHelper.subjectName(ctx_r30.isPaymentRequest()?row_r31.from:row_r31.to),\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r30.isPaymentRequest()),core.xb(1),core.gc(\"ngIf\",!ctx_r30.isPaymentRequest()),core.xb(1),core.gc(\"ngClass\",core.jc(19,search_transactions_overview_component_c1,core.bc(16,14,ctx_r30.layout.xxs$))),core.xb(2),core.gc(\"routerLink\",ctx_r30.bankingHelper.transactionPath(row_r31)),core.xb(1),core.Fc(\" \",core.cc(19,16,row_r31.amount,ctx_r30.currenciesByKey.get(row_r31.currency)),\" \")}}function SearchTransactionsOverviewComponent_ng_template_3_table_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",36),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Bc(4,SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_4_Template,7,3,\"ng-container\",7),core.Bc(5,SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_5_Template,11,5,\"ng-container\",7),core.Qb(6,\"th\",37),core.Dc(7),core.Pb(),core.Pb(),core.Qb(8,\"tbody\"),core.Bc(9,SearchTransactionsOverviewComponent_ng_template_3_table_11_ng_container_9_Template,20,21,\"ng-container\",38),core.ac(10,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);var tmp_4_0;core.xb(3),core.Ec(ctx_r7.i18n.general.date),core.xb(1),core.gc(\"ngIf\",!ctx_r7.isPaymentRequest()),core.xb(1),core.gc(\"ngIf\",ctx_r7.isPaymentRequest()),core.xb(2),core.Ec(ctx_r7.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",null==(tmp_4_0=core.bc(10,5,ctx_r7.results$))?null:tmp_4_0.results)}}function SearchTransactionsOverviewComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r41=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"form\",4),core.Qb(3,\"div\",5),core.Bc(4,SearchTransactionsOverviewComponent_ng_template_3_div_4_Template,2,3,\"div\",6),core.Bc(5,SearchTransactionsOverviewComponent_ng_template_3_div_5_Template,3,3,\"div\",6),core.Bc(6,SearchTransactionsOverviewComponent_ng_template_3_ng_container_6_Template,9,7,\"ng-container\",7),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Qb(8,\"results-layout\",8),core.Xb(\"update\",(function($event){return core.sc(_r41),core.Zb().update($event)})),core.ac(9,\"async\"),core.Bc(10,SearchTransactionsOverviewComponent_ng_template_3_mobile_result_10_Template,3,7,\"mobile-result\",9),core.Bc(11,SearchTransactionsOverviewComponent_ng_template_3_table_11_Template,11,7,\"table\",10),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.heading)(\"mobileHeading\",ctx_r2.mobileHeading)(\"headingActions\",core.bc(1,10,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",(null==ctx_r2.statusOptions?null:ctx_r2.statusOptions.length)>0),core.xb(1),core.gc(\"ngIf\",!ctx_r2.isMyAuth()&&(null==ctx_r2.currencies?null:ctx_r2.currencies.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(7,12,ctx_r2.moreFilters$)),core.xb(2),core.gc(\"results\",core.bc(9,14,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)}}let search_transactions_overview_component_SearchTransactionsOverviewComponent=(()=>{class SearchTransactionsOverviewComponent extends base_search_page_component.a{constructor(injector,transactionsService,bankingHelper){super(injector),this.transactionsService=transactionsService,this.bankingHelper=bankingHelper,this.usePeriod=!0,this.usePreselectedPeriod=!0,this.currenciesByKey=new Map}ngOnInit(){switch(super.ngOnInit(),this.kind=this.route.snapshot.data.kind,this.kind){case\"authorized\":this.heading=this.i18n.transaction.title.authorizations,this.mobileHeading=this.i18n.transaction.mobileTitle.authorizations;break;case\"myAuth\":this.heading=this.i18n.transaction.title.pendingMyAuthorization,this.mobileHeading=this.i18n.transaction.mobileTitle.pendingMyAuthorization;break;case\"payment-request\":this.heading=this.i18n.transaction.title.paymentRequestsOverview,this.mobileHeading=this.i18n.transaction.mobileTitle.paymentRequestsOverview}this.stateManager.cache(\"data\",this.transactionsService.getTransactionsOverviewDataForSearch({fields:[\"user\",\"accountTypes\",...this.usePreselectedPeriod?[\"preselectedPeriods\"]:[],\"query\"],pendingMyAuthorization:\"myAuth\"===this.kind})).subscribe(data=>{this.usePeriod&&this.bankingHelper.preProcessPreselectedPeriods(data,this.form),this.data=data})}onDataInitialized(data){super.onDataInitialized(data),this.currencies=[...new Set(data.accountTypes.map(at=>at.currency))],this.currencies.sort((c1,c2)=>c1.name.localeCompare(c2.name)),this.currenciesByKey=new Map,this.currencies.forEach(c=>this.currenciesByKey.set(c.id,c));const transactionNumberPatterns=this.currencies.map(c=>c.transactionNumberPattern).filter(p=>p).reduce((unique,item)=>unique.includes(item)?unique:[...unique,item],[]);this.hasTransactionNumber=transactionNumberPatterns.length>0,this.transactionNumberPattern=1===transactionNumberPatterns.length?transactionNumberPatterns[0]:null,this.headingActions=[this.moreFiltersAction],this.exportHelper.headingActions(data.exportFormats,f=>this.transactionsService.exportTransactionsOverview$Response(Object.assign({format:f.internalName},this.toSearchParams(this.form.value)))).forEach(a=>this.headingActions.push(a)),this.addSub(this.form.controls.currency.valueChanges.subscribe(currencyId=>this.updateAccountTypes(currencyId)))}updateAccountTypes(currencyId){var _a,_b;const selectedFrom=this.form.controls.fromAccountTypes.value,selectedTo=this.form.controls.toAccountTypes.value;currencyId&&selectedFrom&&this.form.controls.fromAccountTypes.setValue((null===(_a=this.data.accountTypes.find(at=>at.id===selectedFrom).currency)||void 0===_a?void 0:_a.id)===currencyId?selectedFrom:null),currencyId&&selectedTo&&this.form.controls.toAccountTypes.setValue((null===(_b=this.data.accountTypes.find(at=>at.id===selectedTo).currency)||void 0===_b?void 0:_b.id)===currencyId?selectedTo:null)}doSearch(value){return this.transactionsService.searchTransactionsOverview$Response(value)}getFormControlNames(){return[\"status\",\"currency\",\"user\",\"preselectedPeriod\",\"periodBegin\",\"periodEnd\",\"transactionNumber\",\"expirationBegin\",\"expirationEnd\",\"transferTypes\",\"authorizationPerformedBy\",\"fromAccountTypes\",\"toAccountTypes\"]}getInitialFormValue(data){const value=super.getInitialFormValue(data);switch(this.kind){case\"authorized\":value.status=models.yb.PENDING;break;case\"payment-request\":value.status=models.X.OPEN}return value}get statusOptions(){switch(this.kind){case\"authorized\":return Object.values(models.yb).map(st=>({value:st,text:this.apiI18n.authorizationStatus(st)}));case\"payment-request\":return Object.values(models.X).map(st=>({value:st,text:this.apiI18n.paymentRequestStatus(st)}));case\"myAuth\":return null}}toSearchParams(value){const params=value;switch(params.currencies=value.currency?[value.currency]:[],this.usePeriod&&(params.datePeriod=this.bankingHelper.resolveDatePeriod(value)),this.isPaymentRequest()&&(params.paymentRequestExpiration=api_helper.a.dateRangeFilter(value.expirationBegin,value.expirationEnd)),this.kind){case\"authorized\":params.authorizationStatuses=[value.status],params.authorized=!0;break;case\"myAuth\":params.pendingMyAuthorization=!0;break;case\"payment-request\":params.paymentRequestStatuses=[value.status],params.kinds=[models.zb.PAYMENT_REQUEST]}return params}accountTypes(){const currencyId=this.form.controls.currency.value,types=this.data.accountTypes||[];return currencyId?types.filter(t=>t.currency.id===currencyId):types}isPaymentRequest(){return\"payment-request\"===this.kind}isMyAuth(){return\"myAuth\"===this.kind}isAuthorized(){return\"authorized\"===this.kind}showMoreFiltersLabel(){return this.i18n.general.moreFilters}showLessFiltersLabel(){return this.i18n.general.lessFilters}resolveMenu(data){let menu;switch(this.kind){case\"authorized\":menu=this.dataForUiHolder.role===models.kb.BROKER?shared_menu.b.BROKER_AUTHORIZED_PAYMENTS_OVERVIEW:shared_menu.b.AUTHORIZED_PAYMENTS_OVERVIEW;break;case\"myAuth\":menu=shared_menu.b.PENDING_MY_AUTHORIZATION;break;case\"payment-request\":menu=shared_menu.b.PAYMENT_REQUESTS_OVERVIEW}return this.menu.userMenu(data.user,menu)}get toLink(){return row=>this.bankingHelper.transactionPath(row)}}return SearchTransactionsOverviewComponent.ɵfac=function(t){return new(t||SearchTransactionsOverviewComponent)(core.Kb(core.r),core.Kb(transactions_service.a),core.Kb(banking_helper_service.a))},SearchTransactionsOverviewComponent.ɵcmp=core.Eb({type:SearchTransactionsOverviewComponent,selectors:[[\"search-transactions-overview\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",3,\"formGroup\"],[1,\"row\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[4,\"ngIf\"],[\"resultType\",\"list\",3,\"results\",\"toLink\",\"rendering$\",\"update\"],[3,\"date\",\"amount\",\"currency\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"status\",3,\"label\",\"fieldOptions\",\"emptyOption\"],[\"labelPosition\",\"side\",\"formControlName\",\"currency\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[1,\"w-100\",\"d-none\",\"d-sm-block\"],[\"labelPosition\",\"side\",\"formControlName\",\"fromAccountTypes\",3,\"emptyOption\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"labelPosition\",\"side\",\"formControlName\",\"toAccountTypes\",3,\"emptyOption\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"transactionNumber\",3,\"mask\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"preselectedPeriod\",3,\"label\"],[3,\"id\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodBegin\",\"minDate\",\"past5\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodEnd\",\"minDate\",\"past5\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"transferTypes\",3,\"emptyLabel\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"category\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"category\"],[\"labelPosition\",\"side\",\"formControlName\",\"expirationBegin\",\"minDate\",\"past100\",\"maxDate\",\"future100\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"expirationEnd\",\"minDate\",\"past100\",\"maxDate\",\"future100\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"authorizationPerformedBy\",3,\"label\"],[3,\"date\",\"amount\",\"currency\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[3,\"routerLink\"],[1,\"amount\",3,\"ngClass\"],[1,\"d-inline-block\",3,\"routerLink\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchTransactionsOverviewComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchTransactionsOverviewComponent_ng_template_3_Template,12,16,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.s,field_option_directive.a,user_field_component.a,input_field_component.a,mask_directive.a,date_field_component.a,multi_selection_field_component.a,mobile_result_component.a,router.h,common.q],pipes:[common.b,date_pipe.a,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchTransactionsOverviewComponent})();var base_view_page_component=__webpack_require__(\"Pm8L\"),date_time_pipe=__webpack_require__(\"/kmK\");function ViewAuthorizationHistoryComponent_page_content_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"label-value\",5),core.Dc(2),core.Pb(),core.Lb(3,\"hr\"),core.Nb()),2&rf){const ctx_r1=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r1.i18n.transaction.number),core.xb(1),core.Fc(\" \",ctx_r1.transaction.transactionNumber,\" \")}}function ViewAuthorizationHistoryComponent_page_content_2_ng_container_2_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function ViewAuthorizationHistoryComponent_page_content_2_ng_container_2_label_value_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.Pb()),2&rf){const auth_r3=core.Zb().$implicit,ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.general.performedBy),core.xb(1),core.Fc(\" \",auth_r3.by.display,\" \")}}function ViewAuthorizationHistoryComponent_page_content_2_ng_container_2_label_value_8_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",8),2&rf){const auth_r3=core.Zb().$implicit,ctx_r7=core.Zb(2);core.gc(\"label\",ctx_r7.i18n.general.comments)(\"value\",auth_r3.comments)}}function ViewAuthorizationHistoryComponent_page_content_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,ViewAuthorizationHistoryComponent_page_content_2_ng_container_2_hr_1_Template,1,0,\"hr\",3),core.Qb(2,\"label-value\",5),core.Dc(3),core.Pb(),core.Bc(4,ViewAuthorizationHistoryComponent_page_content_2_ng_container_2_label_value_4_Template,2,2,\"label-value\",6),core.Qb(5,\"label-value\",5),core.Dc(6),core.ac(7,\"dateTime\"),core.Pb(),core.Bc(8,ViewAuthorizationHistoryComponent_page_content_2_ng_container_2_label_value_8_Template,1,2,\"label-value\",7),core.Nb()),2&rf){const auth_r3=ctx.$implicit,first_r4=ctx.first,ctx_r2=core.Zb(2);core.xb(1),core.gc(\"ngIf\",!first_r4),core.xb(1),core.gc(\"label\",ctx_r2.i18n.general.action),core.xb(1),core.Fc(\" \",ctx_r2.actionLabel(auth_r3),\" \"),core.xb(1),core.gc(\"ngIf\",auth_r3.by),core.xb(1),core.gc(\"label\",ctx_r2.i18n.general.date),core.xb(1),core.Fc(\" \",core.bc(7,7,auth_r3.date),\" \"),core.xb(2),core.gc(\"ngIf\",auth_r3.comments)}}function ViewAuthorizationHistoryComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",2),core.Bc(1,ViewAuthorizationHistoryComponent_page_content_2_ng_container_1_Template,4,2,\"ng-container\",3),core.Bc(2,ViewAuthorizationHistoryComponent_page_content_2_ng_container_2_Template,9,9,\"ng-container\",4),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.transaction.title.authorizationHistory)(\"mobileHeading\",ctx_r0.i18n.transaction.mobileTitle.authorizationHistory),core.xb(1),core.gc(\"ngIf\",ctx_r0.transaction.transactionNumber),core.xb(1),core.gc(\"ngForOf\",ctx_r0.transaction.authorizations)}}let view_authorization_history_component_ViewAuthorizationHistoryComponent=(()=>{class ViewAuthorizationHistoryComponent extends base_view_page_component.a{constructor(injector,transactionsService){super(injector),this.transactionsService=transactionsService}get transaction(){return this.data}ngOnInit(){super.ngOnInit();const key=this.route.snapshot.paramMap.get(\"key\");this.addSub(this.transactionsService.viewTransaction({key:key,fields:[\"transactionNumber\",\"date\",\"amount\",\"kind\",\"type\",\"from\",\"to\",\"authorizations\"]}).subscribe(transaction=>{this.data=transaction}))}actionLabel(auth){return this.apiI18n.authorizationAction(auth.action)}resolveMenu(view){return this.menu.accountMenu(view.from,view.to)}}return ViewAuthorizationHistoryComponent.ɵfac=function(t){return new(t||ViewAuthorizationHistoryComponent)(core.Kb(core.r),core.Kb(transactions_service.a))},ViewAuthorizationHistoryComponent.ɵcmp=core.Eb({type:ViewAuthorizationHistoryComponent,selectors:[[\"view-authorization-history\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\",4,\"ngIf\"],[3,\"heading\",\"mobileHeading\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[3,\"label\"],[3,\"label\",4,\"ngIf\"],[\"valueFormat\",\"break\",3,\"label\",\"value\",4,\"ngIf\"],[\"valueFormat\",\"break\",3,\"label\",\"value\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewAuthorizationHistoryComponent_page_content_2_Template,3,4,\"page-content\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,common.s,label_value_component.a],pipes:[common.b,date_time_pipe.a],encapsulation:2,changeDetection:0}),ViewAuthorizationHistoryComponent})();var transfers_service=__webpack_require__(\"mK/S\"),pending_payments_service=__webpack_require__(\"w0j7\"),recurring_payments_service=__webpack_require__(\"Bp6V\"),scheduled_payments_service=__webpack_require__(\"0D+q\"),operation_helper_service=__webpack_require__(\"Ewue\"),login_service=__webpack_require__(\"R8pA\");function TransferDetailsComponent_label_value_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Dc(1),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.transaction.number),core.xb(1),core.Fc(\" \",ctx_r0.transfer.transactionNumber,\"\\n\")}}function TransferDetailsComponent_label_value_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Qb(1,\"a\",7),core.Dc(2),core.Pb(),core.Pb()),2&rf){const ctx_r1=core.Zb();core.gc(\"label\",ctx_r1.i18n.transaction.chargedBackBy),core.xb(1),core.gc(\"routerLink\",ctx_r1.path(ctx_r1.transfer.chargedBackBy)),core.xb(1),core.Fc(\" \",ctx_r1.transfer.chargedBackBy.display,\" \")}}function TransferDetailsComponent_label_value_8_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Qb(1,\"a\",7),core.Dc(2),core.Pb(),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"label\",ctx_r2.i18n.transaction.chargebackOf),core.xb(1),core.gc(\"routerLink\",ctx_r2.path(ctx_r2.transfer.chargebackOf)),core.xb(1),core.Fc(\" \",ctx_r2.transfer.chargebackOf.display,\" \")}}function TransferDetailsComponent_label_value_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Dc(1),core.Pb()),2&rf){const ctx_r3=core.Zb();core.gc(\"label\",ctx_r3.i18n.general.performedBy),core.xb(1),core.Fc(\" \",ctx_r3.transfer.transaction.by.display,\"\\n\")}}function TransferDetailsComponent_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Dc(1),core.Pb()),2&rf){const ctx_r4=core.Zb();core.gc(\"label\",ctx_r4.i18n.transaction.receivedBy),core.xb(1),core.Fc(\" \",ctx_r4.transfer.transaction.receivedBy.display,\"\\n\")}}function TransferDetailsComponent_label_value_17_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Dc(1),core.Pb()),2&rf){const ctx_r5=core.Zb();core.gc(\"label\",ctx_r5.i18n.transaction.channel),core.xb(1),core.Fc(\" \",ctx_r5.transfer.transaction.channel.name,\"\\n\")}}function TransferDetailsComponent_custom_field_value_18_Template(rf,ctx){1&rf&&core.Lb(0,\"custom-field-value\",8),2&rf&&core.gc(\"fieldValue\",ctx.$implicit)}function TransferDetailsComponent_label_value_19_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Dc(1),core.Pb()),2&rf){const status_r13=ctx.$implicit;core.gc(\"label\",status_r13.flow.name),core.xb(1),core.Fc(\" \",status_r13.name,\"\\n\")}}function TransferDetailsComponent_label_value_20_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",9),2&rf){const ctx_r8=core.Zb();core.gc(\"label\",ctx_r8.i18n.transaction.authorizationComments)(\"value\",ctx_r8.lastAuthComment)}}function TransferDetailsComponent_label_value_21_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",9),2&rf){const ctx_r9=core.Zb();core.gc(\"label\",ctx_r9.i18n.general.description)(\"value\",ctx_r9.transfer.transaction.description)}}function TransferDetailsComponent_ng_container_22_label_value_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Dc(1),core.Pb()),2&rf){const ctx_r14=core.Zb(2);core.gc(\"label\",ctx_r14.i18n.transaction.number),core.xb(1),core.Fc(\" \",ctx_r14.transfer.parent.transactionNumber,\" \")}}function TransferDetailsComponent_ng_container_22_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",10),core.Dc(2),core.ac(3,\"async\"),core.Pb(),core.Bc(4,TransferDetailsComponent_ng_container_22_label_value_4_Template,2,2,\"label-value\",0),core.Qb(5,\"label-value\",1),core.Dc(6),core.ac(7,\"dateTime\"),core.Pb(),core.Qb(8,\"label-value\",1),core.Dc(9),core.ac(10,\"currency\"),core.Pb(),core.Qb(11,\"label-value\",1),core.Lb(12,\"user-link\",2),core.Pb(),core.Qb(13,\"label-value\",1),core.Lb(14,\"user-link\",2),core.Pb(),core.Qb(15,\"label-value\",1),core.Dc(16),core.Pb(),core.Qb(17,\"actions\"),core.Qb(18,\"a\",11),core.Dc(19),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r10=core.Zb();core.xb(2),core.Ec(core.bc(3,14,ctx_r10.layout.gtxs$)?ctx_r10.i18n.transaction.title.parentTransfer:ctx_r10.i18n.transaction.mobileTitle.parentTransfer),core.xb(2),core.gc(\"ngIf\",ctx_r10.transfer.parent.transactionNumber),core.xb(1),core.gc(\"label\",ctx_r10.i18n.general.date),core.xb(1),core.Fc(\" \",core.bc(7,16,ctx_r10.transfer.parent.date),\" \"),core.xb(2),core.gc(\"label\",ctx_r10.i18n.transaction.amount),core.xb(1),core.Fc(\" \",core.cc(10,18,ctx_r10.transfer.parent.amount,ctx_r10.transfer.parent.currency),\" \"),core.xb(2),core.gc(\"label\",ctx_r10.i18n.transaction.from),core.xb(1),core.gc(\"account\",ctx_r10.transfer.parent.from),core.xb(1),core.gc(\"label\",ctx_r10.i18n.transaction.to),core.xb(1),core.gc(\"account\",ctx_r10.transfer.parent.to),core.xb(1),core.gc(\"label\",ctx_r10.i18n.transaction.type),core.xb(1),core.Fc(\" \",ctx_r10.transfer.parent.type.name,\" \"),core.xb(2),core.gc(\"routerLink\",ctx_r10.path(ctx_r10.transfer.parent)),core.xb(1),core.Fc(\" \",ctx_r10.i18n.transaction.viewThisTransfer,\" \")}}function TransferDetailsComponent_ng_container_23_mobile_result_5_div_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.Lb(2,\"user-link\",2),core.Pb()),2&rf){const row_r17=core.Zb().$implicit,ctx_r18=core.Zb(2);core.xb(1),core.Fc(\" \",ctx_r18.i18n.transaction.from,\" \"),core.xb(1),core.gc(\"account\",row_r17.from)}}function TransferDetailsComponent_ng_container_23_mobile_result_5_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Nb()),2&rf){const ctx_r19=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r19.i18n.transaction.to,\"\")}}function TransferDetailsComponent_ng_container_23_mobile_result_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",16),core.Qb(1,\"div\",17),core.Bc(2,TransferDetailsComponent_ng_container_23_mobile_result_5_div_2_Template,3,2,\"div\",6),core.Qb(3,\"div\"),core.Bc(4,TransferDetailsComponent_ng_container_23_mobile_result_5_ng_container_4_Template,2,1,\"ng-container\",6),core.Lb(5,\"user-link\",2),core.Pb(),core.Pb(),core.Pb()),2&rf){const row_r17=ctx.$implicit,ctx_r15=core.Zb(2);core.gc(\"date\",row_r17.date)(\"amount\",((null==row_r17.from.user?null:row_r17.from.user.id)===(null==ctx_r15.login.user?null:ctx_r15.login.user.id)?\"-\":\"\")+row_r17.amount)(\"amountColor\",(null==row_r17.from.user?null:row_r17.from.user.id)===(null==ctx_r15.login.user?null:ctx_r15.login.user.id))(\"currency\",row_r17.currency),core.xb(2),core.gc(\"ngIf\",(null==row_r17.from.user?null:row_r17.from.user.id)!==(null==ctx_r15.login.user?null:ctx_r15.login.user.id)),core.xb(2),core.gc(\"ngIf\",(null==row_r17.from.user?null:row_r17.from.user.id)!==(null==ctx_r15.login.user?null:ctx_r15.login.user.id)),core.xb(1),core.gc(\"account\",row_r17.to)}}function TransferDetailsComponent_ng_container_23_table_6_tr_11_Template(rf,ctx){if(1&rf){const _r24=core.Rb();core.Qb(0,\"tr\",21),core.Xb(\"click\",(function(){core.sc(_r24);const row_r22=ctx.$implicit,ctx_r23=core.Zb(3);return ctx_r23.router.navigate(ctx_r23.path(row_r22))})),core.Qb(1,\"td\"),core.Qb(2,\"a\",7),core.Dc(3),core.ac(4,\"date\"),core.Pb(),core.Pb(),core.Qb(5,\"td\"),core.Qb(6,\"a\",7),core.Lb(7,\"user-link\",2),core.Pb(),core.Pb(),core.Qb(8,\"td\"),core.Qb(9,\"a\",7),core.Lb(10,\"user-link\",2),core.Pb(),core.Pb(),core.Qb(11,\"td\",19),core.Qb(12,\"a\",7),core.Dc(13),core.ac(14,\"currency\"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const row_r22=ctx.$implicit,ctx_r21=core.Zb(3);core.xb(2),core.gc(\"routerLink\",ctx_r21.path(row_r22)),core.xb(1),core.Fc(\" \",core.bc(4,8,row_r22.date),\" \"),core.xb(3),core.gc(\"routerLink\",ctx_r21.path(row_r22)),core.xb(1),core.gc(\"account\",row_r22.from),core.xb(2),core.gc(\"routerLink\",ctx_r21.path(row_r22)),core.xb(1),core.gc(\"account\",row_r22.to),core.xb(2),core.gc(\"routerLink\",ctx_r21.path(row_r22)),core.xb(1),core.Fc(\" \",core.cc(14,10,row_r22.amount,row_r22.currency),\" \")}}function TransferDetailsComponent_ng_container_23_table_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",18),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\",19),core.Dc(9),core.Pb(),core.Pb(),core.Qb(10,\"tbody\"),core.Bc(11,TransferDetailsComponent_ng_container_23_table_6_tr_11_Template,15,13,\"tr\",20),core.Pb(),core.Pb()),2&rf){const ctx_r16=core.Zb(2);core.xb(3),core.Ec(ctx_r16.i18n.general.date),core.xb(2),core.Ec(ctx_r16.i18n.transaction.from),core.xb(2),core.Ec(ctx_r16.i18n.transaction.to),core.xb(2),core.Ec(ctx_r16.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",ctx_r16.transfer.children)}}function TransferDetailsComponent_ng_container_23_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",12),core.Dc(2),core.ac(3,\"async\"),core.Pb(),core.Qb(4,\"results-layout\",13),core.Bc(5,TransferDetailsComponent_ng_container_23_mobile_result_5_Template,6,7,\"mobile-result\",14),core.Bc(6,TransferDetailsComponent_ng_container_23_table_6_Template,12,5,\"table\",15),core.Pb(),core.Nb()),2&rf){const ctx_r11=core.Zb();core.xb(2),core.Ec(core.bc(3,3,ctx_r11.layout.gtxs$)?ctx_r11.i18n.transaction.title.childTransfers:ctx_r11.i18n.transaction.mobileTitle.childTransfers),core.xb(2),core.gc(\"results\",ctx_r11.transfer.children)(\"toLink\",ctx_r11.toLink)}}let transfer_details_component_TransferDetailsComponent=(()=>{class TransferDetailsComponent extends base_component.a{constructor(injector,login,bankingHelper){super(injector),this.login=login,this.bankingHelper=bankingHelper}ngOnInit(){super.ngOnInit();const transaction=this.transfer.transaction||{};Object(helper.h)(transaction.authorizations)||(this.lastAuthComment=transaction.authorizations[0].comments),this.hasAdditionalData=!Object(helper.h)(this.lastAuthComment)||!!this.transfer.parent||!Object(helper.h)(this.transfer.children)}path(transfer){return[\"/banking\",\"transfer\",this.bankingHelper.transactionNumberOrId(transfer)]}get toLink(){return transfer=>this.path(transfer)}}return TransferDetailsComponent.ɵfac=function(t){return new(t||TransferDetailsComponent)(core.Kb(core.r),core.Kb(login_service.a),core.Kb(banking_helper_service.a))},TransferDetailsComponent.ɵcmp=core.Eb({type:TransferDetailsComponent,selectors:[[\"transfer-details\"]],inputs:{transfer:\"transfer\",headingActions:\"headingActions\"},features:[core.ub],decls:24,vars:27,consts:[[3,\"label\",4,\"ngIf\"],[3,\"label\"],[3,\"account\"],[3,\"fieldValue\",4,\"ngFor\",\"ngForOf\"],[3,\"label\",4,\"ngFor\",\"ngForOf\"],[\"valueFormat\",\"break\",3,\"label\",\"value\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"routerLink\"],[3,\"fieldValue\"],[\"valueFormat\",\"break\",3,\"label\",\"value\"],[1,\"mt-4\"],[1,\"btn\",\"btn-outline-primary\",3,\"routerLink\"],[1,\"mt-4\",\"mb-0\"],[3,\"results\",\"toLink\"],[3,\"date\",\"amount\",\"amountColor\",\"currency\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[3,\"date\",\"amount\",\"amountColor\",\"currency\"],[1,\"cell-text\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"text-right\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Bc(0,TransferDetailsComponent_label_value_0_Template,2,2,\"label-value\",0),core.Qb(1,\"label-value\",1),core.Dc(2),core.ac(3,\"dateTime\"),core.Pb(),core.Qb(4,\"label-value\",1),core.Dc(5),core.ac(6,\"currency\"),core.Pb(),core.Bc(7,TransferDetailsComponent_label_value_7_Template,3,3,\"label-value\",0),core.Bc(8,TransferDetailsComponent_label_value_8_Template,3,3,\"label-value\",0),core.Bc(9,TransferDetailsComponent_label_value_9_Template,2,2,\"label-value\",0),core.Bc(10,TransferDetailsComponent_label_value_10_Template,2,2,\"label-value\",0),core.Qb(11,\"label-value\",1),core.Lb(12,\"user-link\",2),core.Pb(),core.Qb(13,\"label-value\",1),core.Lb(14,\"user-link\",2),core.Pb(),core.Qb(15,\"label-value\",1),core.Dc(16),core.Pb(),core.Bc(17,TransferDetailsComponent_label_value_17_Template,2,2,\"label-value\",0),core.Bc(18,TransferDetailsComponent_custom_field_value_18_Template,1,1,\"custom-field-value\",3),core.Bc(19,TransferDetailsComponent_label_value_19_Template,2,2,\"label-value\",4),core.Bc(20,TransferDetailsComponent_label_value_20_Template,1,2,\"label-value\",5),core.Bc(21,TransferDetailsComponent_label_value_21_Template,1,2,\"label-value\",5),core.Bc(22,TransferDetailsComponent_ng_container_22_Template,20,21,\"ng-container\",6),core.Bc(23,TransferDetailsComponent_ng_container_23_Template,7,5,\"ng-container\",6)),2&rf&&(core.gc(\"ngIf\",ctx.transfer.transactionNumber),core.xb(1),core.gc(\"label\",ctx.i18n.general.date),core.xb(1),core.Fc(\" \",core.bc(3,22,ctx.transfer.date),\"\\n\"),core.xb(2),core.gc(\"label\",ctx.i18n.transaction.amount),core.xb(1),core.Fc(\" \",core.cc(6,24,ctx.transfer.amount,ctx.transfer.currency),\"\\n\"),core.xb(2),core.gc(\"ngIf\",ctx.transfer.chargedBackBy),core.xb(1),core.gc(\"ngIf\",ctx.transfer.chargebackOf),core.xb(1),core.gc(\"ngIf\",null==ctx.transfer.transaction?null:ctx.transfer.transaction.by),core.xb(1),core.gc(\"ngIf\",null==ctx.transfer.transaction?null:ctx.transfer.transaction.receivedBy),core.xb(1),core.gc(\"label\",ctx.i18n.transaction.from),core.xb(1),core.gc(\"account\",ctx.transfer.from),core.xb(1),core.gc(\"label\",ctx.i18n.transaction.to),core.xb(1),core.gc(\"account\",ctx.transfer.to),core.xb(1),core.gc(\"label\",ctx.i18n.transaction.type),core.xb(1),core.Fc(\" \",ctx.transfer.type.name,\"\\n\"),core.xb(1),core.gc(\"ngIf\",null==ctx.transfer.transaction?null:ctx.transfer.transaction.channel),core.xb(1),core.gc(\"ngForOf\",null==ctx.transfer.transaction?null:ctx.transfer.transaction.customValues),core.xb(1),core.gc(\"ngForOf\",ctx.transfer.statuses),core.xb(1),core.gc(\"ngIf\",ctx.lastAuthComment),core.xb(1),core.gc(\"ngIf\",null==ctx.transfer.transaction?null:ctx.transfer.transaction.description),core.xb(1),core.gc(\"ngIf\",ctx.transfer.parent),core.xb(1),core.gc(\"ngIf\",(null==ctx.transfer.children?null:ctx.transfer.children.length)>0))},directives:[common.t,label_value_component.a,user_link_component.a,common.s,router.h,custom_field_value_component.a,actions_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a],pipes:[date_time_pipe.a,currency_pipe.a,common.b,date_pipe.a],encapsulation:2,changeDetection:0}),TransferDetailsComponent})();var maybe_link_component=__webpack_require__(\"Wpnw\");function ViewTransactionComponent_page_content_2_transfer_details_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"transfer-details\",5),2&rf){const ctx_r3=core.Zb(2);core.gc(\"transfer\",ctx_r3.transaction.transfer)}}function ViewTransactionComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Bc(2,ViewTransactionComponent_page_content_2_transfer_details_2_Template,1,1,\"transfer-details\",4),core.Pb()),2&rf){const ctx_r0=core.Zb(),_r1=core.qc(4);core.gc(\"heading\",ctx_r0.title)(\"mobileHeading\",ctx_r0.mobileTitle)(\"headingActions\",core.bc(1,5,ctx_r0.headingActions$)),core.xb(2),core.gc(\"ngIf\",ctx_r0.transaction.transfer)(\"ngIfElse\",_r1)}}function ViewTransactionComponent_ng_template_3_label_value_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.gc(\"label\",ctx_r4.i18n.transaction.number),core.xb(1),core.Fc(\" \",ctx_r4.transaction.transactionNumber,\" \")}}function ViewTransactionComponent_ng_template_3_label_value_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.ac(2,\"dateTime\"),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.general.expirationDate),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r5.transaction.expirationDate),\" \")}}function ViewTransactionComponent_ng_template_3_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.ac(2,\"dateTime\"),core.Pb()),2&rf){const ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.transaction.processDate),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r6.transaction.processDate),\" \")}}function ViewTransactionComponent_ng_template_3_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.ac(2,\"currency\"),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.gc(\"label\",ctx_r7.i18n.transaction.dueAmount),core.xb(1),core.Fc(\" \",core.cc(2,2,ctx_r7.transaction.dueAmount,ctx_r7.transaction.currency),\" \")}}function ViewTransactionComponent_ng_template_3_label_value_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.Pb()),2&rf){const ctx_r8=core.Zb(2);core.gc(\"label\",ctx_r8.i18n.general.performedBy),core.xb(1),core.Fc(\" \",ctx_r8.transaction.by.display,\" \")}}function ViewTransactionComponent_ng_template_3_label_value_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.Pb()),2&rf){const ctx_r9=core.Zb(2);core.gc(\"label\",ctx_r9.i18n.transaction.receivedBy),core.xb(1),core.Fc(\" \",ctx_r9.transaction.receivedBy.display,\" \")}}function ViewTransactionComponent_ng_template_3_user_link_14_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-link\",15),2&rf){const ctx_r10=core.Zb(2);core.gc(\"user\",ctx_r10.transaction.fromUser)}}function ViewTransactionComponent_ng_template_3_ng_template_15_Template(rf,ctx){if(1&rf&&core.Dc(0),2&rf){const ctx_r12=core.Zb(2);core.Fc(\" \",ctx_r12.transaction.type.from.name,\" \")}}function ViewTransactionComponent_ng_template_3_user_link_18_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-link\",15),2&rf){const ctx_r13=core.Zb(2);core.gc(\"user\",ctx_r13.transaction.toUser)}}function ViewTransactionComponent_ng_template_3_ng_template_19_Template(rf,ctx){if(1&rf&&core.Dc(0),2&rf){const ctx_r15=core.Zb(2);core.Fc(\" \",ctx_r15.transaction.type.to.name,\" \")}}function ViewTransactionComponent_ng_template_3_custom_field_value_23_Template(rf,ctx){1&rf&&core.Lb(0,\"custom-field-value\",16),2&rf&&core.gc(\"fieldValue\",ctx.$implicit)}function ViewTransactionComponent_ng_template_3_label_value_24_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.Pb()),2&rf){const ctx_r17=core.Zb(2);core.gc(\"label\",ctx_r17.i18n.transaction.channel),core.xb(1),core.Fc(\" \",ctx_r17.transaction.channel.name,\" \")}}function ViewTransactionComponent_ng_template_3_label_value_25_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.ac(2,\"date\"),core.Pb()),2&rf){const ctx_r18=core.Zb(2);core.gc(\"label\",ctx_r18.i18n.transaction.dueDate),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r18.transaction.installments[0].dueDate),\" \")}}function ViewTransactionComponent_ng_template_3_label_value_26_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.ac(2,\"date\"),core.Pb()),2&rf){const ctx_r19=core.Zb(2);core.gc(\"label\",ctx_r19.i18n.transaction.nextOccurrence),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r19.transaction.nextOccurrenceDate),\" \")}}function ViewTransactionComponent_ng_template_3_label_value_27_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.Pb()),2&rf){const ctx_r20=core.Zb(2);core.gc(\"label\",ctx_r20.i18n.transaction.occurrencesCount),core.xb(1),core.Fc(\" \",ctx_r20.transaction.occurrencesCount,\" \")}}function ViewTransactionComponent_ng_template_3_label_value_28_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",17),2&rf){const ctx_r21=core.Zb(2);core.gc(\"label\",ctx_r21.i18n.transaction.authorizationComments)(\"value\",ctx_r21.lastAuthComment)}}function ViewTransactionComponent_ng_template_3_label_value_29_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",17),2&rf){const ctx_r22=core.Zb(2);core.gc(\"label\",ctx_r22.i18n.general.description)(\"value\",ctx_r22.transaction.description)}}function ViewTransactionComponent_ng_template_3_label_value_30_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",17),2&rf){const ctx_r23=core.Zb(2);core.gc(\"label\",ctx_r23.i18n.general.comments)(\"value\",ctx_r23.transaction.comments)}}function ViewTransactionComponent_ng_template_3_ng_container_31_thead_4_th_9_Template(rf,ctx){1&rf&&core.Lb(0,\"th\",23)}function ViewTransactionComponent_ng_template_3_ng_container_31_thead_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"thead\"),core.Qb(1,\"th\"),core.Dc(2),core.Pb(),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\",21),core.Dc(8),core.Pb(),core.Bc(9,ViewTransactionComponent_ng_template_3_ng_container_31_thead_4_th_9_Template,1,0,\"th\",22),core.Pb()),2&rf){const ctx_r27=core.Zb(3);core.xb(2),core.Ec(ctx_r27.i18n.transaction.installmentNumber),core.xb(2),core.Ec(ctx_r27.i18n.transaction.dueDate),core.xb(2),core.Ec(ctx_r27.i18n.general.status),core.xb(2),core.Ec(ctx_r27.i18n.transaction.amount),core.xb(1),core.gc(\"ngIf\",ctx_r27.hasActions)}}function ViewTransactionComponent_ng_template_3_ng_container_31_tr_7_td_15_button_1_Template(rf,ctx){if(1&rf){const _r36=core.Rb();core.Qb(0,\"button\",31),core.Xb(\"click\",(function(){core.sc(_r36);const installment_r30=core.Zb(2).$implicit;return core.Zb(3).processInstallment(installment_r30)})),core.Lb(1,\"icon\",32),core.Pb()}if(2&rf){const ctx_r32=core.Zb(5);core.gc(\"tooltip\",ctx_r32.i18n.transaction.processInstallment)}}const view_transaction_component_c0=function(a0){return{\"ml-2\":a0}};function ViewTransactionComponent_ng_template_3_ng_container_31_tr_7_td_15_button_2_Template(rf,ctx){if(1&rf){const _r39=core.Rb();core.Qb(0,\"button\",33),core.Xb(\"click\",(function(){core.sc(_r39);const installment_r30=core.Zb(2).$implicit;return core.Zb(3).settleInstallment(installment_r30)})),core.Lb(1,\"icon\",34),core.Pb()}if(2&rf){const installment_r30=core.Zb(2).$implicit,ctx_r33=core.Zb(3);core.gc(\"tooltip\",ctx_r33.i18n.transaction.settleInstallment)(\"ngClass\",core.jc(2,view_transaction_component_c0,installment_r30.canProcess))}}function ViewTransactionComponent_ng_template_3_ng_container_31_tr_7_td_15_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\",28),core.Bc(1,ViewTransactionComponent_ng_template_3_ng_container_31_tr_7_td_15_button_1_Template,2,1,\"button\",29),core.Bc(2,ViewTransactionComponent_ng_template_3_ng_container_31_tr_7_td_15_button_2_Template,2,4,\"button\",30),core.Pb()),2&rf){const installment_r30=core.Zb().$implicit;core.xb(1),core.gc(\"ngIf\",installment_r30.canProcess),core.xb(1),core.gc(\"ngIf\",installment_r30.canSettle)}}const view_transaction_component_c1=function(a0){return{\"cursor-pointer\":a0}};function ViewTransactionComponent_ng_template_3_ng_container_31_tr_7_Template(rf,ctx){if(1&rf){const _r43=core.Rb();core.Qb(0,\"tr\",24),core.Xb(\"click\",(function(){core.sc(_r43);const installment_r30=ctx.$implicit,ctx_r42=core.Zb(3);return ctx_r42.path(installment_r30)?ctx_r42.router.navigate(ctx_r42.path(installment_r30)):null})),core.Qb(1,\"td\"),core.Qb(2,\"maybe-link\",25),core.Dc(3),core.Pb(),core.Pb(),core.Qb(4,\"td\"),core.Qb(5,\"maybe-link\",25),core.Dc(6),core.ac(7,\"date\"),core.Pb(),core.Pb(),core.Qb(8,\"td\"),core.Qb(9,\"maybe-link\",25),core.Dc(10),core.Pb(),core.Pb(),core.Qb(11,\"td\",26),core.Qb(12,\"maybe-link\",25),core.Dc(13),core.ac(14,\"currency\"),core.Pb(),core.Pb(),core.Bc(15,ViewTransactionComponent_ng_template_3_ng_container_31_tr_7_td_15_Template,3,2,\"td\",27),core.Pb()}if(2&rf){const installment_r30=ctx.$implicit,ctx_r28=core.Zb(3);core.gc(\"ngClass\",core.jc(15,view_transaction_component_c1,ctx_r28.path(installment_r30))),core.xb(2),core.gc(\"link\",ctx_r28.path(installment_r30)),core.xb(1),core.Fc(\" \",installment_r30.number,\" \"),core.xb(2),core.gc(\"link\",ctx_r28.path(installment_r30)),core.xb(1),core.Fc(\" \",core.bc(7,10,installment_r30.dueDate),\" \"),core.xb(3),core.gc(\"link\",ctx_r28.path(installment_r30)),core.xb(1),core.Fc(\" \",ctx_r28.installmentStatus(installment_r30.status),\" \"),core.xb(2),core.gc(\"link\",ctx_r28.path(installment_r30)),core.xb(1),core.Fc(\" \",core.cc(14,12,installment_r30.amount,ctx_r28.transaction.currency),\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r28.hasActions)}}function ViewTransactionComponent_ng_template_3_ng_container_31_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",18),core.Dc(2),core.Pb(),core.Qb(3,\"table\",19),core.Bc(4,ViewTransactionComponent_ng_template_3_ng_container_31_thead_4_Template,10,5,\"thead\",14),core.ac(5,\"async\"),core.Qb(6,\"tbody\"),core.Bc(7,ViewTransactionComponent_ng_template_3_ng_container_31_tr_7_Template,16,17,\"tr\",20),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r24=core.Zb(2);core.xb(2),core.Ec(ctx_r24.i18n.transaction.installments),core.xb(2),core.gc(\"ngIf\",core.bc(5,3,ctx_r24.layout.gtxs$)),core.xb(3),core.gc(\"ngForOf\",ctx_r24.transaction.installments)}}function ViewTransactionComponent_ng_template_3_ng_container_32_thead_4_th_9_Template(rf,ctx){1&rf&&core.Lb(0,\"th\",23)}function ViewTransactionComponent_ng_template_3_ng_container_32_thead_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"thead\"),core.Qb(1,\"th\"),core.Dc(2),core.Pb(),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\",26),core.Dc(8),core.Pb(),core.Bc(9,ViewTransactionComponent_ng_template_3_ng_container_32_thead_4_th_9_Template,1,0,\"th\",22),core.Pb()),2&rf){const ctx_r44=core.Zb(3);core.xb(2),core.Ec(ctx_r44.i18n.transaction.installmentNumber),core.xb(2),core.Ec(ctx_r44.i18n.general.date),core.xb(2),core.Ec(ctx_r44.i18n.general.status),core.xb(2),core.Ec(ctx_r44.i18n.transaction.amount),core.xb(1),core.gc(\"ngIf\",ctx_r44.hasActions)}}function ViewTransactionComponent_ng_template_3_ng_container_32_tr_7_td_15_button_1_Template(rf,ctx){if(1&rf){const _r52=core.Rb();core.Qb(0,\"button\",31),core.Xb(\"click\",(function(){core.sc(_r52);const occurrence_r47=core.Zb(2).$implicit;return core.Zb(3).processOccurrence(occurrence_r47)})),core.Lb(1,\"icon\",32),core.Pb()}if(2&rf){const ctx_r49=core.Zb(5);core.gc(\"tooltip\",ctx_r49.i18n.transaction.processFailedOccurrence)}}function ViewTransactionComponent_ng_template_3_ng_container_32_tr_7_td_15_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\",23),core.Bc(1,ViewTransactionComponent_ng_template_3_ng_container_32_tr_7_td_15_button_1_Template,2,1,\"button\",29),core.Pb()),2&rf){const occurrence_r47=core.Zb().$implicit;core.xb(1),core.gc(\"ngIf\",occurrence_r47.canProcess)}}function ViewTransactionComponent_ng_template_3_ng_container_32_tr_7_Template(rf,ctx){if(1&rf){const _r55=core.Rb();core.Qb(0,\"tr\",24),core.Xb(\"click\",(function(){core.sc(_r55);const occurrence_r47=ctx.$implicit,ctx_r54=core.Zb(3);return ctx_r54.path(occurrence_r47)?ctx_r54.router.navigate(ctx_r54.path(occurrence_r47)):null})),core.Qb(1,\"td\"),core.Qb(2,\"maybe-link\",25),core.Dc(3),core.Pb(),core.Pb(),core.Qb(4,\"td\"),core.Qb(5,\"maybe-link\",25),core.Dc(6),core.ac(7,\"date\"),core.Pb(),core.Pb(),core.Qb(8,\"td\"),core.Qb(9,\"maybe-link\",25),core.Dc(10),core.Pb(),core.Pb(),core.Qb(11,\"td\",26),core.Qb(12,\"maybe-link\",25),core.Dc(13),core.ac(14,\"currency\"),core.Pb(),core.Pb(),core.Bc(15,ViewTransactionComponent_ng_template_3_ng_container_32_tr_7_td_15_Template,2,1,\"td\",22),core.Pb()}if(2&rf){const occurrence_r47=ctx.$implicit,ctx_r45=core.Zb(3);core.gc(\"ngClass\",core.jc(15,view_transaction_component_c1,ctx_r45.path(occurrence_r47))),core.xb(2),core.gc(\"link\",ctx_r45.path(occurrence_r47)),core.xb(1),core.Fc(\" \",occurrence_r47.number,\" \"),core.xb(2),core.gc(\"link\",ctx_r45.path(occurrence_r47)),core.xb(1),core.Fc(\" \",core.bc(7,10,occurrence_r47.dueDate),\" \"),core.xb(3),core.gc(\"link\",ctx_r45.path(occurrence_r47)),core.xb(1),core.Fc(\" \",ctx_r45.installmentStatus(occurrence_r47.status),\" \"),core.xb(2),core.gc(\"link\",ctx_r45.path(occurrence_r47)),core.xb(1),core.Fc(\" \",core.cc(14,12,occurrence_r47.amount,ctx_r45.transaction.currency),\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r45.hasActions)}}function ViewTransactionComponent_ng_template_3_ng_container_32_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",18),core.Dc(2),core.Pb(),core.Qb(3,\"table\",35),core.Bc(4,ViewTransactionComponent_ng_template_3_ng_container_32_thead_4_Template,10,5,\"thead\",14),core.ac(5,\"async\"),core.Qb(6,\"tbody\"),core.Bc(7,ViewTransactionComponent_ng_template_3_ng_container_32_tr_7_Template,16,17,\"tr\",20),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r25=core.Zb(2);core.xb(2),core.Fc(\" \",ctx_r25.i18n.transaction.occurrences,\" \"),core.xb(2),core.gc(\"ngIf\",core.bc(5,3,ctx_r25.layout.gtxs$)),core.xb(3),core.gc(\"ngForOf\",ctx_r25.transaction.occurrences)}}const view_transaction_component_c2=function(){return[]};function ViewTransactionComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Bc(0,ViewTransactionComponent_ng_template_3_label_value_0_Template,2,2,\"label-value\",6),core.Lb(1,\"label-value\",7),core.Qb(2,\"label-value\",8),core.Dc(3),core.ac(4,\"dateTime\"),core.Pb(),core.Bc(5,ViewTransactionComponent_ng_template_3_label_value_5_Template,3,4,\"label-value\",6),core.Bc(6,ViewTransactionComponent_ng_template_3_label_value_6_Template,3,4,\"label-value\",6),core.Qb(7,\"label-value\",8),core.Dc(8),core.ac(9,\"currency\"),core.Pb(),core.Bc(10,ViewTransactionComponent_ng_template_3_label_value_10_Template,3,5,\"label-value\",6),core.Bc(11,ViewTransactionComponent_ng_template_3_label_value_11_Template,2,2,\"label-value\",6),core.Bc(12,ViewTransactionComponent_ng_template_3_label_value_12_Template,2,2,\"label-value\",6),core.Qb(13,\"label-value\",8),core.Bc(14,ViewTransactionComponent_ng_template_3_user_link_14_Template,1,1,\"user-link\",9),core.Bc(15,ViewTransactionComponent_ng_template_3_ng_template_15_Template,1,1,\"ng-template\",null,10,core.Cc),core.Pb(),core.Qb(17,\"label-value\",8),core.Bc(18,ViewTransactionComponent_ng_template_3_user_link_18_Template,1,1,\"user-link\",9),core.Bc(19,ViewTransactionComponent_ng_template_3_ng_template_19_Template,1,1,\"ng-template\",null,11,core.Cc),core.Pb(),core.Qb(21,\"label-value\",8),core.Dc(22),core.Pb(),core.Bc(23,ViewTransactionComponent_ng_template_3_custom_field_value_23_Template,1,1,\"custom-field-value\",12),core.Bc(24,ViewTransactionComponent_ng_template_3_label_value_24_Template,2,2,\"label-value\",6),core.Bc(25,ViewTransactionComponent_ng_template_3_label_value_25_Template,3,4,\"label-value\",6),core.Bc(26,ViewTransactionComponent_ng_template_3_label_value_26_Template,3,4,\"label-value\",6),core.Bc(27,ViewTransactionComponent_ng_template_3_label_value_27_Template,2,2,\"label-value\",6),core.Bc(28,ViewTransactionComponent_ng_template_3_label_value_28_Template,1,2,\"label-value\",13),core.Bc(29,ViewTransactionComponent_ng_template_3_label_value_29_Template,1,2,\"label-value\",13),core.Bc(30,ViewTransactionComponent_ng_template_3_label_value_30_Template,1,2,\"label-value\",13),core.Bc(31,ViewTransactionComponent_ng_template_3_ng_container_31_Template,8,5,\"ng-container\",14),core.Bc(32,ViewTransactionComponent_ng_template_3_ng_container_32_Template,8,5,\"ng-container\",14)),2&rf){const _r11=core.qc(16),_r14=core.qc(20),ctx_r2=core.Zb();core.gc(\"ngIf\",ctx_r2.transaction.transactionNumber),core.xb(1),core.gc(\"label\",ctx_r2.i18n.general.status)(\"value\",ctx_r2.status),core.xb(1),core.gc(\"label\",ctx_r2.i18n.general.date),core.xb(1),core.Fc(\" \",core.bc(4,30,ctx_r2.transaction.date),\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r2.isPaymentRequest()),core.xb(1),core.gc(\"ngIf\",ctx_r2.isPaymentRequest()&&ctx_r2.transaction.processDate),core.xb(1),core.gc(\"label\",ctx_r2.i18n.transaction.amount),core.xb(1),core.Fc(\" \",core.cc(9,32,ctx_r2.transaction.amount,ctx_r2.transaction.currency),\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r2.hasDueAmount),core.xb(1),core.gc(\"ngIf\",ctx_r2.transaction.by),core.xb(1),core.gc(\"ngIf\",null==ctx_r2.transaction?null:ctx_r2.transaction.receivedBy),core.xb(1),core.gc(\"label\",ctx_r2.isPaymentRequest()?ctx_r2.i18n.transaction.sender:ctx_r2.i18n.transaction.from),core.xb(1),core.gc(\"ngIf\",ctx_r2.transaction.fromUser)(\"ngIfElse\",_r11),core.xb(3),core.gc(\"label\",ctx_r2.isPaymentRequest()?ctx_r2.i18n.transaction.receiver:ctx_r2.i18n.transaction.to),core.xb(1),core.gc(\"ngIf\",ctx_r2.transaction.toUser)(\"ngIfElse\",_r14),core.xb(3),core.gc(\"label\",ctx_r2.i18n.transaction.type),core.xb(1),core.Fc(\" \",ctx_r2.transaction.type.name,\" \"),core.xb(1),core.gc(\"ngForOf\",ctx_r2.transaction.customValues),core.xb(1),core.gc(\"ngIf\",ctx_r2.transaction.channel),core.xb(1),core.gc(\"ngIf\",1===(ctx_r2.transaction.installments||core.ic(35,view_transaction_component_c2)).length),core.xb(1),core.gc(\"ngIf\",ctx_r2.transaction.nextOccurrenceDate),core.xb(1),core.gc(\"ngIf\",ctx_r2.transaction.occurrencesCount),core.xb(1),core.gc(\"ngIf\",ctx_r2.lastAuthComment),core.xb(1),core.gc(\"ngIf\",ctx_r2.transaction.description),core.xb(1),core.gc(\"ngIf\",ctx_r2.transaction.comments),core.xb(1),core.gc(\"ngIf\",(ctx_r2.transaction.installments||core.ic(36,view_transaction_component_c2)).length>1),core.xb(1),core.gc(\"ngIf\",(ctx_r2.transaction.occurrences||core.ic(37,view_transaction_component_c2)).length>0)}}let view_transaction_component_ViewTransactionComponent=(()=>{class ViewTransactionComponent extends base_view_page_component.a{constructor(injector,transactionsService,installmentsService,pendingPaymentsService,scheduledPaymentsService,recurringPaymentsService,paymentRequestsService,transfersService,operationHelper){super(injector),this.transactionsService=transactionsService,this.installmentsService=installmentsService,this.pendingPaymentsService=pendingPaymentsService,this.scheduledPaymentsService=scheduledPaymentsService,this.recurringPaymentsService=recurringPaymentsService,this.paymentRequestsService=paymentRequestsService,this.transfersService=transfersService,this.operationHelper=operationHelper,this.hasDueAmount=!1,this.hasActions=!1}get status(){return this.apiI18n.transactionStatus(this.transaction)}get transaction(){return this.data}get key(){return this.route.snapshot.paramMap.get(\"key\")}ngOnInit(){super.ngOnInit(),this.addSub(this.transactionsService.viewTransaction({key:this.key}).subscribe(transaction=>{[this.title,this.mobileTitle]=this.titles(transaction.kind),this.headingActions=this.initActions(transaction),this.hasDueAmount=transaction.dueAmount&&!this.format.isZero(transaction.dueAmount),this.hasActions=!!(transaction.installments||transaction.occurrences||[]).find(i=>i.canProcess||i.canSettle),this.data=transaction,transaction.transfer&&(transaction.transfer.transaction=transaction),Object(helper.h)(transaction.authorizations)||(this.lastAuthComment=transaction.authorizations[0].comments)}))}initActions(transaction){var _a,_b;const actions=this.exportHelper.headingActions(transaction.exportFormats,f=>this.transactionsService.exportTransaction$Response({format:f.internalName,key:transaction.id})),auth=transaction.authorizationPermissions||{};Object(helper.h)(transaction.authorizations)||actions.push(new shared_action.c(\"check_circle_outline\",this.i18n.transaction.viewAuthorizations,()=>this.router.navigate([\"banking\",\"transaction\",this.key,\"authorization-history\"]))),auth.authorize&&actions.push(new shared_action.c(\"thumb_up\",this.i18n.transaction.authorizePending,()=>this.authorize())),auth.deny&&actions.push(new shared_action.c(\"thumb_down\",this.i18n.transaction.denyPending,()=>this.deny())),auth.cancel&&actions.push(new shared_action.c(\"cancel\",this.i18n.transaction.cancelAuthorization,()=>this.cancelAuthorization()));const scheduled=transaction.scheduledPaymentPermissions||{};scheduled.block&&actions.push(new shared_action.c(\"block\",this.i18n.transaction.blockScheduling,()=>this.blockScheduled())),scheduled.unblock&&actions.push(new shared_action.c(\"schedule\",this.i18n.transaction.unblockScheduling,()=>this.unblockScheduled())),scheduled.cancel&&actions.push(new shared_action.c(\"cancel\",this.i18n.transaction.cancelScheduled,()=>this.cancelScheduled())),scheduled.settle&&actions.push(new shared_action.c(\"done_all\",this.i18n.transaction.settleScheduled,()=>this.settleScheduled())),transaction.kind===models.zb.SCHEDULED_PAYMENT&&1===transaction.installments.length&&transaction.installments[0].canProcess&&actions.push(new shared_action.c(\"play_circle_outline\",this.i18n.transaction.processScheduled,()=>this.processScheduled(transaction.installments[0]))),(null===(_a=transaction.recurringPaymentPermissions)||void 0===_a?void 0:_a.cancel)&&actions.push(new shared_action.c(\"cancel\",this.i18n.transaction.cancelRecurring,()=>this.cancelRecurring()));const requestPermissions=transaction.paymentRequestPermissions||{};requestPermissions.accept&&actions.push(new shared_action.c(\"thumb_up\",this.i18n.transaction.acceptPaymentRequest,()=>this.acceptPaymentRequest())),requestPermissions.reject&&actions.push(new shared_action.c(\"thumb_down\",this.i18n.transaction.rejectPaymentRequest,()=>this.rejectPaymentRequest())),requestPermissions.cancel&&actions.push(new shared_action.c(\"cancel\",this.i18n.transaction.cancelPaymentRequest,()=>this.cancelPaymentRequest())),requestPermissions.reschedule&&actions.push(new shared_action.c(\"schedule\",this.i18n.transaction.reschedulePaymentRequest,()=>this.reschedulePaymentRequest())),requestPermissions.changeExpiration&&actions.push(new shared_action.c(\"schedule\",this.i18n.transaction.changePaymentRequestExpiration,()=>this.changePaymentRequestExpiration())),(null===(_b=transaction.transfer)||void 0===_b?void 0:_b.canChargeback)&&actions.push(new shared_action.c(\"undo\",this.i18n.transaction.chargebackTransfer,()=>this.chargeback()));for(const operation of(transaction.transfer||{}).operations||[])actions.push(this.operationHelper.headingAction(operation,transaction.transfer.id));return actions}get authorizationFields(){return[{internalName:\"comments\",name:this.i18n.general.comments,type:models.p.TEXT}]}authDeviceConfirmation(action){return()=>({type:models.s.MANAGE_AUTHORIZATION,transaction:this.transaction.id,authorizationAction:action})}authorize(){this.notification.confirm({title:this.i18n.transaction.authorizePending,labelPosition:\"above\",customFields:this.authorizationFields,passwordInput:this.transaction.confirmationPasswordInput,createDeviceConfirmation:this.authDeviceConfirmation(models.h.AUTHORIZE),callback:res=>{this.addSub(this.pendingPaymentsService.authorizePendingPayment({key:this.transaction.id,confirmationPassword:res.confirmationPassword,body:{comments:res.customValues.comments}}).subscribe(nextLevel=>{nextLevel?this.notification.warning(this.i18n.transaction.authorizePendingDoneStillPending):this.notification.snackBar(this.i18n.transaction.authorizePendingDone),this.reload()}))}})}deny(){this.notification.confirm({title:this.i18n.transaction.denyPending,labelPosition:\"above\",customFields:this.authorizationFields,createDeviceConfirmation:this.authDeviceConfirmation(models.h.DENY),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.pendingPaymentsService.denyPendingPayment({key:this.transaction.id,confirmationPassword:res.confirmationPassword,body:{comments:res.customValues.comments}}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.denyPendingDone)))}})}cancelAuthorization(){this.notification.confirm({title:this.i18n.transaction.cancelAuthorization,labelPosition:\"above\",customFields:this.authorizationFields,createDeviceConfirmation:this.authDeviceConfirmation(models.h.CANCEL),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.pendingPaymentsService.cancelPendingPayment({key:this.transaction.id,confirmationPassword:res.confirmationPassword,body:{comments:res.customValues.comments}}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.cancelAuthorizationDone)))}})}schedDeviceConfirmation(action){return()=>({type:models.s.MANAGE_SCHEDULED_PAYMENT,transaction:this.transaction.id,scheduledPaymentAction:action})}blockScheduled(){this.notification.confirm({title:this.i18n.transaction.blockScheduling,message:this.i18n.transaction.blockSchedulingMessage,createDeviceConfirmation:this.schedDeviceConfirmation(models.lb.BLOCK),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.scheduledPaymentsService.blockScheduledPayment({key:this.transaction.id,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.blockSchedulingDone)))}})}unblockScheduled(){this.notification.confirm({title:this.i18n.transaction.unblockScheduling,message:this.i18n.transaction.unblockSchedulingMessage,createDeviceConfirmation:this.schedDeviceConfirmation(models.lb.UNBLOCK),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.scheduledPaymentsService.unblockScheduledPayment({key:this.transaction.id,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.unblockSchedulingDone)))}})}cancelScheduled(){this.notification.confirm({title:this.i18n.transaction.cancelScheduled,message:this.i18n.transaction.cancelScheduledMessage,createDeviceConfirmation:this.schedDeviceConfirmation(models.lb.CANCEL),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.scheduledPaymentsService.cancelScheduledPayment({key:this.transaction.id,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.cancelScheduledDone)))}})}settleScheduled(){this.notification.confirm({title:this.i18n.transaction.settleScheduled,message:this.i18n.transaction.settleScheduledMessage,createDeviceConfirmation:this.schedDeviceConfirmation(models.lb.SETTLE),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.scheduledPaymentsService.settleScheduledPayment({key:this.transaction.id,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.settleScheduledDone)))}})}recurringDeviceConfirmation(action){return()=>({type:models.s.MANAGE_RECURRING_PAYMENT,transaction:this.transaction.id,recurringPaymentAction:action})}cancelRecurring(){this.notification.confirm({title:this.i18n.transaction.cancelRecurring,message:this.i18n.transaction.cancelRecurringMessage,createDeviceConfirmation:this.recurringDeviceConfirmation(models.fb.CANCEL),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.recurringPaymentsService.cancelRecurringPayment({key:this.transaction.id,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.cancelRecurringDone)))}})}paymentRequestDeviceConfirmation(action){return()=>({type:models.s.MANAGE_PAYMENT_REQUEST,transaction:this.transaction.id,paymentRequestAction:action})}cancelPaymentRequest(){this.notification.confirm({title:this.i18n.transaction.cancelPaymentRequest,createDeviceConfirmation:this.paymentRequestDeviceConfirmation(models.V.CANCEL),passwordInput:this.transaction.confirmationPasswordInput,customFields:[{internalName:\"comments\",name:this.i18n.general.comments,type:models.p.TEXT}],callback:res=>{this.addSub(this.paymentRequestsService.cancelPaymentRequest({key:this.transaction.id,body:res.customValues.comments,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.cancelPaymentRequestDone)))}})}rejectPaymentRequest(){this.notification.confirm({title:this.i18n.transaction.rejectPaymentRequest,createDeviceConfirmation:this.paymentRequestDeviceConfirmation(models.V.DENY),passwordInput:this.transaction.confirmationPasswordInput,customFields:[{internalName:\"comments\",name:this.i18n.general.comments,type:models.p.TEXT}],callback:res=>{this.addSub(this.paymentRequestsService.rejectPaymentRequest({key:this.transaction.id,body:res.customValues.comments,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.rejectPaymentRequestDone)))}})}changePaymentRequestExpiration(){this.notification.confirm({title:this.i18n.transaction.changePaymentRequestExpiration,createDeviceConfirmation:this.paymentRequestDeviceConfirmation(models.V.CHANGE_EXPIRATION),passwordInput:this.transaction.confirmationPasswordInput,customFields:[{internalName:\"expiry\",name:this.i18n.token.expiryDate,type:models.p.DATE,required:!0},{internalName:\"comments\",defaultValue:this.data.changeExpirationDateComments,name:this.i18n.general.comments,type:models.p.TEXT}],callback:res=>{this.addSub(this.paymentRequestsService.changePaymentRequestExpirationDate({key:this.transaction.id,confirmationPassword:res.confirmationPassword,body:{comments:res.customValues.comments,newExpirationDate:api_helper.a.shiftToDayEnd(res.customValues.expiry)}}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.changePaymentRequestExpirationDone)))}})}reschedulePaymentRequest(){this.notification.confirm({title:this.i18n.transaction.reschedulePaymentRequest,createDeviceConfirmation:this.paymentRequestDeviceConfirmation(models.V.RESCHEDULE),passwordInput:this.transaction.confirmationPasswordInput,customFields:[{internalName:\"expiry\",name:this.i18n.token.expiryDate,type:models.p.DATE,required:!0},{internalName:\"comments\",name:this.i18n.general.comments,type:models.p.TEXT}],callback:res=>{this.addSub(this.paymentRequestsService.reschedulePaymentRequest({key:this.transaction.id,confirmationPassword:res.confirmationPassword,body:{comments:res.customValues.comments,processDate:res.customValues.expiry}}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.reschedulePaymentRequestDone)))}})}acceptPaymentRequest(){this.router.navigate([\"/banking\",\"payment-request\",this.data.id,\"accept\"])}chargebackDeviceConfirmation(){return()=>({type:models.s.CHARGEBACK,transfer:this.transaction.transfer.id})}chargeback(){this.notification.confirm({title:this.i18n.transaction.chargebackTransfer,message:this.i18n.transaction.chargebackTransferMessage,createDeviceConfirmation:this.chargebackDeviceConfirmation(),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.transfersService.chargebackTransfer({key:this.transaction.transfer.id,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.chargebackTransferDone)))}})}titles(kind){switch(kind){case models.zb.SCHEDULED_PAYMENT:return[this.i18n.transaction.title.detailsScheduled,this.i18n.transaction.mobileTitle.detailsScheduled];case models.zb.RECURRING_PAYMENT:return[this.i18n.transaction.title.detailsRecurring,this.i18n.transaction.mobileTitle.detailsRecurring];case models.zb.PAYMENT_REQUEST:return[this.i18n.transaction.title.detailsRequest,this.i18n.transaction.mobileTitle.detailsRequest];case models.zb.CHARGEBACK:return[this.i18n.transaction.title.detailsChargeback,this.i18n.transaction.mobileTitle.detailsChargeback];case models.zb.TICKET:return[this.i18n.transaction.title.detailsTicket,this.i18n.transaction.mobileTitle.detailsTicket];case models.zb.EXTERNAL_PAYMENT:return[this.i18n.transaction.title.detailsExternal,this.i18n.transaction.mobileTitle.detailsExternal];default:return[this.i18n.transaction.title.detailsPayment,this.i18n.transaction.mobileTitle.detailsPayment]}}installmentStatus(status){return this.apiI18n.installmentStatus(status)}path(row){const key=row.transferTransactionNumber||row.transferId;if(key)return[\"/banking\",\"transfer\",key]}installmentDeviceConfirmation(action,installment){return()=>({type:models.s.MANAGE_INSTALLMENT,installment:installment.id,installmentAction:action})}settleInstallment(installment){this.notification.confirm({title:this.i18n.transaction.settleInstallment,message:this.i18n.transaction.settleInstallmentMessage(String(installment.number)),createDeviceConfirmation:this.installmentDeviceConfirmation(models.F.SETTLE,installment),passwordInput:this.transaction.confirmationPasswordInput,callback:res=>{this.addSub(this.installmentsService.settleInstallment({key:installment.id,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(this.i18n.transaction.settleInstallmentDone)))}})}isScheduledPayment(){return this.data.kind===models.zb.SCHEDULED_PAYMENT}isPaymentRequest(){return this.data.kind===models.zb.PAYMENT_REQUEST}processInstallment(installment){this.notification.confirm({title:this.i18n.transaction.processInstallment,message:this.i18n.transaction.processInstallmentMessage(installment.number),createDeviceConfirmation:this.installmentDeviceConfirmation(models.F.PROCESS,installment),passwordInput:this.transaction.confirmationPasswordInput,callback:this.processCallback(installment.id,this.i18n.transaction.processInstallmentDone)})}processOccurrence(installment){this.notification.confirm({title:this.i18n.transaction.processFailedOccurrence,message:this.i18n.transaction.processFailedOccurrenceMessage(installment.number),createDeviceConfirmation:this.failedOccurreneceDeviceConfirmation(models.x.PROCESS,installment),passwordInput:this.transaction.confirmationPasswordInput,callback:this.processCallback(installment.id,this.i18n.transaction.processFailedOccurrenceDone)})}processScheduled(installment){this.notification.confirm({title:this.i18n.transaction.processScheduled,message:this.i18n.transaction.processScheduledMessage,createDeviceConfirmation:this.installmentDeviceConfirmation(models.F.PROCESS,installment),passwordInput:this.transaction.confirmationPasswordInput,callback:this.processCallback(installment.id,this.i18n.transaction.processScheduledDone)})}processCallback(key,notificationMsg){return res=>this.addSub(this.installmentsService.processInstallment({key:key,confirmationPassword:res.confirmationPassword}).subscribe(()=>this.sendNotificationAndReload(notificationMsg)))}sendNotificationAndReload(msg){this.notification.snackBar(msg),this.reload()}failedOccurreneceDeviceConfirmation(action,installment){return()=>({type:models.s.MANAGE_FAILED_OCCURRENCE,failedOccurrence:installment.id,failedOccurrenceAction:action})}resolveMenu(view){return this.menu.accountMenu(view.from,view.to)}}return ViewTransactionComponent.ɵfac=function(t){return new(t||ViewTransactionComponent)(core.Kb(core.r),core.Kb(transactions_service.a),core.Kb(installments_service.a),core.Kb(pending_payments_service.a),core.Kb(scheduled_payments_service.a),core.Kb(recurring_payments_service.a),core.Kb(payment_requests_service.a),core.Kb(transfers_service.a),core.Kb(operation_helper_service.a))},ViewTransactionComponent.ɵcmp=core.Eb({type:ViewTransactionComponent,selectors:[[\"view-transaction\"]],features:[core.ub],decls:5,vars:4,consts:[[3,\"ready\"],[\"last\",\"\",\"mode\",\"viewForm\",3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngIf\"],[\"transactionFields\",\"\"],[\"last\",\"\",\"mode\",\"viewForm\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"transfer\",4,\"ngIf\",\"ngIfElse\"],[3,\"transfer\"],[3,\"label\",4,\"ngIf\"],[3,\"label\",\"value\"],[3,\"label\"],[3,\"user\",4,\"ngIf\",\"ngIfElse\"],[\"fromSystem\",\"\"],[\"toSystem\",\"\"],[3,\"fieldValue\",4,\"ngFor\",\"ngForOf\"],[\"valueFormat\",\"break\",3,\"label\",\"value\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"user\"],[3,\"fieldValue\"],[\"valueFormat\",\"break\",3,\"label\",\"value\"],[1,\"border-0\",\"mt-4\"],[1,\"table\",\"table-hover\"],[3,\"ngClass\",\"click\",4,\"ngFor\",\"ngForOf\"],[1,\"amount\"],[\"class\",\"actions\",4,\"ngIf\"],[1,\"actions\"],[3,\"ngClass\",\"click\"],[3,\"link\"],[1,\"text-right\"],[\"class\",\"actions actions-multiple\",4,\"ngIf\"],[1,\"actions\",\"actions-multiple\"],[\"class\",\"btn btn-icon align-items-center\",3,\"tooltip\",\"click\",4,\"ngIf\"],[\"class\",\"btn btn-icon align-items-center\",3,\"tooltip\",\"ngClass\",\"click\",4,\"ngIf\"],[1,\"btn\",\"btn-icon\",\"align-items-center\",3,\"tooltip\",\"click\"],[\"icon\",\"play_circle_outline\"],[1,\"btn\",\"btn-icon\",\"align-items-center\",3,\"tooltip\",\"ngClass\",\"click\"],[\"icon\",\"thumb_up\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewTransactionComponent_page_content_2_Template,3,7,\"page-content\",1),core.Pb(),core.Bc(3,ViewTransactionComponent_ng_template_3_Template,33,38,\"ng-template\",null,2,core.Cc)),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,transfer_details_component_TransferDetailsComponent,label_value_component.a,common.s,user_link_component.a,custom_field_value_component.a,common.q,maybe_link_component.a,ngx_bootstrap_tooltip.b,icon_component.a],pipes:[common.b,date_time_pipe.a,currency_pipe.a,date_pipe.a],encapsulation:2,changeDetection:0}),ViewTransactionComponent})();function SearchTransfersOverviewComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchTransfersOverviewComponent_ng_template_3_div_4_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",15),2&rf){const period_r12=ctx.$implicit;core.gc(\"id\",period_r12.id)(\"value\",period_r12)(\"text\",period_r12.name)}}function SearchTransfersOverviewComponent_ng_template_3_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Qb(1,\"single-selection-field\",13),core.Bc(2,SearchTransfersOverviewComponent_ng_template_3_div_4_field_option_2_Template,1,3,\"field-option\",14),core.Pb(),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r5.i18n.general.period),core.xb(1),core.gc(\"ngForOf\",ctx_r5.data.preselectedPeriods)}}function SearchTransfersOverviewComponent_ng_template_3_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",18),2&rf){const group_r14=ctx.$implicit,ctx_r13=core.Zb(3);core.gc(\"value\",ctx_r13.ApiHelper.internalNameOrId(group_r14))(\"internalName\",group_r14.internalName)(\"id\",group_r14.id)(\"text\",group_r14.name)(\"parent\",group_r14.groupSet)}}function SearchTransfersOverviewComponent_ng_template_3_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Qb(1,\"multi-selection-field\",16),core.Bc(2,SearchTransfersOverviewComponent_ng_template_3_div_5_field_option_2_Template,1,5,\"field-option\",17),core.Pb(),core.Pb()),2&rf){const ctx_r6=core.Zb(2);core.xb(1),core.gc(\"emptyLabel\",ctx_r6.i18n.general.notApplied)(\"label\",ctx_r6.i18n.user.groupFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r6.data.groups)}}function SearchTransfersOverviewComponent_ng_template_3_div_6_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",21),2&rf){const currency_r16=ctx.$implicit;core.gc(\"value\",currency_r16.id)(\"text\",currency_r16.name)}}function SearchTransfersOverviewComponent_ng_template_3_div_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Qb(1,\"single-selection-field\",19),core.Bc(2,SearchTransfersOverviewComponent_ng_template_3_div_6_field_option_2_Template,1,2,\"field-option\",20),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r7.i18n.general.currency)(\"emptyOption\",ctx_r7.i18n.general.notApplied),core.xb(1),core.gc(\"ngForOf\",ctx_r7.data.currencies)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_ng_container_1_field_option_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",39),2&rf){const at_r25=ctx.$implicit;core.gc(\"value\",at_r25.id)(\"internalName\",at_r25.internalName)(\"id\",at_r25.id)(\"text\",at_r25.name)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_ng_container_1_field_option_7_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",39),2&rf){const at_r26=ctx.$implicit;core.gc(\"value\",at_r26.id)(\"internalName\",at_r26.internalName)(\"id\",at_r26.id)(\"text\",at_r26.name)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"div\",22),core.Qb(2,\"div\",12),core.Qb(3,\"single-selection-field\",36),core.Bc(4,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_ng_container_1_field_option_4_Template,1,4,\"field-option\",37),core.Pb(),core.Pb(),core.Qb(5,\"div\",12),core.Qb(6,\"single-selection-field\",38),core.Bc(7,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_ng_container_1_field_option_7_Template,1,4,\"field-option\",37),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r17=core.Zb(3);core.xb(3),core.gc(\"emptyOption\",ctx_r17.i18n.general.notApplied)(\"label\",ctx_r17.i18n.transaction.fromAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r17.accountTypes()),core.xb(2),core.gc(\"emptyOption\",ctx_r17.i18n.general.notApplied)(\"label\",ctx_r17.i18n.transaction.toAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r17.accountTypes())}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_2_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",42),2&rf){const filter_r28=ctx.$implicit,ctx_r27=core.Zb(4);core.gc(\"value\",filter_r28.id)(\"internalName\",filter_r28.internalName)(\"id\",filter_r28.id)(\"text\",filter_r28.name)(\"category\",ctx_r27.singleAccount||null==filter_r28.accountType?null:filter_r28.accountType.name)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Qb(1,\"multi-selection-field\",40),core.Bc(2,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_2_field_option_2_Template,1,5,\"field-option\",41),core.Pb(),core.Pb()),2&rf){const ctx_r18=core.Zb(3);core.xb(1),core.gc(\"emptyLabel\",ctx_r18.i18n.general.notApplied)(\"label\",ctx_r18.i18n.account.transferFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r18.transferFilters())}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_3_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",45),2&rf){const ch_r30=ctx.$implicit;core.gc(\"id\",ch_r30.id)(\"internalName\",ch_r30.internalName)(\"value\",ch_r30.internalName)(\"text\",ch_r30.name)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Qb(1,\"multi-selection-field\",43),core.Bc(2,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_3_field_option_2_Template,1,4,\"field-option\",44),core.Pb(),core.Pb()),2&rf){const ctx_r19=core.Zb(3);core.xb(1),core.gc(\"emptyLabel\",ctx_r19.i18n.general.notApplied)(\"label\",ctx_r19.i18n.transaction.channel),core.xb(1),core.gc(\"ngForOf\",ctx_r19.data.channels)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Lb(1,\"date-field\",46),core.Pb()),2&rf){const ctx_r20=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r20.i18n.general.beginDate)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Lb(1,\"date-field\",47),core.Pb()),2&rf){const ctx_r21=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r21.i18n.general.endDate)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_15_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Lb(1,\"input-field\",48),core.Pb()),2&rf){const ctx_r22=core.Zb(3);core.xb(1),core.gc(\"mask\",ctx_r22.transactionNumberPattern)(\"label\",ctx_r22.i18n.transaction.number)}}function SearchTransfersOverviewComponent_ng_template_3_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_ng_container_1_Template,8,6,\"ng-container\",8),core.Bc(2,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_2_Template,3,3,\"div\",7),core.Bc(3,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_3_Template,3,3,\"div\",7),core.Lb(4,\"div\",22),core.Bc(5,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_5_Template,2,1,\"div\",7),core.ac(6,\"async\"),core.Bc(7,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_7_Template,2,1,\"div\",7),core.ac(8,\"async\"),core.Qb(9,\"div\",12),core.Lb(10,\"decimal-field\",23),core.Pb(),core.Qb(11,\"div\",12),core.Lb(12,\"decimal-field\",24),core.Pb(),core.Qb(13,\"div\",12),core.Lb(14,\"user-field\",25),core.Pb(),core.Bc(15,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_div_15_Template,2,2,\"div\",7),core.Qb(16,\"div\",12),core.Lb(17,\"user-field\",26),core.Pb(),core.Qb(18,\"div\",12),core.Lb(19,\"multi-selection-field\",27),core.Pb(),core.Qb(20,\"div\",12),core.Qb(21,\"single-selection-field\",28),core.Lb(22,\"field-option\",29),core.Lb(23,\"field-option\",30),core.Pb(),core.Pb(),core.Qb(24,\"div\",12),core.Qb(25,\"single-selection-field\",31),core.Lb(26,\"field-option\",32),core.Lb(27,\"field-option\",33),core.Lb(28,\"field-option\",34),core.Lb(29,\"field-option\",35),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r8=core.Zb(2);var tmp_3_0,tmp_4_0;core.xb(1),core.gc(\"ngIf\",(null==ctx_r8.data.accountTypes?null:ctx_r8.data.accountTypes.length)>1),core.xb(1),core.gc(\"ngIf\",ctx_r8.transferFilters().length>0),core.xb(1),core.gc(\"ngIf\",(null==ctx_r8.data.channels?null:ctx_r8.data.channels.length)>1),core.xb(2),core.gc(\"ngIf\",null==(null==(tmp_3_0=ctx_r8.form.value||core.bc(6,30,ctx_r8.form.valueChanges))||null==tmp_3_0.preselectedPeriod?null:tmp_3_0.preselectedPeriod.begin)),core.xb(2),core.gc(\"ngIf\",null==(null==(tmp_4_0=ctx_r8.form.value||core.bc(8,32,ctx_r8.form.valueChanges))||null==tmp_4_0.preselectedPeriod?null:tmp_4_0.preselectedPeriod.end)),core.xb(3),core.gc(\"label\",ctx_r8.i18n.account.minAmount)(\"scale\",ctx_r8.currencyDecimalDigits())(\"prefix\",ctx_r8.currencyPrefix())(\"suffix\",ctx_r8.currencySuffix()),core.xb(2),core.gc(\"label\",ctx_r8.i18n.account.maxAmount)(\"scale\",ctx_r8.currencyDecimalDigits())(\"prefix\",ctx_r8.currencyPrefix())(\"suffix\",ctx_r8.currencySuffix()),core.xb(2),core.gc(\"label\",ctx_r8.i18n.general.user),core.xb(1),core.gc(\"ngIf\",ctx_r8.hasTransactionNumber),core.xb(2),core.gc(\"label\",ctx_r8.i18n.general.usersOfBroker)(\"filters\",ctx_r8.userSearchFilters())(\"allowContacts\",!1),core.xb(2),core.gc(\"emptyLabel\",ctx_r8.i18n.general.notApplied)(\"label\",ctx_r8.i18n.transaction.transferKinds)(\"fieldOptions\",ctx_r8.kindOptions),core.xb(2),core.gc(\"label\",ctx_r8.i18n.transaction.chargedBack)(\"emptyOption\",ctx_r8.i18n.general.all),core.xb(1),core.gc(\"text\",ctx_r8.i18n.general.yes),core.xb(1),core.gc(\"text\",ctx_r8.i18n.general.no),core.xb(2),core.gc(\"label\",ctx_r8.i18n.general.orderBy),core.xb(1),core.gc(\"text\",ctx_r8.i18n.account.orderBy.dateDesc),core.xb(1),core.gc(\"text\",ctx_r8.i18n.account.orderBy.dateAsc),core.xb(1),core.gc(\"text\",ctx_r8.i18n.account.orderBy.amountAsc),core.xb(1),core.gc(\"text\",ctx_r8.i18n.account.orderBy.amountDesc)}}const search_transfers_overview_component_c0=function(a0,a1){return{from:a0,to:a1}};function SearchTransfersOverviewComponent_ng_template_3_mobile_result_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",49),core.Qb(1,\"div\",50),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r31=ctx.$implicit,ctx_r9=core.Zb(2);core.gc(\"date\",row_r31.date)(\"amount\",row_r31.amount)(\"currency\",row_r31.currency),core.xb(2),core.Fc(\" \",ctx_r9.i18n.transaction.fromToText(core.kc(4,search_transfers_overview_component_c0,ctx_r9.bankingHelper.ownerName(row_r31.from),ctx_r9.bankingHelper.ownerName(row_r31.to))),\"\")}}function SearchTransfersOverviewComponent_ng_template_3_table_12_ng_container_11_Template(rf,ctx){if(1&rf){const _r35=core.Rb();core.Ob(0),core.Qb(1,\"tr\",54),core.Xb(\"click\",(function(){core.sc(_r35);const row_r33=ctx.$implicit,ctx_r34=core.Zb(3);return ctx_r34.router.navigate(ctx_r34.path(row_r33))})),core.Qb(2,\"td\"),core.Qb(3,\"a\",55),core.Dc(4),core.ac(5,\"date\"),core.Pb(),core.Pb(),core.Qb(6,\"td\"),core.Qb(7,\"a\",55),core.Dc(8),core.Pb(),core.Pb(),core.Qb(9,\"td\"),core.Qb(10,\"a\",55),core.Dc(11),core.Pb(),core.Pb(),core.Qb(12,\"td\",52),core.Qb(13,\"a\",55),core.Dc(14),core.ac(15,\"currency\"),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r33=ctx.$implicit,ctx_r32=core.Zb(3);core.xb(3),core.gc(\"routerLink\",ctx_r32.path(row_r33)),core.xb(1),core.Fc(\" \",core.bc(5,8,row_r33.date),\" \"),core.xb(3),core.gc(\"routerLink\",ctx_r32.path(row_r33)),core.xb(1),core.Fc(\" \",ctx_r32.bankingHelper.ownerName(row_r33.from),\" \"),core.xb(2),core.gc(\"routerLink\",ctx_r32.path(row_r33)),core.xb(1),core.Fc(\" \",ctx_r32.bankingHelper.ownerName(row_r33.to),\" \"),core.xb(2),core.gc(\"routerLink\",ctx_r32.path(row_r33)),core.xb(1),core.Fc(\" \",core.cc(15,10,ctx_r32.format.abs(row_r33.amount),row_r33.currency),\" \")}}function SearchTransfersOverviewComponent_ng_template_3_table_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",51),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\",52),core.Dc(9),core.Pb(),core.Pb(),core.Qb(10,\"tbody\"),core.Bc(11,SearchTransfersOverviewComponent_ng_template_3_table_12_ng_container_11_Template,16,13,\"ng-container\",53),core.ac(12,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r10=core.Zb(2);var tmp_4_0;core.xb(3),core.Ec(ctx_r10.i18n.general.date),core.xb(2),core.Ec(ctx_r10.i18n.transaction.from),core.xb(2),core.Ec(ctx_r10.i18n.transaction.to),core.xb(2),core.Ec(ctx_r10.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",null==(tmp_4_0=core.bc(12,5,ctx_r10.results$))?null:tmp_4_0.results)}}function SearchTransfersOverviewComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r37=core.Rb();core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Qb(2,\"form\",5),core.Qb(3,\"div\",6),core.Bc(4,SearchTransfersOverviewComponent_ng_template_3_div_4_Template,3,2,\"div\",7),core.Bc(5,SearchTransfersOverviewComponent_ng_template_3_div_5_Template,3,3,\"div\",7),core.Bc(6,SearchTransfersOverviewComponent_ng_template_3_div_6_Template,3,3,\"div\",7),core.Bc(7,SearchTransfersOverviewComponent_ng_template_3_ng_container_7_Template,30,34,\"ng-container\",8),core.ac(8,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Qb(9,\"results-layout\",9),core.Xb(\"update\",(function($event){return core.sc(_r37),core.Zb().update($event)})),core.ac(10,\"async\"),core.Bc(11,SearchTransfersOverviewComponent_ng_template_3_mobile_result_11_Template,3,7,\"mobile-result\",10),core.Bc(12,SearchTransfersOverviewComponent_ng_template_3_table_12_Template,13,7,\"table\",11),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.transaction.title.transfersOverview)(\"mobileHeading\",ctx_r2.i18n.transaction.mobileTitle.transfersOverview)(\"headingActions\",core.bc(1,11,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",(null==ctx_r2.data.preselectedPeriods?null:ctx_r2.data.preselectedPeriods.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.data.groups?null:ctx_r2.data.groups.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.data.currencies?null:ctx_r2.data.currencies.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(8,13,ctx_r2.moreFilters$)),core.xb(2),core.gc(\"results\",core.bc(10,15,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)}}function SearchTransfersOverviewComponent_ng_template_5_Template(rf,ctx){1&rf&&core.Lb(0,\"spinner\",56)}let search_transfers_overview_component_SearchTransfersOverviewComponent=(()=>{class SearchTransfersOverviewComponent extends base_search_page_component.a{constructor(injector,transfersService,bankingHelper){super(injector),this.transfersService=transfersService,this.bankingHelper=bankingHelper,this.filters$=new BehaviorSubject.a([])}get preselectedPeriods(){return null==this.data?null:this.data.preselectedPeriods}getFormControlNames(){return[\"preselectedPeriod\",\"periodBegin\",\"periodEnd\",\"groups\",\"currency\",\"channels\",\"fromAccountType\",\"toAccountType\",\"transferFilters\",\"kinds\",\"chargedBack\",\"minAmount\",\"maxAmount\",\"transactionNumber\",\"user\",\"by\",\"orderBy\",\"brokers\"]}getInitialFormValue(data){const value=super.getInitialFormValue(data);return value.orderBy=value.orderBy||models.wb.DATE_DESC,value}ngOnInit(){super.ngOnInit(),this.stateManager.cache(\"data\",this.transfersService.getTransferDataForSearch()).subscribe(data=>{this.data=data})}onDataInitialized(data){super.onDataInitialized(data),this.singleCurrency=1===(data.currencies||[]).length?data.currencies[0]:null,this.singleAccount=1===(data.accountTypes||[]).length?data.accountTypes[0]:null;const transactionNumberPatterns=(data.currencies||[]).map(c=>c.transactionNumberPattern).filter(p=>p).reduce((unique,item)=>unique.includes(item)?unique:[...unique,item],[]);this.hasTransactionNumber=transactionNumberPatterns.length>0,this.transactionNumberPattern=1===transactionNumberPatterns.length?transactionNumberPatterns[0]:null,this.bankingHelper.preProcessPreselectedPeriods(data,this.form),this.addSub(this.form.controls.fromAccountType.valueChanges.subscribe(accountTypeId=>this.updateTransferFilters(accountTypeId))),this.addSub(this.form.controls.currency.valueChanges.subscribe(currencyId=>this.updateAccountTypes(currencyId))),this.headingActions=[this.moreFiltersAction],this.exportHelper.headingActions(data.exportFormats,f=>this.transfersService.exportTransfers$Response(Object.assign({format:f.internalName},this.toSearchParams(this.form.value)))).forEach(a=>this.headingActions.push(a))}updateTransferFilters(accountTypeId){const selectedFilters=this.form.controls.transferFilters.value;accountTypeId&&selectedFilters&&this.form.controls.transferFilters.setValue(selectedFilters.filter(filterId=>this.data.transferFilters.find(tf=>tf.id===filterId).accountType.id===accountTypeId))}updateAccountTypes(currencyId){const selectedFrom=this.form.controls.fromAccountType.value,selectedTo=this.form.controls.toAccountType.value;if(currencyId&&selectedFrom){const fromCurrency=this.data.accountTypes.find(at=>at.id===selectedFrom).currency;this.form.controls.fromAccountType.setValue(fromCurrency&&fromCurrency.id!==currencyId?null:selectedFrom)}if(currencyId&&selectedTo){const toCurrency=this.data.accountTypes.find(at=>at.id===selectedTo).currency;this.form.controls.toAccountType.setValue(toCurrency&&toCurrency.id!==currencyId?null:selectedTo)}}userSearchFilters(){return{roles:[models.kb.BROKER]}}findCurrency(useAccountType){var _a;if(this.singleCurrency)return this.singleCurrency;const currency=this.form.controls.currency.value;if(currency)return this.data.currencies.find(c=>c.id===currency);const fromAccountId=this.form.controls.fromAccountType.value;return useAccountType&&fromAccountId?null===(_a=this.data.accountTypes.find(at=>at.id===fromAccountId))||void 0===_a?void 0:_a.currency:null}transferFilters(){const fromAccount=this.form.controls.fromAccountType.value,filters=this.data.transferFilters||[];if(fromAccount)return filters.filter(f=>f.accountType.id===fromAccount);if(this.findCurrency(!0)){const types=this.accountTypes().map(t=>t.id);return filters.filter(f=>types.includes(f.accountType.id))}return filters}accountTypes(){const currency=this.findCurrency(!1),types=this.data.accountTypes||[];return currency?types.filter(t=>!t.currency||t.currency.id===currency.id):types}currencyDecimalDigits(){const c=this.findCurrency(!0);return c?c.decimalDigits:2}currencyPrefix(){const c=this.findCurrency(!0);return c?c.prefix:null}currencySuffix(){const c=this.findCurrency(!0);return c?c.suffix:null}toSearchParams(value){const query=value;return query.datePeriod=this.bankingHelper.resolveDatePeriod(value),query.amountRange=api_helper.a.rangeFilter(value.minAmount,value.maxAmount),query.fields=[],value.chargedBack&&(query.chargedBack=\"yes\"===value.chargedBack),query}doSearch(query){return this.transfersService.searchTransfers$Response(query)}get kindOptions(){return Object.values(models.Bb).map(kind=>({value:kind,text:this.apiI18n.transferKind(kind)}))}path(row){return[\"/banking\",\"transfer\",this.bankingHelper.transactionNumberOrId(row)]}get toLink(){return row=>this.path(row)}showMoreFiltersLabel(){return this.i18n.general.moreFilters}showLessFiltersLabel(){return this.i18n.general.lessFilters}resolveMenu(){return this.dataForUiHolder.role===models.kb.ADMINISTRATOR?shared_menu.b.ADMIN_TRANSFERS_OVERVIEW:shared_menu.b.BROKER_TRANSFERS_OVERVIEW}}return SearchTransfersOverviewComponent.ɵfac=function(t){return new(t||SearchTransfersOverviewComponent)(core.Kb(core.r),core.Kb(transfers_service.a),core.Kb(banking_helper_service.a))},SearchTransfersOverviewComponent.ɵcmp=core.Eb({type:SearchTransfersOverviewComponent,selectors:[[\"search-transfers-overview\"]],features:[core.ub],decls:7,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"loadingIndicators\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[4,\"ngIf\"],[\"resultType\",\"list\",3,\"results\",\"toLink\",\"rendering$\",\"update\"],[\"forceSign\",\"\",3,\"date\",\"amount\",\"currency\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"preselectedPeriod\",3,\"label\"],[3,\"id\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"value\",\"text\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"groups\",3,\"emptyLabel\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\"],[\"labelPosition\",\"side\",\"formControlName\",\"currency\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[1,\"w-100\",\"d-none\",\"d-sm-block\"],[\"labelPosition\",\"side\",\"formControlName\",\"minAmount\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"maxAmount\",\"fieldSize\",\"full\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"brokers\",3,\"label\",\"filters\",\"allowContacts\"],[\"labelPosition\",\"side\",\"formControlName\",\"kinds\",3,\"emptyLabel\",\"label\",\"fieldOptions\"],[\"labelPosition\",\"side\",\"formControlName\",\"chargedBack\",3,\"label\",\"emptyOption\"],[\"value\",\"yes\",3,\"text\"],[\"value\",\"no\",3,\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"orderBy\",3,\"label\"],[\"value\",\"dateDesc\",3,\"text\"],[\"value\",\"dateAsc\",3,\"text\"],[\"value\",\"amountAsc\",3,\"text\"],[\"value\",\"amountDesc\",3,\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"fromAccountType\",3,\"emptyOption\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"labelPosition\",\"side\",\"formControlName\",\"toAccountType\",3,\"emptyOption\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"transferFilters\",3,\"emptyLabel\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"category\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"category\"],[\"labelPosition\",\"side\",\"formControlName\",\"channels\",3,\"emptyLabel\",\"label\"],[3,\"id\",\"internalName\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"internalName\",\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodBegin\",\"minDate\",\"past5\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodEnd\",\"minDate\",\"past5\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"transactionNumber\",3,\"mask\",\"label\"],[\"forceSign\",\"\",3,\"date\",\"amount\",\"currency\"],[1,\"cell-text\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[3,\"routerLink\"],[1,\"p-3\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchTransfersOverviewComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchTransfersOverviewComponent_ng_template_3_Template,13,17,\"ng-template\",null,2,core.Cc),core.Bc(5,SearchTransfersOverviewComponent_ng_template_5_Template,1,0,\"ng-template\",null,3,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.s,field_option_directive.a,multi_selection_field_component.a,decimal_field_component.a,user_field_component.a,date_field_component.a,input_field_component.a,mask_directive.a,mobile_result_component.a,router.h,spinner_component.a],pipes:[common.b,date_pipe.a,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchTransfersOverviewComponent})();function ViewTransferComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",2),core.ac(1,\"async\"),core.Lb(2,\"transfer-details\",3),core.ac(3,\"async\"),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.transaction.title.detailsTransfer)(\"mobileHeading\",ctx_r0.i18n.transaction.mobileTitle.detailsTransfer)(\"headingActions\",core.bc(1,5,ctx_r0.headingActions$)),core.xb(2),core.gc(\"headingActions\",core.bc(3,7,ctx_r0.headingActions$))(\"transfer\",ctx_r0.transfer)}}let view_transfer_component_ViewTransferComponent=(()=>{class ViewTransferComponent extends base_view_page_component.a{constructor(injector,bankingHelper,transfersService,operationHelper){super(injector),this.bankingHelper=bankingHelper,this.transfersService=transfersService,this.operationHelper=operationHelper}get transfer(){return this.data}ngOnInit(){super.ngOnInit();const route=this.route.snapshot;this.accountId=route.params.account,this.addSub(this.transfersService.viewTransfer({key:route.params.key}).subscribe(transfer=>{this.headingActions=this.initActions(transfer),this.data=transfer}))}initActions(transfer){const actions=this.exportHelper.headingActions(transfer.exportFormats,f=>this.transfersService.exportTransfer$Response({format:f.internalName,key:transfer.id})),transaction=transfer.transaction||{};Object(helper.h)(transaction.authorizations)||actions.push(new shared_action.c(\"check_circle_outline\",this.i18n.transaction.viewAuthorizations,()=>{this.router.navigate([\"banking\",\"transaction\",this.bankingHelper.transactionNumberOrId(transaction),\"authorization-history\"])})),transfer.canChargeback&&actions.push(new shared_action.c(\"undo\",this.i18n.transaction.chargebackTransfer,()=>{this.chargeback()}));for(const operation of transfer.operations||[])actions.push(this.operationHelper.headingAction(operation,transfer.id));return actions}chargebackDeviceConfirmation(){return()=>({type:models.s.CHARGEBACK,transfer:this.transfer.id})}chargeback(){this.notification.confirm({title:this.i18n.transaction.chargebackTransfer,message:this.i18n.transaction.chargebackTransferMessage,createDeviceConfirmation:this.chargebackDeviceConfirmation(),passwordInput:this.transfer.confirmationPasswordInput,callback:res=>{this.addSub(this.transfersService.chargebackTransfer({key:this.transfer.id,confirmationPassword:res.confirmationPassword}).subscribe(()=>{this.notification.snackBar(this.i18n.transaction.chargebackTransferDone),this.reload()}))}})}resolveMenu(transfer){return this.menu.transferMenu(transfer,this.accountId)}}return ViewTransferComponent.ɵfac=function(t){return new(t||ViewTransferComponent)(core.Kb(core.r),core.Kb(banking_helper_service.a),core.Kb(transfers_service.a),core.Kb(operation_helper_service.a))},ViewTransferComponent.ɵcmp=core.Eb({type:ViewTransferComponent,selectors:[[\"view-transfer\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[\"last\",\"\",\"mode\",\"viewForm\",3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngIf\"],[\"last\",\"\",\"mode\",\"viewForm\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"headingActions\",\"transfer\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewTransferComponent_page_content_2_Template,4,9,\"page-content\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,transfer_details_component_TransferDetailsComponent],pipes:[common.b],encapsulation:2,changeDetection:0}),ViewTransferComponent})();var vouchers_service=__webpack_require__(\"xVDN\");function BuyVouchersStepListTypesComponent_user_info_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-info\",5),2&rf){const ctx_r0=core.Zb();core.gc(\"user\",ctx_r0.user)}}function BuyVouchersStepListTypesComponent_mobile_result_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",6),core.Qb(1,\"div\",7),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r3=ctx.$implicit;core.gc(\"avatarImage\",row_r3.image),core.xb(2),core.Fc(\" \",row_r3.voucherTitle,\" \")}}function BuyVouchersStepListTypesComponent_table_4_ng_container_2_Template(rf,ctx){if(1&rf){const _r7=core.Rb();core.Ob(0),core.Qb(1,\"tr\",10),core.Xb(\"click\",(function(){core.sc(_r7);const type_r5=ctx.$implicit;return core.Zb(2).selectType(type_r5)})),core.Qb(2,\"td\",11),core.Lb(3,\"avatar\",12),core.Pb(),core.Qb(4,\"td\"),core.Qb(5,\"div\"),core.Qb(6,\"a\",13),core.Xb(\"click\",(function(){core.sc(_r7);const type_r5=ctx.$implicit;return core.Zb(2).selectType(type_r5)})),core.Dc(7),core.Pb(),core.Qb(8,\"div\"),core.Dc(9),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const type_r5=ctx.$implicit;core.xb(3),core.gc(\"image\",type_r5.image),core.xb(4),core.Fc(\" \",type_r5.voucherTitle,\" \"),core.xb(2),core.Fc(\" \",type_r5.voucherDescription,\" \")}}function BuyVouchersStepListTypesComponent_table_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",8),core.Qb(1,\"tbody\"),core.Bc(2,BuyVouchersStepListTypesComponent_table_4_ng_container_2_Template,10,3,\"ng-container\",9),core.Pb(),core.Pb()),2&rf){const ctx_r2=core.Zb();core.xb(2),core.gc(\"ngForOf\",ctx_r2.types)}}let buy_vouchers_step_list_types_component_BuyVouchersStepListTypesComponent=(()=>{class BuyVouchersStepListTypesComponent extends base_component.a{constructor(injector){super(injector),this.typeSelected=new core.n}get selectType(){return type=>this.typeSelected.emit(type)}}return BuyVouchersStepListTypesComponent.ɵfac=function(t){return new(t||BuyVouchersStepListTypesComponent)(core.Kb(core.r))},BuyVouchersStepListTypesComponent.ɵcmp=core.Eb({type:BuyVouchersStepListTypesComponent,selectors:[[\"buy-vouchers-step-list-types\"]],inputs:{types:\"types\",user:\"user\"},outputs:{typeSelected:\"typeSelected\"},features:[core.ub],decls:5,vars:6,consts:[[3,\"mode\",\"heading\",\"mobileHeading\"],[\"labelCols\",\"2\",3,\"user\",4,\"ngIf\"],[\"resultType\",\"list\",3,\"results\",\"onClick\"],[\"avatarRoundBorders\",\"false\",\"avatarIcon\",\"user\",3,\"avatarImage\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"labelCols\",\"2\",3,\"user\"],[\"avatarRoundBorders\",\"false\",\"avatarIcon\",\"user\",3,\"avatarImage\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[1,\"avatar\"],[\"icon\",\"shopping_cart\",\"size\",\"xlarge\",\"roundBorders\",\"false\",3,\"image\"],[\"ngClass\",\"font-weight-bold\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-content\",0),core.Bc(1,BuyVouchersStepListTypesComponent_user_info_1_Template,1,1,\"user-info\",1),core.Pb(),core.Qb(2,\"results-layout\",2),core.Bc(3,BuyVouchersStepListTypesComponent_mobile_result_3_Template,3,2,\"mobile-result\",3),core.Bc(4,BuyVouchersStepListTypesComponent_table_4_Template,3,1,\"table\",4),core.Pb()),2&rf&&(core.gc(\"mode\",ctx.user&&!ctx.authHelper.isSelf(ctx.user)?\"normal\":\"empty\")(\"heading\",ctx.i18n.voucher.title.buy)(\"mobileHeading\",ctx.i18n.voucher.mobileTitle.buy),core.xb(1),core.gc(\"ngIf\",ctx.user&&!ctx.authHelper.isSelf(ctx.user)),core.xb(1),core.gc(\"results\",ctx.types)(\"onClick\",ctx.selectType))},directives:[page_content_component.a,common.t,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,user_info_component.a,mobile_result_component.a,common.s,avatar_component.a,common.q],encapsulation:2,changeDetection:0}),BuyVouchersStepListTypesComponent})();function BuyVouchersStepFormComponent_user_info_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-info\",8),2&rf){const ctx_r0=core.Zb();core.gc(\"user\",ctx_r0.data.user)}}function BuyVouchersStepFormComponent_label_value_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",2),core.Dc(1),core.Pb()),2&rf){const ctx_r1=core.Zb();core.gc(\"label\",ctx_r1.i18n.voucher.buy.minTimeToRedeem),core.xb(1),core.Fc(\" \",ctx_r1.i18n.voucher.buy.minTimeToRedeemAfterBuy(ctx_r1.format.formatTimeInterval(ctx_r1.data.minimumTimeToRedeem)),\" \")}}const buy_vouchers_step_form_component_c0=function(a0,a1){return{min:a0,max:a1}};function BuyVouchersStepFormComponent_label_value_10_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"label-value\",9),core.ac(1,\"currency\"),core.ac(2,\"currency\")),2&rf){const ctx_r2=core.Zb();core.gc(\"label\",ctx_r2.i18n.voucher.buy.amountRange)(\"value\",ctx_r2.format.formatRange(core.kc(8,buy_vouchers_step_form_component_c0,core.cc(1,2,ctx_r2.data.amountRange.min,ctx_r2.currency),core.cc(2,5,ctx_r2.data.amountRange.max,ctx_r2.currency))))}}function BuyVouchersStepFormComponent_custom_field_input_11_Template(rf,ctx){if(1&rf&&core.Lb(0,\"custom-field-input\",10),2&rf){const cf_r4=ctx.$implicit,ctx_r3=core.Zb();core.gc(\"field\",cf_r4)(\"formControl\",ctx_r3.customFieldControlsMap.get(cf_r4.internalName))}}let buy_vouchers_step_form_component_BuyVouchersStepFormComponent=(()=>{class BuyVouchersStepFormComponent extends base_component.a{constructor(injector){super(injector)}get currency(){return this.data.account.currency}}return BuyVouchersStepFormComponent.ɵfac=function(t){return new(t||BuyVouchersStepFormComponent)(core.Kb(core.r))},BuyVouchersStepFormComponent.ɵcmp=core.Eb({type:BuyVouchersStepFormComponent,selectors:[[\"buy-vouchers-step-form\"]],inputs:{data:\"data\",form:\"form\",customFieldControlsMap:\"customFieldControlsMap\"},features:[core.ub],decls:12,vars:17,consts:[[3,\"formGroup\"],[3,\"user\",4,\"ngIf\"],[\"kind\",\"fieldView\",3,\"label\"],[\"kind\",\"fieldView\",3,\"label\",4,\"ngIf\"],[\"type\",\"number\",\"formControlName\",\"count\",\"required\",\"\",\"fieldSize\",\"small\",3,\"label\"],[\"formControlName\",\"amount\",\"required\",\"\",3,\"label\",\"prefix\",\"suffix\",\"scale\"],[\"kind\",\"fieldView\",3,\"label\",\"value\",4,\"ngIf\"],[3,\"field\",\"formControl\",4,\"ngFor\",\"ngForOf\"],[3,\"user\"],[\"kind\",\"fieldView\",3,\"label\",\"value\"],[3,\"field\",\"formControl\"]],template:function(rf,ctx){1&rf&&(core.Ob(0,0),core.Bc(1,BuyVouchersStepFormComponent_user_info_1_Template,1,1,\"user-info\",1),core.Qb(2,\"label-value\",2),core.Dc(3),core.Pb(),core.Qb(4,\"label-value\",2),core.Dc(5),core.ac(6,\"currency\"),core.Pb(),core.Bc(7,BuyVouchersStepFormComponent_label_value_7_Template,2,2,\"label-value\",3),core.Lb(8,\"input-field\",4),core.Lb(9,\"decimal-field\",5),core.Bc(10,BuyVouchersStepFormComponent_label_value_10_Template,3,11,\"label-value\",6),core.Bc(11,BuyVouchersStepFormComponent_custom_field_input_11_Template,1,2,\"custom-field-input\",7),core.Nb()),2&rf&&(core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngIf\",ctx.data.user&&!ctx.authHelper.isSelf(ctx.data.user)),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.originAccount),core.xb(1),core.Fc(\" \",ctx.data.account.type.name,\" \"),core.xb(1),core.gc(\"label\",ctx.i18n.account.availableBalance),core.xb(1),core.Fc(\" \",core.cc(6,14,ctx.data.account.status.availableBalance,ctx.currency),\" \"),core.xb(2),core.gc(\"ngIf\",ctx.data.minimumTimeToRedeem),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.numberOfVouchers),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.amountPerVoucher)(\"prefix\",ctx.currency.prefix)(\"suffix\",ctx.currency.suffix)(\"scale\",ctx.currency.decimalDigits),core.xb(1),core.gc(\"ngIf\",(null==ctx.data.amountRange?null:ctx.data.amountRange.min)||(null==ctx.data.amountRange?null:ctx.data.amountRange.max)),core.xb(1),core.gc(\"ngForOf\",ctx.data.customFields))},directives:[fesm2015_forms.w,fesm2015_forms.n,common.t,label_value_component.a,input_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,decimal_field_component.a,common.s,user_info_component.a,custom_field_input_component.a,fesm2015_forms.k],pipes:[currency_pipe.a],encapsulation:2,changeDetection:0}),BuyVouchersStepFormComponent})();var format_field_value_component=__webpack_require__(\"5Wk5\");function BuyVouchersStepConfirmComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"user-info\",3),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"user\",ctx_r0.data.user)}}function BuyVouchersStepConfirmComponent_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"label-value\",4),core.ac(2,\"async\"),core.Lb(3,\"format-field-value\",5,6),core.Pb(),core.Nb()),2&rf){const cf_r3=ctx.$implicit,_r4=core.qc(4),ctx_r1=core.Zb();core.xb(1),core.gc(\"hidden\",!_r4.hasValue)(\"label\",cf_r3.name)(\"labelPosition\",ctx_r1.labelOnTop(core.bc(2,6,ctx_r1.layout.ltsm$),cf_r3)?\"top\":\"auto\"),core.xb(2),core.gc(\"object\",ctx_r1.buyVoucher)(\"fields\",ctx_r1.data.customFields)(\"fieldName\",cf_r3.internalName)}}function BuyVouchersStepConfirmComponent_ng_container_9_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function BuyVouchersStepConfirmComponent_ng_container_9_Template(rf,ctx){if(1&rf){const _r7=core.Rb();core.Ob(0),core.Bc(1,BuyVouchersStepConfirmComponent_ng_container_9_hr_1_Template,1,0,\"hr\",0),core.ac(2,\"async\"),core.Qb(3,\"form\",7),core.Qb(4,\"confirmation-password\",8),core.Xb(\"confirmationModeChanged\",(function($event){return core.sc(_r7),core.Zb().confirmationModeChanged.emit($event)}))(\"confirmed\",(function($event){return core.sc(_r7),core.Zb().confirmed.emit($event)})),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r2=core.Zb();core.xb(1),core.gc(\"ngIf\",core.bc(2,4,ctx_r2.layout.gtxxs$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(1),core.gc(\"passwordInput\",ctx_r2.confirmationPasswordInput)(\"createDeviceConfirmation\",ctx_r2.createDeviceConfirmation)}}let buy_vouchers_step_confirm_component_BuyVouchersStepConfirmComponent=(()=>{class BuyVouchersStepConfirmComponent extends base_component.a{constructor(injector){super(injector),this.confirmationModeChanged=new core.n,this.confirmed=new core.n}ngOnInit(){super.ngOnInit(),this.form=this.formBuilder.group({}),this.form.setControl(\"confirmationPassword\",this.confirmationPassword),this.createDeviceConfirmation=()=>({type:models.s.BUY_VOUCHERS,amount:this.buyVoucher.amount,voucherType:this.data.type.id,numberOfVouchers:this.buyVoucher.count}),this.confirmationPasswordInput||this.addShortcut(shortcut_service.k,()=>this.confirmed.emit())}labelOnTop(ltsm,field){return!!ltsm&&[models.p.RICH_TEXT,models.p.TEXT].includes(field?field.type:null)}}return BuyVouchersStepConfirmComponent.ɵfac=function(t){return new(t||BuyVouchersStepConfirmComponent)(core.Kb(core.r))},BuyVouchersStepConfirmComponent.ɵcmp=core.Eb({type:BuyVouchersStepConfirmComponent,selectors:[[\"buy-vouchers-step-confirm\"]],inputs:{confirmationPasswordInput:\"confirmationPasswordInput\",confirmationPassword:\"confirmationPassword\",buyVoucher:\"buyVoucher\",data:\"data\"},outputs:{confirmationModeChanged:\"confirmationModeChanged\",confirmed:\"confirmed\"},features:[core.ub],decls:10,vars:12,consts:[[4,\"ngIf\"],[3,\"label\"],[4,\"ngFor\",\"ngForOf\"],[3,\"user\"],[3,\"hidden\",\"label\",\"labelPosition\"],[3,\"object\",\"fields\",\"fieldName\"],[\"formatFieldValue\",\"\"],[3,\"formGroup\"],[\"focused\",\"\",\"formControlName\",\"confirmationPassword\",3,\"passwordInput\",\"createDeviceConfirmation\",\"confirmationModeChanged\",\"confirmed\"]],template:function(rf,ctx){1&rf&&(core.Bc(0,BuyVouchersStepConfirmComponent_ng_container_0_Template,2,1,\"ng-container\",0),core.Qb(1,\"label-value\",1),core.Dc(2),core.Pb(),core.Qb(3,\"label-value\",1),core.Dc(4),core.Pb(),core.Qb(5,\"label-value\",1),core.Dc(6),core.ac(7,\"currency\"),core.Pb(),core.Bc(8,BuyVouchersStepConfirmComponent_ng_container_8_Template,5,8,\"ng-container\",2),core.Bc(9,BuyVouchersStepConfirmComponent_ng_container_9_Template,5,6,\"ng-container\",0)),2&rf&&(core.gc(\"ngIf\",ctx.data.user&&!ctx.authHelper.isSelf(ctx.data.user)),core.xb(1),core.gc(\"label\",ctx.i18n.general.type),core.xb(1),core.Fc(\" \",ctx.data.type.voucherTitle,\"\\n\"),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.numberOfVouchers),core.xb(1),core.Fc(\" \",ctx.buyVoucher.count,\"\\n\"),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.amountPerVoucher),core.xb(1),core.Fc(\" \",core.cc(7,9,ctx.buyVoucher.amount,ctx.data.account.currency),\"\\n\"),core.xb(2),core.gc(\"ngForOf\",ctx.data.customFields),core.xb(1),core.gc(\"ngIf\",ctx.confirmationPasswordInput))},directives:[common.t,label_value_component.a,common.s,user_info_component.a,format_field_value_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,confirmation_password_component.a,focused_directive.a,fesm2015_forms.v,fesm2015_forms.l],pipes:[currency_pipe.a,common.b],encapsulation:2,changeDetection:0}),BuyVouchersStepConfirmComponent})();function BuyVouchersComponent_ng_container_3_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Ob(0),core.Qb(1,\"buy-vouchers-step-list-types\",4),core.Xb(\"typeSelected\",(function($event){return core.sc(_r5),core.Zb().toForm($event)})),core.Pb(),core.Nb()}if(2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"user\",ctx_r0.data.user)(\"types\",ctx_r0.data.types)}}function BuyVouchersComponent_page_content_4_action_button_6_Template(rf,ctx){if(1&rf){const _r8=core.Rb();core.Qb(0,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r8),core.Zb(2).backToSelectType()})),core.Pb()}if(2&rf){const ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.general.previous)}}function BuyVouchersComponent_page_content_4_Template(rf,ctx){if(1&rf){const _r10=core.Rb();core.Qb(0,\"page-content\",5),core.ac(1,\"async\"),core.Lb(2,\"buy-vouchers-step-form\",6),core.Qb(3,\"actions\",7),core.Qb(4,\"action-button\",8),core.Xb(\"action\",(function(){return core.sc(_r10),core.Zb().toConfirm()})),core.ac(5,\"async\"),core.Pb(),core.Bc(6,BuyVouchersComponent_page_content_4_action_button_6_Template,1,1,\"action-button\",9),core.Pb(),core.Pb()}if(2&rf){const ctx_r1=core.Zb();core.gc(\"heading\",ctx_r1.dataTypeForBuy.type.voucherTitle)(\"mobileHeading\",ctx_r1.dataTypeForBuy.type.voucherTitle)(\"mode\",core.bc(1,9,ctx_r1.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"data\",ctx_r1.dataTypeForBuy)(\"form\",ctx_r1.form)(\"customFieldControlsMap\",ctx_r1.customFieldControlsMap),core.xb(2),core.gc(\"disabled\",core.bc(5,11,ctx_r1.requesting$))(\"label\",ctx_r1.i18n.general.next),core.xb(2),core.gc(\"ngIf\",!ctx_r1.singleType)}}function BuyVouchersComponent_page_content_5_action_button_4_Template(rf,ctx){if(1&rf){const _r15=core.Rb();core.Qb(0,\"action-button\",8),core.Xb(\"action\",(function(){return core.sc(_r15),core.Zb(2).buy()})),core.ac(1,\"async\"),core.Pb()}if(2&rf){const ctx_r11=core.Zb(2);core.gc(\"disabled\",!ctx_r11.canConfirm||core.bc(1,2,ctx_r11.requesting$))(\"label\",ctx_r11.i18n.general.confirm)}}function BuyVouchersComponent_page_content_5_ng_template_6_Template(rf,ctx){1&rf&&core.Dc(0,\" \")}function BuyVouchersComponent_page_content_5_Template(rf,ctx){if(1&rf){const _r17=core.Rb();core.Qb(0,\"page-content\",5),core.ac(1,\"async\"),core.Qb(2,\"buy-vouchers-step-confirm\",11),core.Xb(\"confirmationModeChanged\",(function($event){return core.sc(_r17),core.Zb().confirmationMode$.next($event)}))(\"confirmed\",(function($event){return core.sc(_r17),core.Zb().buy($event)})),core.Pb(),core.Qb(3,\"actions\",7),core.Bc(4,BuyVouchersComponent_page_content_5_action_button_4_Template,2,4,\"action-button\",12),core.ac(5,\"async\"),core.Bc(6,BuyVouchersComponent_page_content_5_ng_template_6_Template,1,0,\"ng-template\",null,13,core.Cc),core.Qb(8,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r17),core.Zb().backToForm()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const _r12=core.qc(7),ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.voucher.title.buyConfirmation)(\"mobileHeading\",ctx_r2.i18n.voucher.mobileTitle.buyConfirmation)(\"mode\",core.bc(1,10,ctx_r2.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"buyVoucher\",ctx_r2.form.value)(\"data\",ctx_r2.dataTypeForBuy)(\"confirmationPasswordInput\",ctx_r2.dataTypeForBuy.confirmationPasswordInput)(\"confirmationPassword\",ctx_r2.confirmationPassword),core.xb(2),core.gc(\"ngIf\",core.bc(5,12,ctx_r2.confirmationMode$)!=ctx_r2.ConfirmationMode.Device)(\"ngIfElse\",_r12),core.xb(4),core.gc(\"label\",ctx_r2.i18n.general.previous)}}function BuyVouchersComponent_page_content_6_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}let buy_vouchers_component_BuyVouchersComponent=(()=>{class BuyVouchersComponent extends base_page_component.a{constructor(injector,voucherService){super(injector),this.voucherService=voucherService,this.ConfirmationMode=confirmation_mode.a,this.step$=new BehaviorSubject.a(null),this.singleType=!1,this.confirmationMode$=new BehaviorSubject.a(null)}get step(){return this.step$.value}set step(step){this.step$.next(step)}ngOnInit(){super.ngOnInit();const params=this.route.snapshot.params;this.user=this.authHelper.isSelf(params.user)?this.ApiHelper.SELF:params.user,this.addSub(this.voucherService.getVoucherDataForBuy({user:this.user}).subscribe(data=>this.data=data))}onDataInitialized(data){const types=data.types||[];1===types.length?(this.singleType=!0,this.toForm(types[0])):this.step=\"select-type\"}get currency(){return this.dataTypeForBuy.account.currency}buy(confirmationPassword){if(confirmationPassword&&this.confirmationPassword.setValue(confirmationPassword),this.confirmationPasswordInput&&!Object(helper.F)(this.confirmationPassword))return;const body=this.form.value;body.type=this.dataTypeForBuy.type.id,this.addSub(this.voucherService.buyVouchers({user:this.user,confirmationPassword:this.confirmationPasswordInput?this.confirmationPassword.value:null,body:body}).subscribe(ids=>{this.router.navigate(1===ids.length?[\"banking\",\"vouchers\",\"view\",ids[0]]:[\"banking\",this.user,\"vouchers\",\"bought\"]),this.notification.snackBar(this.i18n.voucher.buy.done)}))}backToSelectType(){this.step=\"select-type\"}backToForm(){this.step=\"form\"}toForm(type){this.addSub(this.voucherService.getVoucherDataForBuy({user:this.user,type:type.id}).subscribe(data=>{this.dataTypeForBuy=data,this.buildForm(),this.step=\"form\"}))}toConfirm(){Object(helper.F)(this.form)&&(this.canConfirm=this.authHelper.canConfirm(this.confirmationPasswordInput),this.canConfirm?(this.confirmationPasswordInput&&(this.confirmationPassword?this.confirmationPassword.reset():(this.confirmationPassword=this.formBuilder.control(null),this.confirmationPassword.setValidators(fesm2015_forms.G.required))),this.step=\"confirm\"):this.notification.warning(this.authHelper.getConfirmationMessage(this.confirmationPasswordInput)))}get confirmationPasswordInput(){return this.dataTypeForBuy.confirmationPasswordInput}buildForm(){if(this.form)this.form.reset();else if(this.customFieldControlsMap=this.fieldHelper.customValuesFormControlMap(this.dataTypeForBuy.customFields),this.form=this.formBuilder.group({count:new fesm2015_forms.j(\"\"),amount:new fesm2015_forms.j(\"\")}),this.customFieldControlsMap.size>0){const fieldValues=new fesm2015_forms.m({});for(const c of this.customFieldControlsMap)fieldValues.addControl(c[0],c[1]);this.form.setControl(\"customValues\",fieldValues)}this.form.get(\"count\").setValue(1)}resolveMenu(data){return this.menu.userMenu(data.user,shared_menu.b.BUY_VOUCHER)}}return BuyVouchersComponent.ɵfac=function(t){return new(t||BuyVouchersComponent)(core.Kb(core.r),core.Kb(vouchers_service.a))},BuyVouchersComponent.ɵcmp=core.Eb({type:BuyVouchersComponent,selectors:[[\"buy-vouchers\"]],features:[core.ub],decls:7,vars:9,consts:[[3,\"ready\",\"ngSwitch\"],[4,\"ngSwitchCase\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[4,\"ngSwitchDefault\"],[3,\"user\",\"types\",\"typeSelected\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",3,\"data\",\"form\",\"customFieldControlsMap\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\",4,\"ngIf\"],[\"outline\",\"\",3,\"label\",\"action\"],[1,\"flex-grow-1\",3,\"buyVoucher\",\"data\",\"confirmationPasswordInput\",\"confirmationPassword\",\"confirmationModeChanged\",\"confirmed\"],[3,\"disabled\",\"label\",\"action\",4,\"ngIf\",\"ngIfElse\"],[\"spacer\",\"\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,BuyVouchersComponent_ng_container_3_Template,2,2,\"ng-container\",1),core.Bc(4,BuyVouchersComponent_page_content_4_Template,7,13,\"page-content\",2),core.Bc(5,BuyVouchersComponent_page_content_5_Template,9,14,\"page-content\",2),core.Bc(6,BuyVouchersComponent_page_content_6_Template,2,0,\"page-content\",3),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,5,ctx.data$))(\"ngSwitch\",core.bc(2,7,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"select-type\"),core.xb(1),core.gc(\"ngSwitchCase\",\"form\"),core.xb(1),core.gc(\"ngSwitchCase\",\"confirm\"))},directives:[page_layout_component.a,common.x,common.y,common.z,buy_vouchers_step_list_types_component_BuyVouchersStepListTypesComponent,page_content_component.a,buy_vouchers_step_form_component_BuyVouchersStepFormComponent,actions_component.a,action_button_component.a,common.t,buy_vouchers_step_confirm_component_BuyVouchersStepConfirmComponent,spinner_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),BuyVouchersComponent})();var scan_qrcode_component=__webpack_require__(\"5pUo\"),ngx_bootstrap_modal=__webpack_require__(\"LqlI\"),extra_cell_directive=__webpack_require__(\"pBnU\");const redeem_voucher_component_c0=[\"inputField\"];function RedeemVoucherComponent_page_content_3_div_2_button_7_Template(rf,ctx){if(1&rf){const _r11=core.Rb();core.Qb(0,\"button\",14,15),core.Xb(\"click\",(function(){return core.sc(_r11),core.Zb(3).showScanQrCode()})),core.Lb(2,\"icon\",16),core.Pb()}if(2&rf){const ctx_r8=core.Zb(3);core.gc(\"tooltip\",ctx_r8.i18n.field.user.scanQrCodeTooltip)}}function RedeemVoucherComponent_page_content_3_div_2_Template(rf,ctx){if(1&rf){const _r13=core.Rb();core.Qb(0,\"div\"),core.Mb(1,6),core.Qb(2,\"div\",7),core.Qb(3,\"div\",8),core.Qb(4,\"label-value\",9),core.Lb(5,\"input-field\",10,11),core.Bc(7,RedeemVoucherComponent_page_content_3_div_2_button_7_Template,3,1,\"button\",12),core.Pb(),core.Pb(),core.Pb(),core.Qb(8,\"actions\"),core.Qb(9,\"action-button\",13),core.Xb(\"action\",(function(){return core.sc(_r13),core.Zb(2).submit()})),core.ac(10,\"async\"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r6=core.Zb(2),_r2=core.qc(6);core.xb(1),core.gc(\"ngTemplateOutlet\",_r2),core.xb(3),core.gc(\"label\",ctx_r6.i18n.voucher.token),core.xb(1),core.gc(\"mask\",ctx_r6.mask)(\"formControl\",ctx_r6.token)(\"placeholder\",ctx_r6.mask),core.xb(4),core.gc(\"disabled\",core.bc(10,7,ctx_r6.requesting$))(\"label\",ctx_r6.i18n.general.submit)}}function RedeemVoucherComponent_page_content_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Bc(2,RedeemVoucherComponent_page_content_3_div_2_Template,11,9,\"div\",5),core.ac(3,\"async\"),core.Pb()),2&rf){const ctx_r0=core.Zb(),_r4=core.qc(8);core.gc(\"heading\",ctx_r0.i18n.voucher.title.redeem)(\"mobileHeading\",ctx_r0.i18n.voucher.mobileTitle.redeem)(\"mode\",core.bc(1,5,ctx_r0.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"ngIf\",core.bc(3,7,ctx_r0.data$))(\"ngIfElse\",_r4)}}const redeem_voucher_component_c1=function(a0){return{\"flex-grow-1\":a0}};function RedeemVoucherComponent_page_content_4_ng_container_2_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",27),core.Lb(1,\"avatar\",28),core.Pb()),2&rf){const ctx_r15=core.Zb(3);core.gc(\"ngClass\",core.jc(2,redeem_voucher_component_c1,!ctx_r15.dataForRedeem.type.voucherDescription)),core.xb(1),core.gc(\"image\",ctx_r15.dataForRedeem.type.image)}}function RedeemVoucherComponent_page_content_4_ng_container_2_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",29),core.Dc(2),core.Pb(),core.Nb()),2&rf){const ctx_r16=core.Zb(3);core.xb(2),core.Fc(\"\",ctx_r16.dataForRedeem.type.voucherDescription,\" \")}}function RedeemVoucherComponent_page_content_4_ng_container_2_label_value_14_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",23),core.Lb(1,\"user-link\",30),core.Pb()),2&rf){const ctx_r17=core.Zb(3);core.gc(\"label\",ctx_r17.i18n.voucher.buy.buyer),core.xb(1),core.gc(\"user\",ctx_r17.dataForRedeem.buyer)}}function RedeemVoucherComponent_page_content_4_ng_container_2_custom_field_input_18_Template(rf,ctx){if(1&rf&&core.Lb(0,\"custom-field-input\",31),2&rf){const cf_r19=ctx.$implicit,ctx_r18=core.Zb(3);core.gc(\"field\",cf_r19)(\"formControl\",ctx_r18.form.get(cf_r19.internalName))}}const redeem_voucher_component_c2=function(a0){return{\"d-flex flex-row-reverse justify-content-between\":a0}};function RedeemVoucherComponent_page_content_4_ng_container_2_Template(rf,ctx){if(1&rf){const _r21=core.Rb();core.Ob(0),core.Mb(1,6),core.Qb(2,\"notification\",17),core.Dc(3),core.Pb(),core.Qb(4,\"div\",18),core.Qb(5,\"div\",19),core.ac(6,\"async\"),core.Bc(7,RedeemVoucherComponent_page_content_4_ng_container_2_div_7_Template,2,4,\"div\",20),core.Bc(8,RedeemVoucherComponent_page_content_4_ng_container_2_ng_container_8_Template,3,1,\"ng-container\",21),core.Pb(),core.Lb(9,\"hr\",22),core.Qb(10,\"label-value\",23),core.Dc(11),core.Pb(),core.Qb(12,\"label-value\",23),core.Dc(13),core.Pb(),core.Bc(14,RedeemVoucherComponent_page_content_4_ng_container_2_label_value_14_Template,2,2,\"label-value\",24),core.Qb(15,\"label-value\",23),core.Dc(16),core.ac(17,\"currency\"),core.Pb(),core.Bc(18,RedeemVoucherComponent_page_content_4_ng_container_2_custom_field_input_18_Template,1,2,\"custom-field-input\",25),core.Pb(),core.Qb(19,\"actions\"),core.Qb(20,\"action-button\",13),core.Xb(\"action\",(function(){return core.sc(_r21),core.Zb(2).submit()})),core.ac(21,\"async\"),core.Pb(),core.Qb(22,\"action-button\",26),core.Xb(\"action\",(function(){return core.sc(_r21),core.Zb(2).backToForm()})),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r14=core.Zb(2),_r2=core.qc(6);core.xb(1),core.gc(\"ngTemplateOutlet\",_r2),core.xb(2),core.Fc(\" \",ctx_r14.i18n.voucher.redeem.confirm,\" \"),core.xb(2),core.gc(\"ngClass\",core.jc(23,redeem_voucher_component_c2,core.bc(6,16,ctx_r14.layout.gtsm$)&&ctx_r14.dataForRedeem.type.image)),core.xb(2),core.gc(\"ngIf\",ctx_r14.dataForRedeem.type.image),core.xb(1),core.gc(\"ngIf\",ctx_r14.dataForRedeem.type.voucherDescription),core.xb(2),core.gc(\"label\",ctx_r14.i18n.general.type),core.xb(1),core.Fc(\" \",ctx_r14.dataForRedeem.type.name,\" \"),core.xb(1),core.gc(\"label\",ctx_r14.i18n.voucher.token),core.xb(1),core.Fc(\" \",ctx_r14.dataForRedeem.token,\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r14.dataForRedeem.buyer),core.xb(1),core.gc(\"label\",ctx_r14.i18n.transaction.amount),core.xb(1),core.Fc(\" \",core.cc(17,18,ctx_r14.dataForRedeem.amount,ctx_r14.dataForRedeem.type.configuration.currency),\" \"),core.xb(2),core.gc(\"ngForOf\",ctx_r14.dataForRedeem.customFields),core.xb(2),core.gc(\"disabled\",core.bc(21,21,ctx_r14.requesting$))(\"label\",ctx_r14.i18n.general.submit),core.xb(2),core.gc(\"label\",ctx_r14.i18n.general.previous)}}function RedeemVoucherComponent_page_content_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",4),core.ac(1,\"async\"),core.Bc(2,RedeemVoucherComponent_page_content_4_ng_container_2_Template,23,25,\"ng-container\",5),core.ac(3,\"async\"),core.Pb()),2&rf){const ctx_r1=core.Zb(),_r4=core.qc(8);core.gc(\"heading\",ctx_r1.i18n.voucher.title.redeem)(\"mobileHeading\",ctx_r1.i18n.voucher.mobileTitle.redeem)(\"mode\",core.bc(1,5,ctx_r1.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"ngIf\",core.bc(3,7,ctx_r1.dataForRedeem$))(\"ngIfElse\",_r4)}}function RedeemVoucherComponent_ng_template_5_ng_container_0_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"user-info\",30),core.Lb(2,\"hr\"),core.Nb()),2&rf){const ctx_r23=core.Zb(2);core.xb(1),core.gc(\"user\",ctx_r23.data.user)}}function RedeemVoucherComponent_ng_template_5_Template(rf,ctx){if(1&rf&&core.Bc(0,RedeemVoucherComponent_ng_template_5_ng_container_0_Template,3,1,\"ng-container\",21),2&rf){const ctx_r3=core.Zb();core.gc(\"ngIf\",!ctx_r3.self)}}function RedeemVoucherComponent_ng_template_7_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}let redeem_voucher_component_RedeemVoucherComponent=(()=>{class RedeemVoucherComponent extends base_page_component.a{constructor(injector,voucherService,modal){super(injector),this.voucherService=voucherService,this.modal=modal,this.step$=new BehaviorSubject.a(null),this.token=new fesm2015_forms.j(\"\",fesm2015_forms.G.required),this.mask=\"\",this.dataForRedeem$=new BehaviorSubject.a(null)}get dataForRedeem(){return this.dataForRedeem$.value}set dataForRedeem(dataForRedeem){this.dataForRedeem$.next(dataForRedeem)}get step(){return this.step$.value}set step(step){this.step$.next(step)}submit(){if(\"form\"===this.step){if(!Object(helper.F)(this.token))return;this.addSub(this.voucherService.getVoucherDataForRedeem({user:this.userId,token:this.token.value}).subscribe(data=>{this.dataForRedeem=data,this.form=this.fieldHelper.customValuesFormGroup(this.dataForRedeem.customFields),this.step=\"confirm\"}))}else this.addSub(this.voucherService.redeemVoucher({user:this.userId,token:this.token.value,body:{customValues:this.form.value}}).subscribe(data=>{this.router.navigate([\"banking\",\"vouchers\",\"view\",data.voucherId]),this.notification.info(this.i18n.voucher.redeem.done)}))}backToForm(){this.step=\"form\"}ngOnInit(){super.ngOnInit(),this.userId=this.route.snapshot.paramMap.get(\"user\"),this.addSub(this.voucherService.getVoucherInitialDataForRedeem({user:this.userId}).subscribe(data=>{this.data=data,this.mask=this.data.mask?this.data.mask:\"\",this.self=this.authHelper.isSelf(data.user)})),this.step=\"form\"}reload(){this.step=\"form\",super.reload()}resolveMenu(data){return this.menu.userMenu(data.user,shared_menu.b.REDEEM_VOUCHER)}showScanQrCode(){this.modal.show(scan_qrcode_component.a,{class:\"modal-form\"}).content.select.pipe(Object(first.a)()).subscribe(value=>{this.token.setValue(value),this.submit()}),this.modal.onHide.pipe(Object(first.a)()).subscribe(()=>Object(helper.j)(this.inputField,!0))}}return RedeemVoucherComponent.ɵfac=function(t){return new(t||RedeemVoucherComponent)(core.Kb(core.r),core.Kb(vouchers_service.a),core.Kb(ngx_bootstrap_modal.b))},RedeemVoucherComponent.ɵcmp=core.Eb({type:RedeemVoucherComponent,selectors:[[\"app-redeem-voucher\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Hc(redeem_voucher_component_c0,!0),2&rf&&core.pc(_t=core.Yb())&&(ctx.inputField=_t.first)},features:[core.ub],decls:9,vars:8,consts:[[3,\"ready\",\"ngSwitch\"],[3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[\"active_user\",\"\"],[\"loading\",\"\"],[3,\"heading\",\"mobileHeading\",\"mode\"],[4,\"ngIf\",\"ngIfElse\"],[3,\"ngTemplateOutlet\"],[1,\"d-flex\",\"flex-grow-1\"],[1,\"flex-grow-1\"],[\"kind\",\"field\",3,\"label\"],[\"type\",\"text\",\"focused\",\"\",\"required\",\"\",3,\"mask\",\"formControl\",\"placeholder\"],[\"inputField\",\"\"],[\"class\",\"btn btn-icon\",3,\"tooltip\",\"click\",4,\"extraCell\"],[3,\"disabled\",\"label\",\"action\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"scanQrCodeButton\",\"\"],[\"icon\",\"scan_qr_code\"],[\"ngClass\",\"mb-3\",\"type\",\"warning\"],[1,\"d-flex\",\"flex-grow-1\",\"flex-column\"],[3,\"ngClass\"],[\"class\",\"image d-flex justify-content-center mt-2 mb-4\",3,\"ngClass\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"mt-3\"],[3,\"label\"],[3,\"label\",4,\"ngIf\"],[3,\"field\",\"formControl\",4,\"ngFor\",\"ngForOf\"],[\"outline\",\"\",3,\"label\",\"action\"],[1,\"image\",\"d-flex\",\"justify-content-center\",\"mt-2\",\"mb-4\",3,\"ngClass\"],[\"size\",\"160\",\"imageSize\",\"200\",\"useLightbox\",\"\",3,\"image\"],[1,\"break-nl\"],[3,\"user\"],[3,\"field\",\"formControl\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,RedeemVoucherComponent_page_content_3_Template,4,9,\"page-content\",1),core.Bc(4,RedeemVoucherComponent_page_content_4_Template,4,9,\"page-content\",1),core.Pb(),core.Bc(5,RedeemVoucherComponent_ng_template_5_Template,1,1,\"ng-template\",null,2,core.Cc),core.Bc(7,RedeemVoucherComponent_ng_template_7_Template,2,0,\"ng-template\",null,3,core.Cc)),2&rf&&(core.gc(\"ready\",core.bc(1,4,ctx.data$))(\"ngSwitch\",core.bc(2,6,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"form\"),core.xb(1),core.gc(\"ngSwitchCase\",\"confirm\"))},directives:[page_layout_component.a,common.x,common.y,page_content_component.a,common.t,common.A,label_value_component.a,input_field_component.a,focused_directive.a,fesm2015_forms.D,mask_directive.a,fesm2015_forms.v,fesm2015_forms.k,extra_cell_directive.a,actions_component.a,action_button_component.a,ngx_bootstrap_tooltip.b,icon_component.a,notification_component.a,common.q,common.s,avatar_component.a,user_link_component.a,custom_field_input_component.a,user_info_component.a,spinner_component.a],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),RedeemVoucherComponent})();function SearchBoughtVouchersComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchBoughtVouchersComponent_ng_template_3_ng_container_3_div_4_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",7)}function SearchBoughtVouchersComponent_ng_template_3_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",7),core.Qb(2,\"label-value\",14),core.Lb(3,\"user-link\",15),core.Pb(),core.Pb(),core.Bc(4,SearchBoughtVouchersComponent_ng_template_3_ng_container_3_div_4_Template,1,0,\"div\",16),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.gc(\"label\",ctx_r3.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r3.data.user),core.xb(1),core.gc(\"ngIf\",ctx_r3.layout.gtsm$)}}function SearchBoughtVouchersComponent_ng_template_3_field_option_6_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",17),2&rf){const type_r8=ctx.$implicit;core.gc(\"value\",type_r8.id)(\"internalName\",type_r8.internalName)(\"id\",type_r8.id)(\"text\",type_r8.name)}}function SearchBoughtVouchersComponent_ng_template_3_mobile_result_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",18),core.Qb(1,\"div\",19),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r9=ctx.$implicit;core.gc(\"date\",row_r9.creationDate)(\"amount\",row_r9.amount)(\"amountColor\",!1)(\"currency\",row_r9.type.configuration.currency),core.xb(2),core.Fc(\" \",row_r9.type.name,\" \")}}function SearchBoughtVouchersComponent_ng_template_3_table_12_ng_container_12_Template(rf,ctx){if(1&rf){const _r13=core.Rb();core.Ob(0),core.Qb(1,\"tr\",23),core.Xb(\"click\",(function(){core.sc(_r13);const row_r11=ctx.$implicit,ctx_r12=core.Zb(3);return ctx_r12.router.navigate(ctx_r12.path(row_r11))})),core.Qb(2,\"td\"),core.Qb(3,\"a\",24),core.Dc(4),core.ac(5,\"date\"),core.Pb(),core.Pb(),core.Qb(6,\"td\"),core.Qb(7,\"a\",24),core.Dc(8),core.ac(9,\"date\"),core.Pb(),core.Pb(),core.Qb(10,\"td\"),core.Qb(11,\"a\",24),core.Dc(12),core.Pb(),core.Pb(),core.Qb(13,\"td\"),core.Qb(14,\"a\",24),core.Dc(15),core.Pb(),core.Pb(),core.Qb(16,\"td\",21),core.Qb(17,\"a\",24),core.Dc(18),core.ac(19,\"currency\"),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r11=ctx.$implicit,ctx_r10=core.Zb(3);core.xb(3),core.gc(\"routerLink\",ctx_r10.path(row_r11)),core.xb(1),core.Ec(core.bc(5,10,row_r11.creationDate)),core.xb(3),core.gc(\"routerLink\",ctx_r10.path(row_r11)),core.xb(1),core.Ec(core.bc(9,12,row_r11.expirationDate)),core.xb(3),core.gc(\"routerLink\",ctx_r10.path(row_r11)),core.xb(1),core.Ec(ctx_r10.voucherStatus(row_r11.status)),core.xb(2),core.gc(\"routerLink\",ctx_r10.path(row_r11)),core.xb(1),core.Ec(row_r11.type.name),core.xb(2),core.gc(\"routerLink\",ctx_r10.path(row_r11)),core.xb(1),core.Ec(core.cc(19,14,row_r11.amount,row_r11.type.configuration.currency))}}function SearchBoughtVouchersComponent_ng_template_3_table_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",20),core.Qb(1,\"tbody\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Qb(10,\"th\",21),core.Dc(11),core.Pb(),core.Bc(12,SearchBoughtVouchersComponent_ng_template_3_table_12_ng_container_12_Template,20,17,\"ng-container\",22),core.ac(13,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r6=core.Zb(2);var tmp_5_0;core.xb(3),core.Ec(ctx_r6.i18n.general.creationDate),core.xb(2),core.Ec(ctx_r6.i18n.general.expirationDate),core.xb(2),core.Ec(ctx_r6.i18n.general.status),core.xb(2),core.Ec(ctx_r6.i18n.general.type),core.xb(2),core.Ec(ctx_r6.i18n.transaction.amount),core.xb(1),core.gc(\"ngForOf\",null==(tmp_5_0=core.bc(13,6,ctx_r6.results$))?null:tmp_5_0.results)}}function SearchBoughtVouchersComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r15=core.Rb();core.Qb(0,\"page-content\",3),core.Qb(1,\"form\",4),core.Qb(2,\"div\",5),core.Bc(3,SearchBoughtVouchersComponent_ng_template_3_ng_container_3_Template,5,3,\"ng-container\",6),core.Qb(4,\"div\",7),core.Qb(5,\"multi-selection-field\",8),core.Bc(6,SearchBoughtVouchersComponent_ng_template_3_field_option_6_Template,1,4,\"field-option\",9),core.Pb(),core.Pb(),core.Qb(7,\"div\",7),core.Lb(8,\"multi-selection-field\",10),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Qb(9,\"results-layout\",11),core.Xb(\"update\",(function($event){return core.sc(_r15),core.Zb().update($event)})),core.ac(10,\"async\"),core.Bc(11,SearchBoughtVouchersComponent_ng_template_3_mobile_result_11_Template,3,5,\"mobile-result\",12),core.Bc(12,SearchBoughtVouchersComponent_ng_template_3_table_12_Template,14,8,\"table\",13),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.voucher.title.searchBought)(\"mobileHeading\",ctx_r2.i18n.voucher.mobileTitle.bought),core.xb(1),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",ctx_r2.data.user&&!ctx_r2.self),core.xb(2),core.gc(\"emptyLabel\",ctx_r2.i18n.general.notApplied)(\"label\",ctx_r2.i18n.general.type),core.xb(1),core.gc(\"ngForOf\",ctx_r2.data.types),core.xb(2),core.gc(\"emptyLabel\",ctx_r2.i18n.general.notApplied)(\"label\",ctx_r2.i18n.general.status)(\"fieldOptions\",ctx_r2.statusOptions),core.xb(1),core.gc(\"results\",core.bc(10,13,ctx_r2.results$))(\"rendering$\",ctx_r2.rendering$)(\"toLink\",ctx_r2.toLink)}}let search_bought_vouchers_component_SearchBoughtVouchersComponent=(()=>{class SearchBoughtVouchersComponent extends base_search_page_component.a{constructor(injector,vouchersService){super(injector),this.vouchersService=vouchersService}ngOnInit(){super.ngOnInit();const params=this.route.snapshot.params;this.self=this.authHelper.isSelf(params.user),this.user=this.self?this.ApiHelper.SELF:params.user,this.addSub(this.vouchersService.getUserVouchersDataForSearch({user:this.user,relation:models.Sb.BOUGHT}).subscribe(data=>{this.form.patchValue(data.query),this.data=data}))}get statusOptions(){return Object.values(models.Tb).map(st=>({value:st,text:this.voucherStatus(st)}))}getFormControlNames(){return[\"types\",\"statuses\"]}toSearchParams(value){const params=Object(cloneDeep.a)(value);return params.user=this.user,params}doSearch(query){return this.vouchersService.searchUserVouchers$Response(query)}get toLink(){return row=>this.path(row)}path(row){return[\"/banking/vouchers/view/\",row.id]}voucherStatus(status){switch(status){case models.Tb.CANCELED:return this.i18n.voucher.status.canceled;case models.Tb.EXPIRED:return this.i18n.voucher.status.expired;case models.Tb.OPEN:return this.i18n.voucher.status.open;case models.Tb.PENDING:return this.i18n.voucher.status.pending;case models.Tb.REDEEMED:return this.i18n.voucher.status.redeemed}}resolveMenu(data){return this.menu.userMenu(data.user,shared_menu.b.SEARCH_BOUGHT_VOUCHERS)}}return SearchBoughtVouchersComponent.ɵfac=function(t){return new(t||SearchBoughtVouchersComponent)(core.Kb(core.r),core.Kb(vouchers_service.a))},SearchBoughtVouchersComponent.ɵcmp=core.Eb({type:SearchBoughtVouchersComponent,selectors:[[\"search-bought-vouchers\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\"],[4,\"ngIf\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"types\",3,\"emptyLabel\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"labelPosition\",\"side\",\"formControlName\",\"statuses\",3,\"emptyLabel\",\"label\",\"fieldOptions\"],[\"resultType\",\"list\",3,\"results\",\"rendering$\",\"toLink\",\"update\"],[3,\"date\",\"amount\",\"amountColor\",\"currency\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"kind\",\"fieldView\",3,\"label\"],[3,\"user\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[3,\"date\",\"amount\",\"amountColor\",\"currency\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[3,\"routerLink\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchBoughtVouchersComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchBoughtVouchersComponent_ng_template_3_Template,13,15,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,multi_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.s,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,label_value_component.a,user_link_component.a,field_option_directive.a,mobile_result_component.a,router.h],pipes:[common.b,date_pipe.a,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchBoughtVouchersComponent})();function SearchRedeemedVouchersComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchRedeemedVouchersComponent_ng_template_3_ng_container_3_div_4_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",9)}function SearchRedeemedVouchersComponent_ng_template_3_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",9),core.Qb(2,\"label-value\",15),core.Lb(3,\"user-link\",16),core.Pb(),core.Pb(),core.Bc(4,SearchRedeemedVouchersComponent_ng_template_3_ng_container_3_div_4_Template,1,0,\"div\",7),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.gc(\"label\",ctx_r3.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r3.data.user),core.xb(1),core.gc(\"ngIf\",ctx_r3.layout.gtsm$)}}function SearchRedeemedVouchersComponent_ng_template_3_div_4_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",19),2&rf){const type_r10=ctx.$implicit;core.gc(\"value\",type_r10.id)(\"internalName\",type_r10.internalName)(\"id\",type_r10.id)(\"text\",type_r10.name)}}function SearchRedeemedVouchersComponent_ng_template_3_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",9),core.Qb(1,\"multi-selection-field\",17),core.Bc(2,SearchRedeemedVouchersComponent_ng_template_3_div_4_field_option_2_Template,1,4,\"field-option\",18),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r4.i18n.general.type),core.xb(1),core.gc(\"ngForOf\",ctx_r4.data.types)}}function SearchRedeemedVouchersComponent_ng_template_3_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",22),2&rf){const operator_r12=ctx.$implicit;core.gc(\"value\",operator_r12.id)(\"id\",operator_r12.id)(\"text\",operator_r12.display)}}function SearchRedeemedVouchersComponent_ng_template_3_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",9),core.Qb(1,\"single-selection-field\",20),core.Bc(2,SearchRedeemedVouchersComponent_ng_template_3_div_5_field_option_2_Template,1,3,\"field-option\",21),core.Pb(),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.xb(1),core.gc(\"emptyOption\",ctx_r5.i18n.general.notApplied)(\"label\",ctx_r5.i18n.general.operator),core.xb(1),core.gc(\"ngForOf\",ctx_r5.data.operators)}}function SearchRedeemedVouchersComponent_ng_template_3_mobile_result_13_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",23),core.Qb(1,\"div\",24),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r13=ctx.$implicit;core.gc(\"date\",row_r13.redeemDate)(\"amount\",row_r13.amount)(\"currency\",row_r13.type.configuration.currency)(\"amountColor\",!1),core.xb(2),core.Fc(\" \",row_r13.type.name,\" \")}}function SearchRedeemedVouchersComponent_ng_template_3_table_14_th_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"th\"),core.Dc(1),core.Pb()),2&rf){const ctx_r14=core.Zb(3);core.xb(1),core.Ec(ctx_r14.i18n.general.operator)}}function SearchRedeemedVouchersComponent_ng_template_3_table_14_ng_container_10_td_6_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Nb()),2&rf){const row_r16=core.Zb(2).$implicit;core.xb(1),core.Fc(\" \",null!=row_r16.redeemBy&&row_r16.redeemBy.user?row_r16.redeemBy.display:\"\",\" \")}}function SearchRedeemedVouchersComponent_ng_template_3_table_14_ng_container_10_td_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Bc(1,SearchRedeemedVouchersComponent_ng_template_3_table_14_ng_container_10_td_6_ng_container_1_Template,2,1,\"ng-container\",6),core.Pb()),2&rf){const row_r16=core.Zb().$implicit;core.xb(1),core.gc(\"ngIf\",row_r16.redeemBy)}}function SearchRedeemedVouchersComponent_ng_template_3_table_14_ng_container_10_Template(rf,ctx){if(1&rf){const _r22=core.Rb();core.Ob(0),core.Qb(1,\"tr\",28),core.Xb(\"click\",(function(){core.sc(_r22);const row_r16=ctx.$implicit,ctx_r21=core.Zb(3);return ctx_r21.router.navigate(ctx_r21.path(row_r16))})),core.Qb(2,\"td\"),core.Qb(3,\"a\",29),core.Dc(4),core.ac(5,\"date\"),core.Pb(),core.Pb(),core.Bc(6,SearchRedeemedVouchersComponent_ng_template_3_table_14_ng_container_10_td_6_Template,2,1,\"td\",6),core.Qb(7,\"td\"),core.Dc(8),core.Pb(),core.Qb(9,\"td\",26),core.Dc(10),core.ac(11,\"currency\"),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r16=ctx.$implicit,ctx_r15=core.Zb(3);core.xb(3),core.gc(\"routerLink\",ctx_r15.path(row_r16)),core.xb(1),core.Fc(\" \",core.bc(5,5,row_r16.redeemDate),\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r15.data.operators.length>0),core.xb(2),core.Fc(\" \",row_r16.type.name,\" \"),core.xb(2),core.Fc(\" \",core.cc(11,7,row_r16.amount,row_r16.type.configuration.currency),\" \")}}function SearchRedeemedVouchersComponent_ng_template_3_table_14_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",25),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Bc(4,SearchRedeemedVouchersComponent_ng_template_3_table_14_th_4_Template,2,1,\"th\",6),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\",26),core.Dc(8),core.Pb(),core.Pb(),core.Qb(9,\"tbody\"),core.Bc(10,SearchRedeemedVouchersComponent_ng_template_3_table_14_ng_container_10_Template,12,10,\"ng-container\",27),core.ac(11,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);var tmp_4_0;core.xb(3),core.Ec(ctx_r7.i18n.voucher.redeem.date),core.xb(1),core.gc(\"ngIf\",ctx_r7.data.operators.length>0),core.xb(2),core.Ec(ctx_r7.i18n.general.type),core.xb(2),core.Ec(ctx_r7.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",null==(tmp_4_0=core.bc(11,5,ctx_r7.results$))?null:tmp_4_0.results)}}function SearchRedeemedVouchersComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r24=core.Rb();core.Qb(0,\"page-content\",3),core.Qb(1,\"form\",4),core.Qb(2,\"div\",5),core.Bc(3,SearchRedeemedVouchersComponent_ng_template_3_ng_container_3_Template,5,3,\"ng-container\",6),core.Bc(4,SearchRedeemedVouchersComponent_ng_template_3_div_4_Template,3,2,\"div\",7),core.Bc(5,SearchRedeemedVouchersComponent_ng_template_3_div_5_Template,3,3,\"div\",7),core.Qb(6,\"div\",8),core.Qb(7,\"div\",9),core.Lb(8,\"date-field\",10),core.Pb(),core.Qb(9,\"div\",9),core.Lb(10,\"date-field\",11),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Qb(11,\"results-layout\",12),core.Xb(\"update\",(function($event){return core.sc(_r24),core.Zb().update($event)})),core.ac(12,\"async\"),core.Bc(13,SearchRedeemedVouchersComponent_ng_template_3_mobile_result_13_Template,3,5,\"mobile-result\",13),core.Bc(14,SearchRedeemedVouchersComponent_ng_template_3_table_14_Template,12,7,\"table\",14),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.voucher.title.redeemed)(\"mobileHeading\",ctx_r2.i18n.voucher.mobileTitle.redeemed),core.xb(1),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",ctx_r2.data.user&&!ctx_r2.self),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.data.types?null:ctx_r2.data.types.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.data.operators?null:ctx_r2.data.operators.length)>0),core.xb(3),core.gc(\"label\",ctx_r2.i18n.general.beginDate),core.xb(2),core.gc(\"label\",ctx_r2.i18n.general.endDate),core.xb(1),core.gc(\"results\",core.bc(12,11,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)}}let search_redeemed_vouchers_component_SearchRedeemedVouchersComponent=(()=>{class SearchRedeemedVouchersComponent extends base_search_page_component.a{constructor(injector,voucherService){super(injector),this.voucherService=voucherService}ngOnInit(){super.ngOnInit();const user=this.route.snapshot.paramMap.get(\"user\");this.addSub(this.voucherService.getUserVouchersDataForSearch({user:user,relation:models.Sb.REDEEMED}).subscribe(dataForSearch=>{this.data=dataForSearch,this.self=this.authHelper.isSelf(dataForSearch.user)}))}getFormControlNames(){return[\"types\",\"periodBegin\",\"periodEnd\",\"operator\"]}toSearchParams(value){const params=value;return params.user=this.route.snapshot.paramMap.get(\"user\"),params.relation=models.Sb.REDEEMED,params.redeemBy=value.operator,(value.periodBegin||value.periodEnd)&&(params.redeemPeriod=this.ApiHelper.dateRangeFilter(value.periodBegin,value.periodEnd)),params}doSearch(value){return this.voucherService.searchUserVouchers$Response(value)}get toLink(){return row=>this.path(row)}path(row){return[\"/banking/vouchers/view/\",row.id]}resolveMenu(data){return this.menu.userMenu(data.user,shared_menu.b.SEARCH_REDEEMED)}}return SearchRedeemedVouchersComponent.ɵfac=function(t){return new(t||SearchRedeemedVouchersComponent)(core.Kb(core.r),core.Kb(vouchers_service.a))},SearchRedeemedVouchersComponent.ɵcmp=core.Eb({type:SearchRedeemedVouchersComponent,selectors:[[\"app-search-redeemed-vouchers\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\",\"no-gutters\"],[4,\"ngIf\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[1,\"row\",\"no-gutters\",\"col-12\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodBegin\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodEnd\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"resultType\",\"list\",3,\"results\",\"toLink\",\"rendering$\",\"update\"],[3,\"date\",\"amount\",\"currency\",\"amountColor\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"labelPosition\",\"side\",\"kind\",\"fieldView\",3,\"label\"],[3,\"user\"],[\"labelPosition\",\"side\",\"formControlName\",\"types\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"operator\",3,\"emptyOption\",\"label\"],[3,\"value\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"id\",\"text\"],[3,\"date\",\"amount\",\"currency\",\"amountColor\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[3,\"routerLink\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchRedeemedVouchersComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchRedeemedVouchersComponent_ng_template_3_Template,15,13,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,date_field_component.a,fesm2015_forms.v,fesm2015_forms.l,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,label_value_component.a,user_link_component.a,multi_selection_field_component.a,common.s,field_option_directive.a,single_selection_field_component.a,mobile_result_component.a,router.h],pipes:[common.b,date_pipe.a,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchRedeemedVouchersComponent})();function VoucherFiltersComponent_div_3_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",15),2&rf){const type_r4=ctx.$implicit;core.gc(\"value\",type_r4.id)(\"internalName\",type_r4.internalName)(\"id\",type_r4.id)(\"text\",type_r4.name)}}function VoucherFiltersComponent_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",4),core.Qb(1,\"multi-selection-field\",13),core.Bc(2,VoucherFiltersComponent_div_3_field_option_2_Template,1,4,\"field-option\",14),core.Pb(),core.Pb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.type),core.xb(1),core.gc(\"ngForOf\",ctx_r0.data.types)}}function VoucherFiltersComponent_ng_container_14_div_23_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",31),2&rf){const group_r10=ctx.$implicit;core.gc(\"value\",group_r10.id)(\"internalName\",group_r10.internalName)(\"id\",group_r10.id)(\"text\",group_r10.name)(\"parent\",group_r10.groupSet)}}function VoucherFiltersComponent_ng_container_14_div_23_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",4),core.Qb(1,\"multi-selection-field\",29),core.Bc(2,VoucherFiltersComponent_ng_container_14_div_23_field_option_2_Template,1,5,\"field-option\",30),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r7.i18n.voucher.buyerGroups),core.xb(1),core.gc(\"ngForOf\",ctx_r7.data.userGroups)}}function VoucherFiltersComponent_ng_container_14_div_27_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",31),2&rf){const group_r12=ctx.$implicit;core.gc(\"value\",group_r12.id)(\"internalName\",group_r12.internalName)(\"id\",group_r12.id)(\"text\",group_r12.name)(\"parent\",group_r12.groupSet)}}function VoucherFiltersComponent_ng_container_14_div_27_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",4),core.Qb(1,\"multi-selection-field\",32),core.Bc(2,VoucherFiltersComponent_ng_container_14_div_27_field_option_2_Template,1,5,\"field-option\",30),core.Pb(),core.Pb()),2&rf){const ctx_r8=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r8.i18n.voucher.redeemerGroups),core.xb(1),core.gc(\"ngForOf\",ctx_r8.data.userGroups)}}function VoucherFiltersComponent_ng_container_14_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",16),core.Qb(2,\"div\",4),core.Lb(3,\"date-field\",17),core.Pb(),core.Qb(4,\"div\",4),core.Lb(5,\"date-field\",18),core.Pb(),core.Pb(),core.Qb(6,\"div\",16),core.Qb(7,\"div\",4),core.Lb(8,\"date-field\",19),core.Pb(),core.Qb(9,\"div\",4),core.Lb(10,\"date-field\",20),core.Pb(),core.Pb(),core.Qb(11,\"div\",16),core.Qb(12,\"div\",4),core.Lb(13,\"date-field\",21),core.Pb(),core.Qb(14,\"div\",4),core.Lb(15,\"date-field\",22),core.Pb(),core.Pb(),core.Qb(16,\"div\",16),core.Qb(17,\"div\",4),core.Lb(18,\"decimal-field\",23,24),core.Pb(),core.Qb(20,\"div\",4),core.Lb(21,\"decimal-field\",25,24),core.Pb(),core.Pb(),core.Bc(23,VoucherFiltersComponent_ng_container_14_div_23_Template,3,2,\"div\",3),core.Qb(24,\"div\",4),core.Qb(25,\"label-value\",26),core.Lb(26,\"user-field\",27),core.Pb(),core.Pb(),core.Bc(27,VoucherFiltersComponent_ng_container_14_div_27_Template,3,2,\"div\",3),core.Qb(28,\"div\",4),core.Qb(29,\"label-value\",26),core.Lb(30,\"user-field\",28),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r1=core.Zb();core.xb(3),core.gc(\"label\",ctx_r1.i18n.general.creationDate),core.xb(2),core.gc(\"label\",ctx_r1.i18n.general.to),core.xb(3),core.gc(\"label\",ctx_r1.i18n.general.expirationDate),core.xb(2),core.gc(\"label\",ctx_r1.i18n.general.to),core.xb(3),core.gc(\"label\",ctx_r1.i18n.voucher.redeem.date),core.xb(2),core.gc(\"label\",ctx_r1.i18n.general.to),core.xb(3),core.gc(\"label\",ctx_r1.i18n.transaction.amount)(\"scale\",ctx_r1.maxScale),core.xb(3),core.gc(\"label\",ctx_r1.i18n.general.to)(\"scale\",ctx_r1.maxScale),core.xb(2),core.gc(\"ngIf\",(null==ctx_r1.data.userGroups?null:ctx_r1.data.userGroups.length)>1),core.xb(2),core.gc(\"label\",ctx_r1.i18n.voucher.buy.buyer),core.xb(1),core.gc(\"autoSearch\",!0)(\"allowContacts\",!0)(\"allowSearch\",!0)(\"allowPrincipal\",!1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r1.data.userGroups?null:ctx_r1.data.userGroups.length)>1),core.xb(2),core.gc(\"label\",ctx_r1.i18n.voucher.redeem.redeemer),core.xb(1),core.gc(\"autoSearch\",!0)(\"allowContacts\",!0)(\"allowSearch\",!0)(\"allowPrincipal\",!1)}}function VoucherFiltersComponent_field_option_17_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",9),2&rf){const order_r13=ctx.$implicit,ctx_r2=core.Zb();core.gc(\"value\",order_r13)(\"text\",ctx_r2.orderBy(order_r13))}}let voucher_filters_component_VoucherFiltersComponent=(()=>{class VoucherFiltersComponent extends base_component.a{constructor(injector){super(injector)}ngOnInit(){super.ngOnInit(),this.mask=this.data.mask?this.data.mask:\"\",this.form.patchValue({creationType:null,printed:null})}get statusOptions(){return Object.values(models.Tb).map(st=>({value:st,text:this.apiI18n.voucherStatus(st)}))}get creationTypeOptions(){const statuses=Object.values(models.Qb);return[].concat(statuses.map(st=>({value:st,text:this.apiI18n.voucherCreationType(st)})))}get maxScale(){return this.data.types.map(t=>t.configuration.currency.decimalDigits).reduce((previous,current,_index,_array)=>previous>current?previous:current)}orderByOptions(){return Object.values(models.Rb)}orderBy(order){switch(order){case models.Rb.CREATION_DATE_ASC:return this.i18n.voucher.sort.creationDateAsc;case models.Rb.CREATION_DATE_DESC:return this.i18n.voucher.sort.creationDateDesc;case models.Rb.EXPIRATION_DATE_ASC:return this.i18n.voucher.sort.expirationDateAsc;case models.Rb.EXPIRATION_DATE_DESC:return this.i18n.voucher.sort.expirationDateDesc;case models.Rb.REDEEM_DATE_ASC:return this.i18n.voucher.sort.redeemDateAsc;case models.Rb.REDEEM_DATE_DESC:return this.i18n.voucher.sort.redeemDateDesc}}}return VoucherFiltersComponent.ɵfac=function(t){return new(t||VoucherFiltersComponent)(core.Kb(core.r))},VoucherFiltersComponent.ɵcmp=core.Eb({type:VoucherFiltersComponent,selectors:[[\"voucher-filters\"]],inputs:{data:\"data\",heading:\"heading\",mobileHeading:\"mobileHeading\",form:\"form\",moreFilters:\"moreFilters\",headingActions:\"headingActions\"},features:[core.ub],decls:18,vars:23,consts:[[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\",\"no-gutters\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"statuses\",3,\"label\",\"fieldOptions\",\"emptyLabel\"],[\"type\",\"text\",\"formControlName\",\"token\",3,\"label\",\"mask\",\"placeholder\"],[\"labelPosition\",\"side\",\"formControlName\",\"creationType\",3,\"label\",\"fieldOptions\",\"emptyOption\"],[\"labelPosition\",\"side\",\"formControlName\",\"printed\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\"],[4,\"ngIf\"],[\"labelPosition\",\"side\",\"formControlName\",\"orderBy\",3,\"label\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"labelPosition\",\"side\",\"formControlName\",\"types\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[1,\"row\",\"no-gutters\",\"col-12\"],[\"labelPosition\",\"side\",\"formControlName\",\"creationBegin\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"creationEnd\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"expirationBegin\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"expirationEnd\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"redeemBegin\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"redeemEnd\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"formControlName\",\"amountMin\",3,\"label\",\"scale\"],[\"amount\",\"\"],[\"formControlName\",\"amountMax\",3,\"label\",\"scale\"],[\"kind\",\"field\",3,\"label\"],[\"formControlName\",\"buyer\",3,\"autoSearch\",\"allowContacts\",\"allowSearch\",\"allowPrincipal\"],[\"formControlName\",\"redeemer\",3,\"autoSearch\",\"allowContacts\",\"allowSearch\",\"allowPrincipal\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"buyerGroups\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"redeemerGroups\",3,\"label\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-content\",0),core.Qb(1,\"form\",1),core.Qb(2,\"div\",2),core.Bc(3,VoucherFiltersComponent_div_3_Template,3,2,\"div\",3),core.Qb(4,\"div\",4),core.Lb(5,\"multi-selection-field\",5),core.Pb(),core.Qb(6,\"div\",4),core.Lb(7,\"input-field\",6),core.Pb(),core.Qb(8,\"div\",4),core.Lb(9,\"single-selection-field\",7),core.Pb(),core.Qb(10,\"div\",4),core.Qb(11,\"single-selection-field\",8),core.Lb(12,\"field-option\",9),core.Lb(13,\"field-option\",9),core.Pb(),core.Pb(),core.Bc(14,VoucherFiltersComponent_ng_container_14_Template,31,22,\"ng-container\",10),core.Qb(15,\"div\",4),core.Qb(16,\"single-selection-field\",11),core.Bc(17,VoucherFiltersComponent_field_option_17_Template,1,2,\"field-option\",12),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.gc(\"heading\",ctx.heading)(\"mobileHeading\",ctx.mobileHeading)(\"headingActions\",ctx.headingActions),core.xb(1),core.gc(\"formGroup\",ctx.form),core.xb(2),core.gc(\"ngIf\",(null==ctx.data.types?null:ctx.data.types.length)>1),core.xb(2),core.gc(\"label\",ctx.i18n.general.status)(\"fieldOptions\",ctx.statusOptions)(\"emptyLabel\",ctx.i18n.general.notApplied),core.xb(2),core.gc(\"label\",ctx.i18n.voucher.token)(\"mask\",ctx.mask)(\"placeholder\",ctx.mask),core.xb(2),core.gc(\"label\",ctx.i18n.voucher.creationType)(\"fieldOptions\",ctx.creationTypeOptions)(\"emptyOption\",ctx.i18n.general.all),core.xb(2),core.gc(\"label\",ctx.i18n.general.printed)(\"emptyOption\",ctx.i18n.general.all),core.xb(1),core.gc(\"value\",\"true\")(\"text\",ctx.i18n.general.yes),core.xb(1),core.gc(\"value\",\"false\")(\"text\",ctx.i18n.general.no),core.xb(1),core.gc(\"ngIf\",ctx.moreFilters),core.xb(2),core.gc(\"label\",ctx.i18n.general.orderBy),core.xb(1),core.gc(\"ngForOf\",ctx.orderByOptions()))},directives:[page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,common.t,multi_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,input_field_component.a,mask_directive.a,single_selection_field_component.a,field_option_directive.a,common.s,date_field_component.a,decimal_field_component.a,label_value_component.a,user_field_component.a],encapsulation:2,changeDetection:0}),VoucherFiltersComponent})();function SearchVouchersComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchVouchersComponent_ng_template_3_mobile_result_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\"),core.Qb(1,\"div\"),core.Qb(2,\"div\",7),core.Qb(3,\"div\",8),core.Dc(4),core.Pb(),core.Qb(5,\"div\",8),core.Dc(6),core.Pb(),core.Pb(),core.Qb(7,\"div\",9),core.Dc(8),core.ac(9,\"currency\"),core.Pb(),core.Pb(),core.Pb()),2&rf){const row_r5=ctx.$implicit,ctx_r3=core.Zb(2);core.xb(4),core.Fc(\" \",row_r5.type.name,\" \"),core.xb(2),core.Fc(\" \",ctx_r3.apiI18n.voucherStatus(row_r5.status),\" \"),core.xb(2),core.Fc(\" \",core.cc(9,3,row_r5.amount,row_r5.type.configuration.currency),\" \")}}function SearchVouchersComponent_ng_template_3_table_6_ng_container_13_Template(rf,ctx){if(1&rf){const _r9=core.Rb();core.Ob(0),core.Qb(1,\"tr\",13),core.Xb(\"click\",(function(){core.sc(_r9);const row_r7=ctx.$implicit,ctx_r8=core.Zb(3);return ctx_r8.router.navigate(ctx_r8.path(row_r7))})),core.Qb(2,\"td\"),core.Dc(3),core.ac(4,\"date\"),core.Pb(),core.Qb(5,\"td\"),core.Dc(6),core.ac(7,\"date\"),core.Pb(),core.Qb(8,\"td\"),core.Dc(9),core.Pb(),core.Qb(10,\"td\"),core.Dc(11),core.Pb(),core.Qb(12,\"td\",11),core.Dc(13),core.ac(14,\"currency\"),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r7=ctx.$implicit,ctx_r6=core.Zb(3);core.xb(3),core.Ec(core.bc(4,5,row_r7.creationDate)),core.xb(3),core.Fc(\" \",core.bc(7,7,row_r7.expirationDate),\"\"),core.xb(3),core.Fc(\" \",ctx_r6.apiI18n.voucherStatus(row_r7.status),\" \"),core.xb(2),core.Fc(\" \",row_r7.type.name,\" \"),core.xb(2),core.Fc(\" \",core.cc(14,9,row_r7.amount,row_r7.type.configuration.currency),\" \")}}function SearchVouchersComponent_ng_template_3_table_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",10),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Qb(10,\"th\",11),core.Dc(11),core.Pb(),core.Pb(),core.Qb(12,\"tbody\"),core.Bc(13,SearchVouchersComponent_ng_template_3_table_6_ng_container_13_Template,15,12,\"ng-container\",12),core.ac(14,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);var tmp_5_0;core.xb(3),core.Ec(ctx_r4.i18n.general.creationDate),core.xb(2),core.Ec(ctx_r4.i18n.general.expirationDate),core.xb(2),core.Ec(ctx_r4.i18n.general.status),core.xb(2),core.Ec(ctx_r4.i18n.general.type),core.xb(2),core.Ec(ctx_r4.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",null==(tmp_5_0=core.bc(14,6,ctx_r4.results$))?null:tmp_5_0.results)}}function SearchVouchersComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r11=core.Rb();core.Lb(0,\"voucher-filters\",3),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Qb(3,\"results-layout\",4),core.Xb(\"update\",(function($event){return core.sc(_r11),core.Zb().update($event)})),core.ac(4,\"async\"),core.Bc(5,SearchVouchersComponent_ng_template_3_mobile_result_5_Template,10,6,\"mobile-result\",5),core.Bc(6,SearchVouchersComponent_ng_template_3_table_6_Template,15,8,\"table\",6),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"data\",ctx_r2.data)(\"form\",ctx_r2.form)(\"heading\",ctx_r2.i18n.voucher.title.search)(\"mobileHeading\",ctx_r2.i18n.voucher.mobileTitle.search)(\"moreFilters\",core.bc(1,9,ctx_r2.moreFilters$))(\"headingActions\",core.bc(2,11,ctx_r2.headingActions$)),core.xb(3),core.gc(\"results\",core.bc(4,13,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)}}let search_vouchers_component_SearchVouchersComponent=(()=>{class SearchVouchersComponent extends base_search_page_component.a{constructor(injector,voucherService){super(injector),this.voucherService=voucherService}ngOnInit(){super.ngOnInit(),this.addSub(this.voucherService.getVouchersDataForSearch({}).subscribe(dataForSearch=>this.data=dataForSearch))}onDataInitialized(_data){super.onDataInitialized(_data),this.headingActions=[this.moreFiltersAction],this.form.patchValue(_data.query)}getFormControlNames(){return[\"types\",\"creationBegin\",\"creationEnd\",\"statuses\",\"token\",\"creationType\",\"printed\",\"amountMin\",\"amountMax\",\"expirationBegin\",\"expirationEnd\",\"redeemBegin\",\"redeemEnd\",\"buyer\",\"redeemer\",\"buyerGroups\",\"redeemerGroups\",\"orderBy\"]}toSearchParams(value){const result=value;return(value.redeemBegin||value.redeemEnd)&&(result.redeemPeriod=this.ApiHelper.dateRangeFilter(value.redeemBegin,value.redeemEnd)),(value.creationBegin||value.creationEnd)&&(result.creationPeriod=this.ApiHelper.dateRangeFilter(value.creationBegin,value.creationEnd)),(value.expirationBegin||value.expirationEnd)&&(result.expirationPeriod=this.ApiHelper.dateRangeFilter(value.expirationBegin,value.expirationEnd)),(value.amountMin||value.amountMax)&&(result.amountRange=this.ApiHelper.rangeFilter(value.amountMin,value.amountMax)),result}doSearch(value){return this.voucherService.searchVouchers$Response(value)}get statusOptions(){return Object.values(models.Tb).map(st=>({value:st,text:this.apiI18n.voucherStatus(st)}))}get toLink(){return row=>this.path(row)}path(row){return[\"/banking/vouchers/view/\",row.id]}showMoreFiltersLabel(){return this.i18n.general.moreFilters}showLessFiltersLabel(){return this.i18n.general.lessFilters}resolveMenu(_data){return shared_menu.b.SEARCH_VOUCHERS}}return SearchVouchersComponent.ɵfac=function(t){return new(t||SearchVouchersComponent)(core.Kb(core.r),core.Kb(vouchers_service.a))},SearchVouchersComponent.ɵcmp=core.Eb({type:SearchVouchersComponent,selectors:[[\"search-vouchers\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[3,\"data\",\"form\",\"heading\",\"mobileHeading\",\"moreFilters\",\"headingActions\"],[\"resultType\",\"list\",3,\"results\",\"toLink\",\"rendering$\",\"update\"],[4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"cell-main\",\"float-left\"],[1,\"cell-text\"],[1,\"float-right\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchVouchersComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchVouchersComponent_ng_template_3_Template,7,15,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,voucher_filters_component_VoucherFiltersComponent,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a,common.s],pipes:[common.b,currency_pipe.a,date_pipe.a],encapsulation:2,changeDetection:0}),SearchVouchersComponent})();var trust_pipe=__webpack_require__(\"cyUc\");function ViewVoucherComponent_page_content_2_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Lb(1,\"avatar\",15),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"image\",ctx_r3.data.type.image)}}function ViewVoucherComponent_page_content_2_label_value_13_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.gc(\"label\",ctx_r4.i18n.voucher.creationType),core.xb(1),core.Fc(\" \",ctx_r4.apiI18n.voucherCreationType(ctx_r4.data.creationType),\" \")}}function ViewVoucherComponent_page_content_2_label_value_17_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Lb(1,\"user-link\",16),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.voucher.owner),core.xb(1),core.gc(\"user\",ctx_r5.data.owner)}}function ViewVoucherComponent_page_content_2_label_value_18_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Lb(1,\"user-link\",16),core.Pb()),2&rf){const ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.voucher.buy.buyer),core.xb(1),core.gc(\"user\",ctx_r6.data.buyer)}}function ViewVoucherComponent_page_content_2_label_value_19_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Qb(1,\"a\",17),core.Dc(2),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.gc(\"label\",ctx_r7.i18n.voucher.buy.payment),core.xb(1),core.gc(\"routerLink\",ctx_r7.transferPath(ctx_r7.data.buy)),core.xb(1),core.Fc(\" \",ctx_r7.bankingHelper.transactionNumberOrId(ctx_r7.data.buy),\" \")}}function ViewVoucherComponent_page_content_2_label_value_22_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.ac(2,\"dateTime\"),core.Pb()),2&rf){const ctx_r8=core.Zb(2);core.gc(\"label\",ctx_r8.i18n.voucher.redeem.date),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r8.data.redeemDate),\" \")}}function ViewVoucherComponent_page_content_2_label_value_23_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Lb(1,\"user-link\",16),core.Pb()),2&rf){const ctx_r9=core.Zb(2);core.gc(\"label\",ctx_r9.i18n.voucher.redeem.redeemer),core.xb(1),core.gc(\"user\",ctx_r9.data.redeemer)}}function ViewVoucherComponent_page_content_2_label_value_24_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Lb(1,\"user-link\",16),core.Pb()),2&rf){const ctx_r10=core.Zb(2);core.gc(\"label\",ctx_r10.i18n.general.operator),core.xb(1),core.gc(\"user\",ctx_r10.data.redeemBy)}}function ViewVoucherComponent_page_content_2_label_value_25_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Qb(1,\"a\",17),core.Dc(2),core.Pb(),core.Pb()),2&rf){const ctx_r11=core.Zb(2);core.gc(\"label\",ctx_r11.i18n.voucher.redeem.payment),core.xb(1),core.gc(\"routerLink\",ctx_r11.transferPath(ctx_r11.data.redeem)),core.xb(1),core.Fc(\" \",ctx_r11.bankingHelper.transactionNumberOrId(ctx_r11.data.redeem),\" \")}}function ViewVoucherComponent_page_content_2_label_value_26_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.Pb()),2&rf){const ctx_r12=core.Zb(2);core.gc(\"label\",ctx_r12.i18n.general.status),core.xb(1),core.Fc(\" \",ctx_r12.data.redeemAfterDate,\" \")}}function ViewVoucherComponent_page_content_2_label_value_27_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.ac(2,\"dateTime\"),core.Pb()),2&rf){const ctx_r13=core.Zb(2);core.gc(\"label\",ctx_r13.i18n.general.expirationDate),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r13.data.expirationDate),\" \")}}function ViewVoucherComponent_page_content_2_label_value_28_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Dc(1),core.ac(2,\"dateTime\"),core.Pb()),2&rf){const ctx_r14=core.Zb(2);core.gc(\"label\",ctx_r14.i18n.voucher.refundDate),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r14.data.refund.date),\" \")}}function ViewVoucherComponent_page_content_2_label_value_29_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Qb(1,\"a\",17),core.Dc(2),core.Pb(),core.Pb()),2&rf){const ctx_r15=core.Zb(2);core.gc(\"label\",ctx_r15.i18n.voucher.refundPayment),core.xb(1),core.gc(\"routerLink\",ctx_r15.transferPath(ctx_r15.data.refund)),core.xb(1),core.Fc(\" \",ctx_r15.bankingHelper.transactionNumberOrId(ctx_r15.data.refund),\" \")}}function ViewVoucherComponent_page_content_2_ng_container_30_Template(rf,ctx){if(1&rf&&(core.Ob(0,18),core.Qb(1,\"h2\",11),core.Dc(2),core.Pb(),core.Qb(3,\"div\",19),core.Dc(4),core.Pb(),core.Nb()),2&rf){const ctx_r16=core.Zb(2);core.xb(2),core.Fc(\" \",ctx_r16.i18n.general.description,\" \"),core.xb(2),core.Fc(\" \",ctx_r16.data.description,\" \")}}function ViewVoucherComponent_page_content_2_img_33_Template(rf,ctx){1&rf&&(core.Lb(0,\"img\",20),core.ac(1,\"trust\")),2&rf&&core.gc(\"src\",core.cc(1,1,ctx.ngIf,\"url\"),core.uc)}function ViewVoucherComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"div\",4),core.Qb(3,\"div\",5),core.Bc(4,ViewVoucherComponent_page_content_2_div_4_Template,2,1,\"div\",6),core.Qb(5,\"div\",7),core.Qb(6,\"label-value\",8),core.Dc(7),core.Pb(),core.Qb(8,\"label-value\",8),core.Dc(9),core.Pb(),core.Qb(10,\"label-value\",8),core.Dc(11),core.ac(12,\"currency\"),core.Pb(),core.Bc(13,ViewVoucherComponent_page_content_2_label_value_13_Template,2,2,\"label-value\",9),core.Qb(14,\"label-value\",8),core.Dc(15),core.ac(16,\"dateTime\"),core.Pb(),core.Bc(17,ViewVoucherComponent_page_content_2_label_value_17_Template,2,2,\"label-value\",9),core.Bc(18,ViewVoucherComponent_page_content_2_label_value_18_Template,2,2,\"label-value\",9),core.Bc(19,ViewVoucherComponent_page_content_2_label_value_19_Template,3,3,\"label-value\",9),core.Qb(20,\"label-value\",8),core.Dc(21),core.Pb(),core.Bc(22,ViewVoucherComponent_page_content_2_label_value_22_Template,3,4,\"label-value\",9),core.Bc(23,ViewVoucherComponent_page_content_2_label_value_23_Template,2,2,\"label-value\",9),core.Bc(24,ViewVoucherComponent_page_content_2_label_value_24_Template,2,2,\"label-value\",9),core.Bc(25,ViewVoucherComponent_page_content_2_label_value_25_Template,3,3,\"label-value\",9),core.Bc(26,ViewVoucherComponent_page_content_2_label_value_26_Template,2,2,\"label-value\",9),core.Bc(27,ViewVoucherComponent_page_content_2_label_value_27_Template,3,4,\"label-value\",9),core.Bc(28,ViewVoucherComponent_page_content_2_label_value_28_Template,3,4,\"label-value\",9),core.Bc(29,ViewVoucherComponent_page_content_2_label_value_29_Template,3,3,\"label-value\",9),core.Pb(),core.Pb(),core.Bc(30,ViewVoucherComponent_page_content_2_ng_container_30_Template,5,2,\"ng-container\",10),core.Lb(31,\"hr\",11),core.Qb(32,\"div\",12),core.Bc(33,ViewVoucherComponent_page_content_2_img_33_Template,2,4,\"img\",13),core.ac(34,\"async\"),core.Pb(),core.Pb(),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.data.title)(\"mobileHeading\",ctx_r0.data.title)(\"headingActions\",core.bc(1,28,ctx_r0.headingActions$)),core.xb(4),core.gc(\"ngIf\",ctx_r0.data.type.image),core.xb(2),core.gc(\"label\",ctx_r0.i18n.general.type),core.xb(1),core.Fc(\" \",ctx_r0.data.type.name,\" \"),core.xb(1),core.gc(\"label\",ctx_r0.i18n.voucher.token),core.xb(1),core.Fc(\" \",ctx_r0.data.token,\" \"),core.xb(1),core.gc(\"label\",ctx_r0.i18n.transaction.amount),core.xb(1),core.Fc(\" \",core.cc(12,30,ctx_r0.data.amount,ctx_r0.data.type.configuration.currency),\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r0.data.creationType),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.creationDate),core.xb(1),core.Fc(\" \",core.bc(16,33,ctx_r0.data.creationDate),\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r0.data.owner),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.buyer),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.buy),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.status),core.xb(1),core.Fc(\" \",ctx_r0.apiI18n.voucherStatus(ctx_r0.data.status),\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.redeemDate),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.redeemer),core.xb(1),core.gc(\"ngIf\",null==ctx_r0.data.redeemBy?null:ctx_r0.data.redeemBy.user),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.redeem),core.xb(1),core.gc(\"ngIf\",!ctx_r0.data.redeemAfterDateReached),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.expirationDate),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.refund),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.refund),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.description),core.xb(3),core.gc(\"ngIf\",core.bc(34,35,ctx_r0.qrCodeUrl$))}}function ViewVoucherComponent_ng_template_4_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}let view_voucher_component_ViewVoucherComponent=(()=>{class ViewVoucherComponent extends base_view_page_component.a{constructor(injector,voucherService,bankingHelper){super(injector),this.voucherService=voucherService,this.bankingHelper=bankingHelper,this.qrCodeUrl$=new BehaviorSubject.a(null)}ngOnInit(){super.ngOnInit();const key=this.route.snapshot.paramMap.get(\"key\");this.addSub(this.voucherService.viewVoucher({key:key}).subscribe(voucher=>this.data=voucher))}onDataInitialized(_data){this.addSub(this.voucherService.getVoucherQrCode({key:_data.id,size:models.D.MEDIUM}).subscribe(image=>this.qrCodeUrl$.next(URL.createObjectURL(image)))),this.createCancelDeviceConfirmation=()=>({type:models.s.MANAGE_VOUCHER,voucher:_data.id,voucherAction:models.Ob.CANCEL}),this.createChangeExpirationDeviceConfirmation=()=>({type:models.s.MANAGE_VOUCHER,voucher:_data.id,voucherAction:models.Ob.CHANGE_EXPIRATION}),this.canConfirm=this.authHelper.canConfirm(_data.confirmationPasswordInput),_data.confirmationPasswordInput&&(this.confirmationPassword=this.formBuilder.control(\"confirmationPassword\",fesm2015_forms.G.required)),this.headingActions=this.initActions(_data)}initActions(voucher){const actions=this.exportHelper.headingActions(voucher.exportFormats,f=>this.voucherService.exportVoucher$Response({format:f.internalName,key:voucher.id}));return voucher.cancelAction&&actions.push(new shared_action.c(\"cancel\",voucher.cancelAction===models.Pb.CANCEL_AND_REFUND?this.i18n.voucher.cancelAndRefund:this.i18n.general.cancel,()=>{this.canConfirm||this.notification.warning(this.authHelper.getConfirmationMessage(voucher.confirmationPasswordInput)),this.notification.confirm({title:this.cancelConfirmationTitle(voucher.cancelAction),passwordInput:voucher.confirmationPasswordInput,createDeviceConfirmation:this.createCancelDeviceConfirmation,callback:params=>this.cancel(params.confirmationPassword)})})),voucher.canChangeExpirationDate&&actions.push(new shared_action.c(\"update\",this.i18n.voucher.changeExpirationDate,()=>{this.canConfirm||this.notification.warning(this.authHelper.getConfirmationMessage(voucher.confirmationPasswordInput)),this.notification.confirm({passwordInput:voucher.confirmationPasswordInput,createDeviceConfirmation:this.createChangeExpirationDeviceConfirmation,customFields:this.changeExpirationFields,callback:res=>{this.addSub(this.voucherService.changeVoucherExpirationDate({key:voucher.id,confirmationPassword:res.confirmationPassword,body:{comments:res.customValues.comments,newExpirationDate:res.customValues.newExpirationDate}}).subscribe(()=>{this.notification.snackBar(this.i18n.voucher.expirationDateChanged),this.reload()}))}})})),actions}cancel(confirmationPassword){!confirmationPassword&&this.confirmationPassword&&(confirmationPassword=this.confirmationPassword.value),Object(helper.F)(this.confirmationPassword)&&this.addSub(this.voucherService.cancelVoucher({key:this.data.id,confirmationPassword:confirmationPassword}).subscribe(()=>{this.reload(),this.notification.snackBar(this.i18n.voucher.cancel.done)}))}cancelConfirmationTitle(cancelAction){switch(cancelAction){case models.Pb.CANCEL_AND_REFUND:return this.i18n.voucher.cancel.refundConfirmation;case models.Pb.CANCEL_PENDING_PACK:return this.i18n.voucher.cancel.packConfirmation;case models.Pb.CANCEL_GENERATED:case models.Pb.CANCEL_PENDING_SINGLE:return this.i18n.voucher.cancel.confirmation}}get changeExpirationFields(){return[{internalName:\"newExpirationDate\",name:this.i18n.general.newExpirationDate,type:models.p.DATE,required:!0},{internalName:\"comments\",name:this.i18n.general.comments,type:models.p.TEXT}]}transferPath(transfer){return null===transfer.authorizationStatus||transfer.authorizationStatus===models.yb.AUTHORIZED?[\"/banking\",\"transfer\",this.bankingHelper.transactionNumberOrId(transfer)]:[\"/banking\",\"transaction\",this.bankingHelper.transactionNumberOrId(transfer)]}resolveMenu(voucher){return voucher.redeemer&&this.authHelper.isSelfOrOwner(voucher.redeemer)?shared_menu.b.SEARCH_REDEEMED:voucher.buyer&&this.authHelper.isSelfOrOwner(voucher.buyer)?shared_menu.b.SEARCH_BOUGHT_VOUCHERS:this.menu.searchUsersMenu()}}return ViewVoucherComponent.ɵfac=function(t){return new(t||ViewVoucherComponent)(core.Kb(core.r),core.Kb(vouchers_service.a),core.Kb(banking_helper_service.a))},ViewVoucherComponent.ɵcmp=core.Eb({type:ViewVoucherComponent,selectors:[[\"app-view-voucher\"]],features:[core.ub],decls:6,vars:7,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngIf\",\"ngIfElse\"],[\"loading\",\"\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"d-flex\",\"flex-grow-1\",\"flex-column\"],[1,\"d-flex\",\"flex-column\",\"flex-sm-row-reverse\",\"justify-content-sm-between\"],[\"class\",\"image d-flex justify-content-center mt-2 mb-4 align-self-center\",4,\"ngIf\"],[1,\"d-flex\",\"flex-column\",\"flex-grow-1\"],[3,\"label\"],[3,\"label\",4,\"ngIf\"],[\"class\",\"d-flex justify-content-start\",4,\"ngIf\"],[1,\"mt-3\"],[1,\"qr-container\",\"image\",\"d-flex\",\"justify-content-center\",\"mb-4\",\"align-self-center\"],[\"alt\",\"QR-code\",\"class\",\"mw-100\",3,\"src\",4,\"ngIf\"],[1,\"image\",\"d-flex\",\"justify-content-center\",\"mt-2\",\"mb-4\",\"align-self-center\"],[\"size\",\"160\",\"imageSize\",\"200\",\"useLightbox\",\"\",3,\"image\"],[3,\"user\"],[3,\"routerLink\"],[1,\"d-flex\",\"justify-content-start\"],[1,\"break-nl\"],[\"alt\",\"QR-code\",1,\"mw-100\",3,\"src\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewVoucherComponent_page_content_2_Template,35,37,\"page-content\",1),core.ac(3,\"async\"),core.Pb(),core.Bc(4,ViewVoucherComponent_ng_template_4_Template,2,0,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(5);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",core.bc(3,5,ctx.data$))(\"ngIfElse\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,label_value_component.a,avatar_component.a,user_link_component.a,router.h,spinner_component.a],pipes:[common.b,currency_pipe.a,date_time_pipe.a,trust_pipe.a],encapsulation:2,changeDetection:0}),ViewVoucherComponent})();var logged_user_guard=__webpack_require__(\"IbW5\");function SearchInstallmentsComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchInstallmentsComponent_ng_template_3_ng_container_6_field_option_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",16),2&rf){const at_r9=ctx.$implicit;core.gc(\"value\",at_r9.id)(\"internalName\",at_r9.internalName)(\"id\",at_r9.id)(\"text\",at_r9.name)}}function SearchInstallmentsComponent_ng_template_3_ng_container_6_field_option_7_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",16),2&rf){const at_r10=ctx.$implicit;core.gc(\"value\",at_r10.id)(\"internalName\",at_r10.internalName)(\"id\",at_r10.id)(\"text\",at_r10.name)}}function SearchInstallmentsComponent_ng_template_3_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"div\",12),core.Qb(2,\"div\",6),core.Qb(3,\"single-selection-field\",13),core.Bc(4,SearchInstallmentsComponent_ng_template_3_ng_container_6_field_option_4_Template,1,4,\"field-option\",14),core.Pb(),core.Pb(),core.Qb(5,\"div\",6),core.Qb(6,\"single-selection-field\",15),core.Bc(7,SearchInstallmentsComponent_ng_template_3_ng_container_6_field_option_7_Template,1,4,\"field-option\",14),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(3),core.gc(\"emptyOption\",ctx_r3.i18n.general.notApplied)(\"label\",ctx_r3.i18n.transaction.fromAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.accountTypes),core.xb(2),core.gc(\"emptyOption\",ctx_r3.i18n.general.notApplied)(\"label\",ctx_r3.i18n.transaction.toAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.accountTypes)}}function SearchInstallmentsComponent_ng_template_3_ng_container_7_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",6),core.Lb(1,\"input-field\",19),core.Pb()),2&rf){const ctx_r11=core.Zb(3);core.xb(1),core.gc(\"mask\",ctx_r11.transactionNumberPattern)(\"label\",ctx_r11.i18n.transaction.number)}}function SearchInstallmentsComponent_ng_template_3_ng_container_7_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",22),2&rf){const period_r16=ctx.$implicit;core.gc(\"id\",period_r16.id)(\"value\",period_r16)(\"text\",period_r16.name)}}function SearchInstallmentsComponent_ng_template_3_ng_container_7_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",6),core.Qb(1,\"single-selection-field\",20),core.Bc(2,SearchInstallmentsComponent_ng_template_3_ng_container_7_div_5_field_option_2_Template,1,3,\"field-option\",21),core.Pb(),core.Pb()),2&rf){const ctx_r12=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r12.i18n.general.period),core.xb(1),core.gc(\"ngForOf\",ctx_r12.data.preselectedPeriods)}}function SearchInstallmentsComponent_ng_template_3_ng_container_7_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"div\",12),core.Qb(2,\"div\",6),core.Lb(3,\"date-field\",23),core.Pb(),core.Nb()),2&rf){const ctx_r13=core.Zb(3);core.xb(3),core.gc(\"label\",ctx_r13.i18n.general.beginDate)}}function SearchInstallmentsComponent_ng_template_3_ng_container_7_div_8_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",6),core.Lb(1,\"date-field\",24),core.Pb()),2&rf){const ctx_r14=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r14.i18n.general.endDate)}}function SearchInstallmentsComponent_ng_template_3_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,SearchInstallmentsComponent_ng_template_3_ng_container_7_div_1_Template,2,2,\"div\",17),core.Qb(2,\"div\",6),core.Lb(3,\"user-field\",18),core.Pb(),core.Ob(4),core.Bc(5,SearchInstallmentsComponent_ng_template_3_ng_container_7_div_5_Template,3,2,\"div\",17),core.Bc(6,SearchInstallmentsComponent_ng_template_3_ng_container_7_ng_container_6_Template,4,1,\"ng-container\",8),core.ac(7,\"async\"),core.Bc(8,SearchInstallmentsComponent_ng_template_3_ng_container_7_div_8_Template,2,1,\"div\",17),core.ac(9,\"async\"),core.Nb(),core.Nb()),2&rf){const ctx_r4=core.Zb(2);var tmp_3_0,tmp_4_0;core.xb(1),core.gc(\"ngIf\",ctx_r4.hasTransactionNumber),core.xb(2),core.gc(\"label\",ctx_r4.i18n.general.user),core.xb(2),core.gc(\"ngIf\",(null==ctx_r4.data.preselectedPeriods?null:ctx_r4.data.preselectedPeriods.length)>0),core.xb(1),core.gc(\"ngIf\",null==(null==(tmp_3_0=ctx_r4.form.value||core.bc(7,5,ctx_r4.form.valueChanges))||null==tmp_3_0.preselectedPeriod?null:tmp_3_0.preselectedPeriod.begin)),core.xb(2),core.gc(\"ngIf\",null==(null==(tmp_4_0=ctx_r4.form.value||core.bc(9,7,ctx_r4.form.valueChanges))||null==tmp_4_0.preselectedPeriod?null:tmp_4_0.preselectedPeriod.end))}}function SearchInstallmentsComponent_ng_template_3_mobile_result_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",25),core.Qb(1,\"div\",26),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r17=ctx.$implicit,ctx_r5=core.Zb(2);core.gc(\"date\",row_r17.date)(\"amount\",row_r17.amount)(\"avatarImage\",ctx_r5.bankingHelper.avatarImage(row_r17.transaction.related))(\"avatarIcon\",ctx_r5.bankingHelper.avatarIcon(row_r17.transaction.related))(\"currency\",ctx_r5.currencies.get(row_r17.currency)),core.xb(2),core.Fc(\" \",ctx_r5.bankingHelper.subjectName(row_r17.transaction.related),\" \")}}function SearchInstallmentsComponent_ng_template_3_table_12_ng_container_13_Template(rf,ctx){if(1&rf){const _r21=core.Rb();core.Ob(0),core.Qb(1,\"tr\",30),core.Xb(\"click\",(function(){core.sc(_r21);const row_r19=ctx.$implicit,ctx_r20=core.Zb(3);return ctx_r20.router.navigate(ctx_r20.bankingHelper.transactionPath(row_r19.transaction))})),core.Qb(2,\"td\"),core.Dc(3),core.ac(4,\"date\"),core.Pb(),core.Qb(5,\"td\"),core.Dc(6),core.Pb(),core.Qb(7,\"td\"),core.Dc(8),core.Pb(),core.Qb(9,\"td\"),core.Dc(10),core.Pb(),core.Qb(11,\"td\",28),core.Dc(12),core.ac(13,\"currency\"),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r19=ctx.$implicit,ctx_r18=core.Zb(3);core.xb(3),core.Ec(core.bc(4,5,row_r19.dueDate)),core.xb(3),core.Ec(ctx_r18.bankingHelper.subjectName(row_r19.transaction.from)),core.xb(2),core.Ec(ctx_r18.bankingHelper.subjectName(row_r19.transaction.to)),core.xb(2),core.Ec(ctx_r18.number(row_r19)),core.xb(2),core.Fc(\" \",core.cc(13,7,row_r19.amount,ctx_r18.currencies.get(row_r19.transaction.currency)),\" \")}}function SearchInstallmentsComponent_ng_template_3_table_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",27),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Qb(10,\"th\",28),core.Dc(11),core.Pb(),core.Pb(),core.Qb(12,\"tbody\"),core.Bc(13,SearchInstallmentsComponent_ng_template_3_table_12_ng_container_13_Template,14,10,\"ng-container\",29),core.ac(14,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r6=core.Zb(2);var tmp_5_0;core.xb(3),core.Ec(ctx_r6.i18n.transaction.dueDate),core.xb(2),core.Ec(ctx_r6.i18n.transaction.from),core.xb(2),core.Ec(ctx_r6.i18n.transaction.to),core.xb(2),core.Ec(ctx_r6.i18n.transaction.installmentNumber),core.xb(2),core.Ec(ctx_r6.i18n.transaction.amount),core.xb(2),core.gc(\"ngForOf\",null==(tmp_5_0=core.bc(14,6,ctx_r6.results$))?null:tmp_5_0.results)}}function SearchInstallmentsComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r23=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"form\",4),core.Qb(3,\"div\",5),core.Qb(4,\"div\",6),core.Lb(5,\"single-selection-field\",7),core.Pb(),core.Bc(6,SearchInstallmentsComponent_ng_template_3_ng_container_6_Template,8,6,\"ng-container\",8),core.Bc(7,SearchInstallmentsComponent_ng_template_3_ng_container_7_Template,10,9,\"ng-container\",8),core.ac(8,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Qb(9,\"results-layout\",9),core.Xb(\"update\",(function($event){return core.sc(_r23),core.Zb().update($event)})),core.ac(10,\"async\"),core.Bc(11,SearchInstallmentsComponent_ng_template_3_mobile_result_11_Template,3,6,\"mobile-result\",10),core.Bc(12,SearchInstallmentsComponent_ng_template_3_table_12_Template,15,8,\"table\",11),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.transaction.title.scheduled)(\"mobileHeading\",ctx_r2.i18n.transaction.mobileTitle.scheduled)(\"headingActions\",core.bc(1,11,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(3),core.gc(\"label\",ctx_r2.i18n.general.status)(\"fieldOptions\",ctx_r2.statusOptions),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.data.accountTypes?null:ctx_r2.data.accountTypes.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(8,13,ctx_r2.moreFilters$)),core.xb(2),core.gc(\"results\",core.bc(10,15,ctx_r2.results$))(\"toLink\",ctx_r2.toLink)(\"rendering$\",ctx_r2.rendering$)}}let search_installments_component_SearchInstallmentsComponent=(()=>{class SearchInstallmentsComponent extends base_search_page_component.a{constructor(injector,installmentsService,bankingHelper){super(injector),this.installmentsService=installmentsService,this.bankingHelper=bankingHelper,this.currencies=new Map}ngOnInit(){super.ngOnInit(),this.stateManager.cache(\"data\",this.installmentsService.getInstallmentsOverviewDataForSearch({fields:[\"accountTypes\",\"preselectedPeriods\",\"query\"]})).subscribe(data=>{this.bankingHelper.preProcessPreselectedPeriods(data,this.form),(data.accountTypes||[]).forEach(at=>{const currency=at.currency;this.currencies.set(currency.id,currency),Object(helper.h)(currency.internalName)||this.currencies.set(currency.internalName,currency)}),this.data=data})}onDataInitialized(data){super.onDataInitialized(data);const transactionNumberPatterns=(data.accountTypes||[]).map(a=>{var _a;return null===(_a=a.currency)||void 0===_a?void 0:_a.transactionNumberPattern}).filter(p=>p).reduce((unique,item)=>unique.includes(item)?unique:[...unique,item],[]);this.hasTransactionNumber=transactionNumberPatterns.length>0,this.transactionNumberPattern=1===transactionNumberPatterns.length?transactionNumberPatterns[0]:null,this.headingActions=[this.moreFiltersAction]}getFormControlNames(){return[\"status\",\"fromAccountType\",\"toAccountType\",\"transferFilter\",\"user\",\"preselectedPeriod\",\"periodBegin\",\"periodEnd\",\"direction\",\"transactionNumber\"]}getInitialFormValue(data){const value=super.getInitialFormValue(data);return value.status=models.G.SCHEDULED,value}get statusOptions(){return Object.values(models.G).map(st=>({value:st,text:this.apiI18n.installmentStatus(st)}))}toSearchParams(value){const params=value;return params.accountTypes=value.accountType?[value.accountType]:null,params.transferFilters=value.transferFilter?[value.transferFilter]:null,params.datePeriod=this.bankingHelper.resolveDatePeriod(value),params.statuses=[value.status],params}showMoreFiltersLabel(){return this.i18n.general.moreFilters}showLessFiltersLabel(){return this.i18n.general.lessFilters}resolveMenu(){return shared_menu.b.SCHEDULED_PAYMENTS_OVERVIEW}doSearch(filter){return this.installmentsService.searchInstallmentsOverview$Response(filter)}get toLink(){return row=>this.bankingHelper.transactionPath(row.transaction)}number(row){return row.totalInstallments?this.i18n.transaction.installmentNumberOfTotal({number:row.number,total:row.totalInstallments}):String(row.number)}}return SearchInstallmentsComponent.ɵfac=function(t){return new(t||SearchInstallmentsComponent)(core.Kb(core.r),core.Kb(installments_service.a),core.Kb(banking_helper_service.a))},SearchInstallmentsComponent.ɵcmp=core.Eb({type:SearchInstallmentsComponent,selectors:[[\"search-installments\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",3,\"formGroup\"],[1,\"row\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"status\",3,\"label\",\"fieldOptions\"],[4,\"ngIf\"],[\"resultType\",\"list\",3,\"results\",\"toLink\",\"rendering$\",\"update\"],[\"forceSign\",\"\",3,\"date\",\"amount\",\"avatarImage\",\"avatarIcon\",\"currency\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"w-100\",\"d-none\",\"d-sm-block\"],[\"labelPosition\",\"side\",\"formControlName\",\"fromAccountType\",3,\"emptyOption\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"labelPosition\",\"side\",\"formControlName\",\"toAccountType\",3,\"emptyOption\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"transactionNumber\",3,\"mask\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"preselectedPeriod\",3,\"label\"],[3,\"id\",\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"id\",\"value\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodBegin\",\"minDate\",\"past5\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"periodEnd\",\"minDate\",\"past5\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"forceSign\",\"\",3,\"date\",\"amount\",\"avatarImage\",\"avatarIcon\",\"currency\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"amount\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchInstallmentsComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchInstallmentsComponent_ng_template_3_Template,13,17,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,common.s,field_option_directive.a,user_field_component.a,input_field_component.a,mask_directive.a,date_field_component.a,mobile_result_component.a],pipes:[common.b,date_pipe.a,currency_pipe.a],encapsulation:2,changeDetection:0}),SearchInstallmentsComponent})();function GenerateVouchersStepListTypesComponent_mobile_result_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",4),core.Qb(1,\"div\",5),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r2=ctx.$implicit;core.gc(\"avatarImage\",row_r2.image),core.xb(2),core.Fc(\" \",row_r2.voucherTitle,\" \")}}function GenerateVouchersStepListTypesComponent_table_3_ng_container_2_Template(rf,ctx){if(1&rf){const _r6=core.Rb();core.Ob(0),core.Qb(1,\"tr\",8),core.Xb(\"click\",(function(){core.sc(_r6);const type_r4=ctx.$implicit;return core.Zb(2).selectType(type_r4)})),core.Qb(2,\"td\",9),core.Lb(3,\"avatar\",10),core.Pb(),core.Qb(4,\"td\"),core.Qb(5,\"div\"),core.Qb(6,\"a\",11),core.Xb(\"click\",(function(){core.sc(_r6);const type_r4=ctx.$implicit;return core.Zb(2).selectType(type_r4)})),core.Dc(7),core.Pb(),core.Qb(8,\"div\"),core.Dc(9),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const type_r4=ctx.$implicit;core.xb(3),core.gc(\"image\",type_r4.image),core.xb(4),core.Fc(\" \",type_r4.voucherTitle,\" \"),core.xb(2),core.Fc(\" \",type_r4.voucherDescription,\" \")}}function GenerateVouchersStepListTypesComponent_table_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",6),core.Qb(1,\"tbody\"),core.Bc(2,GenerateVouchersStepListTypesComponent_table_3_ng_container_2_Template,10,3,\"ng-container\",7),core.Pb(),core.Pb()),2&rf){const ctx_r1=core.Zb();core.xb(2),core.gc(\"ngForOf\",ctx_r1.types)}}let generate_vouchers_step_list_types_component_GenerateVouchersStepListTypesComponent=(()=>{class GenerateVouchersStepListTypesComponent extends base_component.a{constructor(injector){super(injector),this.typeSelected=new core.n}get selectType(){return type=>this.typeSelected.emit(type)}}return GenerateVouchersStepListTypesComponent.ɵfac=function(t){return new(t||GenerateVouchersStepListTypesComponent)(core.Kb(core.r))},GenerateVouchersStepListTypesComponent.ɵcmp=core.Eb({type:GenerateVouchersStepListTypesComponent,selectors:[[\"generate-vouchers-step-list-types\"]],inputs:{types:\"types\"},outputs:{typeSelected:\"typeSelected\"},features:[core.ub],decls:4,vars:5,consts:[[3,\"mode\",\"heading\",\"mobileHeading\"],[\"resultType\",\"list\",3,\"results\",\"onClick\"],[\"avatarRoundBorders\",\"false\",\"avatarIcon\",\"user\",3,\"avatarImage\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"avatarRoundBorders\",\"false\",\"avatarIcon\",\"user\",3,\"avatarImage\"],[1,\"cell-text\",\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[1,\"avatar\"],[\"icon\",\"shopping_cart\",\"size\",\"xlarge\",\"roundBorders\",\"false\",3,\"image\"],[\"ngClass\",\"font-weight-bold\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"page-content\",0),core.Qb(1,\"results-layout\",1),core.Bc(2,GenerateVouchersStepListTypesComponent_mobile_result_2_Template,3,2,\"mobile-result\",2),core.Bc(3,GenerateVouchersStepListTypesComponent_table_3_Template,3,1,\"table\",3),core.Pb()),2&rf&&(core.gc(\"mode\",\"empty\")(\"heading\",ctx.i18n.voucher.title.generate)(\"mobileHeading\",ctx.i18n.voucher.mobileTitle.generate),core.xb(1),core.gc(\"results\",ctx.types)(\"onClick\",ctx.selectType))},directives:[page_content_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a,common.s,avatar_component.a,common.q],encapsulation:2,changeDetection:0}),GenerateVouchersStepListTypesComponent})();function GenerateVouchersStepFormComponent_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",1),core.Dc(1),core.ac(2,\"currency\"),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.account.availableBalance),core.xb(1),core.Fc(\" \",core.cc(2,2,ctx_r0.data.account.status.availableBalance,ctx_r0.currency),\" \")}}let generate_vouchers_step_form_component_GenerateVouchersStepFormComponent=(()=>{class GenerateVouchersStepFormComponent extends base_component.a{constructor(injector){super(injector)}ngOnInit(){super.ngOnInit(),this.addSub(this.form.get(\"user\").valueChanges.subscribe(()=>this.saveUserData()))}saveUserData(){this.userField.user&&this.form.get(\"userData\").setValue(this.userField.user)}get currency(){return this.data.account.currency}}return GenerateVouchersStepFormComponent.ɵfac=function(t){return new(t||GenerateVouchersStepFormComponent)(core.Kb(core.r))},GenerateVouchersStepFormComponent.ɵcmp=core.Eb({type:GenerateVouchersStepFormComponent,selectors:[[\"generate-vouchers-step-form\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Hc(user_field_component.a,!0),2&rf&&core.pc(_t=core.Yb())&&(ctx.userField=_t.first)},inputs:{data:\"data\",form:\"form\"},features:[core.ub],decls:8,vars:11,consts:[[3,\"formGroup\"],[\"kind\",\"fieldView\",3,\"label\"],[\"kind\",\"fieldView\",3,\"label\",4,\"ngIf\"],[\"type\",\"number\",\"formControlName\",\"count\",\"required\",\"\",\"fieldSize\",\"small\",3,\"label\"],[\"formControlName\",\"amount\",\"required\",\"\",3,\"label\",\"prefix\",\"suffix\",\"scale\"],[\"formControlName\",\"user\",3,\"label\",\"allowContacts\"],[\"user\",\"\"]],template:function(rf,ctx){1&rf&&(core.Ob(0,0),core.Qb(1,\"label-value\",1),core.Dc(2),core.Pb(),core.Bc(3,GenerateVouchersStepFormComponent_label_value_3_Template,3,5,\"label-value\",2),core.Lb(4,\"input-field\",3),core.Lb(5,\"decimal-field\",4),core.Lb(6,\"user-field\",5,6),core.Nb()),2&rf&&(core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.originAccount),core.xb(1),core.Fc(\" \",ctx.data.account.type.name,\" \"),core.xb(1),core.gc(\"ngIf\",ctx.data.account.status.availableBalance),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.numberOfVouchers),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.amountPerVoucher)(\"prefix\",ctx.currency.prefix)(\"suffix\",ctx.currency.suffix)(\"scale\",ctx.currency.decimalDigits),core.xb(1),core.gc(\"label\",ctx.i18n.general.user)(\"allowContacts\",!1))},directives:[fesm2015_forms.w,fesm2015_forms.n,label_value_component.a,common.t,input_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,decimal_field_component.a,user_field_component.a],pipes:[currency_pipe.a],encapsulation:2,changeDetection:0}),GenerateVouchersStepFormComponent})();function GenerateVouchersStepConfirmComponent_label_value_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",0),core.Lb(1,\"user-link\",3),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r0.user)}}function GenerateVouchersStepConfirmComponent_ng_container_8_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function GenerateVouchersStepConfirmComponent_ng_container_8_Template(rf,ctx){if(1&rf){const _r4=core.Rb();core.Ob(0),core.Bc(1,GenerateVouchersStepConfirmComponent_ng_container_8_hr_1_Template,1,0,\"hr\",2),core.ac(2,\"async\"),core.Qb(3,\"form\",4),core.Qb(4,\"confirmation-password\",5),core.Xb(\"confirmationModeChanged\",(function($event){return core.sc(_r4),core.Zb().confirmationModeChanged.emit($event)}))(\"confirmed\",(function($event){return core.sc(_r4),core.Zb().confirmed.emit($event)})),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r1=core.Zb();core.xb(1),core.gc(\"ngIf\",core.bc(2,4,ctx_r1.layout.gtxxs$)),core.xb(2),core.gc(\"formGroup\",ctx_r1.form),core.xb(1),core.gc(\"passwordInput\",ctx_r1.confirmationPasswordInput)(\"createDeviceConfirmation\",ctx_r1.createDeviceConfirmation)}}let generate_vouchers_step_confirm_component_GenerateVouchersStepConfirmComponent=(()=>{class GenerateVouchersStepConfirmComponent extends base_component.a{constructor(injector){super(injector),this.confirmationModeChanged=new core.n,this.confirmed=new core.n}ngOnInit(){super.ngOnInit(),this.form=this.formBuilder.group({}),this.form.setControl(\"confirmationPassword\",this.confirmationPassword),this.createDeviceConfirmation=()=>({type:models.s.GENERATE_VOUCHERS,amount:this.generateVoucher.amount,voucherType:this.data.type.id,numberOfVouchers:this.generateVoucher.count}),this.confirmationPasswordInput||this.addShortcut(shortcut_service.k,()=>this.confirmed.emit())}}return GenerateVouchersStepConfirmComponent.ɵfac=function(t){return new(t||GenerateVouchersStepConfirmComponent)(core.Kb(core.r))},GenerateVouchersStepConfirmComponent.ɵcmp=core.Eb({type:GenerateVouchersStepConfirmComponent,selectors:[[\"generate-vouchers-step-confirm\"]],inputs:{confirmationPasswordInput:\"confirmationPasswordInput\",confirmationPassword:\"confirmationPassword\",generateVoucher:\"generateVoucher\",data:\"data\",user:\"user\"},outputs:{confirmationModeChanged:\"confirmationModeChanged\",confirmed:\"confirmed\"},features:[core.ub],decls:9,vars:11,consts:[[3,\"label\"],[3,\"label\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"user\"],[3,\"formGroup\"],[\"focused\",\"\",\"formControlName\",\"confirmationPassword\",3,\"passwordInput\",\"createDeviceConfirmation\",\"confirmationModeChanged\",\"confirmed\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"label-value\",0),core.Dc(1),core.Pb(),core.Qb(2,\"label-value\",0),core.Dc(3),core.Pb(),core.Qb(4,\"label-value\",0),core.Dc(5),core.ac(6,\"currency\"),core.Pb(),core.Bc(7,GenerateVouchersStepConfirmComponent_label_value_7_Template,2,2,\"label-value\",1),core.Bc(8,GenerateVouchersStepConfirmComponent_ng_container_8_Template,5,6,\"ng-container\",2)),2&rf&&(core.gc(\"label\",ctx.i18n.general.type),core.xb(1),core.Fc(\" \",ctx.data.type.voucherTitle,\"\\n\"),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.numberOfVouchers),core.xb(1),core.Fc(\" \",ctx.generateVoucher.count,\"\\n\"),core.xb(1),core.gc(\"label\",ctx.i18n.voucher.amountPerVoucher),core.xb(1),core.Fc(\" \",core.cc(6,8,ctx.generateVoucher.amount,ctx.data.account.currency),\"\\n\"),core.xb(2),core.gc(\"ngIf\",ctx.user),core.xb(1),core.gc(\"ngIf\",ctx.confirmationPasswordInput))},directives:[label_value_component.a,common.t,user_link_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,confirmation_password_component.a,focused_directive.a,fesm2015_forms.v,fesm2015_forms.l],pipes:[currency_pipe.a,common.b],encapsulation:2,changeDetection:0}),GenerateVouchersStepConfirmComponent})();function GenerateVouchersComponent_ng_container_3_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Ob(0),core.Qb(1,\"generate-vouchers-step-list-types\",4),core.Xb(\"typeSelected\",(function($event){return core.sc(_r5),core.Zb().toForm($event)})),core.Pb(),core.Nb()}if(2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"types\",ctx_r0.data.types)}}function GenerateVouchersComponent_page_content_4_action_button_6_Template(rf,ctx){if(1&rf){const _r8=core.Rb();core.Qb(0,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r8),core.Zb(2).backToSelectType()})),core.Pb()}if(2&rf){const ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.general.previous)}}function GenerateVouchersComponent_page_content_4_Template(rf,ctx){if(1&rf){const _r10=core.Rb();core.Qb(0,\"page-content\",5),core.ac(1,\"async\"),core.Lb(2,\"generate-vouchers-step-form\",6),core.Qb(3,\"actions\",7),core.Qb(4,\"action-button\",8),core.Xb(\"action\",(function(){return core.sc(_r10),core.Zb().toConfirm()})),core.ac(5,\"async\"),core.Pb(),core.Bc(6,GenerateVouchersComponent_page_content_4_action_button_6_Template,1,1,\"action-button\",9),core.Pb(),core.Pb()}if(2&rf){const ctx_r1=core.Zb();core.gc(\"heading\",ctx_r1.dataTypeForGenerate.type.voucherTitle)(\"mobileHeading\",ctx_r1.dataTypeForGenerate.type.voucherTitle)(\"mode\",core.bc(1,8,ctx_r1.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"data\",ctx_r1.dataTypeForGenerate)(\"form\",ctx_r1.form),core.xb(2),core.gc(\"disabled\",core.bc(5,10,ctx_r1.requesting$))(\"label\",ctx_r1.i18n.general.next),core.xb(2),core.gc(\"ngIf\",!ctx_r1.singleType)}}function GenerateVouchersComponent_page_content_5_action_button_4_Template(rf,ctx){if(1&rf){const _r15=core.Rb();core.Qb(0,\"action-button\",8),core.Xb(\"action\",(function(){return core.sc(_r15),core.Zb(2).generate()})),core.ac(1,\"async\"),core.Pb()}if(2&rf){const ctx_r11=core.Zb(2);core.gc(\"disabled\",!ctx_r11.canConfirm||core.bc(1,2,ctx_r11.requesting$))(\"label\",ctx_r11.i18n.general.confirm)}}function GenerateVouchersComponent_page_content_5_ng_template_6_Template(rf,ctx){1&rf&&core.Dc(0,\" \")}function GenerateVouchersComponent_page_content_5_Template(rf,ctx){if(1&rf){const _r17=core.Rb();core.Qb(0,\"page-content\",5),core.ac(1,\"async\"),core.Qb(2,\"generate-vouchers-step-confirm\",11),core.Xb(\"confirmationModeChanged\",(function($event){return core.sc(_r17),core.Zb().confirmationMode$.next($event)}))(\"confirmed\",(function($event){return core.sc(_r17),core.Zb().generate($event)})),core.Pb(),core.Qb(3,\"actions\",7),core.Bc(4,GenerateVouchersComponent_page_content_5_action_button_4_Template,2,4,\"action-button\",12),core.ac(5,\"async\"),core.Bc(6,GenerateVouchersComponent_page_content_5_ng_template_6_Template,1,0,\"ng-template\",null,13,core.Cc),core.Qb(8,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r17),core.Zb().backToForm()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const _r12=core.qc(7),ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.voucher.title.generateConfirmation)(\"mobileHeading\",ctx_r2.i18n.voucher.mobileTitle.generateConfirmation)(\"mode\",core.bc(1,11,ctx_r2.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(2),core.gc(\"generateVoucher\",ctx_r2.form.value)(\"data\",ctx_r2.dataTypeForGenerate)(\"user\",ctx_r2.form.get(\"userData\").value)(\"confirmationPasswordInput\",ctx_r2.dataTypeForGenerate.confirmationPasswordInput)(\"confirmationPassword\",ctx_r2.confirmationPassword),core.xb(2),core.gc(\"ngIf\",core.bc(5,13,ctx_r2.confirmationMode$)!=ctx_r2.ConfirmationMode.Device)(\"ngIfElse\",_r12),core.xb(4),core.gc(\"label\",ctx_r2.i18n.general.previous)}}function GenerateVouchersComponent_page_content_6_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}let generate_vouchers_component_GenerateVouchersComponent=(()=>{class GenerateVouchersComponent extends base_page_component.a{constructor(injector,voucherService){super(injector),this.voucherService=voucherService,this.ConfirmationMode=confirmation_mode.a,this.step$=new BehaviorSubject.a(null),this.singleType=!1,this.confirmationMode$=new BehaviorSubject.a(null)}get step(){return this.step$.value}set step(step){this.step$.next(step)}ngOnInit(){super.ngOnInit(),this.addSub(this.voucherService.getVoucherDataForGenerate().subscribe(data=>this.data=data))}onDataInitialized(data){const types=data.types||[];1===types.length?(this.singleType=!0,this.toForm(types[0])):this.step=\"select-type\"}get currency(){return this.dataTypeForGenerate.account.currency}generate(confirmationPassword){if(confirmationPassword&&this.confirmationPassword.setValue(confirmationPassword),this.confirmationPasswordInput&&!Object(helper.F)(this.confirmationPassword))return;const body=this.form.value;body.type=this.dataTypeForGenerate.type.id,delete body.userData,this.addSub(this.voucherService.generateVouchers({confirmationPassword:this.confirmationPasswordInput?this.confirmationPassword.value:null,body:body}).subscribe(()=>{this.reload(),this.notification.snackBar(this.i18n.voucher.generate.done)}))}backToSelectType(){this.step=\"select-type\"}backToForm(){this.step=\"form\"}toForm(type){this.addSub(this.voucherService.getVoucherDataForGenerate({type:type.id}).subscribe(data=>{this.dataTypeForGenerate=data,this.buildForm(),this.step=\"form\"}))}toConfirm(){Object(helper.F)(this.form)&&(this.canConfirm=this.authHelper.canConfirm(this.confirmationPasswordInput),this.canConfirm?(this.confirmationPasswordInput&&(this.confirmationPassword?this.confirmationPassword.reset():(this.confirmationPassword=this.formBuilder.control(null),this.confirmationPassword.setValidators(fesm2015_forms.G.required))),this.step=\"confirm\"):this.notification.warning(this.authHelper.getConfirmationMessage(this.confirmationPasswordInput)))}get confirmationPasswordInput(){return this.dataTypeForGenerate.confirmationPasswordInput}buildForm(){this.form?this.form.reset():this.form=this.formBuilder.group({count:new fesm2015_forms.j(\"\"),amount:new fesm2015_forms.j(\"\"),user:new fesm2015_forms.j(\"\"),userData:new fesm2015_forms.j(\"\")}),this.form.get(\"count\").setValue(1)}resolveMenu(){return shared_menu.b.GENERATE_VOUCHER}}return GenerateVouchersComponent.ɵfac=function(t){return new(t||GenerateVouchersComponent)(core.Kb(core.r),core.Kb(vouchers_service.a))},GenerateVouchersComponent.ɵcmp=core.Eb({type:GenerateVouchersComponent,selectors:[[\"generate-vouchers\"]],features:[core.ub],decls:7,vars:9,consts:[[3,\"ready\",\"ngSwitch\"],[4,\"ngSwitchCase\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[4,\"ngSwitchDefault\"],[3,\"types\",\"typeSelected\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\",3,\"data\",\"form\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\",4,\"ngIf\"],[\"outline\",\"\",3,\"label\",\"action\"],[1,\"flex-grow-1\",3,\"generateVoucher\",\"data\",\"user\",\"confirmationPasswordInput\",\"confirmationPassword\",\"confirmationModeChanged\",\"confirmed\"],[3,\"disabled\",\"label\",\"action\",4,\"ngIf\",\"ngIfElse\"],[\"spacer\",\"\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,GenerateVouchersComponent_ng_container_3_Template,2,1,\"ng-container\",1),core.Bc(4,GenerateVouchersComponent_page_content_4_Template,7,12,\"page-content\",2),core.Bc(5,GenerateVouchersComponent_page_content_5_Template,9,15,\"page-content\",2),core.Bc(6,GenerateVouchersComponent_page_content_6_Template,2,0,\"page-content\",3),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,5,ctx.data$))(\"ngSwitch\",core.bc(2,7,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"select-type\"),core.xb(1),core.gc(\"ngSwitchCase\",\"form\"),core.xb(1),core.gc(\"ngSwitchCase\",\"confirm\"))},directives:[page_layout_component.a,common.x,common.y,common.z,generate_vouchers_step_list_types_component_GenerateVouchersStepListTypesComponent,page_content_component.a,generate_vouchers_step_form_component_GenerateVouchersStepFormComponent,actions_component.a,action_button_component.a,common.t,generate_vouchers_step_confirm_component_GenerateVouchersStepConfirmComponent,spinner_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),GenerateVouchersComponent})();const bankingRoutes=[{path:\"\",canActivateChild:[logged_user_guard.a],children:[{path:\":owner/account/:type\",component:account_history_component_AccountHistoryComponent},{path:\"transfer/:key\",component:view_transfer_component_ViewTransferComponent},{path:\"transfer/:account/:key\",component:view_transfer_component_ViewTransferComponent},{path:\"transaction/:key\",component:view_transaction_component_ViewTransactionComponent},{path:\"transfers-overview\",component:search_transfers_overview_component_SearchTransfersOverviewComponent},{path:\"transaction/:key/authorization-history\",component:view_authorization_history_component_ViewAuthorizationHistoryComponent},{path:\":from/payment\",component:payment_component_PaymentComponent},{path:\":from/payment/:to\",component:payment_component_PaymentComponent},{path:\":from/payment-request\",component:request_payment_component_RequestPaymentComponent},{path:\"payment-request/:key/accept\",component:accept_payment_request_component_AcceptPaymentRequestComponent},{path:\":from/payment-request/:to\",component:request_payment_component_RequestPaymentComponent},{path:\":owner/payment-requests\",component:search_owner_transactions_component_SearchOwnerTransactionsComponent,data:{kind:\"payment-request\"}},{path:\"payment-requests\",component:search_transactions_overview_component_SearchTransactionsOverviewComponent,data:{kind:\"payment-request\"}},{path:\"pos\",component:payment_component_PaymentComponent},{path:\"qr\",component:receive_qr_payment_component_ReceiveQrPaymentComponent},{path:\":owner/installments\",component:search_owner_installments_component_SearchOwnerInstallmentsComponent},{path:\"installments-overview\",component:search_installments_component_SearchInstallmentsComponent},{path:\":owner/authorized-payments\",component:search_owner_transactions_component_SearchOwnerTransactionsComponent,data:{kind:\"authorized\"}},{path:\"authorized-payments\",component:search_transactions_overview_component_SearchTransactionsOverviewComponent,data:{kind:\"authorized\"}},{path:\"pending-my-authorization\",component:search_transactions_overview_component_SearchTransactionsOverviewComponent,data:{kind:\"myAuth\"}},{path:\":user/vouchers/redeem\",component:redeem_voucher_component_RedeemVoucherComponent},{path:\":user/vouchers/redeemed\",component:search_redeemed_vouchers_component_SearchRedeemedVouchersComponent},{path:\":user/vouchers/buy\",component:buy_vouchers_component_BuyVouchersComponent},{path:\":user/vouchers/bought\",component:search_bought_vouchers_component_SearchBoughtVouchersComponent},{path:\"vouchers/view/:key\",component:view_voucher_component_ViewVoucherComponent},{path:\"vouchers\",component:search_vouchers_component_SearchVouchersComponent},{path:\":user/account-balance-limits\",component:list_accounts_balance_limits_component_ListAccountsBalanceLimitsComponent},{path:\":user/account-balance-limits/:accountType\",component:view_account_balance_limits_component_ViewAccountBalanceLimitsComponent},{path:\":user/account-balance-limits/:accountType/edit\",component:edit_account_balance_limits_component_EditAccountBalanceLimitsComponent},{path:\"account-balance-limits-overview\",component:search_balance_limits_overview_component_SearchBalanceLimitsOverviewComponent},{path:\":user/account-payment-limits\",component:list_accounts_payment_limits_component_ListAccountsPaymentLimitsComponent},{path:\":user/account-payment-limits/:accountType\",component:view_account_payment_limits_component_ViewAccountPaymentLimitsComponent},{path:\":user/account-payment-limits/:accountType/edit\",component:edit_account_payment_limits_component_EditAccountPaymentLimitsComponent},{path:\"account-payment-limits-overview\",component:search_payment_limits_overview_component_SearchPaymentLimitsOverviewComponent},{path:\"user-balances-overview\",component:search_user_balances_component_SearchUserBalancesComponent},{path:\"vouchers/generate\",component:generate_vouchers_component_GenerateVouchersComponent}]}];let banking_routing_module_BankingRoutingModule=(()=>{class BankingRoutingModule{}return BankingRoutingModule.ɵmod=core.Ib({type:BankingRoutingModule}),BankingRoutingModule.ɵinj=core.Hb({factory:function(t){return new(t||BankingRoutingModule)},imports:[[router.i.forChild(bankingRoutes)],router.i]}),BankingRoutingModule})();function PaymentStepConfirmComponent_notification_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"notification\",6),core.Dc(1),core.Pb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.Fc(\" \",ctx_r0.i18n.transaction.requiresAuthorization,\"\\n\")}}function PaymentStepConfirmComponent_label_value_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Lb(1,\"user-link\",8),core.Pb()),2&rf){const ctx_r1=core.Zb();core.gc(\"label\",ctx_r1.i18n.transaction.fromUser),core.xb(1),core.gc(\"user\",ctx_r1.fromUser)}}function PaymentStepConfirmComponent_label_value_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Dc(1),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"label\",ctx_r2.i18n.transaction.fromAccount),core.xb(1),core.Fc(\" \",ctx_r2.preview.fromAccount.type.name,\"\\n\")}}function PaymentStepConfirmComponent_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Lb(1,\"user-link\",8),core.Pb()),2&rf){const ctx_r3=core.Zb();core.gc(\"label\",ctx_r3.i18n.transaction.toUser),core.xb(1),core.gc(\"user\",ctx_r3.toUser)}}function PaymentStepConfirmComponent_label_value_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Dc(1),core.Pb()),2&rf){const ctx_r4=core.Zb();core.gc(\"label\",ctx_r4.i18n.transaction.toAccount),core.xb(1),core.Fc(\" \",ctx_r4.preview.toAccount.type.name,\"\\n\")}}function PaymentStepConfirmComponent_label_value_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Dc(1),core.Pb()),2&rf){const ctx_r5=core.Zb();core.gc(\"label\",ctx_r5.i18n.transaction.type),core.xb(1),core.Fc(\" \",ctx_r5.preview.paymentType.name,\"\\n\")}}function PaymentStepConfirmComponent_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Dc(1),core.ac(2,\"currency\"),core.Pb()),2&rf){const ctx_r6=core.Zb();core.gc(\"label\",ctx_r6.i18n.transaction.amount),core.xb(1),core.Fc(\" \",core.cc(2,2,ctx_r6.preview.mainAmount,ctx_r6.preview.currency),\"\\n\")}}function PaymentStepConfirmComponent_label_value_7_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.ac(2,\"currency\"),core.Pb()),2&rf){const feePreview_r17=ctx.$implicit,ctx_r16=core.Zb(2);core.xb(1),core.Gc(\" \",feePreview_r17.fee.name,\": \",core.cc(2,2,feePreview_r17.amount,ctx_r16.preview.currency),\" \")}}function PaymentStepConfirmComponent_label_value_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Bc(1,PaymentStepConfirmComponent_label_value_7_div_1_Template,3,5,\"div\",9),core.Pb()),2&rf){const ctx_r7=core.Zb();core.gc(\"label\",ctx_r7.i18n.transaction.appliedFees),core.xb(1),core.gc(\"ngForOf\",ctx_r7.fees)}}function PaymentStepConfirmComponent_custom_field_value_8_Template(rf,ctx){1&rf&&core.Lb(0,\"custom-field-value\",10),2&rf&&core.gc(\"fieldValue\",ctx.$implicit)}function PaymentStepConfirmComponent_label_value_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Dc(1),core.ac(2,\"date\"),core.Pb()),2&rf){const ctx_r9=core.Zb();core.gc(\"label\",ctx_r9.i18n.transaction.dueDate),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r9.preview.installments[0].dueDate),\"\\n\")}}function PaymentStepConfirmComponent_label_value_10_thead_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"thead\"),core.Qb(1,\"th\"),core.Dc(2),core.Pb(),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\",12),core.Dc(6),core.Pb(),core.Pb()),2&rf){const ctx_r19=core.Zb(2);core.xb(2),core.Ec(ctx_r19.i18n.transaction.installmentNumber),core.xb(2),core.Ec(ctx_r19.i18n.transaction.dueDate),core.xb(2),core.Ec(ctx_r19.i18n.transaction.amount)}}function PaymentStepConfirmComponent_label_value_10_tr_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\"),core.Qb(1,\"td\"),core.Dc(2),core.Pb(),core.Qb(3,\"td\"),core.Dc(4),core.ac(5,\"date\"),core.Pb(),core.Qb(6,\"td\",12),core.Dc(7),core.ac(8,\"currency\"),core.Pb(),core.Pb()),2&rf){const installment_r21=ctx.$implicit,ctx_r20=core.Zb(2);core.xb(2),core.Fc(\" \",installment_r21.number,\" \"),core.xb(2),core.Fc(\" \",core.bc(5,3,installment_r21.dueDate),\" \"),core.xb(3),core.Fc(\" \",core.cc(8,5,installment_r21.mainAmount,ctx_r20.preview.currency),\" \")}}function PaymentStepConfirmComponent_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Qb(1,\"table\",11),core.Bc(2,PaymentStepConfirmComponent_label_value_10_thead_2_Template,7,3,\"thead\",4),core.ac(3,\"async\"),core.Qb(4,\"tbody\"),core.Bc(5,PaymentStepConfirmComponent_label_value_10_tr_5_Template,9,8,\"tr\",9),core.Pb(),core.Pb(),core.Pb()),2&rf){const ctx_r10=core.Zb();core.gc(\"label\",ctx_r10.i18n.transaction.installments),core.xb(2),core.gc(\"ngIf\",core.bc(3,3,ctx_r10.layout.gtxs$)),core.xb(3),core.gc(\"ngForOf\",ctx_r10.preview.installments)}}function PaymentStepConfirmComponent_label_value_11_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Nb()),2&rf){const ctx_r25=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r25.i18n.transaction.recurringPaymentNowManual,\" \")}}function PaymentStepConfirmComponent_label_value_11_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Nb()),2&rf){const ctx_r26=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r26.i18n.transaction.recurringPaymentNowFixed(ctx_r26.preview.payment.occurrencesCount),\" \")}}function PaymentStepConfirmComponent_label_value_11_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,PaymentStepConfirmComponent_label_value_11_ng_container_1_ng_container_1_Template,2,1,\"ng-container\",4),core.Bc(2,PaymentStepConfirmComponent_label_value_11_ng_container_1_ng_container_2_Template,2,1,\"ng-container\",4),core.Nb()),2&rf){const ctx_r22=core.Zb(2);core.xb(1),core.gc(\"ngIf\",null==ctx_r22.preview.payment.occurrencesCount),core.xb(1),core.gc(\"ngIf\",null!=ctx_r22.preview.payment.occurrencesCount)}}function PaymentStepConfirmComponent_label_value_11_ng_template_2_ng_container_0_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.ac(2,\"date\"),core.Nb()),2&rf){const ctx_r27=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r27.i18n.transaction.recurringPaymentDateManual(core.bc(2,1,ctx_r27.preview.payment.firstOccurrenceDate)),\" \")}}const payment_step_confirm_component_c0=function(a0,a1){return{date:a0,count:a1}};function PaymentStepConfirmComponent_label_value_11_ng_template_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.ac(2,\"date\"),core.Nb()),2&rf){const ctx_r28=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r28.i18n.transaction.recurringPaymentDateFixed(core.kc(3,payment_step_confirm_component_c0,core.bc(2,1,ctx_r28.preview.payment.firstOccurrenceDate),ctx_r28.preview.payment.occurrencesCount)),\" \")}}function PaymentStepConfirmComponent_label_value_11_ng_template_2_Template(rf,ctx){if(1&rf&&(core.Bc(0,PaymentStepConfirmComponent_label_value_11_ng_template_2_ng_container_0_Template,3,3,\"ng-container\",4),core.Bc(1,PaymentStepConfirmComponent_label_value_11_ng_template_2_ng_container_1_Template,3,6,\"ng-container\",4)),2&rf){const ctx_r24=core.Zb(2);core.gc(\"ngIf\",null==ctx_r24.preview.payment.occurrencesCount),core.xb(1),core.gc(\"ngIf\",null!=ctx_r24.preview.payment.occurrencesCount)}}function PaymentStepConfirmComponent_label_value_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Bc(1,PaymentStepConfirmComponent_label_value_11_ng_container_1_Template,3,2,\"ng-container\",13),core.Bc(2,PaymentStepConfirmComponent_label_value_11_ng_template_2_Template,2,2,\"ng-template\",null,14,core.Cc),core.Pb()),2&rf){const _r23=core.qc(3),ctx_r11=core.Zb();core.gc(\"label\",ctx_r11.i18n.transaction.recurringPayment),core.xb(1),core.gc(\"ngIf\",null==ctx_r11.preview.payment.firstOccurrenceDate)(\"ngIfElse\",_r23)}}function PaymentStepConfirmComponent_label_value_12_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",15),2&rf){const ctx_r12=core.Zb();core.gc(\"label\",ctx_r12.i18n.general.description)(\"value\",ctx_r12.preview.payment.description)}}function PaymentStepConfirmComponent_hr_13_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function PaymentStepConfirmComponent_ng_container_18_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function PaymentStepConfirmComponent_ng_container_18_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,PaymentStepConfirmComponent_ng_container_18_hr_1_Template,1,0,\"hr\",4),core.ac(2,\"async\"),core.Qb(3,\"div\",16),core.Dc(4),core.Pb(),core.Nb()),2&rf){const ctx_r14=core.Zb();core.xb(1),core.gc(\"ngIf\",core.bc(2,2,ctx_r14.layout.gtxxs$)),core.xb(3),core.Ec(ctx_r14.preview.confirmationMessage)}}function PaymentStepConfirmComponent_ng_container_19_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function PaymentStepConfirmComponent_ng_container_19_Template(rf,ctx){if(1&rf){const _r32=core.Rb();core.Ob(0),core.Bc(1,PaymentStepConfirmComponent_ng_container_19_hr_1_Template,1,0,\"hr\",4),core.ac(2,\"async\"),core.Qb(3,\"form\",17),core.Qb(4,\"confirmation-password\",18),core.Xb(\"confirmationModeChanged\",(function($event){return core.sc(_r32),core.Zb().confirmationModeChanged.emit($event)}))(\"confirmed\",(function($event){return core.sc(_r32),core.Zb().confirmed.emit($event)})),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r15=core.Zb();core.xb(1),core.gc(\"ngIf\",core.bc(2,5,ctx_r15.layout.gtxxs$)),core.xb(2),core.gc(\"formGroup\",ctx_r15.form),core.xb(1),core.gc(\"pos\",ctx_r15.pos)(\"passwordInput\",ctx_r15.preview.confirmationPasswordInput)(\"createDeviceConfirmation\",ctx_r15.createDeviceConfirmation)}}let payment_step_confirm_component_PaymentStepConfirmComponent=(()=>{class PaymentStepConfirmComponent extends base_component.a{constructor(injector,bankingHelper){super(injector),this.bankingHelper=bankingHelper,this.confirmationModeChanged=new core.n,this.confirmed=new core.n}ngOnInit(){super.ngOnInit(),this.fromUser=this.preview.fromAccount.user,this.fromSelf=this.fromUser&&this.authHelper.isSelf(this.fromUser),this.fromSystem=this.preview.fromAccount.kind===models.a.SYSTEM,this.toUser=this.preview.toAccount.user,this.toSelf=this.toUser&&this.authHelper.isSelf(this.toUser),this.toSystem=this.preview.toAccount.kind===models.a.SYSTEM,this.form=this.formBuilder.group({}),this.form.setControl(\"confirmationPassword\",this.confirmationPassword),this.fees=this.preview.fees,Object(helper.h)(this.fees)&&1===(this.preview.installments||[]).length&&(this.fees=this.preview.installments[0].fees),this.createDeviceConfirmation=()=>this.pos?this.preview.payment:{type:models.s.PERFORM_PAYMENT,from:api_helper.a.accountOwner(this.preview.fromAccount),to:api_helper.a.accountOwner(this.preview.toAccount),paymentType:this.preview.paymentType.id,amount:this.preview.payment.amount},this.preview.confirmationPasswordInput||this.addShortcut(shortcut_service.k,()=>this.confirmed.emit())}}return PaymentStepConfirmComponent.ɵfac=function(t){return new(t||PaymentStepConfirmComponent)(core.Kb(core.r),core.Kb(banking_helper_service.a))},PaymentStepConfirmComponent.ɵcmp=core.Eb({type:PaymentStepConfirmComponent,selectors:[[\"payment-step-confirm\"]],inputs:{pos:\"pos\",preview:\"preview\",confirmationPassword:\"confirmationPassword\",showPaymentType:\"showPaymentType\"},outputs:{confirmationModeChanged:\"confirmationModeChanged\",confirmed:\"confirmed\"},features:[core.ub],decls:20,vars:23,consts:[[\"class\",\"mb-3\",\"type\",\"warning\",4,\"ngIf\"],[3,\"label\",4,\"ngIf\"],[3,\"fieldValue\",4,\"ngFor\",\"ngForOf\"],[\"valueFormat\",\"break\",3,\"label\",\"value\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"totalAmount\",3,\"label\"],[\"type\",\"warning\",1,\"mb-3\"],[3,\"label\"],[3,\"user\"],[4,\"ngFor\",\"ngForOf\"],[3,\"fieldValue\"],[1,\"table\",\"table-hover\"],[1,\"text-right\"],[4,\"ngIf\",\"ngIfElse\"],[\"occurrencesDateSet\",\"\"],[\"valueFormat\",\"break\",3,\"label\",\"value\"],[1,\"break-nl\"],[3,\"formGroup\"],[\"focused\",\"\",\"formControlName\",\"confirmationPassword\",3,\"pos\",\"passwordInput\",\"createDeviceConfirmation\",\"confirmationModeChanged\",\"confirmed\"]],template:function(rf,ctx){1&rf&&(core.Bc(0,PaymentStepConfirmComponent_notification_0_Template,2,1,\"notification\",0),core.Bc(1,PaymentStepConfirmComponent_label_value_1_Template,2,2,\"label-value\",1),core.Bc(2,PaymentStepConfirmComponent_label_value_2_Template,2,2,\"label-value\",1),core.Bc(3,PaymentStepConfirmComponent_label_value_3_Template,2,2,\"label-value\",1),core.Bc(4,PaymentStepConfirmComponent_label_value_4_Template,2,2,\"label-value\",1),core.Bc(5,PaymentStepConfirmComponent_label_value_5_Template,2,2,\"label-value\",1),core.Bc(6,PaymentStepConfirmComponent_label_value_6_Template,3,5,\"label-value\",1),core.Bc(7,PaymentStepConfirmComponent_label_value_7_Template,2,2,\"label-value\",1),core.Bc(8,PaymentStepConfirmComponent_custom_field_value_8_Template,1,1,\"custom-field-value\",2),core.Bc(9,PaymentStepConfirmComponent_label_value_9_Template,3,4,\"label-value\",1),core.Bc(10,PaymentStepConfirmComponent_label_value_10_Template,6,5,\"label-value\",1),core.Bc(11,PaymentStepConfirmComponent_label_value_11_Template,4,3,\"label-value\",1),core.Bc(12,PaymentStepConfirmComponent_label_value_12_Template,1,2,\"label-value\",3),core.Bc(13,PaymentStepConfirmComponent_hr_13_Template,1,0,\"hr\",4),core.ac(14,\"async\"),core.Qb(15,\"label-value\",5),core.Dc(16),core.ac(17,\"currency\"),core.Pb(),core.Bc(18,PaymentStepConfirmComponent_ng_container_18_Template,5,4,\"ng-container\",4),core.Bc(19,PaymentStepConfirmComponent_ng_container_19_Template,5,7,\"ng-container\",4)),2&rf&&(core.gc(\"ngIf\",ctx.preview.pendingAuthorization),core.xb(1),core.gc(\"ngIf\",!ctx.fromSelf&&ctx.fromUser),core.xb(1),core.gc(\"ngIf\",ctx.fromSystem),core.xb(1),core.gc(\"ngIf\",ctx.toUser),core.xb(1),core.gc(\"ngIf\",ctx.toSystem),core.xb(1),core.gc(\"ngIf\",ctx.showPaymentType),core.xb(1),core.gc(\"ngIf\",null!=ctx.preview.mainAmount&&ctx.preview.totalAmount!==ctx.preview.mainAmount),core.xb(1),core.gc(\"ngIf\",(null==ctx.fees?null:ctx.fees.length)>0),core.xb(1),core.gc(\"ngForOf\",ctx.preview.customValues),core.xb(1),core.gc(\"ngIf\",1===(null==ctx.preview.installments?null:ctx.preview.installments.length)),core.xb(1),core.gc(\"ngIf\",(null==ctx.preview.installments?null:ctx.preview.installments.length)>1),core.xb(1),core.gc(\"ngIf\",\"recurring\"===ctx.preview.payment.scheduling),core.xb(1),core.gc(\"ngIf\",ctx.preview.payment.description),core.xb(1),core.gc(\"ngIf\",core.bc(14,18,ctx.layout.gtxxs$)),core.xb(2),core.gc(\"label\",ctx.i18n.transaction.totalAmount),core.xb(1),core.Fc(\" \",core.cc(17,20,ctx.preview.totalAmount,ctx.preview.currency),\"\\n\"),core.xb(2),core.gc(\"ngIf\",(ctx.preview.confirmationMessage||\"\").length>0),core.xb(1),core.gc(\"ngIf\",ctx.preview.confirmationPasswordInput))},directives:[common.t,common.s,label_value_component.a,notification_component.a,user_link_component.a,custom_field_value_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,confirmation_password_component.a,focused_directive.a,fesm2015_forms.v,fesm2015_forms.l],pipes:[common.b,currency_pipe.a,date_pipe.a],encapsulation:2,changeDetection:0}),PaymentStepConfirmComponent})(),payment_step_done_component_PaymentStepDoneComponent=(()=>{class PaymentStepDoneComponent extends base_component.a{constructor(injector,performPayment){super(injector),this.performPayment=performPayment}ngOnInit(){super.ngOnInit(),this.performed.authorizationStatus===models.yb.PENDING?(this.icon=\"scheduled\",this.message=this.performed.transactionNumber?this.i18n.transaction.pendingWithNumber(this.performed.transactionNumber):this.i18n.transaction.pending):(this.icon=\"done\",this.message=this.performed.transactionNumber?this.i18n.transaction.processedWithNumber(this.performed.transactionNumber):this.i18n.transaction.processed),this.addShortcut(shortcut_service.k,()=>this.performPayment.viewPerformed())}}return PaymentStepDoneComponent.ɵfac=function(t){return new(t||PaymentStepDoneComponent)(core.Kb(core.r),core.Kb(payment_component_PaymentComponent))},PaymentStepDoneComponent.ɵcmp=core.Eb({type:PaymentStepDoneComponent,selectors:[[\"payment-step-done\"]],inputs:{performed:\"performed\"},features:[core.ub],decls:6,vars:2,consts:[[1,\"text-center\",\"text-sm-left\",\"px-3\"],[1,\"d-inline-flex\",\"flex-column\",\"flex-sm-row\",\"align-items-center\"],[1,\"d-flex\",\"justify-content-center\",\"py-4\",\"positive\",\"pr-0\",\"pr-sm-4\"],[\"size\",\"3rem\",3,\"icon\"],[1,\"py-4\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"div\",0),core.Qb(1,\"div\",1),core.Qb(2,\"div\",2),core.Lb(3,\"icon\",3),core.Pb(),core.Qb(4,\"div\",4),core.Dc(5),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.xb(3),core.gc(\"icon\",ctx.icon),core.xb(2),core.Ec(ctx.message))},directives:[icon_component.a],encapsulation:2,changeDetection:0}),PaymentStepDoneComponent})();const payment_step_form_component_c0=[\"toUser\"],payment_step_form_component_c1=[\"amount\"];function PaymentStepFormComponent_label_value_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",15),core.Lb(1,\"user-link\",16),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.transaction.fromUser),core.xb(1),core.gc(\"user\",ctx_r0.fromUser)}}const payment_step_form_component_c2=function(a0,a1,a2){return{positive:a0,negative:a1,\"text-right\":a2}};function PaymentStepFormComponent_ng_container_2_label_value_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",18),core.ac(1,\"async\"),core.Qb(2,\"div\",19),core.ac(3,\"async\"),core.Dc(4),core.ac(5,\"currency\"),core.Pb(),core.Pb()),2&rf){const ctx_r14=core.Zb(2);core.gc(\"label\",core.bc(1,3,ctx_r14.accountBalanceLabel$)),core.xb(2),core.gc(\"ngClass\",core.lc(10,payment_step_form_component_c2,ctx_r14.format.isPositive(ctx_r14.singleAccount.status.balance),ctx_r14.format.isNegative(ctx_r14.singleAccount.status.balance),core.bc(3,5,ctx_r14.layout.ltsm$))),core.xb(2),core.Fc(\" \",core.cc(5,7,ctx_r14.singleAccount.status.balance,ctx_r14.singleAccount.currency),\" \")}}function PaymentStepFormComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,PaymentStepFormComponent_ng_container_2_label_value_1_Template,6,14,\"label-value\",17),core.Nb()),2&rf){const ctx_r1=core.Zb();core.xb(1),core.gc(\"ngIf\",ctx_r1.singleAccount.status)}}function PaymentStepFormComponent_ng_template_3_div_1_ng_container_8_br_1_Template(rf,ctx){1&rf&&core.Lb(0,\"br\")}function PaymentStepFormComponent_ng_template_3_div_1_ng_container_8_ng_template_3_Template(rf,ctx){1&rf&&core.Dc(0,\" - \")}function PaymentStepFormComponent_ng_template_3_div_1_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,PaymentStepFormComponent_ng_template_3_div_1_ng_container_8_br_1_Template,1,0,\"br\",2),core.ac(2,\"async\"),core.Bc(3,PaymentStepFormComponent_ng_template_3_div_1_ng_container_8_ng_template_3_Template,1,0,\"ng-template\",null,30,core.Cc),core.Dc(5),core.Nb()),2&rf){const _r21=core.qc(4),account_r16=core.Zb().$implicit,ctx_r18=core.Zb(2);core.xb(1),core.gc(\"ngIf\",core.bc(2,3,ctx_r18.layout.ltsm$))(\"ngIfElse\",_r21),core.xb(4),core.Fc(\" \",account_r16.number,\" \")}}const payment_step_form_component_c3=function(a0,a1){return{positive:a0,negative:a1}};function PaymentStepFormComponent_ng_template_3_div_1_div_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",31),core.Dc(1),core.ac(2,\"currency\"),core.Pb()),2&rf){const account_r16=core.Zb().$implicit,ctx_r19=core.Zb(2);core.gc(\"ngClass\",core.kc(5,payment_step_form_component_c3,ctx_r19.format.isPositive(account_r16.status.balance),ctx_r19.format.isNegative(account_r16.status.balance))),core.xb(1),core.Fc(\" \",core.cc(2,2,account_r16.status.balance,account_r16.currency),\" \")}}function PaymentStepFormComponent_ng_template_3_div_1_Template(rf,ctx){if(1&rf){const _r26=core.Rb();core.Qb(0,\"div\",23),core.Qb(1,\"div\"),core.Qb(2,\"div\",24),core.Qb(3,\"input\",25,26),core.Xb(\"keyup.enter\",(function(){return core.sc(_r26),core.qc(4).click()})),core.Pb(),core.Qb(5,\"label\",27),core.Qb(6,\"div\",28),core.Dc(7),core.Bc(8,PaymentStepFormComponent_ng_template_3_div_1_ng_container_8_Template,6,5,\"ng-container\",14),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Bc(9,PaymentStepFormComponent_ng_template_3_div_1_div_9_Template,3,8,\"div\",29),core.Pb()}if(2&rf){const account_r16=ctx.$implicit,ctx_r15=core.Zb(2);core.xb(1),core.zb(ctx_r15.pos?\"col\":\"col-7 col-sm-8 col-md-5\"),core.xb(2),core.gc(\"id\",\"from_\"+account_r16.id)(\"value\",account_r16.type.id),core.xb(2),core.gc(\"for\",\"from_\"+account_r16.id),core.xb(2),core.Fc(\" \",account_r16.type.name,\" \"),core.xb(1),core.gc(\"ngIf\",account_r16.number),core.xb(1),core.gc(\"ngIf\",!ctx_r15.pos&&account_r16.status)}}function PaymentStepFormComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",20),core.Bc(1,PaymentStepFormComponent_ng_template_3_div_1_Template,10,8,\"div\",21),core.Lb(2,\"field-errors\",22),core.Pb()),2&rf){const ctx_r3=core.Zb();core.gc(\"label\",ctx_r3.pos?ctx_r3.i18n.transaction.toAccount:ctx_r3.i18n.transaction.fromAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.accounts),core.xb(1),core.gc(\"control\",ctx_r3.form.get(\"account\"))}}function PaymentStepFormComponent_label_value_5_single_selection_field_1_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",37),2&rf){const user_r31=ctx.$implicit;core.gc(\"value\",user_r31.id)(\"text\",user_r31.display)}}function PaymentStepFormComponent_label_value_5_single_selection_field_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",35),core.Bc(1,PaymentStepFormComponent_label_value_5_single_selection_field_1_field_option_1_Template,1,2,\"field-option\",36),core.Pb()),2&rf){const ctx_r27=core.Zb(2);core.xb(1),core.gc(\"ngForOf\",ctx_r27.data.allowedUsers)}}const _c4=function(a0){return[a0]},_c5=function(a0){return{usersToExclude:a0}};function PaymentStepFormComponent_label_value_5_ng_template_2_Template(rf,ctx){if(1&rf){const _r34=core.Rb();core.Qb(0,\"user-field\",38,39),core.Xb(\"selected\",(function($event){core.sc(_r34),core.Zb(2);const _r7=core.qc(10);return $event?_r7.focus():null})),core.Pb()}if(2&rf){const ctx_r29=core.Zb(2);core.gc(\"autoSearch\",!ctx_r29.allowPrincipal)(\"filters\",core.jc(9,_c5,ctx_r29.fromUser&&!ctx_r29.fromSelf?core.jc(7,_c4,ctx_r29.fromParam):null))(\"allowContacts\",ctx_r29.allowContacts)(\"allowSearch\",ctx_r29.allowSearch)(\"allowPrincipal\",ctx_r29.allowPrincipal)(\"allowQrCode\",ctx_r29.allowQrCode)(\"principalTypes\",ctx_r29.data.principalTypes)}}function PaymentStepFormComponent_label_value_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",32),core.Bc(1,PaymentStepFormComponent_label_value_5_single_selection_field_1_Template,2,1,\"single-selection-field\",33),core.Bc(2,PaymentStepFormComponent_label_value_5_ng_template_2_Template,2,11,\"ng-template\",null,34,core.Cc),core.Pb()),2&rf){const _r28=core.qc(3),ctx_r4=core.Zb();core.gc(\"label\",ctx_r4.pos?ctx_r4.i18n.transaction.fromUser:ctx_r4.i18n.transaction.toUser),core.xb(1),core.gc(\"ngIf\",ctx_r4.fixedUsersList)(\"ngIfElse\",_r28)}}function PaymentStepFormComponent_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",40),core.Lb(1,\"user-link\",16),core.Pb()),2&rf){const ctx_r5=core.Zb();core.gc(\"label\",ctx_r5.i18n.transaction.toUser),core.xb(1),core.gc(\"user\",ctx_r5.toUser)}}function PaymentStepFormComponent_single_selection_field_7_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",37),2&rf){const pt_r37=ctx.$implicit;core.gc(\"value\",pt_r37.id)(\"text\",pt_r37.name)}}function PaymentStepFormComponent_single_selection_field_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",41,42),core.Bc(2,PaymentStepFormComponent_single_selection_field_7_field_option_2_Template,1,2,\"field-option\",36),core.ac(3,\"async\"),core.Pb()),2&rf){const ctx_r6=core.Zb();core.gc(\"label\",ctx_r6.i18n.transaction.type),core.xb(2),core.gc(\"ngForOf\",core.bc(3,2,ctx_r6.paymentTypes$))}}function PaymentStepFormComponent_custom_field_input_11_Template(rf,ctx){if(1&rf&&core.Lb(0,\"custom-field-input\",43),2&rf){const cf_r38=ctx.$implicit,ctx_r8=core.Zb();core.gc(\"field\",cf_r38)(\"formControl\",ctx_r8.customValuesControlGetter(cf_r38))}}function PaymentStepFormComponent_single_selection_field_13_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",49),2&rf){const ctx_r39=core.Zb(2);core.gc(\"text\",ctx_r39.i18n.transaction.schedulingSingle)}}function PaymentStepFormComponent_single_selection_field_13_field_option_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",50),2&rf){const ctx_r40=core.Zb(2);core.gc(\"text\",ctx_r40.i18n.transaction.schedulingInstallments)}}function PaymentStepFormComponent_single_selection_field_13_field_option_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",51),2&rf){const ctx_r41=core.Zb(2);core.gc(\"text\",ctx_r41.i18n.transaction.schedulingRecurring)}}function PaymentStepFormComponent_single_selection_field_13_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",44),core.Lb(1,\"field-option\",45),core.Bc(2,PaymentStepFormComponent_single_selection_field_13_field_option_2_Template,1,1,\"field-option\",46),core.Bc(3,PaymentStepFormComponent_single_selection_field_13_field_option_3_Template,1,1,\"field-option\",47),core.Bc(4,PaymentStepFormComponent_single_selection_field_13_field_option_4_Template,1,1,\"field-option\",48),core.Pb()),2&rf){const ctx_r9=core.Zb();core.gc(\"label\",ctx_r9.i18n.transaction.scheduling),core.xb(1),core.gc(\"text\",ctx_r9.i18n.transaction.schedulingDirect),core.xb(1),core.gc(\"ngIf\",(null==ctx_r9.paymentTypeData$.value?null:ctx_r9.paymentTypeData$.value.maxInstallments)>0),core.xb(1),core.gc(\"ngIf\",(null==ctx_r9.paymentTypeData$.value?null:ctx_r9.paymentTypeData$.value.maxInstallments)>1),core.xb(1),core.gc(\"ngIf\",null==ctx_r9.paymentTypeData$.value?null:ctx_r9.paymentTypeData$.value.allowsRecurringPayments)}}function PaymentStepFormComponent_date_field_17_Template(rf,ctx){if(1&rf&&core.Lb(0,\"date-field\",52),2&rf){const ctx_r10=core.Zb();core.gc(\"label\",ctx_r10.i18n.transaction.dueDate)}}function PaymentStepFormComponent_ng_container_18_date_field_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"date-field\",52),2&rf){const ctx_r42=core.Zb(2);core.gc(\"label\",ctx_r42.i18n.transaction.firstInstallmentDate)}}function PaymentStepFormComponent_ng_container_18_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"input-field\",53),core.Qb(2,\"radio-group-field\",54),core.Lb(3,\"field-option\",37),core.Lb(4,\"field-option\",37),core.Pb(),core.Bc(5,PaymentStepFormComponent_ng_container_18_date_field_5_Template,1,1,\"date-field\",55),core.Nb()),2&rf){const ctx_r11=core.Zb();core.xb(1),core.gc(\"label\",ctx_r11.i18n.transaction.installmentsCount),core.xb(1),core.gc(\"label\",ctx_r11.i18n.transaction.firstInstallment),core.xb(1),core.gc(\"value\",!0)(\"text\",ctx_r11.i18n.general.now),core.xb(1),core.gc(\"value\",!1)(\"text\",ctx_r11.i18n.general.futureDate),core.xb(1),core.gc(\"ngIf\",!1===ctx_r11.form.value.firstInstallmentIsNow)}}function PaymentStepFormComponent_ng_container_19_date_field_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"date-field\",60),2&rf){const ctx_r43=core.Zb(2);core.gc(\"label\",ctx_r43.i18n.transaction.firstOccurrenceDate)}}function PaymentStepFormComponent_ng_container_19_input_field_8_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",61),2&rf){const ctx_r44=core.Zb(2);core.gc(\"label\",ctx_r44.i18n.transaction.occurrencesCount)}}function PaymentStepFormComponent_ng_container_19_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"radio-group-field\",56),core.Lb(2,\"field-option\",37),core.Lb(3,\"field-option\",37),core.Pb(),core.Bc(4,PaymentStepFormComponent_ng_container_19_date_field_4_Template,1,1,\"date-field\",57),core.Qb(5,\"radio-group-field\",58),core.Lb(6,\"field-option\",37),core.Lb(7,\"field-option\",37),core.Pb(),core.Bc(8,PaymentStepFormComponent_ng_container_19_input_field_8_Template,1,1,\"input-field\",59),core.Nb()),2&rf){const ctx_r12=core.Zb();core.xb(1),core.gc(\"label\",ctx_r12.i18n.transaction.firstOccurrence),core.xb(1),core.gc(\"value\",!0)(\"text\",ctx_r12.i18n.general.now),core.xb(1),core.gc(\"value\",!1)(\"text\",ctx_r12.i18n.general.futureDate),core.xb(1),core.gc(\"ngIf\",!1===ctx_r12.form.value.firstOccurrenceIsNow),core.xb(1),core.gc(\"label\",ctx_r12.i18n.transaction.repeatUntil),core.xb(1),core.gc(\"value\",!0)(\"text\",ctx_r12.i18n.transaction.repeatUntilManual),core.xb(1),core.gc(\"value\",!1)(\"text\",ctx_r12.i18n.transaction.repeatUntilFixed),core.xb(1),core.gc(\"ngIf\",!1===ctx_r12.form.value.repeatUntilCanceled)}}function PaymentStepFormComponent_ng_container_20_textarea_field_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"textarea-field\",63),2&rf){const descriptionAvailability_r45=core.Zb().ngIf,ctx_r46=core.Zb();core.gc(\"required\",\"required\"===descriptionAvailability_r45)(\"label\",ctx_r46.i18n.general.description)}}function PaymentStepFormComponent_ng_container_20_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,PaymentStepFormComponent_ng_container_20_textarea_field_1_Template,1,2,\"textarea-field\",62),core.Nb()),2&rf){const descriptionAvailability_r45=ctx.ngIf;core.xb(1),core.gc(\"ngIf\",\"disabled\"!==descriptionAvailability_r45)}}const payment_step_form_component_IGNORED_STATUSES=[error_status.a.FORBIDDEN,error_status.a.UNAUTHORIZED,error_status.a.NOT_FOUND];let payment_step_form_component_PaymentStepFormComponent=(()=>{class PaymentStepFormComponent extends base_component.a{constructor(injector,bankingHelper,paymentsService,posService){super(injector),this.bankingHelper=bankingHelper,this.paymentsService=paymentsService,this.posService=posService,this.availablePaymentTypes=new core.n,this.accountBalanceLabel$=new BehaviorSubject.a(null),this.fixedDestination=!1,this.paymentTypes$=new BehaviorSubject.a(null)}ngOnInit(){super.ngOnInit(),this.fromParam=this.route.snapshot.params.from,this.dataCache=this.stateManager.get(\"dataCache\",()=>new Map),this.fixedDestination=null!=this.data.toKind,this.fromUser=this.data.fromUser,this.fromSelf=this.authHelper.isSelf(this.fromUser),this.toUser=this.data.toUser,this.fixedDestination?this.setFetchedPaymentTypes(this.data):this.addSub(this.form.get(\"subject\").valueChanges.pipe(Object(distinctUntilChanged.a)(),Object(debounceTime.a)(api_helper.a.DEBOUNCE_TIME)).subscribe(()=>this.fetchPaymentTypes())),this.addSub(this.form.get(\"account\").valueChanges.pipe(Object(distinctUntilChanged.a)(),Object(debounceTime.a)(api_helper.a.DEBOUNCE_TIME)).subscribe(()=>this.adjustPaymentTypes())),this.addSub(this.form.get(\"type\").valueChanges.pipe(Object(distinctUntilChanged.a)(),Object(debounceTime.a)(api_helper.a.DEBOUNCE_TIME)).subscribe(type=>this.fetchPaymentTypeData(type))),this.addSub(this.layout.xxs$.subscribe(()=>this.updateAccountBalanceLabel())),this.updateAccountBalanceLabel()}updateAccountBalanceLabel(){this.accountBalanceLabel$.next(this.layout.xxs?this.i18n.account.balance:this.i18n.transaction.accountBalance)}fetchPaymentTypes(){this.dataCache.clear(),this.fetchedPaymentTypes=null;const subject=api_helper.a.escapeNumeric(this.form.value.subject);\"\"!==subject&&this.errorHandler.requestWithCustomErrorHandler(defaultHandling=>{let request;request=this.pos?this.posService.dataForReceivePayment({from:subject,fields:[\"fromUser\",\"paymentTypes\",\"paymentTypeData\"]}):this.paymentsService.dataForPerformPayment({owner:this.fromParam,to:subject,fields:[\"toUser\",\"paymentTypes\",\"paymentTypeData\"]}),request.pipe(Object(first.a)()).subscribe(data=>{this.setFetchedPaymentTypes(data)},err=>{if(this.allowPrincipal&&this.userField&&err.status===error_status.a.NOT_FOUND){let error=err.error;if(\"string\"==typeof error)try{error=JSON.parse(error)}catch(e){error={}}const entityType=error.entityType;if(!Object(helper.a)(entityType)&&entityType.endsWith(\"User\"))return void this.userField.search()}payment_step_form_component_IGNORED_STATUSES.includes(err.status)||defaultHandling(err)})})}adjustPaymentTypes(){const value=this.form.value;if(0===(value.subject||\"\").trim().length)return;const allPaymentTypes=this.fetchedPaymentTypes||[];Object(helper.h)(allPaymentTypes)&&this.notification.error(this.i18n.transaction.noTypes);const paymentTypes=allPaymentTypes.filter(tt=>tt.from.id===value.account);let type=this.form.value.type,error=null;Object(helper.h)(paymentTypes)?error={message:this.i18n.transaction.noTypesSelection}:(this.paymentTypes$.next(paymentTypes),paymentTypes.find(t=>t.id===type)||(type=paymentTypes[0].id),this.form.get(\"account\").setErrors(null)),this.form.patchValue({type:type}),this.form.get(\"account\").setErrors(error),this.form.get(\"account\").markAsTouched(),Object(helper.h)(type)||this.fetchPaymentTypeData(type),this.availablePaymentTypes.emit(paymentTypes)}setFetchedPaymentTypes(data){this.userField&&(this.userField.user=this.pos?data.fromUser:data.toUser),this.fetchedPaymentTypes=data.paymentTypes;const typeData=data.paymentTypeData;typeData&&this.dataCache.set(typeData.id,typeData),this.adjustPaymentTypes()}fetchPaymentTypeData(type){const value=this.form.value;if(Object(helper.h)(value.subject)||Object(helper.h)(type))return;const cached=this.dataCache.get(type);cached?this.setPaymentTypeData(cached):(this.setPaymentTypeData(null),this.errorHandler.requestWithCustomErrorHandler(defaultHandling=>{let request;request=this.pos?this.posService.dataForReceivePayment({from:value.subject,type:type,fields:[\"paymentTypeData\"]}):this.paymentsService.dataForPerformPayment({owner:this.fromParam,to:value.subject,type:type,fields:[\"paymentTypeData\"]}),request.pipe(Object(first.a)()).subscribe(data=>{this.setPaymentTypeData(data.paymentTypeData)},err=>{payment_step_form_component_IGNORED_STATUSES.includes(err.status)||defaultHandling(err)})}))}setPaymentTypeData(typeData){((this.paymentTypeData$.value||{}).id||null)!==((typeData||{}).id||null)&&(typeData&&(this.dataCache.set(typeData.id,typeData),Object(helper.j)(this.amountField)),this.paymentTypeData$.next(typeData))}get fixedUsersList(){return!Object(helper.h)(this.data.allowedUsers)}get allowQrCode(){return this.allowPrincipal&&this.data.allowScanQrCode}get allowPrincipal(){return!Object(helper.h)(this.data.principalTypes)}get allowSearch(){return this.data.allowAutocomplete}get allowContacts(){return this.data.allowContacts}get singleAccount(){const accounts=this.data.accounts||[];return 1===accounts.length?accounts[0]:null}}return PaymentStepFormComponent.ɵfac=function(t){return new(t||PaymentStepFormComponent)(core.Kb(core.r),core.Kb(banking_helper_service.a),core.Kb(payments_service.a),core.Kb(pos_service.a))},PaymentStepFormComponent.ɵcmp=core.Eb({type:PaymentStepFormComponent,selectors:[[\"payment-step-form\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core.Hc(payment_step_form_component_c0,!0),core.yc(payment_step_form_component_c1,!0)),2&rf&&(core.pc(_t=core.Yb())&&(ctx.userField=_t.first),core.pc(_t=core.Yb())&&(ctx.amountField=_t.first))},inputs:{data:\"data\",pos:\"pos\",form:\"form\",currency:\"currency\",paymentTypeData$:\"paymentTypeData$\",customValuesControlGetter:\"customValuesControlGetter\"},outputs:{availablePaymentTypes:\"availablePaymentTypes\"},features:[core.ub],decls:22,vars:29,consts:[[3,\"formGroup\"],[\"kind\",\"field\",3,\"label\",4,\"ngIf\"],[4,\"ngIf\",\"ngIfElse\"],[\"multipleAccounts\",\"\"],[\"kind\",\"field\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[\"kind\",\"fieldView\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"type\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"amount\",\"required\",\"\",3,\"focused\",\"label\",\"scale\",\"prefix\",\"suffix\"],[\"amount\",\"\"],[3,\"field\",\"formControl\",4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"scheduling\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[3,\"ngSwitch\"],[\"formControlName\",\"firstInstallmentDate\",\"required\",\"\",\"minDate\",\"tomorrow\",\"maxDate\",\"future5\",3,\"label\",4,\"ngSwitchCase\"],[4,\"ngSwitchCase\"],[4,\"ngIf\"],[\"kind\",\"field\",3,\"label\"],[3,\"user\"],[\"kind\",\"fieldView\",\"labelPosition\",\"sideForced\",\"noWrapLabel\",\"\",3,\"label\",4,\"ngIf\"],[\"kind\",\"fieldView\",\"labelPosition\",\"sideForced\",\"noWrapLabel\",\"\",3,\"label\"],[1,\"w-100\",\"text-nowrap\",\"text-right\",\"text-xs-left\",\"font-weight-bold\",3,\"ngClass\"],[\"required\",\"\",\"kind\",\"field\",3,\"label\"],[\"class\",\"w-100 row no-gutters mb-2\",4,\"ngFor\",\"ngForOf\"],[3,\"control\"],[1,\"w-100\",\"row\",\"no-gutters\",\"mb-2\"],[1,\"custom-control\",\"custom-radio\"],[\"type\",\"radio\",\"formControlName\",\"account\",1,\"custom-control-input\",3,\"id\",\"value\",\"keyup.enter\"],[\"radio\",\"\"],[1,\"custom-control-label\",3,\"for\"],[1,\"ml-1\"],[\"class\",\"col-5 col-sm-4 col-md-7 pl-2 text-right text-xs-left font-weight-bold\",3,\"ngClass\",4,\"ngIf\"],[\"separator\",\"\"],[1,\"col-5\",\"col-sm-4\",\"col-md-7\",\"pl-2\",\"text-right\",\"text-xs-left\",\"font-weight-bold\",3,\"ngClass\"],[\"kind\",\"field\",\"required\",\"\",3,\"label\"],[\"focused\",\"\",\"formControlName\",\"subject\",4,\"ngIf\",\"ngIfElse\"],[\"toUserField\",\"\"],[\"focused\",\"\",\"formControlName\",\"subject\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"focused\",\"\",\"formControlName\",\"subject\",3,\"autoSearch\",\"filters\",\"allowContacts\",\"allowSearch\",\"allowPrincipal\",\"allowQrCode\",\"principalTypes\",\"selected\"],[\"toUser\",\"\"],[\"kind\",\"fieldView\",3,\"label\"],[\"formControlName\",\"type\",\"required\",\"\",3,\"label\"],[\"type\",\"\"],[3,\"field\",\"formControl\"],[\"formControlName\",\"scheduling\",\"required\",\"\",3,\"label\"],[\"value\",\"direct\",3,\"text\"],[\"value\",\"futureDate\",3,\"text\",4,\"ngIf\"],[\"value\",\"scheduled\",3,\"text\",4,\"ngIf\"],[\"value\",\"recurring\",3,\"text\",4,\"ngIf\"],[\"value\",\"futureDate\",3,\"text\"],[\"value\",\"scheduled\",3,\"text\"],[\"value\",\"recurring\",3,\"text\"],[\"formControlName\",\"firstInstallmentDate\",\"required\",\"\",\"minDate\",\"tomorrow\",\"maxDate\",\"future5\",3,\"label\"],[\"type\",\"number\",\"fieldSize\",\"small\",\"required\",\"\",\"numbersOnly\",\"\",\"formControlName\",\"installmentsCount\",3,\"label\"],[\"formControlName\",\"firstInstallmentIsNow\",3,\"label\"],[\"formControlName\",\"firstInstallmentDate\",\"required\",\"\",\"minDate\",\"tomorrow\",\"maxDate\",\"future5\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"firstOccurrenceIsNow\",3,\"label\"],[\"formControlName\",\"firstOccurrenceDate\",\"minDate\",\"tomorrow\",\"required\",\"\",\"minDate\",\"tomorrow\",\"maxDate\",\"future5\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"repeatUntilCanceled\",3,\"label\"],[\"type\",\"number\",\"fieldSize\",\"small\",\"numbersOnly\",\"\",\"formControlName\",\"occurrencesCount\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"firstOccurrenceDate\",\"minDate\",\"tomorrow\",\"required\",\"\",\"minDate\",\"tomorrow\",\"maxDate\",\"future5\",3,\"label\"],[\"type\",\"number\",\"fieldSize\",\"small\",\"numbersOnly\",\"\",\"formControlName\",\"occurrencesCount\",\"required\",\"\",3,\"label\"],[\"formControlName\",\"description\",\"required\",\"\",3,\"required\",\"label\",4,\"ngIf\"],[\"formControlName\",\"description\",\"required\",\"\",3,\"required\",\"label\"]],template:function(rf,ctx){if(1&rf&&(core.Ob(0,0),core.Bc(1,PaymentStepFormComponent_label_value_1_Template,2,2,\"label-value\",1),core.Bc(2,PaymentStepFormComponent_ng_container_2_Template,2,1,\"ng-container\",2),core.Bc(3,PaymentStepFormComponent_ng_template_3_Template,3,3,\"ng-template\",null,3,core.Cc),core.Bc(5,PaymentStepFormComponent_label_value_5_Template,4,3,\"label-value\",4),core.Bc(6,PaymentStepFormComponent_label_value_6_Template,2,2,\"label-value\",5),core.Bc(7,PaymentStepFormComponent_single_selection_field_7_Template,4,4,\"single-selection-field\",6),core.ac(8,\"async\"),core.Lb(9,\"decimal-field\",7,8),core.Bc(11,PaymentStepFormComponent_custom_field_input_11_Template,1,2,\"custom-field-input\",9),core.ac(12,\"async\"),core.Bc(13,PaymentStepFormComponent_single_selection_field_13_Template,5,5,\"single-selection-field\",10),core.ac(14,\"async\"),core.ac(15,\"async\"),core.Ob(16,11),core.Bc(17,PaymentStepFormComponent_date_field_17_Template,1,1,\"date-field\",12),core.Bc(18,PaymentStepFormComponent_ng_container_18_Template,6,7,\"ng-container\",13),core.Bc(19,PaymentStepFormComponent_ng_container_19_Template,9,12,\"ng-container\",13),core.Nb(),core.Bc(20,PaymentStepFormComponent_ng_container_20_Template,2,1,\"ng-container\",14),core.ac(21,\"async\"),core.Nb()),2&rf){const _r2=core.qc(4);var tmp_6_0,tmp_12_0,tmp_18_0,tmp_13_0=null;core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngIf\",ctx.fromUser&&!ctx.fromSelf),core.xb(1),core.gc(\"ngIf\",ctx.singleAccount)(\"ngIfElse\",_r2),core.xb(3),core.gc(\"ngIf\",!ctx.fixedDestination),core.xb(1),core.gc(\"ngIf\",ctx.fixedDestination&&ctx.toUser),core.xb(1),core.gc(\"ngIf\",(null==(tmp_6_0=core.bc(8,19,ctx.paymentTypes$))?null:tmp_6_0.length)>1),core.xb(2),core.gc(\"focused\",ctx.fixedDestination)(\"label\",ctx.i18n.transaction.amount)(\"scale\",null==ctx.currency?null:ctx.currency.decimalDigits)(\"prefix\",null==ctx.currency?null:ctx.currency.prefix)(\"suffix\",null==ctx.currency?null:ctx.currency.suffix),core.xb(2),core.gc(\"ngForOf\",null==(tmp_12_0=core.bc(12,21,ctx.paymentTypeData$))?null:tmp_12_0.customFields),core.xb(2),core.gc(\"ngIf\",(null==(tmp_13_0=core.bc(14,23,ctx.paymentTypeData$))?null:tmp_13_0.allowsRecurringPayments)||(null==(tmp_13_0=core.bc(15,25,ctx.paymentTypeData$))?null:tmp_13_0.maxInstallments)>0),core.xb(3),core.gc(\"ngSwitch\",ctx.form.value.scheduling),core.xb(1),core.gc(\"ngSwitchCase\",\"futureDate\"),core.xb(1),core.gc(\"ngSwitchCase\",\"scheduled\"),core.xb(1),core.gc(\"ngSwitchCase\",\"recurring\"),core.xb(1),core.gc(\"ngIf\",(null==(tmp_18_0=core.bc(21,27,ctx.paymentTypeData$))?null:tmp_18_0.descriptionAvailability)||\"disabled\")}},directives:[fesm2015_forms.w,fesm2015_forms.n,common.t,decimal_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,focused_directive.a,common.s,common.x,common.y,label_value_component.a,user_link_component.a,common.q,field_errors_component.a,fesm2015_forms.A,fesm2015_forms.e,single_selection_field_component.a,field_option_directive.a,user_field_component.a,custom_field_input_component.a,fesm2015_forms.k,date_field_component.a,input_field_component.a,numbers_only_directive.a,radio_group_field_component.a,textarea_field_component.a],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),PaymentStepFormComponent})(),receive_qr_payment_step_done_component_ReceiveQrPaymentStepDoneComponent=(()=>{class ReceiveQrPaymentStepDoneComponent extends base_component.a{constructor(injector,receiveQrPayment){super(injector),this.receiveQrPayment=receiveQrPayment}ngOnInit(){super.ngOnInit(),this.payment.authorizationStatus===models.yb.PENDING?(this.icon=\"scheduled\",this.message=this.payment.transactionNumber?this.i18n.transaction.pendingWithNumber(this.payment.transactionNumber):this.i18n.transaction.pending):(this.icon=\"done\",this.message=this.payment.transactionNumber?this.i18n.transaction.processedWithNumber(this.payment.transactionNumber):this.i18n.transaction.processed),this.addShortcut(shortcut_service.k,()=>this.receiveQrPayment.viewPerformed())}}return ReceiveQrPaymentStepDoneComponent.ɵfac=function(t){return new(t||ReceiveQrPaymentStepDoneComponent)(core.Kb(core.r),core.Kb(receive_qr_payment_component_ReceiveQrPaymentComponent))},ReceiveQrPaymentStepDoneComponent.ɵcmp=core.Eb({type:ReceiveQrPaymentStepDoneComponent,selectors:[[\"receive-qr-payment-step-done\"]],inputs:{payment:\"payment\"},features:[core.ub],decls:6,vars:2,consts:[[1,\"text-center\",\"text-sm-left\",\"px-3\"],[1,\"d-inline-flex\",\"flex-column\",\"flex-sm-row\",\"align-items-center\"],[1,\"d-flex\",\"justify-content-center\",\"py-4\",\"positive\",\"pr-0\",\"pr-sm-4\",\"positive\"],[\"size\",\"3rem\",3,\"icon\"],[1,\"py-4\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"div\",0),core.Qb(1,\"div\",1),core.Qb(2,\"div\",2),core.Lb(3,\"icon\",3),core.Pb(),core.Qb(4,\"div\",4),core.Dc(5),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.xb(3),core.gc(\"icon\",ctx.icon),core.xb(2),core.Ec(ctx.message))},directives:[icon_component.a],encapsulation:2,changeDetection:0}),ReceiveQrPaymentStepDoneComponent})();const receive_qr_payment_step_form_component_c0=[\"amount\"];function ReceiveQrPaymentStepFormComponent_radio_group_field_1_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",8),2&rf){const acc_r5=ctx.$implicit;core.gc(\"value\",acc_r5.id)(\"text\",acc_r5.type.name)}}function ReceiveQrPaymentStepFormComponent_radio_group_field_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"radio-group-field\",6),core.Bc(1,ReceiveQrPaymentStepFormComponent_radio_group_field_1_field_option_1_Template,1,2,\"field-option\",7),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.transaction.toAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r0.data.accounts)}}function ReceiveQrPaymentStepFormComponent_single_selection_field_2_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",8),2&rf){const tt_r7=ctx.$implicit;core.gc(\"value\",tt_r7.id)(\"text\",tt_r7.name)}}function ReceiveQrPaymentStepFormComponent_single_selection_field_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",9),core.Bc(1,ReceiveQrPaymentStepFormComponent_single_selection_field_2_field_option_1_Template,1,2,\"field-option\",7),core.Pb()),2&rf){const ctx_r1=core.Zb();core.gc(\"label\",ctx_r1.i18n.transaction.type),core.xb(1),core.gc(\"ngForOf\",ctx_r1.transferTypes)}}function ReceiveQrPaymentStepFormComponent_ng_container_4_custom_field_input_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"custom-field-input\",11),2&rf){const cf_r9=ctx.$implicit;core.gc(\"formControlName\",cf_r9.internalName)(\"field\",cf_r9)}}function ReceiveQrPaymentStepFormComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0,0),core.Bc(1,ReceiveQrPaymentStepFormComponent_ng_container_4_custom_field_input_1_Template,1,2,\"custom-field-input\",10),core.Nb()),2&rf){const ctx_r2=core.Zb();core.gc(\"formGroup\",ctx_r2.form.controls.customValues),core.xb(1),core.gc(\"ngForOf\",ctx_r2.typeData.customFields)}}function ReceiveQrPaymentStepFormComponent_textarea_field_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"textarea-field\",12),2&rf){const ctx_r3=core.Zb();core.gc(\"label\",ctx_r3.i18n.general.description)(\"required\",\"required\"===(null==ctx_r3.typeData?null:ctx_r3.typeData.descriptionAvailability))}}let receive_qr_payment_step_form_component_ReceiveQrPaymentStepFormComponent=(()=>{class ReceiveQrPaymentStepFormComponent extends base_component.a{constructor(injector){super(injector)}get singleAccount(){return 1===this.data.accounts.length}get currency(){return null==this.typeData?null:this.typeData.currency}}return ReceiveQrPaymentStepFormComponent.ɵfac=function(t){return new(t||ReceiveQrPaymentStepFormComponent)(core.Kb(core.r))},ReceiveQrPaymentStepFormComponent.ɵcmp=core.Eb({type:ReceiveQrPaymentStepFormComponent,selectors:[[\"receive-qr-payment-step-form\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.yc(receive_qr_payment_step_form_component_c0,!0),2&rf&&core.pc(_t=core.Yb())&&(ctx.amountField=_t.first)},inputs:{data:\"data\",form:\"form\",transferTypes:\"transferTypes\",type:\"type\",typeData:\"typeData\"},features:[core.ub],decls:6,vars:9,consts:[[3,\"formGroup\"],[\"formControlName\",\"account\",\"required\",\"\",\"asColumn\",\"\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"type\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"amount\",\"focused\",\"\",\"required\",\"\",3,\"label\",\"prefix\",\"suffix\",\"scale\"],[3,\"formGroup\",4,\"ngIf\"],[\"formControlName\",\"description\",3,\"label\",\"required\",4,\"ngIf\"],[\"formControlName\",\"account\",\"required\",\"\",\"asColumn\",\"\",3,\"label\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"formControlName\",\"type\",3,\"label\"],[3,\"formControlName\",\"field\",4,\"ngFor\",\"ngForOf\"],[3,\"formControlName\",\"field\"],[\"formControlName\",\"description\",3,\"label\",\"required\"]],template:function(rf,ctx){1&rf&&(core.Ob(0,0),core.Bc(1,ReceiveQrPaymentStepFormComponent_radio_group_field_1_Template,2,2,\"radio-group-field\",1),core.Bc(2,ReceiveQrPaymentStepFormComponent_single_selection_field_2_Template,2,2,\"single-selection-field\",2),core.Lb(3,\"decimal-field\",3),core.Bc(4,ReceiveQrPaymentStepFormComponent_ng_container_4_Template,2,2,\"ng-container\",4),core.Bc(5,ReceiveQrPaymentStepFormComponent_textarea_field_5_Template,1,2,\"textarea-field\",5),core.Nb()),2&rf&&(core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngIf\",!ctx.singleAccount),core.xb(1),core.gc(\"ngIf\",(null==ctx.transferTypes?null:ctx.transferTypes.length)>1),core.xb(1),core.gc(\"label\",ctx.i18n.transaction.amount)(\"prefix\",null==ctx.currency?null:ctx.currency.prefix)(\"suffix\",null==ctx.currency?null:ctx.currency.suffix)(\"scale\",null==ctx.currency?null:ctx.currency.decimalDigits),core.xb(1),core.gc(\"ngIf\",(null==ctx.typeData||null==ctx.typeData.customFields?null:ctx.typeData.customFields.length)>0),core.xb(1),core.gc(\"ngIf\",\"disabled\"!==(null==ctx.typeData?null:ctx.typeData.descriptionAvailability)))},directives:[fesm2015_forms.w,fesm2015_forms.n,common.t,decimal_field_component.a,fesm2015_forms.v,fesm2015_forms.l,focused_directive.a,fesm2015_forms.D,radio_group_field_component.a,common.s,field_option_directive.a,single_selection_field_component.a,custom_field_input_component.a,textarea_field_component.a],encapsulation:2,changeDetection:0}),ReceiveQrPaymentStepFormComponent})();function ReceiveQrPaymentStepPendingComponent_label_value_9_button_3_Template(rf,ctx){if(1&rf){const _r3=core.Rb();core.Qb(0,\"button\",10),core.Xb(\"click\",(function(){return core.sc(_r3),core.Zb(2).copyUrl()})),core.Lb(1,\"icon\",11),core.Pb()}if(2&rf){const ctx_r1=core.Zb(2);core.gc(\"tooltip\",ctx_r1.i18n.general.copyToClipboard)}}function ReceiveQrPaymentStepPendingComponent_label_value_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",3),core.Qb(1,\"div\",8),core.Dc(2),core.Pb(),core.Bc(3,ReceiveQrPaymentStepPendingComponent_label_value_9_button_3_Template,2,1,\"button\",9),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.transaction.ticketShareUrl),core.xb(2),core.Ec(ctx_r0.ticket.approveUrl)}}let receive_qr_payment_step_pending_component_ReceiveQrPaymentStepPendingComponent=(()=>{class ReceiveQrPaymentStepPendingComponent extends base_component.a{constructor(injector){super(injector),this.supportsShare=Object(helper.C)()}copyUrl(){Object(helper.f)(this.ticket.approveUrl),this.notification.snackBar(this.i18n.general.copyToClipboardDone)}}return ReceiveQrPaymentStepPendingComponent.ɵfac=function(t){return new(t||ReceiveQrPaymentStepPendingComponent)(core.Kb(core.r))},ReceiveQrPaymentStepPendingComponent.ɵcmp=core.Eb({type:ReceiveQrPaymentStepPendingComponent,selectors:[[\"receive-qr-payment-step-pending\"]],inputs:{ticket:\"ticket\",qrCodeUrl:\"qrCodeUrl\"},features:[core.ub],decls:10,vars:9,consts:[[1,\"d-flex\",\"justify-content-center\",\"align-items-center\"],[1,\"mb-3\",3,\"src\"],[3,\"label\",\"value\"],[3,\"label\"],[1,\"d-flex\"],[1,\"flex-grow-1\"],[\"bootstrap\",\"\",\"size\",\"1.5rem\",1,\"p-0\",\"ml-2\"],[3,\"label\",4,\"ngIf\"],[1,\"w-100\"],[\"class\",\"btn btn-icon\",\"type\",\"button\",3,\"tooltip\",\"click\",4,\"extraCell\"],[\"type\",\"button\",1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"link\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"div\",0),core.Lb(1,\"img\",1),core.ac(2,\"trust\"),core.Pb(),core.Lb(3,\"label-value\",2),core.Qb(4,\"label-value\",3),core.Qb(5,\"div\",4),core.Qb(6,\"div\",5),core.Dc(7),core.Pb(),core.Lb(8,\"spinner\",6),core.Pb(),core.Pb(),core.Bc(9,ReceiveQrPaymentStepPendingComponent_label_value_9_Template,4,2,\"label-value\",7)),2&rf&&(core.xb(1),core.gc(\"src\",core.cc(2,6,ctx.qrCodeUrl,\"url\"),core.uc),core.xb(2),core.gc(\"label\",ctx.i18n.transaction.amount)(\"value\",ctx.format.formatAsCurrency(ctx.ticket.currency,ctx.ticket.amount)),core.xb(1),core.gc(\"label\",ctx.i18n.general.status),core.xb(3),core.Ec(ctx.i18n.transaction.status.pending),core.xb(2),core.gc(\"ngIf\",!ctx.supportsShare))},directives:[label_value_component.a,spinner_component.a,common.t,extra_cell_directive.a,ngx_bootstrap_tooltip.b,icon_component.a],pipes:[trust_pipe.a],encapsulation:2,changeDetection:0}),ReceiveQrPaymentStepPendingComponent})();var ui_shared_module=__webpack_require__(\"Se2V\"),ngx_bootstrap_alert=__webpack_require__(\"CNMR\"),ngx_bootstrap_buttons=__webpack_require__(\"aHM3\"),ngx_bootstrap_pagination=__webpack_require__(\"6No5\"),ngx_bootstrap_progressbar=__webpack_require__(\"38Bd\"),ngx_bootstrap_sortable=__webpack_require__(\"p4Ho\"),ngx_bootstrap_dropdown=__webpack_require__(\"FE24\"),ngx_gallery_9=__webpack_require__(\"GTjh\"),zxing_ngx_scanner=__webpack_require__(\"7Ub2\"),not_found_component=__webpack_require__(\"yThH\"),confirmation_component=__webpack_require__(\"vdzA\"),password_input_component=__webpack_require__(\"o/nJ\"),rich_text_container_component=__webpack_require__(\"AH7H\"),html_field_component=__webpack_require__(\"lrfU\"),insert_image_dialog_component=__webpack_require__(\"aVfl\"),image_properties_dialog_component=__webpack_require__(\"G1xJ\"),link_properties_dialog_component=__webpack_require__(\"VpKs\"),url_field_component=__webpack_require__(\"yk18\"),checkbox_group_field_component=__webpack_require__(\"nGVv\"),calendar_component=__webpack_require__(\"559x\"),time_interval_field_component=__webpack_require__(\"0C6t\"),images_field_component=__webpack_require__(\"z332\"),image_upload_component=__webpack_require__(\"pz1b\"),manage_images_component=__webpack_require__(\"bER3\"),file_field_component=__webpack_require__(\"ZJXG\"),files_field_component=__webpack_require__(\"wUcZ\"),temp_file_upload_component=__webpack_require__(\"yRWz\"),manage_files_component=__webpack_require__(\"/edM\"),multiple_users_field_component=__webpack_require__(\"vHbw\"),text_selection_field_component=__webpack_require__(\"USuC\"),pick_contact_component=__webpack_require__(\"Y49Y\"),content_monitor_component=__webpack_require__(\"2V/7\"),chip_component=__webpack_require__(\"HZ9B\"),captcha_component=__webpack_require__(\"g9Ug\"),icon_with_counter_component=__webpack_require__(\"jOM4\"),button_toggle_component=__webpack_require__(\"DFH8\"),countdown_button_component=__webpack_require__(\"csas\"),banner_card_component=__webpack_require__(\"p60g\"),show_content_component=__webpack_require__(\"8pf7\"),address_details_component=__webpack_require__(\"UnhA\"),address_form_component=__webpack_require__(\"N7zh\"),field_privacy_component=__webpack_require__(\"sGzL\"),profile_addresses_component=__webpack_require__(\"eNTF\"),profile_images_component=__webpack_require__(\"Kiu2\"),rating_stats_component=__webpack_require__(\"vOpc\"),accept_agreements_component=__webpack_require__(\"T6RQ\"),agreement_link_component=__webpack_require__(\"U4Kh\"),agreement_content_dialog_component=__webpack_require__(\"ugYG\"),actions_toolbar_component=__webpack_require__(\"MNyf\"),static_map_component=__webpack_require__(\"CyT4\"),side_menu_component=__webpack_require__(\"x741\"),heading_actions_component=__webpack_require__(\"BTg0\"),heading_action_button_component=__webpack_require__(\"BUNh\"),heading_sub_actions_component=__webpack_require__(\"podT\"),tiled_result_component=__webpack_require__(\"oOvo\"),result_category_directive=__webpack_require__(\"L/K/\"),result_tile_directive=__webpack_require__(\"7nZW\"),paginator_component=__webpack_require__(\"9uOH\"),notification_type_setting_component=__webpack_require__(\"dCJh\"),time_pipe=__webpack_require__(\"g1uo\"),number_pipe=__webpack_require__(\"cLCZ\"),boolean_pipe=__webpack_require__(\"kmyw\"),account_pipe=__webpack_require__(\"/NTq\");let banking_module_BankingModule=(()=>{class BankingModule{}return BankingModule.ɵmod=core.Ib({type:BankingModule}),BankingModule.ɵinj=core.Hb({factory:function(t){return new(t||BankingModule)},imports:[[banking_routing_module_BankingRoutingModule,ui_shared_module.a]]}),BankingModule})();core.vc(payment_component_PaymentComponent,[router.j,router.f,router.h,router.g,router.k,common.q,common.r,common.s,common.t,common.A,common.w,common.x,common.y,common.z,common.u,common.v,fesm2015_forms.I,fesm2015_forms.x,fesm2015_forms.H,fesm2015_forms.e,fesm2015_forms.y,fesm2015_forms.B,fesm2015_forms.b,fesm2015_forms.E,fesm2015_forms.F,fesm2015_forms.A,fesm2015_forms.v,fesm2015_forms.w,fesm2015_forms.D,fesm2015_forms.r,fesm2015_forms.q,fesm2015_forms.z,fesm2015_forms.c,fesm2015_forms.f,fesm2015_forms.k,fesm2015_forms.n,fesm2015_forms.l,fesm2015_forms.o,fesm2015_forms.h,ngx_bootstrap_alert.a,ngx_bootstrap_modal.c,ngx_bootstrap_modal.d,ngx_bootstrap_buttons.a,ngx_bootstrap_buttons.b,ngx_bootstrap_buttons.c,ngx_bootstrap_pagination.a,ngx_bootstrap_pagination.b,ngx_bootstrap_progressbar.a,ngx_bootstrap_progressbar.b,ngx_bootstrap_sortable.a,ngx_bootstrap_tooltip.b,ngx_bootstrap_dropdown.b,ngx_bootstrap_dropdown.d,ngx_bootstrap_dropdown.a,ngx_gallery_9.b,zxing_ngx_scanner.a,not_found_component.a,notification_component.a,confirmation_component.a,icon_component.a,maybe_link_component.a,avatar_component.a,spinner_component.a,actions_component.a,password_input_component.a,confirmation_password_component.a,label_value_component.a,extra_cell_directive.a,rich_text_container_component.a,format_field_value_component.a,custom_field_value_component.a,boolean_field_component.a,input_field_component.a,html_field_component.a,insert_image_dialog_component.a,image_properties_dialog_component.a,link_properties_dialog_component.a,url_field_component.a,textarea_field_component.a,field_errors_component.a,field_option_directive.a,single_selection_field_component.a,multi_selection_field_component.a,checkbox_group_field_component.a,radio_group_field_component.a,calendar_component.a,date_field_component.a,time_interval_field_component.a,decimal_field_component.a,custom_field_input_component.a,custom_field_filter_component.a,basic_profile_field_filter_component.a,images_field_component.a,image_upload_component.a,manage_images_component.a,file_field_component.a,files_field_component.a,temp_file_upload_component.a,manage_files_component.a,user_field_component.a,multiple_users_field_component.a,text_selection_field_component.a,pick_contact_component.a,content_monitor_component.a,chip_component.a,captcha_component.a,scan_qrcode_component.a,icon_with_counter_component.a,button_toggle_component.a,countdown_button_component.a,action_button_component.a,focused_directive.a,numbers_only_directive.a,mask_directive.a,banner_card_component.a,show_content_component.a,address_details_component.a,address_form_component.a,field_privacy_component.a,profile_addresses_component.a,profile_images_component.a,user_link_component.a,user_info_component.a,rating_stats_component.a,accept_agreements_component.a,agreement_link_component.a,agreement_content_dialog_component.a,actions_toolbar_component.a,static_map_component.a,map_result_component.a,mobile_result_component.a,side_menu_component.a,page_layout_component.a,page_content_component.a,heading_actions_component.a,heading_action_button_component.a,heading_sub_actions_component.a,results_layout_component.a,tiled_result_component.a,result_category_directive.a,result_table_directive.a,mobile_result_directive.a,result_tile_directive.a,result_info_window_directive.a,paginator_component.a,max_distance_field_component.a,result_type_field_component.a,notification_type_setting_component.a,account_history_component_AccountHistoryComponent,account_status_view_component_AccountStatusViewComponent,view_transfer_component_ViewTransferComponent,transfer_details_component_TransferDetailsComponent,view_authorization_history_component_ViewAuthorizationHistoryComponent,search_transfers_overview_component_SearchTransfersOverviewComponent,search_user_balances_component_SearchUserBalancesComponent,balances_summary_component_BalancesSummaryComponent,search_owner_transactions_component_SearchOwnerTransactionsComponent,search_transactions_overview_component_SearchTransactionsOverviewComponent,search_owner_installments_component_SearchOwnerInstallmentsComponent,search_installments_component_SearchInstallmentsComponent,view_transaction_component_ViewTransactionComponent,payment_component_PaymentComponent,payment_step_form_component_PaymentStepFormComponent,payment_step_confirm_component_PaymentStepConfirmComponent,payment_step_done_component_PaymentStepDoneComponent,receive_qr_payment_component_ReceiveQrPaymentComponent,receive_qr_payment_step_form_component_ReceiveQrPaymentStepFormComponent,receive_qr_payment_step_pending_component_ReceiveQrPaymentStepPendingComponent,receive_qr_payment_step_done_component_ReceiveQrPaymentStepDoneComponent,buy_vouchers_component_BuyVouchersComponent,search_bought_vouchers_component_SearchBoughtVouchersComponent,buy_vouchers_step_list_types_component_BuyVouchersStepListTypesComponent,buy_vouchers_step_form_component_BuyVouchersStepFormComponent,buy_vouchers_step_confirm_component_BuyVouchersStepConfirmComponent,redeem_voucher_component_RedeemVoucherComponent,view_voucher_component_ViewVoucherComponent,search_redeemed_vouchers_component_SearchRedeemedVouchersComponent,search_vouchers_component_SearchVouchersComponent,voucher_filters_component_VoucherFiltersComponent,generate_vouchers_component_GenerateVouchersComponent,generate_vouchers_step_list_types_component_GenerateVouchersStepListTypesComponent,generate_vouchers_step_form_component_GenerateVouchersStepFormComponent,generate_vouchers_step_confirm_component_GenerateVouchersStepConfirmComponent,view_account_balance_limits_component_ViewAccountBalanceLimitsComponent,edit_account_balance_limits_component_EditAccountBalanceLimitsComponent,list_accounts_balance_limits_component_ListAccountsBalanceLimitsComponent,search_balance_limits_overview_component_SearchBalanceLimitsOverviewComponent,view_account_payment_limits_component_ViewAccountPaymentLimitsComponent,edit_account_payment_limits_component_EditAccountPaymentLimitsComponent,list_accounts_payment_limits_component_ListAccountsPaymentLimitsComponent,search_payment_limits_overview_component_SearchPaymentLimitsOverviewComponent,request_payment_component_RequestPaymentComponent,request_payment_step_form_component_RequestPaymentStepFormComponent,request_payment_step_done_component_RequestPaymentStepDoneComponent,accept_payment_request_component_AcceptPaymentRequestComponent,accept_payment_request_step_confirm_component_AcceptPaymentRequestStepConfirmComponent],[common.b,common.G,common.p,common.k,common.E,common.g,common.C,common.F,common.d,common.f,common.i,common.j,common.l,trust_pipe.a,date_pipe.a,date_time_pipe.a,time_pipe.a,number_pipe.a,currency_pipe.a,boolean_pipe.a,account_pipe.a]),core.vc(receive_qr_payment_component_ReceiveQrPaymentComponent,[router.j,router.f,router.h,router.g,router.k,common.q,common.r,common.s,common.t,common.A,common.w,common.x,common.y,common.z,common.u,common.v,fesm2015_forms.I,fesm2015_forms.x,fesm2015_forms.H,fesm2015_forms.e,fesm2015_forms.y,fesm2015_forms.B,fesm2015_forms.b,fesm2015_forms.E,fesm2015_forms.F,fesm2015_forms.A,fesm2015_forms.v,fesm2015_forms.w,fesm2015_forms.D,fesm2015_forms.r,fesm2015_forms.q,fesm2015_forms.z,fesm2015_forms.c,fesm2015_forms.f,fesm2015_forms.k,fesm2015_forms.n,fesm2015_forms.l,fesm2015_forms.o,fesm2015_forms.h,ngx_bootstrap_alert.a,ngx_bootstrap_modal.c,ngx_bootstrap_modal.d,ngx_bootstrap_buttons.a,ngx_bootstrap_buttons.b,ngx_bootstrap_buttons.c,ngx_bootstrap_pagination.a,ngx_bootstrap_pagination.b,ngx_bootstrap_progressbar.a,ngx_bootstrap_progressbar.b,ngx_bootstrap_sortable.a,ngx_bootstrap_tooltip.b,ngx_bootstrap_dropdown.b,ngx_bootstrap_dropdown.d,ngx_bootstrap_dropdown.a,ngx_gallery_9.b,zxing_ngx_scanner.a,not_found_component.a,notification_component.a,confirmation_component.a,icon_component.a,maybe_link_component.a,avatar_component.a,spinner_component.a,actions_component.a,password_input_component.a,confirmation_password_component.a,label_value_component.a,extra_cell_directive.a,rich_text_container_component.a,format_field_value_component.a,custom_field_value_component.a,boolean_field_component.a,input_field_component.a,html_field_component.a,insert_image_dialog_component.a,image_properties_dialog_component.a,link_properties_dialog_component.a,url_field_component.a,textarea_field_component.a,field_errors_component.a,field_option_directive.a,single_selection_field_component.a,multi_selection_field_component.a,checkbox_group_field_component.a,radio_group_field_component.a,calendar_component.a,date_field_component.a,time_interval_field_component.a,decimal_field_component.a,custom_field_input_component.a,custom_field_filter_component.a,basic_profile_field_filter_component.a,images_field_component.a,image_upload_component.a,manage_images_component.a,file_field_component.a,files_field_component.a,temp_file_upload_component.a,manage_files_component.a,user_field_component.a,multiple_users_field_component.a,text_selection_field_component.a,pick_contact_component.a,content_monitor_component.a,chip_component.a,captcha_component.a,scan_qrcode_component.a,icon_with_counter_component.a,button_toggle_component.a,countdown_button_component.a,action_button_component.a,focused_directive.a,numbers_only_directive.a,mask_directive.a,banner_card_component.a,show_content_component.a,address_details_component.a,address_form_component.a,field_privacy_component.a,profile_addresses_component.a,profile_images_component.a,user_link_component.a,user_info_component.a,rating_stats_component.a,accept_agreements_component.a,agreement_link_component.a,agreement_content_dialog_component.a,actions_toolbar_component.a,static_map_component.a,map_result_component.a,mobile_result_component.a,side_menu_component.a,page_layout_component.a,page_content_component.a,heading_actions_component.a,heading_action_button_component.a,heading_sub_actions_component.a,results_layout_component.a,tiled_result_component.a,result_category_directive.a,result_table_directive.a,mobile_result_directive.a,result_tile_directive.a,result_info_window_directive.a,paginator_component.a,max_distance_field_component.a,result_type_field_component.a,notification_type_setting_component.a,account_history_component_AccountHistoryComponent,account_status_view_component_AccountStatusViewComponent,view_transfer_component_ViewTransferComponent,transfer_details_component_TransferDetailsComponent,view_authorization_history_component_ViewAuthorizationHistoryComponent,search_transfers_overview_component_SearchTransfersOverviewComponent,search_user_balances_component_SearchUserBalancesComponent,balances_summary_component_BalancesSummaryComponent,search_owner_transactions_component_SearchOwnerTransactionsComponent,search_transactions_overview_component_SearchTransactionsOverviewComponent,search_owner_installments_component_SearchOwnerInstallmentsComponent,search_installments_component_SearchInstallmentsComponent,view_transaction_component_ViewTransactionComponent,payment_component_PaymentComponent,payment_step_form_component_PaymentStepFormComponent,payment_step_confirm_component_PaymentStepConfirmComponent,payment_step_done_component_PaymentStepDoneComponent,receive_qr_payment_component_ReceiveQrPaymentComponent,receive_qr_payment_step_form_component_ReceiveQrPaymentStepFormComponent,receive_qr_payment_step_pending_component_ReceiveQrPaymentStepPendingComponent,receive_qr_payment_step_done_component_ReceiveQrPaymentStepDoneComponent,buy_vouchers_component_BuyVouchersComponent,search_bought_vouchers_component_SearchBoughtVouchersComponent,buy_vouchers_step_list_types_component_BuyVouchersStepListTypesComponent,buy_vouchers_step_form_component_BuyVouchersStepFormComponent,buy_vouchers_step_confirm_component_BuyVouchersStepConfirmComponent,redeem_voucher_component_RedeemVoucherComponent,view_voucher_component_ViewVoucherComponent,search_redeemed_vouchers_component_SearchRedeemedVouchersComponent,search_vouchers_component_SearchVouchersComponent,voucher_filters_component_VoucherFiltersComponent,generate_vouchers_component_GenerateVouchersComponent,generate_vouchers_step_list_types_component_GenerateVouchersStepListTypesComponent,generate_vouchers_step_form_component_GenerateVouchersStepFormComponent,generate_vouchers_step_confirm_component_GenerateVouchersStepConfirmComponent,view_account_balance_limits_component_ViewAccountBalanceLimitsComponent,edit_account_balance_limits_component_EditAccountBalanceLimitsComponent,list_accounts_balance_limits_component_ListAccountsBalanceLimitsComponent,search_balance_limits_overview_component_SearchBalanceLimitsOverviewComponent,view_account_payment_limits_component_ViewAccountPaymentLimitsComponent,edit_account_payment_limits_component_EditAccountPaymentLimitsComponent,list_accounts_payment_limits_component_ListAccountsPaymentLimitsComponent,search_payment_limits_overview_component_SearchPaymentLimitsOverviewComponent,request_payment_component_RequestPaymentComponent,request_payment_step_form_component_RequestPaymentStepFormComponent,request_payment_step_done_component_RequestPaymentStepDoneComponent,accept_payment_request_component_AcceptPaymentRequestComponent,accept_payment_request_step_confirm_component_AcceptPaymentRequestStepConfirmComponent],[common.b,common.G,common.p,common.k,common.E,common.g,common.C,common.F,common.d,common.f,common.i,common.j,common.l,trust_pipe.a,date_pipe.a,date_time_pipe.a,time_pipe.a,number_pipe.a,currency_pipe.a,boolean_pipe.a,account_pipe.a])},v4xg:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BaseSearchPageComponent}));var _angular_forms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"s7LF\"),app_core_next_request_state__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"mwYl\"),app_shared_action__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"tAww\"),app_shared_api_helper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"rCAV\"),app_ui_shared_base_page_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"uuU0\"),app_shared_paged_results__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"Ky6R\"),app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"TFmz\"),lodash_es__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"Muja\"),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"2Vo4\"),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(\"Kj3r\"),_angular_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(\"8Y7J\");let BaseSearchPageComponent=(()=>{class BaseSearchPageComponent extends app_ui_shared_base_page_component__WEBPACK_IMPORTED_MODULE_4__.a{constructor(injector){super(injector),this.ResultType=app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a,this.resultType$=new rxjs__WEBPACK_IMPORTED_MODULE_8__.a(null),this.resultTypeControl=new _angular_forms__WEBPACK_IMPORTED_MODULE_0__.j(null),this.results$=new rxjs__WEBPACK_IMPORTED_MODULE_8__.a(null),this.allowedResultTypes$=new rxjs__WEBPACK_IMPORTED_MODULE_8__.a([app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.LIST]),this.rendering$=new rxjs__WEBPACK_IMPORTED_MODULE_8__.a(!1),this.moreFilters$=new rxjs__WEBPACK_IMPORTED_MODULE_8__.a(!1),this.ignoreNextUpdate=!1,this.nextRequestState=injector.get(app_core_next_request_state__WEBPACK_IMPORTED_MODULE_1__.a);const controls={page:0};controls.resultType=this.getInitialResultType();for(const name of this.getFormControlNames()||[])controls[name]=null;this.form=this.formBuilder.group(controls)}getInitialFormValue(data){return data.query||{}}onDataInitialized(data){this.form.patchValue(this.getInitialFormValue(data)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,\"resultType\"),this.stateManager.manageValue(this.moreFilters$,\"moreFilters\"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe(rt=>{const previous=this.previousResultType;this.previousResultType=rt,this.resultType$.next(rt),this.shouldUpdateOnResultTypeChange(rt,previous)&&this.update(),null!=previous&&previous===rt||(this.rendering=!0,this.stateManager.set(\"resultType\",rt),this.onResultTypeChanged(rt,previous))})),setTimeout(()=>{this.addSub(this.form.valueChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(app_shared_api_helper__WEBPACK_IMPORTED_MODULE_3__.a.DEBOUNCE_TIME)).subscribe(value=>{this.shouldUpdateOnChange(value)&&this.update(),this.previousValue=value}),!0),this.previousResultType!==app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.CATEGORIES&&this.update()},1)}shouldUpdateOnResultTypeChange(resultType,previous){return resultType!==app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.CATEGORIES&&([app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.LIST,app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.TILES].includes(previous)!==[app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.LIST,app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.TILES].includes(resultType)||previous===app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.MAP!=(resultType===app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.MAP))}shouldUpdateOnChange(value){return!Object(lodash_es__WEBPACK_IMPORTED_MODULE_7__.a)(this.previousValue,value)}get results(){return this.results$.value}set results(results){this.results$.next(results)}get rendering(){return this.rendering$.value}set rendering(rendering){this.rendering$.next(rendering)}get allowedResultTypes(){return this.allowedResultTypes$.value}set allowedResultTypes(resultTypes){this.allowedResultTypes$.next(resultTypes)}get moreFilters(){return this.moreFilters$.value}set moreFilters(moreFilters){this.moreFilters$.next(moreFilters)}get pageData(){const val=this.form.value;return{page:val.page,pageSize:val.pageSize}}set pageData(pageData){this.form.patchValue(pageData)}get resultType(){return this.resultTypeControl.value}set resultType(resultType){null==resultType&&(resultType=this.getInitialResultType()),this.resultTypeControl.setValue(resultType)}ngOnInit(){super.ngOnInit(),this.resultType=this.getInitialResultType()}get moreFiltersAction(){return this._moreFiltersAction||(this._moreFiltersAction=new app_shared_action__WEBPACK_IMPORTED_MODULE_2__.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),()=>{this.moreFilters=!this.moreFilters,this._moreFiltersAction.icon=this.moreFilters?this.showLessFiltersIcon():this.showMoreFiltersIcon(),this._moreFiltersAction.label=this.moreFilters?this.showLessFiltersLabel():this.showMoreFiltersLabel()},!0),this._moreFiltersAction.breakpoint=\"gt-xxs\",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}showMoreFiltersLabel(){return this.i18n.general.showMoreFilters}showLessFiltersLabel(){return this.i18n.general.showLessFilters}showMoreFiltersIcon(){return\"filter_list\"}showLessFiltersIcon(){return\"filter_list\"}onResultTypeChanged(_resultType,_previous){}getInitialResultType(){return app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.LIST}update(pageData){if(this.ignoreNextUpdate)return;pageData&&(this.form.patchValue(pageData,{emitEvent:!1}),this.stateManager.set(\"form\",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;const value=this.form.value;value.pageSize=this.uiLayout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(value)).subscribe(response=>{this.resultType===app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.CATEGORIES&&(this.resultType=this.allowedResultTypes.find(rt=>rt!==app_ui_shared_result_type__WEBPACK_IMPORTED_MODULE_6__.a.CATEGORIES)),this.results=app_shared_paged_results__WEBPACK_IMPORTED_MODULE_5__.a.from(response)}))}resetPage(emitEvent=!1){this.form.patchValue({page:0},{emitEvent:emitEvent})}doIgnoringUpdate(fn){this.ignoreNextUpdate=!0;try{fn()}finally{this.ignoreNextUpdate=!1}}}return BaseSearchPageComponent.ɵfac=function(t){return new(t||BaseSearchPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_10__.Kb(_angular_core__WEBPACK_IMPORTED_MODULE_10__.r))},BaseSearchPageComponent.ɵdir=_angular_core__WEBPACK_IMPORTED_MODULE_10__.Fb({type:BaseSearchPageComponent,features:[_angular_core__WEBPACK_IMPORTED_MODULE_10__.ub]}),BaseSearchPageComponent})()}}]);","extractedComments":[]}