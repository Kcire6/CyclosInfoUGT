{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{RsAj:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"UsersModule\",(function(){return users_module_UsersModule}));var ui_shared_module=__webpack_require__(\"Se2V\"),router=__webpack_require__(\"iInd\"),countries_resolve=__webpack_require__(\"bkl+\"),logged_user_guard=__webpack_require__(\"IbW5\"),privacy_settings_service=__webpack_require__(\"q8SF\"),api_helper=__webpack_require__(\"rCAV\"),base_page_component=__webpack_require__(\"uuU0\"),helper=__webpack_require__(\"ObUu\"),menu=__webpack_require__(\"QH++\"),cloneDeep=__webpack_require__(\"XIp8\"),core=__webpack_require__(\"8Y7J\"),page_layout_component=__webpack_require__(\"3qho\"),page_content_component=__webpack_require__(\"I0FJ\"),common=__webpack_require__(\"SVse\"),fesm2015_forms=__webpack_require__(\"s7LF\"),boolean_field_component=__webpack_require__(\"yHfF\"),actions_component=__webpack_require__(\"UXR7\"),action_button_component=__webpack_require__(\"OTwK\"),user_info_component=__webpack_require__(\"s7Af\"),ngx_bootstrap_tooltip=__webpack_require__(\"978R\");function EditPrivacySettingsComponent_ng_container_3_li_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"li\"),core.Dc(1),core.Pb()),2&rf){const field_r5=ctx.$implicit;core.xb(1),core.Ec(field_r5)}}function EditPrivacySettingsComponent_ng_container_3_user_info_7_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-info\",9),2&rf){const ctx_r2=core.Zb(2);core.gc(\"user\",ctx_r2.data.user)}}function EditPrivacySettingsComponent_ng_container_3_ng_container_10_boolean_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",11),2&rf){const control_r7=ctx.$implicit;core.gc(\"formControlName\",control_r7.id)(\"label\",control_r7.name)(\"tooltip\",control_r7.informationText)(\"placement\",\"left\")}}function EditPrivacySettingsComponent_ng_container_3_ng_container_10_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\"),core.Dc(2),core.Pb(),core.Bc(3,EditPrivacySettingsComponent_ng_container_3_ng_container_10_boolean_field_3_Template,1,4,\"boolean-field\",10),core.Nb()),2&rf){const ctx_r4=core.Zb(2);core.xb(2),core.Ec(ctx_r4.i18n.privacySettings.controlsSection),core.xb(1),core.gc(\"ngForOf\",ctx_r4.data.availableControls)}}function EditPrivacySettingsComponent_ng_container_3_Template(rf,ctx){if(1&rf){const _r9=core.Rb();core.Ob(0,2),core.Qb(1,\"div\"),core.Dc(2),core.Pb(),core.Qb(3,\"div\"),core.Dc(4),core.Pb(),core.Qb(5,\"ul\"),core.Bc(6,EditPrivacySettingsComponent_ng_container_3_li_6_Template,2,1,\"li\",3),core.Pb(),core.Bc(7,EditPrivacySettingsComponent_ng_container_3_user_info_7_Template,1,1,\"user-info\",4),core.Lb(8,\"boolean-field\",5,6),core.Bc(10,EditPrivacySettingsComponent_ng_container_3_ng_container_10_Template,4,2,\"ng-container\",7),core.Qb(11,\"actions\"),core.Qb(12,\"action-button\",8),core.Xb(\"action\",(function(){return core.sc(_r9),core.Zb().save()})),core.ac(13,\"async\"),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const _r3=core.qc(9),ctx_r0=core.Zb();core.gc(\"formGroup\",ctx_r0.form),core.xb(2),core.Ec(ctx_r0.i18n.privacySettings.information),core.xb(2),core.Ec(ctx_r0.i18n.privacySettings.dataSubjectToControls),core.xb(2),core.gc(\"ngForOf\",ctx_r0.fields()),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.user&&!ctx_r0.authHelper.isSelf(ctx_r0.data.user)),core.xb(1),core.gc(\"formControlName\",\"enabled\")(\"label\",ctx_r0.i18n.general.enabled),core.xb(2),core.gc(\"ngIf\",_r3.value),core.xb(2),core.gc(\"label\",ctx_r0.i18n.general.save)(\"disabled\",core.bc(13,10,ctx_r0.requesting$))}}let edit_privacy_settings_component_EditPrivacySettingsComponent=(()=>{class EditPrivacySettingsComponent extends base_page_component.a{constructor(injector,privacySettingsService){super(injector),this.privacySettingsService=privacySettingsService}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.privacySettingsService.getPrivacySettingsData({user:this.user?this.user:api_helper.a.SELF}).subscribe(data=>this.data=data))}fields(){return this.data.controlledFields.map(field=>this.fieldHelper.fieldDisplay(field,this.data.customFields))}onDataInitialized(data){this.form=this.formBuilder.group({enabled:data.enabled}),data.availableControls.forEach(control=>this.form.addControl(control.id,this.formBuilder.control({value:data.selectedControls.includes(control.id)||control.fieldsAlwaysVisible,disabled:control.fieldsAlwaysVisible})))}save(){if(Object(helper.F)(this.form),!this.form.valid)return;const values=Object(cloneDeep.a)(this.form.value),enabled=values.enabled;delete values.enabled;const params={enabled:enabled,selectedControls:[]};this.data.availableControls.forEach(control=>{values[control.id]&&params.selectedControls.push(control.id)}),this.addSub(this.privacySettingsService.savePrivacySettings({user:this.user?this.user:api_helper.a.SELF,body:params}).subscribe(()=>this.notification.snackBar(this.i18n.privacySettings.saved)))}resolveMenu(){return this.authHelper.isSelf(this.user)?menu.b.PRIVACY_SETTINGS:this.menu.searchUsersMenu()}}return EditPrivacySettingsComponent.ɵfac=function(t){return new(t||EditPrivacySettingsComponent)(core.Kb(core.r),core.Kb(privacy_settings_service.a))},EditPrivacySettingsComponent.ɵcmp=core.Eb({type:EditPrivacySettingsComponent,selectors:[[\"edit-privacy-settings\"]],features:[core.ub],decls:5,vars:8,consts:[[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"formGroup\",4,\"ngIf\"],[3,\"formGroup\"],[4,\"ngFor\",\"ngForOf\"],[3,\"user\",4,\"ngIf\"],[3,\"formControlName\",\"label\"],[\"enabled\",\"\"],[4,\"ngIf\"],[3,\"label\",\"disabled\",\"action\"],[3,\"user\"],[3,\"formControlName\",\"label\",\"tooltip\",\"placement\",4,\"ngFor\",\"ngForOf\"],[3,\"formControlName\",\"label\",\"tooltip\",\"placement\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\"),core.Qb(1,\"page-content\",0),core.ac(2,\"async\"),core.Bc(3,EditPrivacySettingsComponent_ng_container_3_Template,14,12,\"ng-container\",1),core.ac(4,\"async\"),core.Pb(),core.Pb()),2&rf&&(core.xb(1),core.gc(\"heading\",ctx.i18n.privacySettings.title)(\"mobileHeading\",ctx.i18n.privacySettings.mobileTitle)(\"headingActions\",core.bc(2,4,ctx.headingActions$)),core.xb(2),core.gc(\"ngIf\",core.bc(4,6,ctx.data$)))},directives:[page_layout_component.a,page_content_component.a,common.t,fesm2015_forms.w,fesm2015_forms.n,common.s,boolean_field_component.a,fesm2015_forms.v,fesm2015_forms.l,actions_component.a,action_button_component.a,user_info_component.a,ngx_bootstrap_tooltip.b],pipes:[common.b],encapsulation:2,changeDetection:0}),EditPrivacySettingsComponent})();var label_value_component=__webpack_require__(\"JFlR\");function ViewPrivacySettingsComponent_ng_container_3_li_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"li\"),core.Dc(1),core.Pb()),2&rf){const field_r4=ctx.$implicit;core.xb(1),core.Ec(field_r4)}}function ViewPrivacySettingsComponent_ng_container_3_user_info_7_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-info\",5),2&rf){const ctx_r2=core.Zb(2);core.gc(\"user\",ctx_r2.data.user)}}function ViewPrivacySettingsComponent_ng_container_3_ng_container_10_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Dc(1),core.Pb()),2&rf){const control_r6=ctx.$implicit,ctx_r5=core.Zb(3);core.gc(\"label\",control_r6.name)(\"tooltip\",control_r6.informationText)(\"placement\",\"left\"),core.xb(1),core.Fc(\" \",control_r6.fieldsAlwaysVisible||ctx_r5.data.selectedControls.includes(control_r6.id)?ctx_r5.i18n.general.yes:ctx_r5.i18n.general.no,\" \")}}function ViewPrivacySettingsComponent_ng_container_3_ng_container_10_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\"),core.Dc(2),core.Pb(),core.Bc(3,ViewPrivacySettingsComponent_ng_container_3_ng_container_10_label_value_3_Template,2,4,\"label-value\",6),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.Ec(ctx_r3.i18n.privacySettings.controlsSection),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.availableControls)}}function ViewPrivacySettingsComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\"),core.Dc(2),core.Pb(),core.Qb(3,\"div\"),core.Dc(4),core.Pb(),core.Qb(5,\"ul\"),core.Bc(6,ViewPrivacySettingsComponent_ng_container_3_li_6_Template,2,1,\"li\",2),core.Pb(),core.Bc(7,ViewPrivacySettingsComponent_ng_container_3_user_info_7_Template,1,1,\"user-info\",3),core.Qb(8,\"label-value\",4),core.Dc(9),core.Pb(),core.Bc(10,ViewPrivacySettingsComponent_ng_container_3_ng_container_10_Template,4,2,\"ng-container\",1),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(2),core.Ec(ctx_r0.i18n.privacySettings.information),core.xb(2),core.Ec(ctx_r0.i18n.privacySettings.dataSubjectToControls),core.xb(2),core.gc(\"ngForOf\",ctx_r0.fields()),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.user&&!ctx_r0.authHelper.isSelf(ctx_r0.data.user)),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.enabled),core.xb(1),core.Fc(\" \",ctx_r0.data.enabled?ctx_r0.i18n.general.yes:ctx_r0.i18n.general.no,\"\"),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.enabled)}}let view_privacy_settings_component_ViewPrivacySettingsComponent=(()=>{class ViewPrivacySettingsComponent extends base_page_component.a{constructor(injector,privacySettingsService){super(injector),this.privacySettingsService=privacySettingsService}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.privacySettingsService.getPrivacySettingsData({user:this.user?this.user:api_helper.a.SELF}).subscribe(data=>{data.canEdit&&this.router.navigate([\"/users\",this.user,\"privacy-settings\",\"edit\"],{replaceUrl:!0}),this.data=data}))}fields(){return this.data.controlledFields.map(field=>this.fieldHelper.fieldDisplay(field,this.data.customFields))}resolveMenu(){return this.authHelper.isSelf(this.user)?menu.b.PRIVACY_SETTINGS:this.menu.searchUsersMenu()}}return ViewPrivacySettingsComponent.ɵfac=function(t){return new(t||ViewPrivacySettingsComponent)(core.Kb(core.r),core.Kb(privacy_settings_service.a))},ViewPrivacySettingsComponent.ɵcmp=core.Eb({type:ViewPrivacySettingsComponent,selectors:[[\"view-privacy-settings\"]],features:[core.ub],decls:5,vars:8,consts:[[3,\"heading\",\"mobileHeading\",\"headingActions\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[3,\"user\",4,\"ngIf\"],[3,\"label\"],[3,\"user\"],[3,\"label\",\"tooltip\",\"placement\",4,\"ngFor\",\"ngForOf\"],[3,\"label\",\"tooltip\",\"placement\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\"),core.Qb(1,\"page-content\",0),core.ac(2,\"async\"),core.Bc(3,ViewPrivacySettingsComponent_ng_container_3_Template,11,7,\"ng-container\",1),core.ac(4,\"async\"),core.Pb(),core.Pb()),2&rf&&(core.xb(1),core.gc(\"heading\",ctx.i18n.privacySettings.title)(\"mobileHeading\",ctx.i18n.privacySettings.mobileTitle)(\"headingActions\",core.bc(2,4,ctx.headingActions$)),core.xb(2),core.gc(\"ngIf\",core.bc(4,6,ctx.data$)))},directives:[page_layout_component.a,page_content_component.a,common.t,common.s,label_value_component.a,user_info_component.a,ngx_bootstrap_tooltip.b],pipes:[common.b],encapsulation:2,changeDetection:0}),ViewPrivacySettingsComponent})();var agreements_service=__webpack_require__(\"cutz\"),user_helper_service=__webpack_require__(\"tzq7\"),agreement_content_dialog_component=__webpack_require__(\"ugYG\"),base_view_page_component=__webpack_require__(\"Pm8L\"),ngx_bootstrap_modal=__webpack_require__(\"LqlI\"),results_layout_component=__webpack_require__(\"Zilp\"),mobile_result_directive=__webpack_require__(\"IbGL\"),result_table_directive=__webpack_require__(\"Ae/X\"),mobile_result_component=__webpack_require__(\"iM3x\"),icon_component=__webpack_require__(\"H4pW\"),date_pipe=__webpack_require__(\"yL40\"),date_time_pipe=__webpack_require__(\"/kmK\"),boolean_pipe=__webpack_require__(\"kmyw\");function ViewAgreementsHistoryComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function ViewAgreementsHistoryComponent_ng_template_3_user_info_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-info\",8),2&rf){const ctx_r3=core.Zb(2);core.gc(\"user\",ctx_r3.data.user)}}function ViewAgreementsHistoryComponent_ng_template_3_mobile_result_3_del_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"del\"),core.Dc(1),core.Pb()),2&rf){const row_r6=core.Zb().$implicit;core.xb(1),core.Fc(\" \",row_r6.agreement.name,\" \")}}function ViewAgreementsHistoryComponent_ng_template_3_mobile_result_3_ng_template_7_Template(rf,ctx){if(1&rf&&core.Dc(0),2&rf){const row_r6=core.Zb().$implicit;core.Fc(\" \",row_r6.agreement.name,\" \")}}function ViewAgreementsHistoryComponent_ng_template_3_mobile_result_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\"),core.Qb(1,\"div\"),core.Qb(2,\"div\",9),core.Dc(3),core.ac(4,\"date\"),core.Pb(),core.Qb(5,\"div\",10),core.Bc(6,ViewAgreementsHistoryComponent_ng_template_3_mobile_result_3_del_6_Template,2,1,\"del\",11),core.Bc(7,ViewAgreementsHistoryComponent_ng_template_3_mobile_result_3_ng_template_7_Template,1,1,\"ng-template\",null,12,core.Cc),core.Pb(),core.Pb(),core.Pb()),2&rf){const row_r6=ctx.$implicit,_r8=core.qc(8);core.xb(3),core.Fc(\" \",core.bc(4,3,row_r6.date),\" \"),core.xb(3),core.gc(\"ngIf\",!row_r6.accepted)(\"ngIfElse\",_r8)}}function ViewAgreementsHistoryComponent_ng_template_3_table_4_th_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"th\"),core.Dc(1),core.Pb()),2&rf){const ctx_r12=core.Zb(3);core.xb(1),core.Ec(ctx_r12.i18n.agreements.accepted)}}function ViewAgreementsHistoryComponent_ng_template_3_table_4_th_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"th\",18),core.Dc(1),core.Pb()),2&rf){const ctx_r13=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r13.i18n.general.remoteAddress,\"\")}}function ViewAgreementsHistoryComponent_ng_template_3_table_4_tr_10_td_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Dc(1),core.ac(2,\"boolean\"),core.Pb()),2&rf){const row_r15=core.Zb().$implicit;core.xb(1),core.Ec(core.bc(2,1,row_r15.accepted))}}function ViewAgreementsHistoryComponent_ng_template_3_table_4_tr_10_td_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\",18),core.Dc(1),core.Pb()),2&rf){const row_r15=core.Zb().$implicit;core.xb(1),core.Fc(\" \",row_r15.remoteAddress,\"\")}}function ViewAgreementsHistoryComponent_ng_template_3_table_4_tr_10_button_9_Template(rf,ctx){if(1&rf){const _r23=core.Rb();core.Qb(0,\"button\",21),core.Xb(\"click\",(function(){core.sc(_r23);const row_r15=core.Zb().$implicit;return core.Zb(3).showAgreement(row_r15)})),core.Lb(1,\"icon\",22),core.Pb()}if(2&rf){const ctx_r18=core.Zb(4);core.gc(\"tooltip\",ctx_r18.i18n.general.view)}}const _c0=function(a0){return{\"cursor-pointer\":a0}};function ViewAgreementsHistoryComponent_ng_template_3_table_4_tr_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\",19),core.Qb(1,\"td\"),core.Dc(2),core.ac(3,\"dateTime\"),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.Pb(),core.Bc(6,ViewAgreementsHistoryComponent_ng_template_3_table_4_tr_10_td_6_Template,3,3,\"td\",14),core.Bc(7,ViewAgreementsHistoryComponent_ng_template_3_table_4_tr_10_td_7_Template,2,1,\"td\",15),core.Qb(8,\"td\",16),core.Bc(9,ViewAgreementsHistoryComponent_ng_template_3_table_4_tr_10_button_9_Template,2,1,\"button\",20),core.Pb(),core.Pb()),2&rf){const row_r15=ctx.$implicit,ctx_r14=core.Zb(3);core.gc(\"ngClass\",core.jc(8,_c0,row_r15.accepted)),core.xb(2),core.Ec(core.bc(3,6,row_r15.date)),core.xb(3),core.Ec(row_r15.agreement.name),core.xb(1),core.gc(\"ngIf\",ctx_r14.hasAccepted),core.xb(1),core.gc(\"ngIf\",ctx_r14.hasRemoteAddress),core.xb(2),core.gc(\"ngIf\",row_r15.accepted)}}function ViewAgreementsHistoryComponent_ng_template_3_table_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",13),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Bc(6,ViewAgreementsHistoryComponent_ng_template_3_table_4_th_6_Template,2,1,\"th\",14),core.Bc(7,ViewAgreementsHistoryComponent_ng_template_3_table_4_th_7_Template,2,1,\"th\",15),core.Lb(8,\"th\",16),core.Pb(),core.Qb(9,\"tbody\"),core.Bc(10,ViewAgreementsHistoryComponent_ng_template_3_table_4_tr_10_Template,10,10,\"tr\",17),core.Pb(),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.xb(3),core.Ec(ctx_r5.i18n.general.date),core.xb(2),core.Ec(ctx_r5.i18n.agreements.agreement),core.xb(1),core.gc(\"ngIf\",ctx_r5.hasAccepted),core.xb(1),core.gc(\"ngIf\",ctx_r5.hasRemoteAddress),core.xb(3),core.gc(\"ngForOf\",ctx_r5.data.history)}}function ViewAgreementsHistoryComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.Bc(1,ViewAgreementsHistoryComponent_ng_template_3_user_info_1_Template,1,1,\"user-info\",4),core.Pb(),core.Qb(2,\"results-layout\",5),core.Bc(3,ViewAgreementsHistoryComponent_ng_template_3_mobile_result_3_Template,9,5,\"mobile-result\",6),core.Bc(4,ViewAgreementsHistoryComponent_ng_template_3_table_4_Template,11,5,\"table\",7),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.agreements.title.history)(\"mobileHeading\",ctx_r2.i18n.agreements.mobileTitle.history)(\"mode\",ctx_r2.self?\"empty\":\"normal\"),core.xb(1),core.gc(\"ngIf\",!ctx_r2.self),core.xb(1),core.gc(\"results\",ctx_r2.data.history)(\"onClick\",ctx_r2.showAgreement)}}let view_agreements_history_component_ViewAgreementsHistoryComponent=(()=>{class ViewAgreementsHistoryComponent extends base_view_page_component.a{constructor(injector,agreementsService,userHelper,modal){super(injector),this.agreementsService=agreementsService,this.userHelper=userHelper,this.modal=modal}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.agreementsService.getUserAgreements({user:this.param,fields:[\"user\",\"history\"]}).subscribe(data=>{this.data=data}))}onDataInitialized(data){this.self=this.authHelper.isSelf(data.user);const history=data.history||[];this.hasAccepted=history.findIndex(l=>!l.accepted)>=0,this.hasRemoteAddress=history.findIndex(l=>l.remoteAddress)>=0}get operator(){return this.userHelper.isOperator(this.data.user)}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.AGREEMENTS)}get showAgreement(){return log=>{log.accepted&&this.modal.show(agreement_content_dialog_component.a,{ignoreBackdropClick:!0,class:\"modal-form modal-form-large\",initialState:{agreement:log.agreement,version:log.acceptedVersion}})}}}return ViewAgreementsHistoryComponent.ɵfac=function(t){return new(t||ViewAgreementsHistoryComponent)(core.Kb(core.r),core.Kb(agreements_service.a),core.Kb(user_helper_service.a),core.Kb(ngx_bootstrap_modal.b))},ViewAgreementsHistoryComponent.ɵcmp=core.Eb({type:ViewAgreementsHistoryComponent,selectors:[[\"view-agreements-history\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[3,\"heading\",\"mobileHeading\",\"mode\"],[3,\"user\",4,\"ngIf\"],[3,\"results\",\"onClick\"],[4,\"mobileResult\"],[\"class\",\"table table-hover\",4,\"resultTable\"],[3,\"user\"],[1,\"cell-text\",\"float-left\"],[1,\"cell-main\",\"float-right\"],[4,\"ngIf\",\"ngIfElse\"],[\"accepted\",\"\"],[1,\"table\",\"table-hover\"],[4,\"ngIf\"],[\"class\",\"align-center\",4,\"ngIf\"],[1,\"actions\"],[3,\"ngClass\",4,\"ngFor\",\"ngForOf\"],[1,\"align-center\"],[3,\"ngClass\"],[\"class\",\"btn btn-icon\",3,\"tooltip\",\"click\",4,\"ngIf\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"search\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewAgreementsHistoryComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,ViewAgreementsHistoryComponent_ng_template_3_Template,5,6,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,user_info_component.a,mobile_result_component.a,common.s,common.q,ngx_bootstrap_tooltip.b,icon_component.a],pipes:[common.b,date_pipe.a,date_time_pipe.a,boolean_pipe.a],encapsulation:2,changeDetection:0}),ViewAgreementsHistoryComponent})();var action=__webpack_require__(\"tAww\"),accept_agreements_component=__webpack_require__(\"T6RQ\"),agreement_link_component=__webpack_require__(\"U4Kh\");function ViewUserAgreementsComponent_page_content_2_user_info_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-info\",9),2&rf){const ctx_r3=core.Zb(2);core.gc(\"user\",ctx_r3.data.user)}}function ViewUserAgreementsComponent_page_content_2_accept_agreements_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"accept-agreements\",10),2&rf){const ctx_r4=core.Zb(2);core.gc(\"label\",ctx_r4.i18n.agreements.optional)(\"formControl\",ctx_r4.optionalControl)(\"agreements\",ctx_r4.allOptional)}}function ViewUserAgreementsComponent_page_content_2_ng_template_4_label_value_0_ng_container_1_Template(rf,ctx){1&rf&&core.Mb(0)}const view_user_agreements_component_c0=function(a0){return{$implicit:a0}};function ViewUserAgreementsComponent_page_content_2_ng_template_4_label_value_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",11),core.Bc(1,ViewUserAgreementsComponent_page_content_2_ng_template_4_label_value_0_ng_container_1_Template,1,0,\"ng-container\",12),core.Pb()),2&rf){const ctx_r10=core.Zb(3),_r1=core.qc(4);core.gc(\"label\",ctx_r10.i18n.agreements.optional),core.xb(1),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.jc(3,view_user_agreements_component_c0,ctx_r10.acceptedOptional))}}function ViewUserAgreementsComponent_page_content_2_ng_template_4_Template(rf,ctx){if(1&rf&&core.Bc(0,ViewUserAgreementsComponent_page_content_2_ng_template_4_label_value_0_Template,2,5,\"label-value\",7),2&rf){const ctx_r6=core.Zb(2);core.gc(\"ngIf\",(null==ctx_r6.acceptedOptional?null:ctx_r6.acceptedOptional.length)>0)}}function ViewUserAgreementsComponent_page_content_2_label_value_6_ng_container_1_Template(rf,ctx){1&rf&&core.Mb(0)}function ViewUserAgreementsComponent_page_content_2_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",11),core.Bc(1,ViewUserAgreementsComponent_page_content_2_label_value_6_ng_container_1_Template,1,0,\"ng-container\",12),core.Pb()),2&rf){const ctx_r7=core.Zb(2),_r1=core.qc(4);core.gc(\"label\",ctx_r7.i18n.agreements.required),core.xb(1),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.jc(3,view_user_agreements_component_c0,ctx_r7.acceptedRequired))}}function ViewUserAgreementsComponent_page_content_2_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"hr\"),core.Dc(2),core.Nb()),2&rf){const ctx_r8=core.Zb(2);core.xb(2),core.Fc(\" \",ctx_r8.i18n.agreements.noAccepted,\" \")}}function ViewUserAgreementsComponent_page_content_2_actions_8_Template(rf,ctx){if(1&rf){const _r14=core.Rb();core.Qb(0,\"actions\"),core.Qb(1,\"action-button\",13),core.Xb(\"action\",(function(){return core.sc(_r14),core.Zb(2).save()})),core.ac(2,\"async\"),core.Pb(),core.Pb()}if(2&rf){const ctx_r9=core.Zb(2);core.xb(1),core.gc(\"disabled\",core.bc(2,2,ctx_r9.requesting$))(\"label\",ctx_r9.i18n.general.save)}}function ViewUserAgreementsComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Bc(2,ViewUserAgreementsComponent_page_content_2_user_info_2_Template,1,1,\"user-info\",4),core.Bc(3,ViewUserAgreementsComponent_page_content_2_accept_agreements_3_Template,1,3,\"accept-agreements\",5),core.Bc(4,ViewUserAgreementsComponent_page_content_2_ng_template_4_Template,1,1,\"ng-template\",null,6,core.Cc),core.Bc(6,ViewUserAgreementsComponent_page_content_2_label_value_6_Template,2,5,\"label-value\",7),core.Bc(7,ViewUserAgreementsComponent_page_content_2_ng_container_7_Template,3,1,\"ng-container\",8),core.Bc(8,ViewUserAgreementsComponent_page_content_2_actions_8_Template,3,4,\"actions\",8),core.Pb()),2&rf){const _r5=core.qc(5),ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.agreements.title.accepted)(\"mobileHeading\",ctx_r0.i18n.agreements.mobileTitle.accepted)(\"headingActions\",core.bc(1,9,ctx_r0.headingActions$)),core.xb(2),core.gc(\"ngIf\",!ctx_r0.self),core.xb(1),core.gc(\"ngIf\",ctx_r0.optionalControl)(\"ngIfElse\",_r5),core.xb(3),core.gc(\"ngIf\",(null==ctx_r0.acceptedRequired?null:ctx_r0.acceptedRequired.length)>0),core.xb(1),core.gc(\"ngIf\",ctx_r0.noAgreements),core.xb(1),core.gc(\"ngIf\",ctx_r0.optionalControl)}}const _c1=function(a0){return{\"mt-2\":a0}};function ViewUserAgreementsComponent_ng_template_3_div_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",15),core.Lb(1,\"agreement-link\",16),core.Pb()),2&rf){const agreement_r17=ctx.$implicit,first_r18=ctx.first,ctx_r16=core.Zb(2);core.gc(\"ngClass\",core.jc(3,_c1,!first_r18)),core.xb(1),core.gc(\"agreement\",agreement_r17)(\"version\",null==ctx_r16.data.accepted[agreement_r17.id]?null:ctx_r16.data.accepted[agreement_r17.id].acceptedVersion)}}function ViewUserAgreementsComponent_ng_template_3_Template(rf,ctx){1&rf&&core.Bc(0,ViewUserAgreementsComponent_ng_template_3_div_0_Template,2,5,\"div\",14),2&rf&&core.gc(\"ngForOf\",ctx.$implicit)}let view_user_agreements_component_ViewUserAgreementsComponent=(()=>{class ViewUserAgreementsComponent extends base_view_page_component.a{constructor(injector,agreementsService){super(injector),this.agreementsService=agreementsService}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.agreementsService.getUserAgreements({user:this.param,fields:[\"-history\"]}).subscribe(data=>{this.data=data}))}onDataInitialized(data){this.self=this.authHelper.isSelf(data.user);const acceptedIds=Object.keys(data.accepted||{}),accepted=(data.agreements||[]).filter(a=>acceptedIds.includes(a.id));this.allOptional=(data.agreements||[]).filter(a=>!a.required),this.acceptedOptional=accepted.filter(a=>!a.required),this.acceptedRequired=accepted.filter(a=>a.required),data.canEdit?this.optionalControl=this.formBuilder.control(this.acceptedOptional.map(a=>a.id)):this.noAgreements=0===accepted.length,this.noAgreements||(this.headingActions=[new action.c(\"history\",this.i18n.general.viewHistory,()=>this.router.navigate([\"users\",this.param,\"agreements\",\"history\"]),!0)])}save(){Object(helper.F)(this.optionalControl)&&this.addSub(this.agreementsService.acceptOptionalAgreements({agreements:this.optionalControl.value}).subscribe(()=>{this.notification.snackBar(this.i18n.agreements.optionalSaved),this.reload()}))}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.AGREEMENTS)}}return ViewUserAgreementsComponent.ɵfac=function(t){return new(t||ViewUserAgreementsComponent)(core.Kb(core.r),core.Kb(agreements_service.a))},ViewUserAgreementsComponent.ɵcmp=core.Eb({type:ViewUserAgreementsComponent,selectors:[[\"view-user-agreements\"]],features:[core.ub],decls:5,vars:4,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngIf\"],[\"agreementLinks\",\"\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"user\",4,\"ngIf\"],[3,\"label\",\"formControl\",\"agreements\",4,\"ngIf\",\"ngIfElse\"],[\"optionalNotEditable\",\"\"],[3,\"label\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"user\"],[3,\"label\",\"formControl\",\"agreements\"],[3,\"label\"],[4,\"ngTemplateOutlet\",\"ngTemplateOutletContext\"],[3,\"disabled\",\"label\",\"action\"],[3,\"ngClass\",4,\"ngFor\",\"ngForOf\"],[3,\"ngClass\"],[\"ignoreRequired\",\"\",3,\"agreement\",\"version\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewUserAgreementsComponent_page_content_2_Template,9,11,\"page-content\",1),core.Pb(),core.Bc(3,ViewUserAgreementsComponent_ng_template_3_Template,1,1,\"ng-template\",null,2,core.Cc)),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,accept_agreements_component.a,fesm2015_forms.v,fesm2015_forms.k,label_value_component.a,common.A,actions_component.a,action_button_component.a,common.s,common.q,agreement_link_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),ViewUserAgreementsComponent})();var alerts_service=__webpack_require__(\"hQUc\"),base_search_page_component=__webpack_require__(\"v4xg\"),date_field_component=__webpack_require__(\"6g1M\"),single_selection_field_component=__webpack_require__(\"WYBn\"),field_option_directive=__webpack_require__(\"chz4\"),user_field_component=__webpack_require__(\"JbOn\"),avatar_component=__webpack_require__(\"sifq\");function SearchUserAlertsComponent_mobile_result_28_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",25),core.Qb(1,\"div\",26),core.Dc(2),core.Pb(),core.Qb(3,\"div\",27),core.Dc(4),core.ac(5,\"dateTime\"),core.Pb(),core.Qb(6,\"div\",28),core.Dc(7),core.Pb(),core.Pb()),2&rf){const row_r2=ctx.$implicit;core.gc(\"avatarImage\",null==row_r2.user?null:row_r2.user.image),core.xb(1),core.gc(\"tooltip\",row_r2.user.display),core.xb(1),core.Fc(\" \",row_r2.user.display,\"\"),core.xb(2),core.Fc(\" \",core.bc(5,5,row_r2.date),\" \"),core.xb(3),core.Ec(row_r2.text)}}const search_user_alerts_component_c0=function(a0,a1){return{\"pb-0\":a0,\"border-0\":a1}};function SearchUserAlertsComponent_table_29_ng_container_10_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"tr\"),core.Qb(2,\"td\",32),core.ac(3,\"async\"),core.ac(4,\"async\"),core.Lb(5,\"avatar\",33),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.Pb(),core.Qb(8,\"td\"),core.Dc(9),core.Pb(),core.Qb(10,\"td\"),core.Dc(11),core.ac(12,\"dateTime\"),core.Pb(),core.Pb(),core.Nb()),2&rf){const row_r4=ctx.$implicit,ctx_r3=core.Zb(2);core.xb(2),core.gc(\"ngClass\",core.kc(12,search_user_alerts_component_c0,core.bc(3,6,ctx_r3.layout.xxs$),core.bc(4,8,ctx_r3.layout.xxs$))),core.xb(3),core.gc(\"image\",null==row_r4.user?null:row_r4.user.image)(\"tooltip\",null==row_r4.user?null:row_r4.user.display),core.xb(2),core.Ec(row_r4.user.display),core.xb(2),core.Ec(row_r4.text),core.xb(2),core.Ec(core.bc(12,10,row_r4.date))}}function SearchUserAlertsComponent_table_29_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",29),core.Qb(1,\"thead\"),core.Lb(2,\"th\",30),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Pb(),core.Qb(9,\"tbody\"),core.Bc(10,SearchUserAlertsComponent_table_29_ng_container_10_Template,13,15,\"ng-container\",31),core.ac(11,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r1=core.Zb();var tmp_3_0;core.xb(4),core.Ec(ctx_r1.i18n.general.user),core.xb(2),core.Ec(ctx_r1.i18n.userAlert.text),core.xb(2),core.Ec(ctx_r1.i18n.general.date),core.xb(2),core.gc(\"ngForOf\",null==(tmp_3_0=core.bc(11,4,ctx_r1.results$))?null:tmp_3_0.results)}}let search_user_alerts_component_SearchUserAlertsComponent=(()=>{class SearchUserAlertsComponent extends base_search_page_component.a{constructor(injector,alertsService){super(injector),this.alertsService=alertsService}ngOnInit(){super.ngOnInit(),this.data={}}getFormControlNames(){return[\"types\",\"user\",\"beginDate\",\"endDate\"]}toSearchParams(value){return{datePeriod:api_helper.a.dateRangeFilter(value.beginDate,value.endDate),page:value.page,pageSize:value.pageSize,types:value.types,user:value.user}}doSearch(value){return this.alertsService.searchUserAlerts$Response(value)}resolveMenu(){return menu.b.USER_ALERTS}}return SearchUserAlertsComponent.ɵfac=function(t){return new(t||SearchUserAlertsComponent)(core.Kb(core.r),core.Kb(alerts_service.a))},SearchUserAlertsComponent.ɵcmp=core.Eb({type:SearchUserAlertsComponent,selectors:[[\"search-user-alerts\"]],features:[core.ub],decls:30,vars:28,consts:[[3,\"ready\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"beginDate\",\"minDate\",\"past5\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"endDate\",\"minDate\",\"past5\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"types\",3,\"label\",\"emptyOption\"],[\"value\",\"custom\",3,\"text\"],[\"value\",\"givenVeryBadRefs\",3,\"text\"],[\"value\",\"insufficientBalanceForInitialCredit\",3,\"text\"],[\"value\",\"maxDeviceActivationAttemptsReached\",3,\"text\"],[\"value\",\"maxDeviceConfirmationCheckAttemptsReached\",3,\"text\"],[\"value\",\"maxTokenActivationAttemptsReached\",3,\"text\"],[\"value\",\"maxUserLocalizationAttemptsReached\",3,\"text\"],[\"value\",\"maxVoucherRedeemAttemptsReached\",3,\"text\"],[\"value\",\"moveUserAutomaticallyFailed\",3,\"text\"],[\"value\",\"passwordDisabledByTries\",3,\"text\"],[\"value\",\"passwordTemporarilyBlocked\",3,\"text\"],[\"value\",\"receivedVeryBadRefs\",3,\"text\"],[\"value\",\"scheduledPaymentFailed\",3,\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[\"resultType\",\"list\",3,\"results\",\"rendering$\",\"update\"],[\"avatarIcon\",\"user\",3,\"avatarImage\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"avatarIcon\",\"user\",3,\"avatarImage\"],[1,\"cell-main\",3,\"tooltip\"],[1,\"cell-cell-date\"],[1,\"cell-text\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"avatar\"],[4,\"ngFor\",\"ngForOf\"],[1,\"avatar\",3,\"ngClass\"],[\"icon\",\"user\",3,\"image\",\"tooltip\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Qb(2,\"page-content\",1),core.Qb(3,\"form\",2),core.Qb(4,\"div\",3),core.Qb(5,\"div\",4),core.Lb(6,\"date-field\",5),core.Pb(),core.Qb(7,\"div\",4),core.Lb(8,\"date-field\",6),core.Pb(),core.Qb(9,\"div\",4),core.Qb(10,\"single-selection-field\",7),core.Lb(11,\"field-option\",8),core.Lb(12,\"field-option\",9),core.Lb(13,\"field-option\",10),core.Lb(14,\"field-option\",11),core.Lb(15,\"field-option\",12),core.Lb(16,\"field-option\",13),core.Lb(17,\"field-option\",14),core.Lb(18,\"field-option\",15),core.Lb(19,\"field-option\",16),core.Lb(20,\"field-option\",17),core.Lb(21,\"field-option\",18),core.Lb(22,\"field-option\",19),core.Lb(23,\"field-option\",20),core.Pb(),core.Pb(),core.Qb(24,\"div\",4),core.Lb(25,\"user-field\",21),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Qb(26,\"results-layout\",22),core.Xb(\"update\",(function($event){return ctx.update($event)})),core.ac(27,\"async\"),core.Bc(28,SearchUserAlertsComponent_mobile_result_28_Template,8,7,\"mobile-result\",23),core.Bc(29,SearchUserAlertsComponent_table_29_Template,12,6,\"table\",24),core.Pb(),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,24,ctx.data$)),core.xb(2),core.gc(\"heading\",ctx.i18n.userAlert.title)(\"mobileHeading\",ctx.i18n.userAlert.mobileTitle),core.xb(1),core.gc(\"formGroup\",ctx.form),core.xb(3),core.gc(\"label\",ctx.i18n.general.beginDate),core.xb(2),core.gc(\"label\",ctx.i18n.general.endDate),core.xb(2),core.gc(\"label\",ctx.i18n.userAlert.type.title)(\"emptyOption\",ctx.i18n.general.notApplied),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.custom),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.givenVeryBadRefs),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.insufficientBalanceForInitialCredit),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.maxDeviceActivationAttemptsReached),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.maxDeviceConfirmationCheckAttemptsReached),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.maxTokenActivationAttemptsReached),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.maxUserLocalizationAttemptsReached),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.maxVoucherRedeemAttemptsReached),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.moveUserAutomaticallyFailed),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.passwordDisabledByTries),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.passwordTemporarilyBlocked),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.receivedVeryBadRefs),core.xb(1),core.gc(\"text\",ctx.i18n.userAlert.type.receivedVeryBadRefs),core.xb(2),core.gc(\"label\",ctx.i18n.general.user),core.xb(1),core.gc(\"results\",core.bc(27,26,ctx.results$))(\"rendering$\",ctx.rendering$))},directives:[page_layout_component.a,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,date_field_component.a,fesm2015_forms.v,fesm2015_forms.l,single_selection_field_component.a,field_option_directive.a,user_field_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a,ngx_bootstrap_tooltip.b,common.s,common.q,avatar_component.a],pipes:[common.b,date_time_pipe.a],encapsulation:2,changeDetection:0}),SearchUserAlertsComponent})();var models=__webpack_require__(\"XDzf\"),brokering_service=__webpack_require__(\"Dhej\");function BrokerFormComponent_ng_container_2_boolean_field_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",7),2&rf){const ctx_r1=core.Zb(2);core.gc(\"label\",ctx_r1.i18n.brokers.mainBroker)}}function BrokerFormComponent_ng_container_2_Template(rf,ctx){if(1&rf){const _r3=core.Rb();core.Ob(0),core.Qb(1,\"page-content\",2),core.Qb(2,\"form\",3),core.Lb(3,\"user-field\",4),core.Bc(4,BrokerFormComponent_ng_container_2_boolean_field_4_Template,1,1,\"boolean-field\",5),core.Pb(),core.Qb(5,\"actions\"),core.Qb(6,\"action-button\",6),core.Xb(\"action\",(function(){return core.sc(_r3),core.Zb().save()})),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.i18n.brokers.title.new)(\"mobileHeading\",ctx_r0.i18n.brokers.mobileTitle.new),core.xb(1),core.gc(\"formGroup\",ctx_r0.form),core.xb(1),core.gc(\"filters\",ctx_r0.userQuery)(\"allowContacts\",!1)(\"label\",ctx_r0.i18n.brokers.broker),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.brokers),core.xb(2),core.gc(\"disabled\",core.bc(7,9,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.save)}}let broker_form_component_BrokerFormComponent=(()=>{class BrokerFormComponent extends base_page_component.a{constructor(injector,brokeringService){super(injector),this.brokeringService=brokeringService,this.form=this.formBuilder.group({})}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.brokeringService.getBrokerDataForAdd({user:this.user}).subscribe(data=>{this.data=data}))}onDataInitialized(data){this.userQuery={roles:[models.kb.BROKER],usersToExclude:data.brokers.map(b=>b.id),groups:data.brokerGroups.map(g=>g.id)},data.brokers&&this.form.setControl(\"mainBroker\",this.formBuilder.control(!1)),this.form.setControl(\"broker\",this.formBuilder.control(null,fesm2015_forms.G.required))}save(){if(Object(helper.F)(this.form),!this.form.valid)return;const value=this.form.value;this.addSub(this.brokeringService.addBroker({broker:value.broker,user:this.user,main:value.mainBroker}).subscribe(()=>{this.notification.snackBar(this.i18n.brokers.brokerAdded),this.router.navigate([\"/users\",this.user,\"brokers\"])}))}resolveMenu(){return this.menu.searchUsersMenu()}}return BrokerFormComponent.ɵfac=function(t){return new(t||BrokerFormComponent)(core.Kb(core.r),core.Kb(brokering_service.a))},BrokerFormComponent.ɵcmp=core.Eb({type:BrokerFormComponent,selectors:[[\"broker-form\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[3,\"heading\",\"mobileHeading\"],[3,\"formGroup\"],[\"formControlName\",\"broker\",3,\"filters\",\"allowContacts\",\"label\"],[\"formControlName\",\"mainBroker\",3,\"label\",4,\"ngIf\"],[3,\"disabled\",\"label\",\"action\"],[\"formControlName\",\"mainBroker\",3,\"label\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,BrokerFormComponent_ng_container_2_Template,8,11,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,user_field_component.a,fesm2015_forms.v,fesm2015_forms.l,actions_component.a,action_button_component.a,boolean_field_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),BrokerFormComponent})();function ListUserBrokersComponent_ng_container_2_user_info_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-info\",7),2&rf){const ctx_r1=core.Zb(2);core.gc(\"user\",ctx_r1.data.user)}}function ListUserBrokersComponent_ng_container_2_mobile_result_5_icon_6_Template(rf,ctx){1&rf&&core.Lb(0,\"icon\",17)}function ListUserBrokersComponent_ng_container_2_mobile_result_5_a_7_Template(rf,ctx){if(1&rf){const _r9=core.Rb();core.Qb(0,\"a\",18),core.Xb(\"click\",(function($event){core.sc(_r9);const row_r4=core.Zb().$implicit;return core.Zb(2).setMain(row_r4),$event.stopPropagation(),$event.preventDefault()})),core.Dc(1),core.Pb()}if(2&rf){const ctx_r6=core.Zb(3);core.xb(1),core.Fc(\"\",ctx_r6.i18n.brokers.setMain,\" \")}}function ListUserBrokersComponent_ng_container_2_mobile_result_5_Template(rf,ctx){if(1&rf){const _r11=core.Rb();core.Qb(0,\"mobile-result\",8),core.Qb(1,\"div\",9),core.Qb(2,\"div\"),core.Qb(3,\"div\",10),core.Dc(4),core.Pb(),core.Qb(5,\"div\",11),core.Bc(6,ListUserBrokersComponent_ng_container_2_mobile_result_5_icon_6_Template,1,0,\"icon\",12),core.Bc(7,ListUserBrokersComponent_ng_container_2_mobile_result_5_a_7_Template,2,1,\"a\",13),core.Pb(),core.Pb(),core.Qb(8,\"div\",14),core.Qb(9,\"button\",15),core.Xb(\"click\",(function($event){core.sc(_r11);const row_r4=ctx.$implicit;return core.Zb(2).remove(row_r4),$event.stopPropagation(),$event.preventDefault()})),core.Lb(10,\"icon\",16),core.Pb(),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const row_r4=ctx.$implicit;core.gc(\"avatarImage\",null==row_r4.broker?null:row_r4.broker.image),core.xb(4),core.Fc(\" \",row_r4.broker.display,\" \"),core.xb(2),core.gc(\"ngIf\",row_r4.main),core.xb(1),core.gc(\"ngIf\",!row_r4.main)}}function ListUserBrokersComponent_ng_container_2_table_6_ng_container_9_icon_10_Template(rf,ctx){1&rf&&core.Lb(0,\"icon\",17)}function ListUserBrokersComponent_ng_container_2_table_6_ng_container_9_a_11_Template(rf,ctx){if(1&rf){const _r18=core.Rb();core.Qb(0,\"a\",18),core.Xb(\"click\",(function($event){core.sc(_r18);const row_r13=core.Zb().$implicit;return core.Zb(3).setMain(row_r13),$event.stopPropagation(),$event.preventDefault()})),core.Dc(1),core.Pb()}if(2&rf){const ctx_r15=core.Zb(4);core.xb(1),core.Fc(\"\",ctx_r15.i18n.brokers.setMain,\" \")}}const list_user_brokers_component_c0=function(a0,a1){return{\"pb-0\":a0,\"border-0\":a1}};function ListUserBrokersComponent_ng_container_2_table_6_ng_container_9_Template(rf,ctx){if(1&rf){const _r20=core.Rb();core.Ob(0),core.Qb(1,\"tr\",24),core.Xb(\"click\",(function(){core.sc(_r20);const row_r13=ctx.$implicit,ctx_r19=core.Zb(3);return ctx_r19.router.navigate(ctx_r19.path(row_r13))})),core.Qb(2,\"td\",25),core.ac(3,\"async\"),core.ac(4,\"async\"),core.Lb(5,\"avatar\",26),core.Pb(),core.Qb(6,\"td\"),core.Qb(7,\"a\",27),core.Dc(8),core.Pb(),core.Pb(),core.Qb(9,\"td\",28),core.Bc(10,ListUserBrokersComponent_ng_container_2_table_6_ng_container_9_icon_10_Template,1,0,\"icon\",12),core.Bc(11,ListUserBrokersComponent_ng_container_2_table_6_ng_container_9_a_11_Template,2,1,\"a\",13),core.Pb(),core.Qb(12,\"td\",29),core.Qb(13,\"button\",30),core.Xb(\"click\",(function($event){core.sc(_r20);const row_r13=ctx.$implicit;return core.Zb(3).remove(row_r13),$event.stopPropagation()})),core.Lb(14,\"icon\",16),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r13=ctx.$implicit,ctx_r12=core.Zb(3);core.xb(2),core.gc(\"ngClass\",core.kc(12,list_user_brokers_component_c0,core.bc(3,8,ctx_r12.layout.xxs$),core.bc(4,10,ctx_r12.layout.xxs$))),core.xb(3),core.gc(\"image\",null==row_r13.broker?null:row_r13.broker.image)(\"tooltip\",null==row_r13.broker?null:row_r13.broker.display),core.xb(2),core.gc(\"routerLink\",ctx_r12.path(row_r13)),core.xb(1),core.Fc(\" \",row_r13.broker.shortDisplay,\" \"),core.xb(2),core.gc(\"ngIf\",row_r13.main),core.xb(1),core.gc(\"ngIf\",!row_r13.main),core.xb(2),core.gc(\"tooltip\",ctx_r12.i18n.general.remove)}}function ListUserBrokersComponent_ng_container_2_table_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",19),core.Qb(1,\"thead\"),core.Lb(2,\"th\",20),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\",21),core.Dc(6),core.Pb(),core.Lb(7,\"th\",22),core.Pb(),core.Qb(8,\"tbody\"),core.Bc(9,ListUserBrokersComponent_ng_container_2_table_6_ng_container_9_Template,15,15,\"ng-container\",23),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(4),core.Ec(ctx_r3.i18n.general.user),core.xb(2),core.Fc(\"\",ctx_r3.i18n.brokers.mainBroker,\" \"),core.xb(3),core.gc(\"ngForOf\",ctx_r3.data.brokers)}}function ListUserBrokersComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Bc(3,ListUserBrokersComponent_ng_container_2_user_info_3_Template,1,1,\"user-info\",3),core.Pb(),core.Qb(4,\"results-layout\",4),core.Bc(5,ListUserBrokersComponent_ng_container_2_mobile_result_5_Template,11,4,\"mobile-result\",5),core.Bc(6,ListUserBrokersComponent_ng_container_2_table_6_Template,10,3,\"table\",6),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.i18n.brokers.title.list)(\"mobileHeading\",ctx_r0.i18n.brokers.mobileTitle.list)(\"headingActions\",core.bc(2,7,ctx_r0.headingActions$))(\"mode\",ctx_r0.self?\"empty\":\"normal\"),core.xb(2),core.gc(\"ngIf\",!ctx_r0.self),core.xb(1),core.gc(\"results\",ctx_r0.data.brokers)(\"toLink\",ctx_r0.toLink)}}let list_user_brokers_component_ListUserBrokersComponent=(()=>{class ListUserBrokersComponent extends base_page_component.a{constructor(injector,brokeringService){super(injector),this.brokeringService=brokeringService}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.brokeringService.getUserBrokersData({user:this.param}).subscribe(data=>{this.data=data}))}path(brokering){return[\"/users\",brokering.broker.id,\"profile\"]}onDataInitialized(data){this.self=this.authHelper.isSelf(data.user),this.brokers=data.brokers,this.headingActions=[],data.editable&&this.headingActions.push(new action.c(\"registration\",this.i18n.general.addNew,()=>this.router.navigate([\"/users\",this.param,\"brokers\",\"new\"]),!0)),data.history&&this.headingActions.push(new action.c(\"history\",this.i18n.general.viewHistory,()=>this.router.navigate([\"/users\",this.param,\"brokers\",\"history\"]),!0))}get toLink(){return brokering=>this.path(brokering)}setMain(brokering){this.addSub(this.brokeringService.setMainBroker({broker:brokering.broker.id,user:this.param}).subscribe(()=>{this.reload()}))}remove(brokering){this.notification.confirm({message:this.i18n.general.removeConfirm(brokering.broker.display),callback:()=>this.doRemove(brokering)})}doRemove(brokering){this.addSub(this.brokeringService.removeBroker({broker:brokering.broker.id,user:this.param}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(brokering.broker.display)),this.reload()}))}resolveMenu(){return this.menu.searchUsersMenu()}}return ListUserBrokersComponent.ɵfac=function(t){return new(t||ListUserBrokersComponent)(core.Kb(core.r),core.Kb(brokering_service.a))},ListUserBrokersComponent.ɵcmp=core.Eb({type:ListUserBrokersComponent,selectors:[[\"list-user-brokers\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[3,\"heading\",\"mobileHeading\",\"headingActions\",\"mode\"],[3,\"user\",4,\"ngIf\"],[3,\"results\",\"toLink\"],[\"avatarIcon\",\"user\",3,\"avatarImage\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[3,\"user\"],[\"avatarIcon\",\"user\",3,\"avatarImage\"],[1,\"d-flex\"],[1,\"cell-main\"],[1,\"cell-text\"],[\"class\",\"d-inline-block\",\"icon\",\"done_outline\",4,\"ngIf\"],[\"class\",\"decorated\",3,\"click\",4,\"ngIf\"],[1,\"ml-auto\"],[1,\"btn\",\"btn-icon\",3,\"click\"],[\"icon\",\"clear\"],[\"icon\",\"done_outline\",1,\"d-inline-block\"],[1,\"decorated\",3,\"click\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"avatar\"],[\"width\",\"20%\",1,\"text-center\"],[1,\"actions\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[1,\"avatar\",3,\"ngClass\"],[\"icon\",\"user\",3,\"image\",\"tooltip\"],[3,\"routerLink\"],[1,\"text-center\"],[1,\"actions\",\"actions-multiple\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ListUserBrokersComponent_ng_container_2_Template,7,9,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,user_info_component.a,mobile_result_component.a,icon_component.a,common.s,common.q,avatar_component.a,ngx_bootstrap_tooltip.b,router.h],pipes:[common.b],encapsulation:2,changeDetection:0}),ListUserBrokersComponent})();var brokering_action_enum=__webpack_require__(\"zisa\");function ViewBrokerHistoryComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function ViewBrokerHistoryComponent_ng_template_3_mobile_result_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",8),core.Qb(1,\"div\",9),core.Dc(2),core.Pb(),core.Qb(3,\"div\",10),core.Dc(4),core.ac(5,\"date\"),core.Pb(),core.Qb(6,\"div\",11),core.Dc(7),core.Pb(),core.Qb(8,\"div\",11),core.Dc(9),core.Pb(),core.Pb()),2&rf){const row_r5=ctx.$implicit,ctx_r3=core.Zb(2);core.gc(\"avatarImage\",null==row_r5.broker?null:row_r5.broker.image),core.xb(2),core.Fc(\" \",row_r5.broker.display,\" \"),core.xb(2),core.Fc(\" \",core.bc(5,7,row_r5.date),\" \"),core.xb(3),core.Gc(\" \",ctx_r3.i18n.general.action,\": \",ctx_r3.showActionLabel(row_r5),\" \"),core.xb(2),core.Gc(\" \",ctx_r3.i18n.general.performedBy,\": \",row_r5.by?row_r5.by.shortDisplay:ctx_r3.i18n.brokers.administration,\" \")}}const view_broker_history_component_c0=function(a0,a1){return{\"pb-0\":a0,\"border-0\":a1}};function ViewBrokerHistoryComponent_ng_template_3_table_4_tr_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\"),core.Qb(1,\"td\",15),core.ac(2,\"async\"),core.ac(3,\"async\"),core.Lb(4,\"avatar\",16),core.Pb(),core.Qb(5,\"td\"),core.Dc(6),core.Pb(),core.Qb(7,\"td\"),core.Dc(8),core.ac(9,\"date\"),core.Pb(),core.Qb(10,\"td\"),core.Dc(11),core.Pb(),core.Qb(12,\"td\"),core.Dc(13),core.Pb(),core.Pb()),2&rf){const row_r7=ctx.$implicit,ctx_r6=core.Zb(3);core.xb(1),core.gc(\"ngClass\",core.kc(13,view_broker_history_component_c0,core.bc(2,7,ctx_r6.layout.xxs$),core.bc(3,9,ctx_r6.layout.xxs$))),core.xb(3),core.gc(\"image\",null==row_r7.broker?null:row_r7.broker.image)(\"tooltip\",null==row_r7.broker?null:row_r7.broker.display),core.xb(2),core.Ec(row_r7.broker.shortDisplay),core.xb(2),core.Ec(core.bc(9,11,row_r7.date)),core.xb(3),core.Ec(ctx_r6.showActionLabel(row_r7)),core.xb(2),core.Fc(\" \",row_r7.by?row_r7.by.shortDisplay:ctx_r6.i18n.brokers.administration,\" \")}}function ViewBrokerHistoryComponent_ng_template_3_table_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",12),core.Qb(1,\"thead\"),core.Lb(2,\"th\",13),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Qb(9,\"th\"),core.Dc(10),core.Pb(),core.Pb(),core.Qb(11,\"tbody\"),core.Bc(12,ViewBrokerHistoryComponent_ng_template_3_table_4_tr_12_Template,14,16,\"tr\",14),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(4),core.Ec(ctx_r4.i18n.brokers.broker),core.xb(2),core.Ec(ctx_r4.i18n.general.date),core.xb(2),core.Ec(ctx_r4.i18n.general.action),core.xb(2),core.Ec(ctx_r4.i18n.general.performedBy),core.xb(2),core.gc(\"ngForOf\",ctx_r4.data.history)}}function ViewBrokerHistoryComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.Lb(1,\"user-info\",4),core.Pb(),core.Qb(2,\"results-layout\",5),core.Bc(3,ViewBrokerHistoryComponent_ng_template_3_mobile_result_3_Template,10,9,\"mobile-result\",6),core.Bc(4,ViewBrokerHistoryComponent_ng_template_3_table_4_Template,13,5,\"table\",7),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.brokers.title.history)(\"mobileHeading\",ctx_r2.i18n.brokers.mobileTitle.history),core.xb(1),core.gc(\"user\",ctx_r2.data.user),core.xb(1),core.gc(\"results\",ctx_r2.data.history)(\"onClick\",ctx_r2.onClick)}}let view_broker_history_component_ViewBrokerHistoryComponent=(()=>{class ViewBrokerHistoryComponent extends base_view_page_component.a{constructor(injector,brokeringService){super(injector),this.brokeringService=brokeringService}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.brokeringService.getUserBrokersData({user:this.param,fields:[\"user\",\"history\"]}).subscribe(data=>{this.data=data}))}showActionLabel(row){switch(row.action){case brokering_action_enum.a.ADD:return this.i18n.brokers.action.add;case brokering_action_enum.a.REMOVE:return this.i18n.brokers.action.remove;case brokering_action_enum.a.SET_MAIN:return this.i18n.brokers.action.setMain}}get onClick(){return row=>null!=row}resolveMenu(data){return this.menu.searchUsersMenu(data.user)}}return ViewBrokerHistoryComponent.ɵfac=function(t){return new(t||ViewBrokerHistoryComponent)(core.Kb(core.r),core.Kb(brokering_service.a))},ViewBrokerHistoryComponent.ɵcmp=core.Eb({type:ViewBrokerHistoryComponent,selectors:[[\"view-broker-history\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[3,\"heading\",\"mobileHeading\"],[3,\"user\"],[3,\"results\",\"onClick\"],[\"avatarIcon\",\"user\",3,\"avatarImage\",4,\"mobileResult\"],[\"class\",\"table table-hover\",4,\"resultTable\"],[\"avatarIcon\",\"user\",3,\"avatarImage\"],[1,\"cell-main\"],[1,\"cell-date\"],[1,\"cell-text\"],[1,\"table\",\"table-hover\"],[1,\"avatar\"],[4,\"ngFor\",\"ngForOf\"],[1,\"avatar\",3,\"ngClass\"],[\"icon\",\"user\",3,\"image\",\"tooltip\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewBrokerHistoryComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,ViewBrokerHistoryComponent_ng_template_3_Template,5,5,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a,common.s,common.q,avatar_component.a,ngx_bootstrap_tooltip.b],pipes:[common.b,date_pipe.a],encapsulation:2,changeDetection:0}),ViewBrokerHistoryComponent})();var sessions_service=__webpack_require__(\"5Qz4\"),multi_selection_field_component=__webpack_require__(\"4APx\");function SearchConnectedComponent_ng_container_2_div_4_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",13),2&rf){const channel_r6=ctx.$implicit;core.gc(\"value\",channel_r6.id)(\"internalName\",channel_r6.internalName)(\"id\",channel_r6.id)(\"text\",channel_r6.name)}}function SearchConnectedComponent_ng_container_2_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",6),core.Qb(1,\"multi-selection-field\",11),core.Bc(2,SearchConnectedComponent_ng_container_2_div_4_field_option_2_Template,1,4,\"field-option\",12),core.Pb(),core.Pb()),2&rf){const ctx_r1=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r1.i18n.connectedUser.channel),core.xb(1),core.gc(\"ngForOf\",ctx_r1.data.channels)}}function SearchConnectedComponent_ng_container_2_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",16),2&rf){const role_r8=ctx.$implicit,ctx_r7=core.Zb(3);core.gc(\"value\",role_r8)(\"text\",ctx_r7.showConnectedLabel(role_r8))}}function SearchConnectedComponent_ng_container_2_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",6),core.Qb(1,\"multi-selection-field\",14),core.Bc(2,SearchConnectedComponent_ng_container_2_div_5_field_option_2_Template,1,2,\"field-option\",15),core.Pb(),core.Pb()),2&rf){const ctx_r2=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r2.i18n.connectedUser.showConnected),core.xb(1),core.gc(\"ngForOf\",ctx_r2.data.roles)}}function SearchConnectedComponent_ng_container_2_mobile_result_10_button_11_Template(rf,ctx){if(1&rf){const _r13=core.Rb();core.Qb(0,\"button\",24),core.Xb(\"click\",(function($event){core.sc(_r13);const row_r9=core.Zb().$implicit;return core.Zb(2).disconnect(row_r9),$event.stopPropagation(),$event.preventDefault()})),core.Lb(1,\"icon\",25),core.Pb()}}function SearchConnectedComponent_ng_container_2_mobile_result_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",17),core.Qb(1,\"div\",18),core.Qb(2,\"div\"),core.Qb(3,\"div\",19),core.Dc(4),core.Pb(),core.Qb(5,\"div\",20),core.Dc(6),core.ac(7,\"dateTime\"),core.Pb(),core.Qb(8,\"div\",21),core.Dc(9),core.Pb(),core.Pb(),core.Qb(10,\"div\",22),core.Bc(11,SearchConnectedComponent_ng_container_2_mobile_result_10_button_11_Template,2,0,\"button\",23),core.Pb(),core.Pb(),core.Pb()),2&rf){const row_r9=ctx.$implicit,ctx_r3=core.Zb(2);core.gc(\"avatarImage\",null==row_r9.user?null:row_r9.user.image),core.xb(4),core.Fc(\" \",row_r9.user.shortDisplay,\" \"),core.xb(2),core.Fc(\" \",core.bc(7,5,row_r9.creationDate),\" \"),core.xb(3),core.Fc(\" \",row_r9.channel.name,\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r3.canDisconnect(row_r9))}}function SearchConnectedComponent_ng_container_2_table_11_ng_container_13_button_16_Template(rf,ctx){if(1&rf){const _r19=core.Rb();core.Qb(0,\"button\",33),core.Xb(\"click\",(function($event){core.sc(_r19);const row_r15=core.Zb().$implicit;return core.Zb(3).disconnect(row_r15),$event.stopPropagation()})),core.Lb(1,\"icon\",25),core.Pb()}if(2&rf){const ctx_r16=core.Zb(4);core.gc(\"tooltip\",ctx_r16.i18n.connectedUser.disconnect)}}const search_connected_component_c0=function(a0,a1){return{\"pb-0\":a0,\"border-0\":a1}};function SearchConnectedComponent_ng_container_2_table_11_ng_container_13_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"tr\"),core.Qb(2,\"td\",30),core.ac(3,\"async\"),core.ac(4,\"async\"),core.Lb(5,\"avatar\",31),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.Pb(),core.Qb(8,\"td\"),core.Dc(9),core.Pb(),core.Qb(10,\"td\"),core.Dc(11),core.ac(12,\"dateTime\"),core.Pb(),core.Qb(13,\"td\"),core.Dc(14),core.Pb(),core.Qb(15,\"td\",28),core.Bc(16,SearchConnectedComponent_ng_container_2_table_11_ng_container_13_button_16_Template,2,1,\"button\",32),core.Pb(),core.Pb(),core.Nb()),2&rf){const row_r15=ctx.$implicit,ctx_r14=core.Zb(3);core.xb(2),core.gc(\"ngClass\",core.kc(14,search_connected_component_c0,core.bc(3,8,ctx_r14.layout.xxs$),core.bc(4,10,ctx_r14.layout.xxs$))),core.xb(3),core.gc(\"image\",null==row_r15.user?null:row_r15.user.image)(\"tooltip\",null==row_r15.user?null:row_r15.user.display),core.xb(2),core.Ec(row_r15.user.shortDisplay),core.xb(2),core.Ec(row_r15.channel.name),core.xb(2),core.Ec(core.bc(12,12,row_r15.creationDate)),core.xb(3),core.Ec(row_r15.remoteAddress),core.xb(2),core.gc(\"ngIf\",ctx_r14.canDisconnect(row_r15))}}function SearchConnectedComponent_ng_container_2_table_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",26),core.Qb(1,\"thead\"),core.Lb(2,\"th\",27),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Qb(9,\"th\"),core.Dc(10),core.Pb(),core.Lb(11,\"th\",28),core.Pb(),core.Qb(12,\"tbody\"),core.Bc(13,SearchConnectedComponent_ng_container_2_table_11_ng_container_13_Template,17,17,\"ng-container\",29),core.ac(14,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);var tmp_4_0;core.xb(4),core.Ec(ctx_r4.i18n.general.user),core.xb(2),core.Ec(ctx_r4.i18n.connectedUser.channel),core.xb(2),core.Ec(ctx_r4.i18n.connectedUser.loggedInAt),core.xb(2),core.Ec(ctx_r4.i18n.connectedUser.ipAddress),core.xb(3),core.gc(\"ngForOf\",null==(tmp_4_0=core.bc(14,5,ctx_r4.results$))?null:tmp_4_0.results)}}function SearchConnectedComponent_ng_container_2_Template(rf,ctx){if(1&rf){const _r21=core.Rb();core.Ob(0),core.Qb(1,\"page-content\",2),core.Qb(2,\"form\",3),core.Qb(3,\"div\",4),core.Bc(4,SearchConnectedComponent_ng_container_2_div_4_Template,3,2,\"div\",5),core.Bc(5,SearchConnectedComponent_ng_container_2_div_5_Template,3,2,\"div\",5),core.Qb(6,\"div\",6),core.Lb(7,\"user-field\",7),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Qb(8,\"results-layout\",8),core.Xb(\"update\",(function($event){return core.sc(_r21),core.Zb().update($event)})),core.ac(9,\"async\"),core.Bc(10,SearchConnectedComponent_ng_container_2_mobile_result_10_Template,12,7,\"mobile-result\",9),core.Bc(11,SearchConnectedComponent_ng_container_2_table_11_Template,15,7,\"table\",10),core.Pb(),core.Nb()}if(2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.i18n.connectedUser.title)(\"mobileHeading\",ctx_r0.i18n.connectedUser.mobileTitle),core.xb(1),core.gc(\"formGroup\",ctx_r0.form),core.xb(2),core.gc(\"ngIf\",(null==ctx_r0.data.channels?null:ctx_r0.data.channels.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r0.data.roles?null:ctx_r0.data.roles.length)>1),core.xb(2),core.gc(\"label\",ctx_r0.i18n.general.user),core.xb(1),core.gc(\"results\",core.bc(9,9,ctx_r0.results$))(\"onClick\",ctx_r0.onClick)(\"rendering$\",ctx_r0.rendering$)}}let search_connected_component_SearchConnectedComponent=(()=>{class SearchConnectedComponent extends base_search_page_component.a{constructor(injector,sessionsService){super(injector),this.sessionsService=sessionsService}ngOnInit(){super.ngOnInit(),this.addSub(this.sessionsService.getSessionDataForSearch().subscribe(data=>{this.form.patchValue(data.query,{emitEvent:!1}),this.data=data}))}toSearchParams(value){return value}disconnect(session){this.addSub(this.sessionsService.disconnectSession({sessionToken:session.sessionToken}).subscribe(()=>{this.notification.snackBar(this.i18n.connectedUser.disconnected(session.user.display)),this.update()}))}canDisconnect(session){return this.login.auth.permissions.sessions.disconnect&&this.login.auth.sessionToken!==session.sessionToken}get onClick(){return row=>null!=row}getFormControlNames(){return[\"channels\",\"roles\",\"user\"]}doSearch(value){return this.sessionsService.searchSessions$Response(value)}showConnectedLabel(role){switch(role){case models.kb.ADMINISTRATOR:return this.i18n.connectedUser.viewConnected.admin;case models.kb.BROKER:return this.i18n.connectedUser.viewConnected.broker;case models.kb.MEMBER:return this.i18n.connectedUser.viewConnected.member;case models.kb.OPERATOR:return this.i18n.connectedUser.viewConnected.operator}}resolveMenu(){return this.menu.searchUsersMenu()}}return SearchConnectedComponent.ɵfac=function(t){return new(t||SearchConnectedComponent)(core.Kb(core.r),core.Kb(sessions_service.a))},SearchConnectedComponent.ɵcmp=core.Eb({type:SearchConnectedComponent,selectors:[[\"search-connected\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[\"resultType\",\"list\",3,\"results\",\"onClick\",\"rendering$\",\"update\"],[\"avatarIcon\",\"user\",3,\"avatarImage\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"labelPosition\",\"side\",\"formControlName\",\"channels\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"roles\",3,\"label\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"avatarIcon\",\"user\",3,\"avatarImage\"],[1,\"d-flex\"],[1,\"cell-main\"],[1,\"cell-cell-date\"],[1,\"cell-text\"],[1,\"ml-auto\"],[\"class\",\"btn btn-icon\",3,\"click\",4,\"ngIf\"],[1,\"btn\",\"btn-icon\",3,\"click\"],[\"icon\",\"clear\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"avatar\"],[1,\"actions\"],[4,\"ngFor\",\"ngForOf\"],[1,\"avatar\",3,\"ngClass\"],[\"icon\",\"user\",3,\"image\",\"tooltip\"],[\"class\",\"btn btn-icon\",3,\"tooltip\",\"click\",4,\"ngIf\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchConnectedComponent_ng_container_2_Template,12,11,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,user_field_component.a,fesm2015_forms.v,fesm2015_forms.l,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,multi_selection_field_component.a,common.s,field_option_directive.a,mobile_result_component.a,icon_component.a,common.q,avatar_component.a,ngx_bootstrap_tooltip.b],pipes:[common.b,date_time_pipe.a],encapsulation:2,changeDetection:0}),SearchConnectedComponent})();var documents_service=__webpack_require__(\"2S6i\"),BehaviorSubject=__webpack_require__(\"2Vo4\"),user_link_component=__webpack_require__(\"Ls5z\"),input_field_component=__webpack_require__(\"DIHi\"),textarea_field_component=__webpack_require__(\"YG2p\"),file_field_component=__webpack_require__(\"ZJXG\");function EditDocumentComponent_ng_container_3_boolean_field_9_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",16),2&rf){const ctx_r2=core.Zb(2);core.gc(\"label\",ctx_r2.i18n.document.brokerManageable)}}function EditDocumentComponent_ng_container_3_label_value_10_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Qb(0,\"label-value\",17),core.Qb(1,\"div\"),core.Qb(2,\"span\"),core.Dc(3),core.ac(4,\"async\"),core.Pb(),core.Qb(5,\"button\",18),core.Xb(\"click\",(function($event){return core.sc(_r5),core.Zb(2).download(),$event.stopPropagation()})),core.Lb(6,\"icon\",19),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r3=core.Zb(2);core.gc(\"label\",ctx_r3.i18n.document.document),core.xb(3),core.Fc(\" \",core.bc(4,3,ctx_r3.fileName$),\" \"),core.xb(2),core.gc(\"tooltip\",ctx_r3.i18n.general.download)}}function EditDocumentComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0,4),core.Qb(1,\"label-value\",5),core.Lb(2,\"user-link\",6),core.Pb(),core.Lb(3,\"input-field\",7),core.Lb(4,\"textarea-field\",8),core.Lb(5,\"boolean-field\",9),core.Lb(6,\"boolean-field\",10),core.Lb(7,\"boolean-field\",11,12),core.Bc(9,EditDocumentComponent_ng_container_3_boolean_field_9_Template,1,1,\"boolean-field\",13),core.Bc(10,EditDocumentComponent_ng_container_3_label_value_10_Template,7,5,\"label-value\",14),core.ac(11,\"async\"),core.Lb(12,\"file-field\",15),core.ac(13,\"async\"),core.Nb()),2&rf){const _r1=core.qc(8),ctx_r0=core.Zb();core.gc(\"formGroup\",ctx_r0.form),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r0.data.user),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.name),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.description),core.xb(1),core.gc(\"label\",ctx_r0.i18n.document.enable),core.xb(1),core.gc(\"label\",ctx_r0.i18n.document.userVisible),core.xb(1),core.gc(\"label\",ctx_r0.i18n.document.brokerVisible),core.xb(2),core.gc(\"ngIf\",_r1.value),core.xb(1),core.gc(\"ngIf\",!ctx_r0.create&&core.bc(11,13,ctx_r0.fileName$)),core.xb(2),core.gc(\"required\",ctx_r0.create)(\"label\",ctx_r0.create||null!==core.bc(13,15,ctx_r0.fileName$)?ctx_r0.i18n.document.newDocument:ctx_r0.i18n.document.replaceDocument)(\"formControl\",ctx_r0.fileControl)}}let edit_document_component_EditDocumentComponent=(()=>{class EditDocumentComponent extends base_page_component.a{constructor(injector,documentsService){super(injector),this.documentsService=documentsService,this.fileName$=new BehaviorSubject.a(null)}isOwner(){return this.authHelper.isSelf(this.data.user)}ngOnInit(){super.ngOnInit();const route=this.route.snapshot;this.user=route.params.user,this.id=route.params.id,this.create=null==this.id;const request=this.create?this.documentsService.getUserDocumentDataForNew({user:this.user}):this.documentsService.getDocumentDataForEdit({id:this.id});this.addSub(request.subscribe(data=>this.data=data))}download(){this.addSub(this.documentsService.downloadDocumentFile$Response({id:this.id}).subscribe(helper.g))}onDataInitialized(data){var _a;super.onDataInitialized(data);const doc=data.document,docEdit=data.document;this.create||this.fileName$.next(null===(_a=data.file)||void 0===_a?void 0:_a.name),this.fileControl=this.formBuilder.control(null,this.create?fesm2015_forms.G.required:null),this.form=this.formBuilder.group({name:[doc.name,fesm2015_forms.G.required],description:doc.description,enabled:doc.enabled,userVisible:doc.userVisible,brokerVisible:doc.brokerVisible,brokerManageable:doc.brokerManageable,version:docEdit.version})}asEdit(){return this.data}asNew(){return this.data}save(){Object(helper.F)(this.form);const file=this.fileControl.value;if((this.create||file)&&Object(helper.F)(this.fileControl),!this.form.valid||!this.fileControl.valid)return;const value=Object(cloneDeep.a)(this.form.value);value.brokerVisible||(value.brokerManageable=!1),this.addSub(this.create?this.documentsService.createUserDocumentWithUpload({user:this.user,body:{document:value,file:file}}).subscribe(docId=>this.notifySavedAndReload(docId)):this.fileControl.value?this.documentsService.updateDocumentWithUpload({id:this.id,body:{document:value,file:file}}).subscribe(()=>this.notifySavedAndReload(this.id)):this.documentsService.updateDocument({id:this.id,body:value}).subscribe(()=>this.notifySavedAndReload(this.id)))}notifySavedAndReload(docId){this.notification.snackBar(this.i18n.document.savedSuccessfully),this.router.navigate([\"/users\",\"documents\",\"edit\",docId])}formControl(internalName){return this.form.get(internalName)}resolveMenu(){return this.menu.searchUsersMenu()}}return EditDocumentComponent.ɵfac=function(t){return new(t||EditDocumentComponent)(core.Kb(core.r),core.Kb(documents_service.a))},EditDocumentComponent.ɵcmp=core.Eb({type:EditDocumentComponent,selectors:[[\"edit-document\"]],features:[core.ub],decls:7,vars:10,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\"],[3,\"formGroup\",4,\"ngIf\"],[3,\"disabled\",\"label\",\"action\"],[3,\"formGroup\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[\"fieldSize\",\"full\",\"required\",\"\",\"formControlName\",\"name\",3,\"label\"],[\"formControlName\",\"description\",3,\"label\"],[\"formControlName\",\"enabled\",3,\"label\"],[\"formControlName\",\"userVisible\",3,\"label\"],[\"formControlName\",\"brokerVisible\",3,\"label\"],[\"brokerVisible\",\"\"],[\"formControlName\",\"brokerManageable\",3,\"label\",4,\"ngIf\"],[3,\"label\",4,\"ngIf\"],[3,\"required\",\"label\",\"formControl\"],[\"formControlName\",\"brokerManageable\",3,\"label\"],[3,\"label\"],[1,\"btn\",\"btn-icon\",\"ml-2\",3,\"tooltip\",\"click\"],[\"icon\",\"save_alt\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Qb(2,\"page-content\",1),core.Bc(3,EditDocumentComponent_ng_container_3_Template,14,17,\"ng-container\",2),core.Qb(4,\"actions\"),core.Qb(5,\"action-button\",3),core.Xb(\"action\",(function(){return ctx.save()})),core.ac(6,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,6,ctx.data$)),core.xb(2),core.gc(\"heading\",ctx.create?ctx.i18n.document.title.new:ctx.i18n.document.title.edit)(\"mobileHeading\",ctx.create?ctx.i18n.document.mobileTitle.new:ctx.i18n.document.mobileTitle.edit),core.xb(1),core.gc(\"ngIf\",ctx.data),core.xb(2),core.gc(\"disabled\",core.bc(6,8,ctx.requesting$))(\"label\",ctx.i18n.general.save))},directives:[page_layout_component.a,page_content_component.a,common.t,actions_component.a,action_button_component.a,fesm2015_forms.w,fesm2015_forms.n,label_value_component.a,user_link_component.a,input_field_component.a,fesm2015_forms.D,fesm2015_forms.v,fesm2015_forms.l,textarea_field_component.a,boolean_field_component.a,file_field_component.a,fesm2015_forms.k,ngx_bootstrap_tooltip.b,icon_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),EditDocumentComponent})();function ListDocumentsComponent_ng_container_2_mobile_result_4_button_8_Template(rf,ctx){if(1&rf){const _r8=core.Rb();core.Qb(0,\"button\",10),core.Xb(\"click\",(function($event){core.sc(_r8);const row_r3=core.Zb().$implicit;return core.Zb(2).download(row_r3),$event.stopPropagation(),$event.preventDefault()})),core.Lb(1,\"icon\",11),core.Pb()}if(2&rf){const ctx_r4=core.Zb(3);core.gc(\"tooltip\",ctx_r4.i18n.general.download)}}function ListDocumentsComponent_ng_container_2_mobile_result_4_button_9_Template(rf,ctx){if(1&rf){const _r11=core.Rb();core.Qb(0,\"button\",10),core.Xb(\"click\",(function($event){core.sc(_r11);const row_r3=core.Zb().$implicit,ctx_r9=core.Zb(2);return ctx_r9.router.navigate(ctx_r9.path(row_r3)),$event.stopPropagation(),$event.preventDefault()})),core.Lb(1,\"icon\",12),core.Pb()}if(2&rf){const ctx_r5=core.Zb(3);core.gc(\"tooltip\",ctx_r5.i18n.document.process)}}function ListDocumentsComponent_ng_container_2_mobile_result_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\"),core.Qb(1,\"div\",6),core.Qb(2,\"div\"),core.Qb(3,\"label-value\",7),core.Dc(4),core.Pb(),core.Qb(5,\"label-value\",7),core.Dc(6),core.Pb(),core.Pb(),core.Qb(7,\"div\",8),core.Bc(8,ListDocumentsComponent_ng_container_2_mobile_result_4_button_8_Template,2,1,\"button\",9),core.Bc(9,ListDocumentsComponent_ng_container_2_mobile_result_4_button_9_Template,2,1,\"button\",9),core.Pb(),core.Pb(),core.Pb()),2&rf){const row_r3=ctx.$implicit,ctx_r1=core.Zb(2);core.xb(3),core.gc(\"label\",ctx_r1.i18n.general.name),core.xb(1),core.Fc(\" \",row_r3.name,\" \"),core.xb(1),core.gc(\"label\",ctx_r1.i18n.general.description),core.xb(1),core.Fc(\" \",row_r3.description,\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r1.isStatic(row_r3.kind)),core.xb(1),core.gc(\"ngIf\",!ctx_r1.isStatic(row_r3.kind))}}function ListDocumentsComponent_ng_container_2_table_5_tr_8_button_6_Template(rf,ctx){if(1&rf){const _r18=core.Rb();core.Qb(0,\"button\",10),core.Xb(\"click\",(function($event){core.sc(_r18);const row_r13=core.Zb().$implicit;return core.Zb(3).download(row_r13),$event.stopPropagation()})),core.Lb(1,\"icon\",11),core.Pb()}if(2&rf){const ctx_r14=core.Zb(4);core.gc(\"tooltip\",ctx_r14.i18n.general.download)}}function ListDocumentsComponent_ng_container_2_table_5_tr_8_button_7_Template(rf,ctx){if(1&rf){const _r21=core.Rb();core.Qb(0,\"button\",10),core.Xb(\"click\",(function($event){core.sc(_r21);const row_r13=core.Zb().$implicit,ctx_r19=core.Zb(3);return ctx_r19.router.navigate(ctx_r19.path(row_r13)),$event.stopPropagation()})),core.Lb(1,\"icon\",12),core.Pb()}if(2&rf){const ctx_r15=core.Zb(4);core.gc(\"tooltip\",ctx_r15.i18n.document.process)}}function ListDocumentsComponent_ng_container_2_table_5_tr_8_Template(rf,ctx){if(1&rf){const _r23=core.Rb();core.Qb(0,\"tr\",16),core.Xb(\"click\",(function($event){core.sc(_r23);const row_r13=ctx.$implicit,ctx_r22=core.Zb(3);return ctx_r22.isStatic(row_r13.kind)?ctx_r22.download(row_r13):ctx_r22.router.navigate(ctx_r22.path(row_r13)),$event.stopPropagation()})),core.Qb(1,\"td\",17),core.Dc(2),core.Pb(),core.Qb(3,\"td\"),core.Dc(4),core.Pb(),core.Qb(5,\"td\",18),core.Bc(6,ListDocumentsComponent_ng_container_2_table_5_tr_8_button_6_Template,2,1,\"button\",9),core.Bc(7,ListDocumentsComponent_ng_container_2_table_5_tr_8_button_7_Template,2,1,\"button\",9),core.Pb(),core.Pb()}if(2&rf){const row_r13=ctx.$implicit,ctx_r12=core.Zb(3);core.xb(2),core.Ec(row_r13.name),core.xb(2),core.Ec(row_r13.description),core.xb(2),core.gc(\"ngIf\",ctx_r12.isStatic(row_r13.kind)),core.xb(1),core.gc(\"ngIf\",!ctx_r12.isStatic(row_r13.kind))}}function ListDocumentsComponent_ng_container_2_table_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",13),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Lb(6,\"th\",14),core.Pb(),core.Qb(7,\"tbody\"),core.Bc(8,ListDocumentsComponent_ng_container_2_table_5_tr_8_Template,8,4,\"tr\",15),core.Pb(),core.Pb()),2&rf){const ctx_r2=core.Zb(2);core.xb(3),core.Ec(ctx_r2.i18n.general.name),core.xb(2),core.Ec(ctx_r2.i18n.general.description),core.xb(3),core.gc(\"ngForOf\",ctx_r2.data)}}function ListDocumentsComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"page-content\",2),core.ac(2,\"async\"),core.Qb(3,\"results-layout\",3),core.Bc(4,ListDocumentsComponent_ng_container_2_mobile_result_4_Template,10,6,\"mobile-result\",4),core.Bc(5,ListDocumentsComponent_ng_container_2_table_5_Template,9,3,\"table\",5),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"mode\",\"empty\")(\"heading\",ctx_r0.i18n.document.title.list)(\"mobileHeading\",ctx_r0.i18n.document.mobileTitle.list)(\"headingActions\",core.bc(2,5,ctx_r0.headingActions$)),core.xb(2),core.gc(\"results\",ctx_r0.data)}}let list_documents_component_ListDocumentsComponent=(()=>{class ListDocumentsComponent extends base_page_component.a{constructor(injector,documentsService){super(injector),this.documentsService=documentsService}ngOnInit(){super.ngOnInit(),this.addSub(this.documentsService.listUserDocuments({user:api_helper.a.SELF}).subscribe(data=>this.data=data))}isStatic(kind){return kind!==models.u.DYNAMIC}download(document){this.addSub(this.documentsService.downloadDocumentFile$Response({id:document.id}).subscribe(helper.g))}path(document){return[\"/users\",\"documents\",\"process-dynamic\",document.id]}resolveMenu(){return this.menu.userMenu(null,menu.b.MY_DOCUMENTS)}}return ListDocumentsComponent.ɵfac=function(t){return new(t||ListDocumentsComponent)(core.Kb(core.r),core.Kb(documents_service.a))},ListDocumentsComponent.ɵcmp=core.Eb({type:ListDocumentsComponent,selectors:[[\"list-documents\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[3,\"mode\",\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"results\"],[4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"d-flex\"],[\"labelPosition\",\"above\",3,\"label\"],[1,\"ml-auto\",\"text-right\",\"d-flex\",\"flex-column\"],[\"class\",\"btn btn-icon\",3,\"tooltip\",\"click\",4,\"ngIf\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"save_alt\"],[\"icon\",\"edit\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"actions\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[\"width\",\"20%\"],[1,\"actions\",\"actions-multiple\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ListDocumentsComponent_ng_container_2_Template,6,7,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a,label_value_component.a,ngx_bootstrap_tooltip.b,icon_component.a,common.s],pipes:[common.b],encapsulation:2,changeDetection:0}),ListDocumentsComponent})();var field_helper_service=__webpack_require__(\"OoS4\"),custom_field_input_component=__webpack_require__(\"Y+zs\"),focused_directive=__webpack_require__(\"bBjs\"),trust_pipe=__webpack_require__(\"cyUc\");function ProcessDynamicDocumentComponent_page_content_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"custom-field-input\",6),core.Nb()),2&rf){const cf_r3=ctx.$implicit,first_r4=ctx.first,ctx_r2=core.Zb(2);core.xb(1),core.gc(\"field\",cf_r3)(\"formControl\",ctx_r2.formControl(cf_r3.internalName))(\"focused\",first_r4)(\"labelPosition\",\"auto\")}}function ProcessDynamicDocumentComponent_page_content_3_Template(rf,ctx){if(1&rf){const _r6=core.Rb();core.Qb(0,\"page-content\",3),core.Bc(1,ProcessDynamicDocumentComponent_page_content_3_ng_container_1_Template,2,4,\"ng-container\",4),core.Qb(2,\"actions\"),core.Qb(3,\"action-button\",5),core.Xb(\"action\",(function(){return core.sc(_r6),core.Zb().process()})),core.ac(4,\"async\"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.data.document.name)(\"mobileHeading\",ctx_r0.data.document.name),core.xb(1),core.gc(\"ngForOf\",ctx_r0.formFields),core.xb(2),core.gc(\"disabled\",core.bc(4,5,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.submit)}}function ProcessDynamicDocumentComponent_page_content_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",7),core.ac(1,\"async\"),core.Lb(2,\"div\",8),core.ac(3,\"trust\"),core.Pb()),2&rf){const ctx_r1=core.Zb();core.gc(\"heading\",ctx_r1.data.document.name)(\"mobileHeading\",ctx_r1.data.document.name)(\"headingActions\",core.bc(1,4,ctx_r1.headingActions$)),core.xb(2),core.gc(\"innerHTML\",core.bc(3,6,ctx_r1.result),core.tc)}}let process_dynamic_document_component_ProcessDynamicDocumentComponent=(()=>{class ProcessDynamicDocumentComponent extends base_page_component.a{constructor(injector,fieldsHelper,documentsService){super(injector),this.fieldsHelper=fieldsHelper,this.documentsService=documentsService,this.step$=new BehaviorSubject.a(null),this.result$=new BehaviorSubject.a(null)}get result(){return this.result$.value}get step(){return this.step$.value}set step(step){this.step$.next(step)}ngOnInit(){super.ngOnInit(),this.documentId=this.route.snapshot.params.id,this.addSub(this.documentsService.getDataForDynamicDocument({id:this.documentId,user:api_helper.a.SELF}).subscribe(data=>{this.data=data}))}onDataInitialized(data){this.formFields=data.formFields||[],this.form=this.fieldsHelper.customValuesFormGroup(this.formFields),this.formFields.length>0?this.step=\"form\":this.process()}process(){Object(helper.F)(this.form),this.form.valid&&this.addSub(this.documentsService.processDynamicDocument({id:this.documentId,user:api_helper.a.SELF,body:{formFields:this.form.value}}).subscribe(data=>{this.result$.next(data);const headingActions=[];headingActions.push(this.exportHelper.printAction()),headingActions[0].maybeRoot=!0,this.headingActions=headingActions,this.step=\"preview\"}))}formControl(internalName){return this.form.get(internalName)}resolveMenu(){return this.menu.userMenu(null,menu.b.MY_DOCUMENTS)}}return ProcessDynamicDocumentComponent.ɵfac=function(t){return new(t||ProcessDynamicDocumentComponent)(core.Kb(core.r),core.Kb(field_helper_service.a),core.Kb(documents_service.a))},ProcessDynamicDocumentComponent.ɵcmp=core.Eb({type:ProcessDynamicDocumentComponent,selectors:[[\"process-dynamic-document\"]],features:[core.ub],decls:5,vars:8,consts:[[3,\"ready\",\"ngSwitch\"],[3,\"heading\",\"mobileHeading\",4,\"ngSwitchCase\"],[\"printContentOnly\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngSwitchCase\"],[3,\"heading\",\"mobileHeading\"],[4,\"ngFor\",\"ngForOf\"],[3,\"disabled\",\"label\",\"action\"],[3,\"field\",\"formControl\",\"focused\",\"labelPosition\"],[\"printContentOnly\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"innerHTML\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,ProcessDynamicDocumentComponent_page_content_3_Template,5,7,\"page-content\",1),core.Bc(4,ProcessDynamicDocumentComponent_page_content_4_Template,4,8,\"page-content\",2),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,4,ctx.data$))(\"ngSwitch\",core.bc(2,6,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"form\"),core.xb(1),core.gc(\"ngSwitchCase\",\"preview\"))},directives:[page_layout_component.a,common.x,common.y,page_content_component.a,common.s,actions_component.a,action_button_component.a,custom_field_input_component.a,fesm2015_forms.v,fesm2015_forms.k,focused_directive.a],pipes:[common.b,trust_pipe.a],encapsulation:2,changeDetection:0}),ProcessDynamicDocumentComponent})();function SearchDocumentsComponent_ng_container_2_ng_container_5_div_4_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",5)}function SearchDocumentsComponent_ng_container_2_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",5),core.Qb(2,\"label-value\",10),core.Lb(3,\"user-link\",11),core.Pb(),core.Pb(),core.Bc(4,SearchDocumentsComponent_ng_container_2_ng_container_5_div_4_Template,1,0,\"div\",12),core.Nb()),2&rf){const ctx_r1=core.Zb(2);core.xb(2),core.gc(\"label\",ctx_r1.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r1.data.user),core.xb(1),core.gc(\"ngIf\",ctx_r1.layout.gtsm$)}}function SearchDocumentsComponent_ng_container_2_mobile_result_10_button_8_Template(rf,ctx){if(1&rf){const _r12=core.Rb();core.Qb(0,\"button\",18),core.Xb(\"click\",(function($event){core.sc(_r12);const row_r5=core.Zb().$implicit;return core.Zb(2).navigateToView(row_r5),$event.stopPropagation(),$event.preventDefault()})),core.Lb(1,\"icon\",19),core.Pb()}if(2&rf){const ctx_r6=core.Zb(3);core.gc(\"tooltip\",ctx_r6.i18n.general.view)}}function SearchDocumentsComponent_ng_container_2_mobile_result_10_button_9_Template(rf,ctx){if(1&rf){const _r15=core.Rb();core.Qb(0,\"button\",20),core.Xb(\"click\",(function($event){core.sc(_r15);const row_r5=core.Zb().$implicit;return core.Zb(2).download(row_r5),$event.stopPropagation()})),core.Lb(1,\"icon\",21),core.Pb()}if(2&rf){const ctx_r7=core.Zb(3);core.gc(\"tooltip\",ctx_r7.i18n.general.download)}}function SearchDocumentsComponent_ng_container_2_mobile_result_10_button_10_Template(rf,ctx){if(1&rf){const _r18=core.Rb();core.Qb(0,\"button\",18),core.Xb(\"click\",(function($event){core.sc(_r18);const row_r5=core.Zb().$implicit,ctx_r16=core.Zb(2);return ctx_r16.router.navigate(ctx_r16.process(row_r5)),$event.stopPropagation(),$event.preventDefault()})),core.Lb(1,\"icon\",19),core.Pb()}if(2&rf){const ctx_r8=core.Zb(3);core.gc(\"tooltip\",ctx_r8.i18n.document.process)}}function SearchDocumentsComponent_ng_container_2_mobile_result_10_button_11_Template(rf,ctx){if(1&rf){const _r21=core.Rb();core.Qb(0,\"button\",20),core.Xb(\"click\",(function($event){core.sc(_r21);const row_r5=core.Zb().$implicit;return core.Zb(2).remove(row_r5),$event.stopPropagation(),$event.preventDefault()})),core.Lb(1,\"icon\",22),core.Pb()}if(2&rf){const ctx_r9=core.Zb(3);core.gc(\"tooltip\",ctx_r9.i18n.general.remove)}}function SearchDocumentsComponent_ng_container_2_mobile_result_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\"),core.Qb(1,\"div\",13),core.Qb(2,\"div\"),core.Qb(3,\"label-value\",14),core.Dc(4),core.Pb(),core.Qb(5,\"label-value\",14),core.Dc(6),core.Pb(),core.Pb(),core.Qb(7,\"div\",15),core.Bc(8,SearchDocumentsComponent_ng_container_2_mobile_result_10_button_8_Template,2,1,\"button\",16),core.Bc(9,SearchDocumentsComponent_ng_container_2_mobile_result_10_button_9_Template,2,1,\"button\",17),core.Bc(10,SearchDocumentsComponent_ng_container_2_mobile_result_10_button_10_Template,2,1,\"button\",16),core.Bc(11,SearchDocumentsComponent_ng_container_2_mobile_result_10_button_11_Template,2,1,\"button\",17),core.Pb(),core.Pb(),core.Pb()),2&rf){const row_r5=ctx.$implicit,ctx_r2=core.Zb(2);core.xb(3),core.gc(\"label\",ctx_r2.i18n.general.name),core.xb(1),core.Fc(\" \",row_r5.name,\" \"),core.xb(1),core.gc(\"label\",ctx_r2.i18n.general.description),core.xb(1),core.Fc(\" \",row_r5.description,\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r2.isStatic(row_r5.kind)),core.xb(1),core.gc(\"ngIf\",ctx_r2.isStatic(row_r5.kind)),core.xb(1),core.gc(\"ngIf\",!ctx_r2.isStatic(row_r5.kind)),core.xb(1),core.gc(\"ngIf\",ctx_r2.isUserKind(row_r5))}}function SearchDocumentsComponent_ng_container_2_table_11_tr_8_button_6_Template(rf,ctx){if(1&rf){const _r29=core.Rb();core.Qb(0,\"button\",18),core.Xb(\"click\",(function($event){core.sc(_r29);const row_r23=core.Zb().$implicit;return core.Zb(3).download(row_r23),$event.stopPropagation()})),core.Lb(1,\"icon\",21),core.Pb()}if(2&rf){const ctx_r24=core.Zb(4);core.gc(\"tooltip\",ctx_r24.i18n.general.download)}}function SearchDocumentsComponent_ng_container_2_table_11_tr_8_button_7_Template(rf,ctx){if(1&rf){const _r32=core.Rb();core.Qb(0,\"button\",18),core.Xb(\"click\",(function($event){core.sc(_r32);const row_r23=core.Zb().$implicit,ctx_r30=core.Zb(3);return ctx_r30.router.navigate(ctx_r30.process(row_r23)),$event.stopPropagation(),$event.preventDefault()})),core.Lb(1,\"icon\",19),core.Pb()}if(2&rf){const ctx_r25=core.Zb(4);core.gc(\"tooltip\",ctx_r25.i18n.document.process)}}function SearchDocumentsComponent_ng_container_2_table_11_tr_8_button_8_Template(rf,ctx){if(1&rf){const _r35=core.Rb();core.Qb(0,\"button\",30),core.Xb(\"click\",(function($event){core.sc(_r35);const row_r23=core.Zb().$implicit;return core.Zb(3).remove(row_r23),$event.stopPropagation(),$event.preventDefault()})),core.Lb(1,\"icon\",22),core.Pb()}if(2&rf){const ctx_r26=core.Zb(4);core.gc(\"tooltip\",ctx_r26.i18n.general.remove)}}function SearchDocumentsComponent_ng_container_2_table_11_tr_8_Template(rf,ctx){if(1&rf){const _r37=core.Rb();core.Qb(0,\"tr\",26),core.Xb(\"click\",(function($event){core.sc(_r37);const row_r23=ctx.$implicit,ctx_r36=core.Zb(3);return ctx_r36.isStatic(row_r23.kind)?ctx_r36.navigateToView(row_r23):ctx_r36.router.navigate(ctx_r36.process(row_r23)),$event.stopPropagation(),$event.preventDefault()})),core.Qb(1,\"td\",27),core.Dc(2),core.Pb(),core.Qb(3,\"td\"),core.Dc(4),core.Pb(),core.Qb(5,\"td\",28),core.Bc(6,SearchDocumentsComponent_ng_container_2_table_11_tr_8_button_6_Template,2,1,\"button\",16),core.Bc(7,SearchDocumentsComponent_ng_container_2_table_11_tr_8_button_7_Template,2,1,\"button\",16),core.Bc(8,SearchDocumentsComponent_ng_container_2_table_11_tr_8_button_8_Template,2,1,\"button\",29),core.Pb(),core.Pb()}if(2&rf){const row_r23=ctx.$implicit,ctx_r22=core.Zb(3);core.xb(2),core.Ec(row_r23.name),core.xb(2),core.Ec(row_r23.description),core.xb(2),core.gc(\"ngIf\",ctx_r22.isStatic(row_r23.kind)),core.xb(1),core.gc(\"ngIf\",!ctx_r22.isStatic(row_r23.kind)),core.xb(1),core.gc(\"ngIf\",ctx_r22.data.canManageIndividual&&ctx_r22.isUserKind(row_r23))}}function SearchDocumentsComponent_ng_container_2_table_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",23),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Lb(6,\"th\",24),core.Pb(),core.Qb(7,\"tbody\"),core.Bc(8,SearchDocumentsComponent_ng_container_2_table_11_tr_8_Template,9,5,\"tr\",25),core.ac(9,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);var tmp_2_0;core.xb(3),core.Ec(ctx_r3.i18n.general.name),core.xb(2),core.Ec(ctx_r3.i18n.general.description),core.xb(3),core.gc(\"ngForOf\",null==(tmp_2_0=core.bc(9,3,ctx_r3.results$))?null:tmp_2_0.results)}}function SearchDocumentsComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Qb(3,\"form\",3),core.Qb(4,\"div\",4),core.Bc(5,SearchDocumentsComponent_ng_container_2_ng_container_5_Template,5,3,\"ng-container\",1),core.Qb(6,\"div\",5),core.Lb(7,\"input-field\",6),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Qb(8,\"results-layout\",7),core.ac(9,\"async\"),core.Bc(10,SearchDocumentsComponent_ng_container_2_mobile_result_10_Template,12,8,\"mobile-result\",8),core.Bc(11,SearchDocumentsComponent_ng_container_2_table_11_Template,10,5,\"table\",9),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.i18n.document.title.search)(\"mobileHeading\",ctx_r0.i18n.document.mobileTitle.search)(\"headingActions\",core.bc(2,8,ctx_r0.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r0.form),core.xb(2),core.gc(\"ngIf\",!ctx_r0.authHelper.isSelf(ctx_r0.data.user)),core.xb(2),core.gc(\"label\",ctx_r0.i18n.general.keywords),core.xb(1),core.gc(\"results\",core.bc(9,10,ctx_r0.results$))(\"rendering$\",ctx_r0.rendering$)}}let search_documents_component_SearchDocumentsComponent=(()=>{class SearchDocumentsComponent extends base_search_page_component.a{constructor(injector,documentsService){super(injector),this.documentsService=documentsService}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.documentsService.getDocumentsDataForSearch({user:this.user}).subscribe(data=>this.data=data))}onDataInitialized(data){super.onDataInitialized(data),this.headingActions=[new action.c(\"add\",this.i18n.general.add,()=>{this.router.navigate([\"/users\",this.user,\"documents\",\"new\"])},!0)]}doSearch(value){return this.documentsService.searchDocuments$Response(value)}remove(doc){this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>this.doRemove(doc)})}doRemove(doc){this.addSub(this.documentsService.deleteDocument({id:doc.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.update()}))}toSearchParams(params){return params}getFormControlNames(){return[\"brokers\",\"categories\",\"enabled\",\"groups\",\"keywords\",\"range\",\"user\"]}isStatic(kind){return kind!==models.u.DYNAMIC}download(document){this.addSub(this.documentsService.downloadDocumentFile$Response({id:document.id}).subscribe(helper.g))}process(document){return[\"/users\",\"documents\",\"process-dynamic\",document.id]}view(document){return[\"/users\",\"documents\",\"view\",document.id]}isUserKind(document){return document.kind===models.u.USER}navigateToView(document){this.router.navigate(this.view(document))}get toProcessLink(){return document=>this.process(document)}resolveMenu(){return this.menu.searchUsersMenu()}}return SearchDocumentsComponent.ɵfac=function(t){return new(t||SearchDocumentsComponent)(core.Kb(core.r),core.Kb(documents_service.a))},SearchDocumentsComponent.ɵcmp=core.Eb({type:SearchDocumentsComponent,selectors:[[\"search-documents\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"keywords\",\"fieldSize\",\"full\",3,\"label\"],[\"resultType\",\"list\",3,\"results\",\"rendering$\"],[4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[1,\"d-flex\"],[\"labelPosition\",\"above\",3,\"label\"],[1,\"ml-auto\",\"text-right\",\"d-flex\",\"flex-column\"],[\"class\",\"btn btn-icon\",3,\"tooltip\",\"click\",4,\"ngIf\"],[\"class\",\"btn btn-icon mt-2\",3,\"tooltip\",\"click\",4,\"ngIf\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"edit\"],[1,\"btn\",\"btn-icon\",\"mt-2\",3,\"tooltip\",\"click\"],[\"icon\",\"save_alt\"],[\"icon\",\"clear\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"actions\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[\"width\",\"20%\"],[1,\"actions\",\"actions-multiple\"],[\"class\",\"btn btn-icon ml-2\",3,\"tooltip\",\"click\",4,\"ngIf\"],[1,\"btn\",\"btn-icon\",\"ml-2\",3,\"tooltip\",\"click\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchDocumentsComponent_ng_container_2_Template,12,12,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,input_field_component.a,fesm2015_forms.v,fesm2015_forms.l,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,label_value_component.a,user_link_component.a,mobile_result_component.a,ngx_bootstrap_tooltip.b,icon_component.a,common.s],pipes:[common.b],encapsulation:2,changeDetection:0}),SearchDocumentsComponent})();function ViewDocumentComponent_ng_container_4_label_value_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",8),core.Lb(1,\"user-link\",9),core.Pb()),2&rf){const ctx_r1=core.Zb(2);core.gc(\"label\",ctx_r1.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r1.data.user)}}function ViewDocumentComponent_ng_container_4_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Dc(1),core.Pb()),2&rf){const ctx_r2=core.Zb(2);core.gc(\"label\",ctx_r2.i18n.document.category),core.xb(1),core.Fc(\" \",ctx_r2.data.category.name,\" \")}}function ViewDocumentComponent_ng_container_4_label_value_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.gc(\"label\",ctx_r3.i18n.document.userVisible),core.xb(1),core.Fc(\" \",ctx_r3.format.formatBoolean(ctx_r3.data.userVisible),\" \")}}function ViewDocumentComponent_ng_container_4_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.gc(\"label\",ctx_r4.i18n.document.brokerVisible),core.xb(1),core.Fc(\" \",ctx_r4.format.formatBoolean(ctx_r4.data.brokerVisible),\" \")}}function ViewDocumentComponent_ng_container_4_label_value_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.document.brokerManageable),core.xb(1),core.Fc(\" \",ctx_r5.format.formatBoolean(ctx_r5.data.brokerManageable),\" \")}}function ViewDocumentComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,ViewDocumentComponent_ng_container_4_label_value_1_Template,2,2,\"label-value\",4),core.Qb(2,\"label-value\",5),core.Dc(3),core.Pb(),core.Qb(4,\"label-value\",5),core.Dc(5),core.Pb(),core.Bc(6,ViewDocumentComponent_ng_container_4_label_value_6_Template,2,2,\"label-value\",6),core.Qb(7,\"label-value\",5),core.Dc(8),core.Pb(),core.Bc(9,ViewDocumentComponent_ng_container_4_label_value_9_Template,2,2,\"label-value\",7),core.Bc(10,ViewDocumentComponent_ng_container_4_label_value_10_Template,2,2,\"label-value\",7),core.Bc(11,ViewDocumentComponent_ng_container_4_label_value_11_Template,2,2,\"label-value\",7),core.Qb(12,\"label-value\",5),core.Dc(13),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"ngIf\",ctx_r0.data.user),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.name),core.xb(1),core.Fc(\" \",ctx_r0.data.name,\" \"),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.description),core.xb(1),core.Fc(\" \",ctx_r0.data.description,\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.category),core.xb(1),core.gc(\"label\",ctx_r0.i18n.document.enable),core.xb(1),core.Fc(\" \",ctx_r0.format.formatBoolean(ctx_r0.data.enabled),\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.userVisible),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.brokerVisible),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.brokerVisible),core.xb(1),core.gc(\"label\",ctx_r0.i18n.document.document),core.xb(1),core.Fc(\" \",ctx_r0.data.file.name,\" \")}}let view_document_component_ViewDocumentComponent=(()=>{class ViewDocumentComponent extends base_page_component.a{constructor(injector,documentsService){super(injector),this.documentsService=documentsService}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.documentsService.viewDocument({id:this.id}).subscribe(data=>this.data=data))}onDataInitialized(data){if(super.onDataInitialized(data),this.dataForUiHolder.auth.role!==models.kb.BROKER||data.brokerManageable){const headingActions=[new action.c(\"edit\",this.i18n.general.edit,()=>this.navigateToEdit(),!0)];headingActions.push(new action.c(\"clear\",this.i18n.general.remove,()=>this.remove(),!0)),this.headingActions=headingActions}}remove(){this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>this.doRemove()})}doRemove(){this.addSub(this.documentsService.deleteDocument({id:this.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.router.navigate([\"/users\",this.data.user.id,\"documents\",\"search\"])}))}download(){this.addSub(this.documentsService.downloadDocumentFile$Response({id:this.id}).subscribe(helper.g))}navigateToEdit(){this.router.navigate([\"/users\",\"documents\",\"edit\",this.id])}resolveMenu(data){return data.kind===models.u.USER&&this.authHelper.isSelf(data.user)?this.menu.userMenu(null,menu.b.MY_DOCUMENTS):this.menu.searchUsersMenu()}}return ViewDocumentComponent.ɵfac=function(t){return new(t||ViewDocumentComponent)(core.Kb(core.r),core.Kb(documents_service.a))},ViewDocumentComponent.ɵcmp=core.Eb({type:ViewDocumentComponent,selectors:[[\"view-document\"]],features:[core.ub],decls:8,vars:13,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[4,\"ngIf\"],[3,\"disabled\",\"label\",\"action\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\",4,\"ngIf\"],[3,\"label\"],[\"ng\",\"\",3,\"label\",4,\"ngIf\"],[3,\"label\",4,\"ngIf\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[\"ng\",\"\",3,\"label\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Qb(2,\"page-content\",1),core.ac(3,\"async\"),core.Bc(4,ViewDocumentComponent_ng_container_4_Template,14,13,\"ng-container\",2),core.Qb(5,\"actions\"),core.Qb(6,\"action-button\",3),core.Xb(\"action\",(function(){return ctx.download()})),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,7,ctx.data$)),core.xb(2),core.gc(\"heading\",ctx.i18n.document.title.view)(\"mobileHeading\",ctx.i18n.document.mobileTitle.view)(\"headingActions\",core.bc(3,9,ctx.headingActions$)),core.xb(2),core.gc(\"ngIf\",ctx.data),core.xb(2),core.gc(\"disabled\",core.bc(7,11,ctx.requesting$))(\"label\",ctx.i18n.general.download))},directives:[page_layout_component.a,page_content_component.a,common.t,actions_component.a,action_button_component.a,label_value_component.a,user_link_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),ViewDocumentComponent})();var group_membership_service=__webpack_require__(\"j79m\");function ViewUserGroupHistoryComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function ViewUserGroupHistoryComponent_ng_template_3_mobile_result_3_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Dc(1),core.Pb()),2&rf){const row_r5=core.Zb().$implicit,ctx_r6=core.Zb(2);core.xb(1),core.Gc(\" \",ctx_r6.i18n.general.performedBy,\": \",row_r5.by.display,\" \")}}function ViewUserGroupHistoryComponent_ng_template_3_mobile_result_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",8),core.Qb(1,\"div\",9),core.Dc(2),core.Pb(),core.Bc(3,ViewUserGroupHistoryComponent_ng_template_3_mobile_result_3_div_3_Template,2,2,\"div\",10),core.Pb()),2&rf){const row_r5=ctx.$implicit,ctx_r3=core.Zb(2);core.gc(\"date\",null==row_r5.period?null:row_r5.period.date),core.xb(2),core.Gc(\" \",ctx_r3.i18n.user.group,\": \",row_r5.group?row_r5.group.name:ctx_r3.i18n.user.operatorNoGroup,\" \"),core.xb(1),core.gc(\"ngIf\",row_r5.by)}}function ViewUserGroupHistoryComponent_ng_template_3_table_4_tr_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\"),core.Qb(1,\"td\"),core.Dc(2),core.ac(3,\"date\"),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.Pb(),core.Pb()),2&rf){const row_r9=ctx.$implicit,ctx_r8=core.Zb(3);core.xb(2),core.Ec(core.bc(3,3,null==row_r9.period?null:row_r9.period.begin)),core.xb(3),core.Fc(\"\",row_r9.group?row_r9.group.name:ctx_r8.i18n.user.operatorNoGroup,\" \"),core.xb(2),core.Ec(null==row_r9.by?null:row_r9.by.display)}}function ViewUserGroupHistoryComponent_ng_template_3_table_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",12),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Pb(),core.Qb(8,\"tbody\"),core.Bc(9,ViewUserGroupHistoryComponent_ng_template_3_table_4_tr_9_Template,8,5,\"tr\",13),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(3),core.Ec(ctx_r4.i18n.general.date),core.xb(2),core.Ec(ctx_r4.i18n.general.status),core.xb(2),core.Ec(ctx_r4.i18n.general.performedBy),core.xb(2),core.gc(\"ngForOf\",ctx_r4.data.history)}}function ViewUserGroupHistoryComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.Lb(1,\"user-info\",4),core.Pb(),core.Qb(2,\"results-layout\",5),core.Bc(3,ViewUserGroupHistoryComponent_ng_template_3_mobile_result_3_Template,4,4,\"mobile-result\",6),core.Bc(4,ViewUserGroupHistoryComponent_ng_template_3_table_4_Template,10,4,\"table\",7),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.operator?ctx_r2.i18n.groupMembership.title.historyOperator:ctx_r2.i18n.groupMembership.title.historyUser)(\"mobileHeading\",ctx_r2.operator?ctx_r2.i18n.groupMembership.mobileTitle.historyOperator:ctx_r2.i18n.groupMembership.mobileTitle.historyUser),core.xb(1),core.gc(\"user\",ctx_r2.data.user),core.xb(1),core.gc(\"results\",ctx_r2.data.history)}}let view_user_group_history_component_ViewUserGroupHistoryComponent=(()=>{class ViewUserGroupHistoryComponent extends base_view_page_component.a{constructor(injector,groupMembershipService,userHelper){super(injector),this.groupMembershipService=groupMembershipService,this.userHelper=userHelper}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.groupMembershipService.getGroupMembershipData({user:this.param,fields:[\"user\",\"history\"]}).subscribe(data=>{this.data=data}))}get operator(){return this.userHelper.isOperator(this.data.user)}resolveMenu(data){return this.menu.searchUsersMenu(data.user)}}return ViewUserGroupHistoryComponent.ɵfac=function(t){return new(t||ViewUserGroupHistoryComponent)(core.Kb(core.r),core.Kb(group_membership_service.a),core.Kb(user_helper_service.a))},ViewUserGroupHistoryComponent.ɵcmp=core.Eb({type:ViewUserGroupHistoryComponent,selectors:[[\"view-user-group-history\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[3,\"heading\",\"mobileHeading\"],[3,\"user\"],[3,\"results\"],[3,\"date\",4,\"mobileResult\"],[\"class\",\"table table-hover\",4,\"resultTable\"],[3,\"date\"],[1,\"cell-main\"],[\"class\",\"cell-text\",4,\"ngIf\"],[1,\"cell-text\"],[1,\"table\",\"table-hover\"],[4,\"ngFor\",\"ngForOf\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewUserGroupHistoryComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,ViewUserGroupHistoryComponent_ng_template_3_Template,5,4,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a,common.s],pipes:[common.b,date_pipe.a],encapsulation:2,changeDetection:0}),ViewUserGroupHistoryComponent})();function ViewUserGroupComponent_page_content_2_ng_container_5_field_option_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",11),2&rf){const group_r3=ctx.$implicit,ctx_r2=core.Zb(3);core.gc(\"value\",ctx_r2.ApiHelper.internalNameOrId(group_r3))(\"id\",group_r3.id)(\"internalName\",group_r3.internalName)(\"text\",group_r3.name)}}function ViewUserGroupComponent_page_content_2_ng_container_5_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Ob(0),core.Lb(1,\"hr\"),core.Qb(2,\"form\",6),core.Qb(3,\"single-selection-field\",7),core.Bc(4,ViewUserGroupComponent_page_content_2_ng_container_5_field_option_4_Template,1,4,\"field-option\",8),core.Pb(),core.Lb(5,\"textarea-field\",9),core.Pb(),core.Qb(6,\"actions\"),core.Qb(7,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r5),core.Zb(2).save()})),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r1=core.Zb(2);core.xb(2),core.gc(\"formGroup\",ctx_r1.form),core.xb(1),core.gc(\"label\",ctx_r1.i18n.groupMembership.new)(\"required\",!ctx_r1.allowEmptyGroup)(\"emptyOption\",ctx_r1.allowEmptyGroup?ctx_r1.i18n.user.operatorNoGroup:null),core.xb(1),core.gc(\"ngForOf\",ctx_r1.data.possibleNewGroups),core.xb(1),core.gc(\"label\",ctx_r1.i18n.general.comments),core.xb(2),core.gc(\"label\",ctx_r1.i18n.general.submit)}}function ViewUserGroupComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",2),core.ac(1,\"async\"),core.Lb(2,\"user-info\",3),core.Qb(3,\"label-value\",4),core.Dc(4),core.Pb(),core.Bc(5,ViewUserGroupComponent_page_content_2_ng_container_5_Template,8,7,\"ng-container\",5),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.operator?ctx_r0.i18n.groupMembership.title.groupOperator:ctx_r0.i18n.groupMembership.title.groupUser)(\"mobileHeading\",ctx_r0.operator?ctx_r0.i18n.groupMembership.mobileTitle.groupOperator:ctx_r0.i18n.groupMembership.mobileTitle.groupUser)(\"headingActions\",core.bc(1,7,ctx_r0.headingActions$)),core.xb(2),core.gc(\"user\",ctx_r0.data.user),core.xb(1),core.gc(\"label\",ctx_r0.i18n.groupMembership.current),core.xb(1),core.Fc(\" \",ctx_r0.data.group?ctx_r0.data.group.name:ctx_r0.i18n.user.operatorNoGroup,\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r0.editable)}}let view_user_group_component_ViewUserGroupComponent=(()=>{class ViewUserGroupComponent extends base_view_page_component.a{constructor(injector,userHelper,groupMembershipService){super(injector),this.userHelper=userHelper,this.groupMembershipService=groupMembershipService}get editable(){return!Object(helper.h)(this.data.possibleNewGroups)}get operator(){return this.userHelper.isOperator(this.data.user)}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.groupMembershipService.getGroupMembershipData({user:this.param,fields:[\"-history\"]}).subscribe(data=>{this.data=data}))}onDataInitialized(data){this.allowEmptyGroup=this.userHelper.isOperator(data.user)&&!!data.group,this.form=this.formBuilder.group({group:this.allowEmptyGroup?null:[null,fesm2015_forms.G.required],comment:null}),this.headingActions=[new action.c(\"history\",this.i18n.general.viewHistory,()=>this.router.navigate([\"users\",this.param,\"group\",\"history\"]),!0)]}save(){if(Object(helper.F)(this.form),!this.form.valid)return;const group=this.data.possibleNewGroups.find(g=>g.id===this.form.value.group);let title,message;title=this.userHelper.isOperator(this.data.user)?this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeOperator:this.i18n.userStatus.title.changeOperator:this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeUser:this.i18n.userStatus.title.changeUser,message=group?this.i18n.groupMembership.confirm({user:this.data.user.display,group:group?group.name:this.i18n.user.operatorNoGroup}):this.i18n.groupMembership.confirmAliasOperator(this.data.user.display),this.notification.confirm({title:title,message:message,callback:()=>this.submit()})}submit(){this.addSub(this.groupMembershipService.changeGroupMembership({user:this.param,body:this.form.value}).subscribe(()=>{this.notification.snackBar(this.operator?this.i18n.groupMembership.doneOperator:this.i18n.groupMembership.doneUser),this.reload()}))}resolveMenu(data){return this.menu.searchUsersMenu(data.user)}}return ViewUserGroupComponent.ɵfac=function(t){return new(t||ViewUserGroupComponent)(core.Kb(core.r),core.Kb(user_helper_service.a),core.Kb(group_membership_service.a))},ViewUserGroupComponent.ɵcmp=core.Eb({type:ViewUserGroupComponent,selectors:[[\"view-user-group\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngIf\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"user\"],[3,\"label\"],[4,\"ngIf\"],[3,\"formGroup\"],[\"formControlName\",\"group\",3,\"label\",\"required\",\"emptyOption\"],[3,\"value\",\"id\",\"internalName\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"comment\",3,\"label\"],[3,\"label\",\"action\"],[3,\"value\",\"id\",\"internalName\",\"text\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewUserGroupComponent_page_content_2_Template,6,9,\"page-content\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,label_value_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,common.s,textarea_field_component.a,actions_component.a,action_button_component.a,field_option_directive.a],pipes:[common.b],encapsulation:2,changeDetection:0}),ViewUserGroupComponent})();var identity_providers_service=__webpack_require__(\"fGFU\");function UserIdentityProvidersComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function UserIdentityProvidersComponent_ng_template_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"user-info\",7),core.Lb(2,\"hr\"),core.Nb()),2&rf){const ctx_r5=core.Zb(2);core.xb(1),core.gc(\"user\",ctx_r5.data.user)}}function UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\",18)}function UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_avatar_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"avatar\",19),2&rf){const uip_r8=core.Zb().$implicit;core.gc(\"size\",64)(\"image\",uip_r8.identityProvider.image)}}function UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_div_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.ac(2,\"dateTime\"),core.Pb()),2&rf){const uip_r8=core.Zb().$implicit,ctx_r12=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r12.i18n.identityProvider.connectedOn(core.bc(2,1,uip_r8.linkDate)),\" \")}}function UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_div_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.Pb()),2&rf){const ctx_r13=core.Zb(4);core.xb(1),core.Fc(\" \",ctx_r13.i18n.identityProvider.disconnected,\" \")}}function UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_div_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.Pb()),2&rf){const uip_r8=core.Zb().$implicit;core.xb(1),core.Fc(\" \",uip_r8.name,\" \")}}function UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_div_13_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.Pb()),2&rf){const uip_r8=core.Zb().$implicit;core.xb(1),core.Fc(\" \",uip_r8.email,\" \")}}const user_identity_providers_component_c0=function(a0){return{\"mb-3\":a0}};function UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_action_button_15_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"action-button\",20),core.Xb(\"action\",(function(){return ctx.$implicit.onClick()})),core.Pb()),2&rf){const action_r21=ctx.$implicit;core.gc(\"ngClass\",core.jc(2,user_identity_providers_component_c0,!ctx.last))(\"label\",action_r21.label)}}const user_identity_providers_component_c1=function(a0){return{\"mt-0\":a0}};function UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_hr_1_Template,1,0,\"hr\",9),core.Qb(2,\"div\",10),core.Qb(3,\"div\",11),core.Bc(4,UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_avatar_4_Template,1,2,\"avatar\",12),core.ac(5,\"async\"),core.Pb(),core.Qb(6,\"div\",13),core.Qb(7,\"h2\",14),core.Dc(8),core.Pb(),core.Qb(9,\"div\",15),core.Bc(10,UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_div_10_Template,3,3,\"div\",5),core.Bc(11,UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_div_11_Template,2,1,\"div\",5),core.Bc(12,UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_div_12_Template,2,1,\"div\",5),core.Bc(13,UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_div_13_Template,2,1,\"div\",5),core.Pb(),core.Pb(),core.Qb(14,\"div\",16),core.Bc(15,UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_action_button_15_Template,1,4,\"action-button\",17),core.Pb(),core.Pb(),core.Nb()),2&rf){const uip_r8=ctx.$implicit,first_r9=ctx.first,ctx_r7=core.Zb(3);core.xb(1),core.gc(\"ngIf\",!first_r9),core.xb(3),core.gc(\"ngIf\",core.bc(5,9,ctx_r7.layout.gtxxs$)),core.xb(3),core.gc(\"ngClass\",core.jc(11,user_identity_providers_component_c1,first_r9)),core.xb(1),core.Fc(\" \",uip_r8.identityProvider.name,\"\"),core.xb(2),core.gc(\"ngIf\",uip_r8.linkDate),core.xb(1),core.gc(\"ngIf\",\"linked\"!==uip_r8.status),core.xb(1),core.gc(\"ngIf\",uip_r8.name),core.xb(1),core.gc(\"ngIf\",uip_r8.email),core.xb(2),core.gc(\"ngForOf\",ctx_r7.actions(uip_r8))}}function UserIdentityProvidersComponent_ng_template_3_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,UserIdentityProvidersComponent_ng_template_3_ng_container_2_ng_container_1_Template,16,13,\"ng-container\",8),core.Nb()),2&rf){const ctx_r6=core.Zb(2);core.xb(1),core.gc(\"ngForOf\",ctx_r6.data.identityProviders)}}function UserIdentityProvidersComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",4),core.Bc(1,UserIdentityProvidersComponent_ng_template_3_ng_container_1_Template,3,1,\"ng-container\",5),core.Bc(2,UserIdentityProvidersComponent_ng_template_3_ng_container_2_Template,2,1,\"ng-container\",6),core.Pb()),2&rf){const ctx_r2=core.Zb(),_r3=core.qc(6);core.gc(\"heading\",ctx_r2.title)(\"mobileHeading\",ctx_r2.mobileTitle),core.xb(1),core.gc(\"ngIf\",ctx_r2.data.user&&!ctx_r2.self),core.xb(1),core.gc(\"ngIf\",ctx_r2.data.identityProviders.length>0)(\"ngIfElse\",_r3)}}function UserIdentityProvidersComponent_ng_template_5_Template(rf,ctx){if(1&rf&&core.Dc(0),2&rf){const ctx_r4=core.Zb();core.Fc(\" \",ctx_r4.i18n.identityProvider.noResults,\"\\n\")}}let user_identity_providers_component_UserIdentityProvidersComponent=(()=>{class UserIdentityProvidersComponent extends base_page_component.a{constructor(injector,identityProvidersService){super(injector),this.identityProvidersService=identityProvidersService}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.identityProvidersService.getUserIdentityProvidersListData({user:this.param}).subscribe(data=>{this.data=data}))}onDataInitialized(data){this.self=this.authHelper.isSelf(data.user),this.title=this.self?this.i18n.identityProvider.title.manageSelf:this.i18n.identityProvider.title.manageUser,this.mobileTitle=this.self?this.i18n.identityProvider.mobileTitle.manageSelf:this.i18n.identityProvider.mobileTitle.manageUser}actions(uip){const actions=[];return uip.status!==models.Gb.LINKED&&this.data.canLink&&actions.push(new action.a(this.i18n.identityProvider.action.connect,()=>{this.connect(uip)})),uip.status===models.Gb.LINKED&&this.data.canEdit&&actions.push(new action.a(this.i18n.identityProvider.action.disconnect,()=>{this.disconnect(uip)})),actions}connect(uip){this.addSub(this.authHelper.identityProviderPopup(uip.identityProvider,\"link\").subscribe(callback=>{this.notification.snackBar(this.i18n.identityProvider.action.connectDone({name:callback.name,provider:callback.identityProvider.name})),this.reload()}))}disconnect(uip){this.notification.confirm({title:this.i18n.identityProvider.action.disconnect,message:this.i18n.identityProvider.action.disconnectConfirm(uip.identityProvider.name),callback:()=>this.doDisconnect(uip)})}doDisconnect(uip){const idp=uip.identityProvider;this.addSub(this.identityProvidersService.deleteUserIdentityProvider({user:this.param,identityProvider:idp.internalName,disable:!0}).subscribe(()=>{this.notification.info(this.i18n.identityProvider.action.disconnectDone(idp.name)),this.reload()}))}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.IDENTITY_PROVIDERS)}}return UserIdentityProvidersComponent.ɵfac=function(t){return new(t||UserIdentityProvidersComponent)(core.Kb(core.r),core.Kb(identity_providers_service.a))},UserIdentityProvidersComponent.ɵcmp=core.Eb({type:UserIdentityProvidersComponent,selectors:[[\"user-identity-providers\"]],features:[core.ub],decls:7,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"noResults\",\"\"],[3,\"heading\",\"mobileHeading\"],[4,\"ngIf\"],[4,\"ngIf\",\"ngIfElse\"],[\"labelCols\",\"2\",3,\"user\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"mt-4\",4,\"ngIf\"],[1,\"row\",\"no-gutters\"],[1,\"col-4\",\"col-xs-3\",\"col-md-2\"],[\"class\",\"ml-2 mr-5 management\",\"iconSize\",\"64px\",\"icon\",\"perm_identity\",3,\"size\",\"image\",4,\"ngIf\"],[1,\"col-8\",\"col-xs-9\",\"col-md-7\"],[1,\"border-0\",\"mb-3\",3,\"ngClass\"],[1,\"mt-2\"],[1,\"col-12\",\"col-md-3\",\"mt-3\",\"mt-md-0\"],[\"class\",\"d-block ml-auto\",3,\"ngClass\",\"label\",\"action\",4,\"ngFor\",\"ngForOf\"],[1,\"mt-4\"],[\"iconSize\",\"64px\",\"icon\",\"perm_identity\",1,\"ml-2\",\"mr-5\",\"management\",3,\"size\",\"image\"],[1,\"d-block\",\"ml-auto\",3,\"ngClass\",\"label\",\"action\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,UserIdentityProvidersComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,UserIdentityProvidersComponent_ng_template_3_Template,3,5,\"ng-template\",null,2,core.Cc),core.Bc(5,UserIdentityProvidersComponent_ng_template_5_Template,1,1,\"ng-template\",null,3,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,common.s,common.q,avatar_component.a,action_button_component.a],pipes:[common.b,date_time_pipe.a],encapsulation:2,changeDetection:0}),UserIdentityProvidersComponent})();var notification_settings_service=__webpack_require__(\"+QOm\"),notification_type_setting_component=__webpack_require__(\"dCJh\"),decimal_field_component=__webpack_require__(\"iXUt\");function NotificationSettingsFormComponent_ng_container_2_boolean_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",9),2&rf){const ctx_r3=core.Zb(2);core.gc(\"label\",ctx_r3.i18n.notificationSettings.forwardMessages)(\"disabled\",!ctx_r3.data.editable)}}const notification_settings_form_component_c0=function(a0){return{\"border-top-0\":a0}};function NotificationSettingsFormComponent_ng_container_2_ng_container_4_ng_container_1_h2_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"h2\",13),core.Dc(1),core.Pb()),2&rf){const ctx_r13=core.Zb(4);core.gc(\"ngClass\",core.jc(2,notification_settings_form_component_c0,!ctx_r13.data.forwardMessagesAllowed)),core.xb(1),core.Fc(\" \",ctx_r13.i18n.notificationSettings.payments,\"\")}}function NotificationSettingsFormComponent_ng_container_2_ng_container_4_ng_container_1_h3_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"h3\",14),core.Dc(1),core.Pb()),2&rf){const at_r9=core.Zb(2).$implicit;core.xb(1),core.Fc(\" \",at_r9.name,\" \")}}function NotificationSettingsFormComponent_ng_container_2_ng_container_4_ng_container_1_ng_container_4_Template(rf,ctx){1&rf&&core.Mb(0)}const notification_settings_form_component_c1=function(a0){return{$implicit:a0}};function NotificationSettingsFormComponent_ng_container_2_ng_container_4_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,NotificationSettingsFormComponent_ng_container_2_ng_container_4_ng_container_1_h2_1_Template,2,4,\"h2\",10),core.Ob(2,4),core.Bc(3,NotificationSettingsFormComponent_ng_container_2_ng_container_4_ng_container_1_h3_3_Template,2,1,\"h3\",11),core.Bc(4,NotificationSettingsFormComponent_ng_container_2_ng_container_4_ng_container_1_ng_container_4_Template,1,0,\"ng-container\",12),core.Nb(),core.Nb()),2&rf){const accountForm_r12=ctx.ngIf,ctx_r17=core.Zb(),first_r10=ctx_r17.first,at_r9=ctx_r17.$implicit,ctx_r11=core.Zb(2),_r1=core.qc(4);core.xb(1),core.gc(\"ngIf\",first_r10),core.xb(1),core.gc(\"formGroup\",accountForm_r12),core.xb(1),core.gc(\"ngIf\",!ctx_r11.singleAccount),core.xb(1),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.jc(5,notification_settings_form_component_c1,at_r9))}}function NotificationSettingsFormComponent_ng_container_2_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,NotificationSettingsFormComponent_ng_container_2_ng_container_4_ng_container_1_Template,5,7,\"ng-container\",1),core.Nb()),2&rf){const at_r9=ctx.$implicit,ctx_r4=core.Zb(2);core.xb(1),core.gc(\"ngIf\",ctx_r4.form.get(\"userAccounts\").get(at_r9.id))}}function NotificationSettingsFormComponent_ng_container_2_multi_selection_field_5_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",17),2&rf){const cat_r19=ctx.$implicit,ctx_r18=core.Zb(3);core.gc(\"value\",ctx_r18.ApiHelper.internalNameOrId(cat_r19))(\"id\",cat_r19.id)(\"internalName\",cat_r19.internalName)(\"text\",cat_r19.name)}}function NotificationSettingsFormComponent_ng_container_2_multi_selection_field_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"multi-selection-field\",15),core.Bc(1,NotificationSettingsFormComponent_ng_container_2_multi_selection_field_5_field_option_1_Template,1,4,\"field-option\",16),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.notificationSettings.forwardMessages),core.xb(1),core.gc(\"ngForOf\",ctx_r5.data.messageCategories)}}const _c2=function(a0){return{\"section-title-action\":a0}},_c3=function(a0,a1){return{\"mr-3\":a0,\"mb-2\":a1}};function NotificationSettingsFormComponent_ng_container_2_ng_container_6_h2_1_div_3_Template(rf,ctx){if(1&rf){const _r27=core.Rb();core.Qb(0,\"div\",13),core.ac(1,\"async\"),core.Qb(2,\"action-button\",21),core.Xb(\"action\",(function(){core.sc(_r27);const section_r20=core.Zb(2).$implicit;return core.Zb(2).enableNotifications(section_r20,!0)})),core.ac(3,\"async\"),core.ac(4,\"async\"),core.Pb(),core.Qb(5,\"action-button\",22),core.Xb(\"action\",(function(){core.sc(_r27);const section_r20=core.Zb(2).$implicit;return core.Zb(2).enableNotifications(section_r20,!1)})),core.Pb(),core.Pb()}if(2&rf){const ctx_r24=core.Zb(4);core.gc(\"ngClass\",core.jc(10,_c2,core.bc(1,4,ctx_r24.layout.gtsm$))),core.xb(2),core.gc(\"ngClass\",core.kc(12,_c3,!core.bc(3,6,ctx_r24.layout.ltxs$),core.bc(4,8,ctx_r24.layout.ltxs$)))(\"label\",ctx_r24.i18n.notificationSettings.enableAll),core.xb(3),core.gc(\"label\",ctx_r24.i18n.notificationSettings.disableAll)}}function NotificationSettingsFormComponent_ng_container_2_ng_container_6_h2_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"h2\",19),core.Qb(1,\"div\",20),core.Dc(2),core.Pb(),core.Bc(3,NotificationSettingsFormComponent_ng_container_2_ng_container_6_h2_1_div_3_Template,6,15,\"div\",10),core.Pb()),2&rf){const ctx_r30=core.Zb(),first_r21=ctx_r30.first,section_r20=ctx_r30.$implicit,ctx_r22=core.Zb(2);core.gc(\"ngClass\",core.jc(3,notification_settings_form_component_c0,first_r21&&0===ctx_r22.data.userAccounts.length&&0===ctx_r22.data.messageCategories.length&&!ctx_r22.data.forwardMessagesAllowed)),core.xb(2),core.Fc(\" \",section_r20,\" \"),core.xb(1),core.gc(\"ngIf\",!ctx_r22.adminSettings&&ctx_r22.notificationSections.get(section_r20).length>3&&ctx_r22.data.editable)}}function NotificationSettingsFormComponent_ng_container_2_ng_container_6_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"label-value\",23),core.Lb(2,\"notification-type-setting\",24),core.Pb(),core.Nb()),2&rf){const notification_r31=ctx.$implicit,ctx_r23=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r23.resolveNotificationLabel(notification_r31)),core.xb(1),core.gc(\"setting\",notification_r31)(\"options\",ctx_r23.kindFieldOptionsMap.get(notification_r31.kind))(\"form\",ctx_r23.resolveControl(notification_r31.kind))(\"multiSelectionControl\",ctx_r23.kindControlsMap.get(notification_r31.kind))(\"disabled\",!ctx_r23.data.editable)}}function NotificationSettingsFormComponent_ng_container_2_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,NotificationSettingsFormComponent_ng_container_2_ng_container_6_h2_1_Template,4,5,\"h2\",18),core.Bc(2,NotificationSettingsFormComponent_ng_container_2_ng_container_6_ng_container_2_Template,3,6,\"ng-container\",6),core.Nb()),2&rf){const section_r20=ctx.$implicit,ctx_r6=core.Zb(2);core.xb(1),core.gc(\"ngIf\",\"\"!==section_r20),core.xb(1),core.gc(\"ngForOf\",ctx_r6.notificationSections.get(section_r20))}}const _c4=function(a0,a1){return{count:a0,total:a1}};function NotificationSettingsFormComponent_ng_container_2_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\"),core.Dc(2),core.Pb(),core.Qb(3,\"label\"),core.Dc(4),core.Pb(),core.Nb()),2&rf){const ctx_r7=core.Zb(2);core.xb(2),core.Ec(ctx_r7.i18n.general.sendMedium.sms),core.xb(2),core.Ec(ctx_r7.i18n.notificationSettings.smsCount(core.kc(2,_c4,ctx_r7.data.smsCountThisMonth,ctx_r7.data.maxSmsPerMonth)))}}function NotificationSettingsFormComponent_ng_container_2_action_button_9_Template(rf,ctx){if(1&rf){const _r33=core.Rb();core.Qb(0,\"action-button\",25),core.Xb(\"action\",(function(){return core.sc(_r33),core.Zb(2).save()})),core.ac(1,\"async\"),core.Pb()}if(2&rf){const ctx_r8=core.Zb(2);core.gc(\"disabled\",core.bc(1,2,ctx_r8.requesting$))(\"label\",ctx_r8.i18n.general.save)}}function NotificationSettingsFormComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",3),core.Qb(2,\"form\",4),core.Bc(3,NotificationSettingsFormComponent_ng_container_2_boolean_field_3_Template,1,2,\"boolean-field\",5),core.Bc(4,NotificationSettingsFormComponent_ng_container_2_ng_container_4_Template,2,1,\"ng-container\",6),core.Bc(5,NotificationSettingsFormComponent_ng_container_2_multi_selection_field_5_Template,2,2,\"multi-selection-field\",7),core.Bc(6,NotificationSettingsFormComponent_ng_container_2_ng_container_6_Template,3,2,\"ng-container\",6),core.Bc(7,NotificationSettingsFormComponent_ng_container_2_ng_container_7_Template,5,5,\"ng-container\",1),core.Pb(),core.Qb(8,\"actions\"),core.Bc(9,NotificationSettingsFormComponent_ng_container_2_action_button_9_Template,2,4,\"action-button\",8),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.i18n.notificationSettings.title)(\"mobileHeading\",ctx_r0.i18n.notificationSettings.mobileTitle),core.xb(1),core.gc(\"formGroup\",ctx_r0.form),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.forwardMessagesAllowed),core.xb(1),core.gc(\"ngForOf\",ctx_r0.data.userAccounts),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.messageCategories.length>0),core.xb(1),core.gc(\"ngForOf\",ctx_r0.notificationSections.keys()),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.smsAllowed),core.xb(2),core.gc(\"ngIf\",ctx_r0.data.editable)}}function NotificationSettingsFormComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Ob(0,4),core.Lb(1,\"decimal-field\",26),core.Lb(2,\"decimal-field\",27),core.Nb()),2&rf){const at_r34=ctx.$implicit,ctx_r2=core.Zb();core.gc(\"formGroup\",ctx_r2.form.get(\"userAccounts\").get(at_r34.id).get(\"paymentAmount\")),core.xb(1),core.gc(\"label\",ctx_r2.i18n.notificationSettings.paymentNotificationsAbove)(\"scale\",at_r34.currency.decimalDigits)(\"prefix\",at_r34.currency.prefix)(\"suffix\",at_r34.currency.suffix)(\"disabled\",!ctx_r2.data.editable)(\"emptyLabel\",ctx_r2.i18n.general.notSet),core.xb(1),core.gc(\"label\",ctx_r2.i18n.notificationSettings.paymentNotificationsBelow)(\"scale\",at_r34.currency.decimalDigits)(\"prefix\",at_r34.currency.prefix)(\"suffix\",at_r34.currency.suffix)(\"disabled\",!ctx_r2.data.editable)(\"emptyLabel\",ctx_r2.i18n.general.notSet)}}let notification_settings_form_component_NotificationSettingsFormComponent=(()=>{class NotificationSettingsFormComponent extends base_page_component.a{constructor(injector,notificationSettingsService){super(injector),this.notificationSettingsService=notificationSettingsService,this.notificationSections=new Map,this.kindControlsMap=new Map,this.kindFieldOptionsMap=new Map}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.notificationSettingsService.getNotificationSettingsDataForEdit({user:this.user}).subscribe(data=>this.data=data))}onDataInitialized(data){if(this.adminSettings=data.role===models.kb.ADMINISTRATOR,this.form=this.formBuilder.group({version:data.settings.version}),this.adminSettings){if(!this.hasSettings(data))return void this.notification.info(this.i18n.notificationSettings.notAvailableSettings);this.notificationSections.set(\"\",data.settings.notifications),this.form.addControl(\"forwardMessageCategories\",this.formBuilder.control(data.settings.forwardMessageCategories))}data.forwardMessagesAllowed&&this.form.setControl(\"forwardMessages\",this.formBuilder.control(data.settings.forwardMessages));const kinds=[],notificationValues=this.formBuilder.array([]);for(const value of data.settings.notifications){const typeForm=this.formBuilder.group({internal:value.internal,kind:value.kind,sms:void 0===value.sms?null:value.sms,email:void 0===value.email?null:value.email});if(this.addSub(typeForm.controls.internal.valueChanges.subscribe(()=>{this.updateControls(typeForm)})),this.updateControls(typeForm),notificationValues.push(typeForm),kinds.push(value.kind),!this.adminSettings){const section=this.resolveSection(value.kind),values=this.notificationSections.get(section);values?values.push(value):this.notificationSections.set(section,[value])}}if(kinds.length>0)for(const kind of kinds){let options,values,property;[options,values,property]=this.resolveOptions(kind,data);const control=this.formBuilder.control(values);this.kindControlsMap.set(kind,control),this.form.setControl(property,control),this.kindFieldOptionsMap.set(kind,options)}if(this.form.setControl(\"notifications\",notificationValues),!Object(helper.h)(data.userAccounts)){this.singleAccount=1===data.userAccounts.length;const accountControls=this.formBuilder.group({});for(const at of data.userAccounts){const notificationAmount=(data.settings.userAccounts[this.ApiHelper.internalNameOrId(at)]||{}).paymentAmount||{};accountControls.setControl(at.id,this.formBuilder.group({paymentAmount:this.formBuilder.group({min:notificationAmount.min,max:notificationAmount.max})}))}this.form.setControl(\"userAccounts\",accountControls)}}updateControls(typeForm){typeForm.controls.internal.value?(typeForm.controls.sms&&typeForm.controls.sms.enable(),typeForm.controls.email&&typeForm.controls.email.enable()):(typeForm.controls.sms&&typeForm.controls.sms.disable(),typeForm.controls.email&&typeForm.controls.email.disable())}save(){const request=this.notificationSettingsService.saveNotificationSettings({user:this.user,body:this.form.value});this.addSub(request.subscribe(()=>{this.reload(),this.notification.snackBar(this.i18n.notificationSettings.saved)}))}hasSettings(data){return!(Object(helper.h)(data.settings.notifications)||this.adminSettings&&Object(helper.h)(data.messageCategories))}resolveSection(kind){return kind.startsWith(\"account\")?this.i18n.notificationSettings.accounts:kind.startsWith(\"personal\")?this.i18n.notificationSettings.personal:kind.startsWith(\"buyer\")?this.i18n.notificationSettings.marketplaceAsBuyer:kind.startsWith(\"seller\")?this.i18n.notificationSettings.marketplaceAsSeller:kind.startsWith(\"reference\")||kind.startsWith(\"feedback\")?this.i18n.notificationSettings.feedbackAndReferences:\"\"}resolveMenu(){return this.adminSettings||this.user===this.ApiHelper.SELF?menu.b.NOTIFICATIONS_SETTINGS:this.menu.searchUsersMenu()}resolveControl(kind){const controls=this.form.controls.notifications.controls;for(const control of controls){const typeForm=control;if(typeForm.controls.kind.value===kind)return typeForm}return null}enableNotifications(section,enable){for(const medium of this.notificationSections.get(section))this.resolveControl(medium.kind).controls.internal.setValue(enable)}resolveNotificationLabel(notification){switch(notification.kind){case models.J.ADMIN_AD_PENDING_AUTHORIZATION:return this.i18n.notification.admin.adPendingAuthorization;case models.J.ADMIN_APPLICATION_ERROR:return this.i18n.notification.admin.applicationErrors;case models.J.ADMIN_EXTERNAL_PAYMENT_EXPIRED:return this.i18n.notification.admin.externalPaymentExpired;case models.J.ADMIN_EXTERNAL_PAYMENT_PERFORMED_FAILED:return this.i18n.notification.admin.externalPaymentPerformedFailed;case models.J.ADMIN_GENERATED_VOUCHERS_ABOUT_TO_EXPIRE:return this.i18n.notification.admin.generatedVouchersAboutToExpire;case models.J.ADMIN_GENERATED_VOUCHERS_EXPIRED:return this.i18n.notification.admin.generatedVouchersExpired;case models.J.ADMIN_NETWORK_CREATED:return this.i18n.notification.admin.networkCreated;case models.J.ADMIN_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.admin.paymentAwaitingAuthorization;case models.J.ADMIN_PAYMENT_PERFORMED:return this.i18n.notification.admin.paymentPerformed;case models.J.ADMIN_SYSTEM_ALERT:return this.i18n.notification.admin.systemAlert;case models.J.ADMIN_USER_ALERT:return this.i18n.notification.admin.userAlert;case models.J.ADMIN_USER_IMPORT_REGISTRATION:return\"\";case models.J.ADMIN_USER_REGISTRATION:return this.i18n.notification.admin.userRegistration;case models.J.ADMIN_VOUCHER_BUYING_ABOUT_TO_EXPIRE:return this.i18n.notification.admin.voucherBuyingAboutToExpire;case models.J.ACCOUNT_ALL_NON_SMS_PERFORMED_PAYMENTS:return this.i18n.notification.user.account.allNonSmsPerformedPayments;case models.J.ACCOUNT_AUTHORIZED_PAYMENT_CANCELED:return this.i18n.notification.user.account.authorizedPaymentCanceled;case models.J.ACCOUNT_AUTHORIZED_PAYMENT_DENIED:return this.i18n.notification.user.account.authorizedPaymentDenied;case models.J.ACCOUNT_AUTHORIZED_PAYMENT_EXPIRED:return this.i18n.notification.user.account.authorizedPaymentExpired;case models.J.ACCOUNT_AUTHORIZED_PAYMENT_SUCCEEDED:return this.i18n.notification.user.account.authorizedPaymentSucceeded;case models.J.ACCOUNT_BOUGHT_VOUCHERS_ABOUT_TO_EXPIRE:return this.i18n.notification.user.account.boughtVouchersAboutToExpire;case models.J.ACCOUNT_BOUGHT_VOUCHERS_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.boughtVouchersExpirationDateChanged;case models.J.ACCOUNT_BOUGHT_VOUCHERS_EXPIRED:return this.i18n.notification.user.account.boughtVouchersExpired;case models.J.ACCOUNT_EXTERNAL_PAYMENT_EXPIRED:return this.i18n.notification.user.account.externalPaymentExpired;case models.J.ACCOUNT_EXTERNAL_PAYMENT_PERFORMED_FAILED:return this.i18n.notification.user.account.externalPaymentPerformedFailed;case models.J.ACCOUNT_EXTERNAL_PAYMENT_RECEIVED_FAILED:return this.i18n.notification.user.account.externalPaymentReceivedFailed;case models.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_CANCELED:return this.i18n.notification.user.account.incomingRecurringPaymentCanceled;case models.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_FAILED:return this.i18n.notification.user.account.incomingRecurringPaymentFailed;case models.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_RECEIVED:return this.i18n.notification.user.account.incomingRecurringPaymentReceived;case models.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_CANCELED:return this.i18n.notification.user.account.incomingScheduledPaymentCanceled;case models.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_FAILED:return this.i18n.notification.user.account.incomingScheduledPaymentFailed;case models.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_RECEIVED:return this.i18n.notification.user.account.incomingScheduledPaymentReceived;case models.J.ACCOUNT_LIMIT_CHANGE:return this.i18n.notification.user.account.limitChange;case models.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_APPROVED_STILL_PENDING:return this.i18n.notification.user.account.operator.authorizedPaymentApprovedStillPending;case models.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_CANCELED:return this.i18n.notification.user.account.operator.authorizedPaymentCanceled;case models.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_DENIED:return this.i18n.notification.user.account.operator.authorizedPaymentDenied;case models.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_EXPIRED:return this.i18n.notification.user.account.operator.authorizedPaymentExpired;case models.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_SUCCEEDED:return this.i18n.notification.user.account.operator.authorizedPaymentSucceeded;case models.J.ACCOUNT_OPERATOR_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.user.account.operator.paymentAwaitingAuthorization;case models.J.ACCOUNT_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.user.account.paymentAwaitingAuthorization;case models.J.ACCOUNT_PAYMENT_RECEIVED:return this.i18n.notification.user.account.paymentReceived;case models.J.ACCOUNT_PAYMENT_REQUEST_CANCELED:return this.i18n.notification.user.account.paymentRequestCanceled;case models.J.ACCOUNT_PAYMENT_REQUEST_DENIED:return this.i18n.notification.user.account.paymentRequestDenied;case models.J.ACCOUNT_PAYMENT_REQUEST_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.paymentRequestExpirationDateChanged;case models.J.ACCOUNT_PAYMENT_REQUEST_EXPIRED:return this.i18n.notification.user.account.paymentRequestExpired;case models.J.ACCOUNT_PAYMENT_REQUEST_PROCESSED:return this.i18n.notification.user.account.paymentRequestProcessed;case models.J.ACCOUNT_PAYMENT_REQUEST_RECEIVED:return this.i18n.notification.user.account.paymentRequestReceived;case models.J.ACCOUNT_RECURRING_PAYMENT_FAILED:return this.i18n.notification.user.account.recurringPaymentFailed;case models.J.ACCOUNT_RECURRING_PAYMENT_OCCURRENCE_PROCESSED:return this.i18n.notification.user.account.recurringPaymentOcurrenceProcessed;case models.J.ACCOUNT_SCHEDULED_PAYMENT_FAILED:return this.i18n.notification.user.account.scheduledPaymentFailed;case models.J.ACCOUNT_SCHEDULED_PAYMENT_INSTALLMENT_PROCESSED:return this.i18n.notification.user.account.scheduledPaymentInstallmentProcessed;case models.J.ACCOUNT_SCHEDULED_PAYMENT_REQUEST_FAILED:return this.i18n.notification.user.account.scheduledPaymentRequestFailed;case models.J.ACCOUNT_SENT_PAYMENT_REQUEST_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.sentPaymentRequestExpirationDateChanged;case models.J.ACCOUNT_SMS_PERFORMED_PAYMENT:return this.i18n.notification.user.account.smsPerformedPayment;case models.J.ACCOUNT_TICKET_WEBHOOK_FAILED:return this.i18n.notification.user.account.ticketWebhookFailed;case models.J.BROKERING_AD_PENDING_AUTHORIZATION:return this.i18n.notification.user.brokering.adPendingAuthorization;case models.J.BROKERING_MEMBER_ASSIGNED:return this.i18n.notification.user.brokering.memberAssigned;case models.J.BROKERING_MEMBER_UNASSIGNED:return this.i18n.notification.user.brokering.memberUnassigned;case models.J.BUYER_AD_INTEREST_NOTIFICATION:return this.i18n.notification.user.buyer.adInterestNotification;case models.J.BUYER_AD_QUESTION_ANSWERED:return this.i18n.notification.user.buyer.adQuestionAnswered;case models.J.BUYER_ORDER_CANCELED:return this.i18n.notification.user.buyer.orderCanceled;case models.J.BUYER_ORDER_PAYMENT_CANCELED:return this.i18n.notification.user.buyer.orderPaymentCanceled;case models.J.BUYER_ORDER_PAYMENT_DENIED:return this.i18n.notification.user.buyer.orderPaymentDenied;case models.J.BUYER_ORDER_PAYMENT_EXPIRED:return this.i18n.notification.user.buyer.orderPaymentExpired;case models.J.BUYER_ORDER_PENDING:return this.i18n.notification.user.buyer.orderPending;case models.J.BUYER_ORDER_PENDING_AUTHORIZATION:return this.i18n.notification.user.buyer.orderPendingAuthorization;case models.J.BUYER_ORDER_PENDING_DELIVERY_DATA:return this.i18n.notification.user.buyer.orderPendingDeliveryData;case models.J.BUYER_ORDER_PROCESSED_BY_SELLER:return this.i18n.notification.user.buyer.orderProcessedBySeller;case models.J.BUYER_ORDER_REJECTED_BY_SELLER:return this.i18n.notification.user.buyer.orderRejectedBySeller;case models.J.BUYER_SALE_PENDING:return this.i18n.notification.user.buyer.buyerSalePending;case models.J.BUYER_SALE_REJECTED_BY_SELLER:return this.i18n.notification.user.buyer.buyerSaleRejectedBySeller;case models.J.FEEDBACK_CHANGED:return this.i18n.notification.user.feedback.changed;case models.J.FEEDBACK_CREATED:return this.i18n.notification.user.feedback.created;case models.J.FEEDBACK_EXPIRATION_REMINDER:return this.i18n.notification.user.feedback.expirationReminder;case models.J.FEEDBACK_OPTIONAL:return this.i18n.notification.user.feedback.optional;case models.J.FEEDBACK_REPLY_CREATED:return this.i18n.notification.user.feedback.replyCreated;case models.J.FEEDBACK_REQUIRED:return this.i18n.notification.user.feedback.required;case models.J.PERSONAL_BROKER_ASSIGNED:return this.i18n.notification.user.personal.brokerAssigned;case models.J.PERSONAL_BROKER_UNASSIGNED:return this.i18n.notification.user.personal.brokerUnassigned;case models.J.PERSONAL_MAX_SMS_PER_MONTH_REACHED:return this.i18n.notification.user.personal.maxSmsPerMonthReached;case models.J.PERSONAL_NEW_TOKEN:return this.i18n.notification.user.personal.newToken;case models.J.PERSONAL_NEW_TOKEN_PENDING_ACTIVATION:return this.i18n.notification.user.personal.newTokenPendingActivation;case models.J.PERSONAL_PASSWORD_STATUS_CHANGED:return this.i18n.notification.user.personal.passwordStatusChanged;case models.J.PERSONAL_TOKEN_STATUS_CHANGED:return this.i18n.notification.user.personal.tokenStatusChanged;case models.J.PERSONAL_USER_STATUS_CHANGED:return this.i18n.notification.user.personal.userStatusChanged;case models.J.REFERENCE_CHANGED:return this.i18n.notification.user.reference.changed;case models.J.REFERENCE_CREATED:return this.i18n.notification.user.reference.created;case models.J.SELLER_AD_AUTHORIZED:return this.i18n.notification.user.seller.adAuthorized;case models.J.SELLER_AD_EXPIRED:return this.i18n.notification.user.seller.adExpired;case models.J.SELLER_AD_LOW_STOCK:return this.i18n.notification.user.seller.adLowStock;case models.J.SELLER_AD_OUT_OF_STOCK:return this.i18n.notification.user.seller.adOutOfStock;case models.J.SELLER_AD_QUESTION_CREATED:return this.i18n.notification.user.seller.adQuestionCreated;case models.J.SELLER_AD_REJECTED:return this.i18n.notification.user.seller.adRejected;case models.J.SELLER_ORDER_CANCELED:return this.i18n.notification.user.seller.orderCanceled;case models.J.SELLER_ORDER_CREATED:return this.i18n.notification.user.seller.orderCreated;case models.J.SELLER_ORDER_PAYMENT_CANCELED:return this.i18n.notification.user.seller.orderPaymentCanceled;case models.J.SELLER_ORDER_PAYMENT_DENIED:return this.i18n.notification.user.seller.orderPaymentDenied;case models.J.SELLER_ORDER_PAYMENT_EXPIRED:return this.i18n.notification.user.seller.orderPaymentExpired;case models.J.SELLER_ORDER_PENDING_AUTHORIZATION:return this.i18n.notification.user.seller.orderPendingAuthorization;case models.J.SELLER_ORDER_PENDING_DELIVERY_DATA:return this.i18n.notification.user.seller.orderPendingDeliveryData;case models.J.SELLER_ORDER_PROCESSED_BY_BUYER:return this.i18n.notification.user.seller.orderProcessedByBuyer;case models.J.SELLER_ORDER_REJECTED_BY_BUYER:return this.i18n.notification.user.seller.orderRejectedByBuyer;case models.J.SELLER_SALE_PROCESSED_BY_BUYER:return this.i18n.notification.user.seller.saleProcessedByBuyer}return\"\"}resolveOptions(kind,data){let entities,values,alerts,property,options;switch(kind){case models.J.ADMIN_EXTERNAL_PAYMENT_EXPIRED:entities=data.externalPayments,values=data.settings.externalPaymentsExpired,property=\"externalPaymentsExpired\";break;case models.J.ADMIN_EXTERNAL_PAYMENT_PERFORMED_FAILED:entities=data.externalPayments,values=data.settings.externalPaymentsFailed,property=\"externalPaymentsFailed\";break;case models.J.ADMIN_GENERATED_VOUCHERS_ABOUT_TO_EXPIRE:case models.J.ADMIN_GENERATED_VOUCHERS_EXPIRED:entities=data.voucherConfigurations,values=data.settings.voucherConfigurations,property=\"voucherConfigurations\";break;case models.J.ADMIN_VOUCHER_BUYING_ABOUT_TO_EXPIRE:entities=data.voucherConfigurations,values=data.settings.voucherConfigurationsBuying,property=\"voucherConfigurationsBuying\";break;case models.J.ADMIN_PAYMENT_AWAITING_AUTHORIZATION:entities=data.authorizablePayments,values=data.settings.authorizablePayments,property=\"authorizablePayments\";break;case models.J.ADMIN_PAYMENT_PERFORMED:entities=data.payments,values=data.settings.payments,property=\"payments\";break;case models.J.ADMIN_USER_REGISTRATION:entities=data.userGroups,values=data.settings.userGroups,property=\"userGroups\";break;case models.J.ADMIN_SYSTEM_ALERT:alerts=Object.values(models.rb),values=data.settings.systemAlerts,property=\"systemAlert\";break;case models.J.ADMIN_USER_ALERT:alerts=Object.values(models.Fb),values=data.settings.userAlerts,property=\"userAlert\"}return entities?options=entities.map(st=>({id:st.id,internalName:st.internalName,value:this.ApiHelper.internalNameOrId(st),text:st.name})):alerts&&(options=alerts.map(st=>({value:st,text:this.resolveAlertLabel(st)}))),[options,values,property]}resolveAlertLabel(alert){switch(alert){case models.rb.ACCOUNT_FEE_CHARGED_NO_FAILURES:return this.i18n.systemAlert.type.accountFeeChargedNoFailures;case models.rb.ACCOUNT_FEE_CHARGED_WITH_FAILURES:return this.i18n.systemAlert.type.accountFeeChargedWithFailures;case models.rb.APPLICATION_RESTARTED:return this.i18n.systemAlert.type.applicationRestarted;case models.rb.CUSTOM:return this.i18n.systemAlert.type.custom;case models.rb.MAX_GLOBAL_SMS_REACHED:return this.i18n.systemAlert.type.maxGlobalSmsReached;case models.rb.MAX_INCORRECT_LOGIN_ATTEMPTS:return this.i18n.systemAlert.type.maxIncorrectLoginAttempts;case models.Fb.CUSTOM:return this.i18n.userAlert.type.custom;case models.Fb.GIVEN_VERY_BAD_REFS:return this.i18n.userAlert.type.givenVeryBadRefs;case models.Fb.INSUFFICIENT_BALANCE_FOR_INITIAL_CREDIT:return this.i18n.userAlert.type.insufficientBalanceForInitialCredit;case models.Fb.MAX_DEVICE_ACTIVATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxDeviceActivationAttemptsReached;case models.Fb.MAX_DEVICE_CONFIRMATION_CHECK_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxDeviceConfirmationCheckAttemptsReached;case models.Fb.MAX_TOKEN_ACTIVATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxTokenActivationAttemptsReached;case models.Fb.MAX_USER_LOCALIZATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxUserLocalizationAttemptsReached;case models.Fb.MAX_VOUCHER_REDEEM_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxVoucherRedeemAttemptsReached;case models.Fb.MOVE_USER_AUTOMATICALLY_FAILED:return this.i18n.userAlert.type.moveUserAutomaticallyFailed;case models.Fb.PASSWORD_DISABLED_BY_TRIES:return this.i18n.userAlert.type.passwordDisabledByTries;case models.Fb.PASSWORD_TEMPORARILY_BLOCKED:return this.i18n.userAlert.type.passwordTemporarilyBlocked;case models.Fb.RECEIVED_VERY_BAD_REFS:return this.i18n.userAlert.type.receivedVeryBadRefs;case models.Fb.SCHEDULED_PAYMENT_FAILED:return this.i18n.userAlert.type.scheduledPaymentFailed}return\"\"}}return NotificationSettingsFormComponent.ɵfac=function(t){return new(t||NotificationSettingsFormComponent)(core.Kb(core.r),core.Kb(notification_settings_service.a))},NotificationSettingsFormComponent.ɵcmp=core.Eb({type:NotificationSettingsFormComponent,selectors:[[\"notification-settings-form\"]],features:[core.ub],decls:5,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[\"accountDetails\",\"\"],[3,\"heading\",\"mobileHeading\"],[3,\"formGroup\"],[\"formControlName\",\"forwardMessages\",3,\"label\",\"disabled\",4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"forwardMessageCategories\",3,\"label\",4,\"ngIf\"],[3,\"disabled\",\"label\",\"action\",4,\"ngIf\"],[\"formControlName\",\"forwardMessages\",3,\"label\",\"disabled\"],[3,\"ngClass\",4,\"ngIf\"],[\"class\",\"mt-3 mb-0\",4,\"ngIf\"],[4,\"ngTemplateOutlet\",\"ngTemplateOutletContext\"],[3,\"ngClass\"],[1,\"mt-3\",\"mb-0\"],[\"formControlName\",\"forwardMessageCategories\",3,\"label\"],[3,\"value\",\"id\",\"internalName\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"id\",\"internalName\",\"text\"],[\"class\",\"d-flex flex-column flex-xs-row justify-content-between\",3,\"ngClass\",4,\"ngIf\"],[1,\"d-flex\",\"flex-column\",\"flex-xs-row\",\"justify-content-between\",3,\"ngClass\"],[1,\"mb-2\",\"mb-xs-0\"],[\"outline\",\"\",3,\"ngClass\",\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\"],[\"kind\",\"field\",3,\"label\"],[3,\"setting\",\"options\",\"form\",\"multiSelectionControl\",\"disabled\"],[3,\"disabled\",\"label\",\"action\"],[\"formControlName\",\"min\",3,\"label\",\"scale\",\"prefix\",\"suffix\",\"disabled\",\"emptyLabel\"],[\"formControlName\",\"max\",3,\"label\",\"scale\",\"prefix\",\"suffix\",\"disabled\",\"emptyLabel\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,NotificationSettingsFormComponent_ng_container_2_Template,10,9,\"ng-container\",1),core.Pb(),core.Bc(3,NotificationSettingsFormComponent_ng_template_3_Template,3,13,\"ng-template\",null,2,core.Cc)),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,common.s,actions_component.a,boolean_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.A,common.q,multi_selection_field_component.a,field_option_directive.a,action_button_component.a,label_value_component.a,notification_type_setting_component.a,decimal_field_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),NotificationSettingsFormComponent})();var operator_groups_service=__webpack_require__(\"a50p\");function ListOperatorGroupsComponent_ng_container_2_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Qb(1,\"label-value\",8),core.Lb(2,\"user-link\",9),core.Pb(),core.Pb()),2&rf){const ctx_r1=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r1.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r1.data.user)}}function ListOperatorGroupsComponent_ng_container_2_mobile_result_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\"),core.Qb(1,\"div\",10),core.Dc(2),core.Pb(),core.Pb()),2&rf){const row_r4=ctx.$implicit;core.xb(2),core.Ec(row_r4.name)}}function ListOperatorGroupsComponent_ng_container_2_table_6_ng_container_2_Template(rf,ctx){if(1&rf){const _r8=core.Rb();core.Ob(0),core.Qb(1,\"tr\",13),core.Xb(\"click\",(function(){core.sc(_r8);const row_r6=ctx.$implicit,ctx_r7=core.Zb(3);return ctx_r7.router.navigate(ctx_r7.path(row_r6))})),core.Qb(2,\"td\"),core.Qb(3,\"a\",14),core.Dc(4),core.Pb(),core.Pb(),core.Qb(5,\"td\",15),core.Qb(6,\"button\",16),core.Xb(\"click\",(function($event){core.sc(_r8);const row_r6=ctx.$implicit;return core.Zb(3).remove(row_r6),$event.stopPropagation()})),core.Lb(7,\"icon\",17),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r6=ctx.$implicit,ctx_r5=core.Zb(3);core.xb(3),core.gc(\"routerLink\",ctx_r5.path(row_r6)),core.xb(1),core.Fc(\" \",row_r6.name,\" \"),core.xb(2),core.gc(\"tooltip\",ctx_r5.i18n.general.removeTooltip(row_r6.name))}}function ListOperatorGroupsComponent_ng_container_2_table_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",11),core.Qb(1,\"tbody\"),core.Bc(2,ListOperatorGroupsComponent_ng_container_2_table_6_ng_container_2_Template,8,3,\"ng-container\",12),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.gc(\"ngForOf\",ctx_r3.data.operatorGroups)}}function ListOperatorGroupsComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Bc(3,ListOperatorGroupsComponent_ng_container_2_div_3_Template,3,2,\"div\",3),core.Pb(),core.Qb(4,\"results-layout\",4),core.Bc(5,ListOperatorGroupsComponent_ng_container_2_mobile_result_5_Template,3,1,\"mobile-result\",5),core.Bc(6,ListOperatorGroupsComponent_ng_container_2_table_6_Template,3,1,\"table\",6),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"mode\",ctx_r0.self?\"empty\":\"filters\")(\"heading\",ctx_r0.i18n.operatorGroup.title.list)(\"mobileHeading\",ctx_r0.i18n.operatorGroup.mobileTitle.list)(\"headingActions\",core.bc(2,7,ctx_r0.headingActions$)),core.xb(2),core.gc(\"ngIf\",!ctx_r0.self),core.xb(1),core.gc(\"results\",ctx_r0.data.operatorGroups)(\"toLink\",ctx_r0.toLink)}}let list_operator_groups_component_ListOperatorGroupsComponent=(()=>{class ListOperatorGroupsComponent extends base_page_component.a{constructor(injector,operatorGroupsService){super(injector),this.operatorGroupsService=operatorGroupsService}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||this.ApiHelper.SELF,this.self=this.authHelper.isSelf(this.param),this.addSub(this.operatorGroupsService.getUserOperatorGroupsListData({user:this.param}).subscribe(data=>{this.data=data}))}onDataInitialized(data){this.groups=data.operatorGroups,data.canCreate&&(this.headingActions=[new action.c(\"add\",this.i18n.general.addNew,()=>{this.router.navigate([\"/users\",this.param,\"operator-groups\",\"new\"])},!0)])}path(group){return[\"/users\",\"operator-groups\",group.id]}get toLink(){return group=>this.path(group)}remove(group){this.notification.confirm({message:this.i18n.general.removeConfirm(group.name),callback:()=>this.doRemove(group)})}doRemove(group){this.addSub(this.operatorGroupsService.deleteOperatorGroup({id:group.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(group.name)),this.reload()}))}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.OPERATOR_GROUPS)}}return ListOperatorGroupsComponent.ɵfac=function(t){return new(t||ListOperatorGroupsComponent)(core.Kb(core.r),core.Kb(operator_groups_service.a))},ListOperatorGroupsComponent.ɵcmp=core.Eb({type:ListOperatorGroupsComponent,selectors:[[\"list-operator-groups\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[3,\"mode\",\"heading\",\"mobileHeading\",\"headingActions\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[3,\"results\",\"toLink\"],[4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[1,\"col-12\",\"col-md-6\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[1,\"cell-main\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[4,\"ngFor\",\"ngForOf\"],[3,\"click\"],[3,\"routerLink\"],[1,\"actions\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"clear\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ListOperatorGroupsComponent_ng_container_2_Template,7,9,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,label_value_component.a,user_link_component.a,mobile_result_component.a,common.s,router.h,ngx_bootstrap_tooltip.b,icon_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),ListOperatorGroupsComponent})();var multiple_users_field_component=__webpack_require__(\"vHbw\");function OperatorGroupFormComponent_ng_container_2_label_value_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",16),core.Lb(1,\"user-link\",17),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r5.data.user)}}function OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_4_ng_container_1_Template(rf,ctx){1&rf&&core.Mb(0)}function OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_4_ng_container_1_Template,1,0,\"ng-container\",19),core.Nb()),2&rf){core.Zb(3);const _r3=core.qc(6);core.xb(1),core.gc(\"ngTemplateOutlet\",_r3)}}function OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_ng_container_1_h3_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"h3\",9),core.Dc(1),core.Pb()),2&rf){const at_r14=core.Zb(2).$implicit;core.xb(1),core.Fc(\" \",at_r14.name,\" \")}}function OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_ng_container_1_ng_container_4_ng_container_1_Template(rf,ctx){1&rf&&core.Mb(0)}const operator_group_form_component_c0=function(a0){return{$implicit:a0}};function OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_ng_container_1_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_ng_container_1_ng_container_4_ng_container_1_Template,1,0,\"ng-container\",22),core.Nb()),2&rf){const at_r14=core.Zb(2).$implicit;core.Zb(3);const _r1=core.qc(4);core.xb(1),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.jc(2,operator_group_form_component_c0,at_r14))}}function OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Ob(1,5),core.Bc(2,OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_ng_container_1_h3_2_Template,2,1,\"h3\",20),core.Lb(3,\"single-selection-field\",21),core.Bc(4,OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_ng_container_1_ng_container_4_Template,2,4,\"ng-container\",1),core.Nb(),core.Nb()),2&rf){const accountForm_r16=ctx.ngIf,ctx_r15=core.Zb(4);core.xb(1),core.gc(\"formGroup\",accountForm_r16),core.xb(1),core.gc(\"ngIf\",!ctx_r15.singleAccount),core.xb(1),core.gc(\"label\",ctx_r15.i18n.operatorGroup.accountAccess)(\"fieldOptions\",ctx_r15.accountAccessOptions),core.xb(1),core.gc(\"ngIf\",\"none\"!==accountForm_r16.value.access)}}function OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_ng_container_1_Template,5,5,\"ng-container\",1),core.Nb()),2&rf){const at_r14=ctx.$implicit,ctx_r12=core.Zb(3);core.xb(1),core.gc(\"ngIf\",ctx_r12.form.get(\"accounts\").get(at_r14.id))}}function OperatorGroupFormComponent_ng_container_2_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",9),core.Dc(2),core.ac(3,\"async\"),core.Pb(),core.Bc(4,OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_4_Template,2,1,\"ng-container\",1),core.Bc(5,OperatorGroupFormComponent_ng_container_2_ng_container_7_ng_container_5_Template,2,1,\"ng-container\",18),core.Nb()),2&rf){const ctx_r6=core.Zb(2);core.xb(2),core.Fc(\"\",core.bc(3,3,ctx_r6.layout.ltsm$)?ctx_r6.i18n.operatorGroup.mobileTitle.accountAccess:ctx_r6.i18n.operatorGroup.title.accountAccess,\" \"),core.xb(2),core.gc(\"ngIf\",!ctx_r6.singleAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r6.data.accountTypes)}}function OperatorGroupFormComponent_ng_container_2_boolean_field_12_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",23),2&rf){const ctx_r7=core.Zb(2);core.gc(\"label\",ctx_r7.i18n.operatorGroup.notifications)}}function OperatorGroupFormComponent_ng_container_2_boolean_field_13_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",24),2&rf){const ctx_r8=core.Zb(2);core.gc(\"label\",ctx_r8.i18n.operatorGroup.viewAdvertisements)}}function OperatorGroupFormComponent_ng_container_2_multi_selection_field_14_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",27),2&rf){const op_r23=ctx.$implicit,ctx_r22=core.Zb(3);core.gc(\"value\",ctx_r22.ApiHelper.internalNameOrId(op_r23))(\"id\",op_r23.id)(\"internalName\",op_r23.internalName)(\"text\",op_r23.name)}}function OperatorGroupFormComponent_ng_container_2_multi_selection_field_14_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"multi-selection-field\",25),core.Bc(1,OperatorGroupFormComponent_ng_container_2_multi_selection_field_14_field_option_1_Template,1,4,\"field-option\",26),core.Pb()),2&rf){const ctx_r9=core.Zb(2);core.gc(\"label\",ctx_r9.i18n.operatorGroup.runOperations),core.xb(1),core.gc(\"ngForOf\",ctx_r9.data.operations)}}function OperatorGroupFormComponent_ng_container_2_boolean_field_15_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",28),2&rf){const ctx_r10=core.Zb(2);core.gc(\"label\",ctx_r10.i18n.operatorGroup.brokering)}}function OperatorGroupFormComponent_ng_container_2_Template(rf,ctx){if(1&rf){const _r25=core.Rb();core.Ob(0),core.Qb(1,\"page-content\",4),core.ac(2,\"async\"),core.Qb(3,\"form\",5),core.Bc(4,OperatorGroupFormComponent_ng_container_2_label_value_4_Template,2,2,\"label-value\",6),core.Lb(5,\"input-field\",7),core.Lb(6,\"textarea-field\",8),core.Bc(7,OperatorGroupFormComponent_ng_container_2_ng_container_7_Template,6,5,\"ng-container\",1),core.Qb(8,\"h2\",9),core.Dc(9),core.ac(10,\"async\"),core.Pb(),core.Lb(11,\"boolean-field\",10),core.Bc(12,OperatorGroupFormComponent_ng_container_2_boolean_field_12_Template,1,1,\"boolean-field\",11),core.Bc(13,OperatorGroupFormComponent_ng_container_2_boolean_field_13_Template,1,1,\"boolean-field\",12),core.Bc(14,OperatorGroupFormComponent_ng_container_2_multi_selection_field_14_Template,2,2,\"multi-selection-field\",13),core.Bc(15,OperatorGroupFormComponent_ng_container_2_boolean_field_15_Template,1,1,\"boolean-field\",14),core.Pb(),core.Qb(16,\"actions\"),core.Qb(17,\"action-button\",15),core.Xb(\"action\",(function(){return core.sc(_r25),core.Zb().save()})),core.ac(18,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.create?ctx_r0.i18n.operatorGroup.title.new:ctx_r0.i18n.operatorGroup.title.edit)(\"mobileHeading\",ctx_r0.create?ctx_r0.i18n.operatorGroup.mobileTitle.new:ctx_r0.i18n.operatorGroup.mobileTitle.edit)(\"headingActions\",core.bc(2,16,ctx_r0.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r0.form),core.xb(1),core.gc(\"ngIf\",!ctx_r0.self),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.name),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.description),core.xb(1),core.gc(\"ngIf\",(null==ctx_r0.data.accountTypes?null:ctx_r0.data.accountTypes.length)>0),core.xb(2),core.Fc(\"\",core.bc(10,18,ctx_r0.layout.ltsm$)?ctx_r0.i18n.operatorGroup.mobileTitle.permissions:ctx_r0.i18n.operatorGroup.title.permissions,\" \"),core.xb(2),core.gc(\"label\",ctx_r0.i18n.operatorGroup.editOwnProfile),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.canHaveNotifications),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.canViewAdvertisements),core.xb(1),core.gc(\"ngIf\",(null==ctx_r0.data.operations?null:ctx_r0.data.operations.length)>0),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.broker),core.xb(2),core.gc(\"disabled\",core.bc(18,20,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.save)}}function OperatorGroupFormComponent_ng_template_3_ng_container_3_ng_container_1_Template(rf,ctx){1&rf&&core.Mb(0)}function OperatorGroupFormComponent_ng_template_3_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,OperatorGroupFormComponent_ng_template_3_ng_container_3_ng_container_1_Template,1,0,\"ng-container\",19),core.Nb()),2&rf){core.Zb(2);const _r3=core.qc(6);core.xb(1),core.gc(\"ngTemplateOutlet\",_r3)}}function OperatorGroupFormComponent_ng_template_3_ng_container_4_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"hr\",36),core.Qb(2,\"h4\",37),core.Dc(3),core.Pb(),core.Nb()),2&rf){const pt_r30=core.Zb().$implicit;core.xb(3),core.Ec(pt_r30.name)}}function OperatorGroupFormComponent_ng_template_3_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0,5),core.Bc(1,OperatorGroupFormComponent_ng_template_3_ng_container_4_ng_container_1_Template,4,1,\"ng-container\",1),core.Lb(2,\"boolean-field\",32),core.Lb(3,\"boolean-field\",33),core.Lb(4,\"decimal-field\",34),core.Lb(5,\"boolean-field\",35),core.Nb()),2&rf){const pt_r30=ctx.$implicit,at_r26=core.Zb().$implicit,ctx_r28=core.Zb();var tmp_1_0;core.gc(\"formGroup\",ctx_r28.form.get(\"payments\").get(pt_r30.id)),core.xb(1),core.gc(\"ngIf\",(null==(tmp_1_0=ctx_r28.paymentTypes(at_r26))?null:tmp_1_0.length)>1),core.xb(1),core.gc(\"label\",ctx_r28.i18n.operatorGroup.performPayments),core.xb(1),core.gc(\"label\",ctx_r28.i18n.operatorGroup.performPaymentsRequiresAuthorization),core.xb(1),core.gc(\"label\",ctx_r28.i18n.operatorGroup.performPaymentsMaxAmountPerDay)(\"scale\",pt_r30.currency.decimalDigits)(\"prefix\",pt_r30.currency.prefix)(\"suffix\",pt_r30.currency.suffix),core.xb(1),core.gc(\"label\",ctx_r28.i18n.operatorGroup.authorizePayments)}}function OperatorGroupFormComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Ob(0,5),core.Lb(1,\"decimal-field\",29),core.Lb(2,\"decimal-field\",30),core.Nb(),core.Bc(3,OperatorGroupFormComponent_ng_template_3_ng_container_3_Template,2,1,\"ng-container\",1),core.Bc(4,OperatorGroupFormComponent_ng_template_3_ng_container_4_Template,6,9,\"ng-container\",31)),2&rf){const at_r26=ctx.$implicit,ctx_r2=core.Zb();core.gc(\"formGroup\",ctx_r2.form.get(\"accounts\").get(at_r26.id).get(\"notificationAmount\")),core.xb(1),core.gc(\"label\",ctx_r2.i18n.operatorGroup.paymentNotificationsAbove)(\"scale\",at_r26.currency.decimalDigits)(\"prefix\",at_r26.currency.prefix)(\"suffix\",at_r26.currency.suffix),core.xb(1),core.gc(\"label\",ctx_r2.i18n.operatorGroup.paymentNotificationsBelow)(\"scale\",at_r26.currency.decimalDigits)(\"prefix\",at_r26.currency.prefix)(\"suffix\",at_r26.currency.suffix),core.xb(1),core.gc(\"ngIf\",ctx_r2.singleAccount),core.xb(1),core.gc(\"ngForOf\",ctx_r2.paymentTypes(at_r26))}}function OperatorGroupFormComponent_ng_template_5_boolean_field_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",40),2&rf){const ctx_r34=core.Zb(2);core.gc(\"label\",ctx_r34.i18n.operatorGroup.chargebackPayments)}}function OperatorGroupFormComponent_ng_template_5_Template(rf,ctx){if(1&rf&&(core.Ob(0,5),core.Bc(1,OperatorGroupFormComponent_ng_template_5_boolean_field_1_Template,1,1,\"boolean-field\",38),core.Lb(2,\"multiple-users-field\",39),core.Nb()),2&rf){const ctx_r4=core.Zb();core.gc(\"formGroup\",ctx_r4.form),core.xb(1),core.gc(\"ngIf\",ctx_r4.data.canChargebackPayments),core.xb(1),core.gc(\"label\",ctx_r4.i18n.operatorGroup.restrictPaymentsToUsers)(\"preselectedUsers\",ctx_r4.restrictPaymentsToUsers)}}let operator_group_form_component_OperatorGroupFormComponent=(()=>{class OperatorGroupFormComponent extends base_page_component.a{constructor(injector,userHelper,operatorGroupsService){super(injector),this.userHelper=userHelper,this.operatorGroupsService=operatorGroupsService}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.user=this.route.snapshot.params.user,this.create=null!=this.user;const request=this.create?this.operatorGroupsService.getOperatorGroupDataForNew({user:this.user}):this.operatorGroupsService.getOperatorGroupDataForEdit({id:this.id});this.addSub(request.subscribe(data=>{this.data=data}));const values=Object(helper.i)(models.P);this.accountAccessOptions=values.map(value=>({value:value,text:this.userHelper.operatorGroupAccountAccess(value)}))}onDataInitialized(data){this.self=this.authHelper.isSelf(data.user);const group=data.operatorGroup;if(this.form=this.formBuilder.group({name:[group.name,fesm2015_forms.G.required],description:group.description}),!Object(helper.h)(data.accountTypes)){this.singleAccount=1===data.accountTypes.length;const accountControls=this.formBuilder.group({});for(const at of data.accountTypes){const accountValue=group.accounts[at.id]||group.accounts[at.internalName]||{},notificationAmount=accountValue.notificationAmount||{};accountControls.setControl(at.id,this.formBuilder.group({access:[accountValue.access||models.P.NONE,fesm2015_forms.G.required],notificationAmount:this.formBuilder.group({min:notificationAmount.min,max:notificationAmount.max})}))}this.form.setControl(\"accounts\",accountControls)}if(!Object(helper.h)(data.paymentTypes)){const paymentControls=this.formBuilder.group({});for(const pt of data.paymentTypes){const paymentValue=group.payments[pt.id]||group.payments[pt.internalName]||{};paymentControls.setControl(pt.id,this.formBuilder.group({perform:paymentValue.perform,maxAmountPerDay:paymentValue.maxAmountPerDay,requiresAuthorization:paymentValue.requiresAuthorization,authorize:paymentValue.authorize}))}this.form.setControl(\"payments\",paymentControls)}this.form.addControl(\"editOwnProfile\",new fesm2015_forms.j(group.editOwnProfile)),this.form.addControl(\"restrictPaymentsToUsers\",new fesm2015_forms.j(group.restrictPaymentsToUsers)),data.canHaveNotifications&&this.form.addControl(\"notifications\",new fesm2015_forms.j(group.notifications)),data.canChargebackPayments&&this.form.addControl(\"chargebackPayments\",new fesm2015_forms.j(group.chargebackPayments)),data.canViewAdvertisements&&this.form.addControl(\"viewAdvertisements\",new fesm2015_forms.j(group.viewAdvertisements)),data.broker&&this.form.addControl(\"brokering\",new fesm2015_forms.j(group.brokering)),Object(helper.h)(data.operations)||this.form.addControl(\"operations\",new fesm2015_forms.j(group.operations)),group.version&&this.form.addControl(\"version\",new fesm2015_forms.j(group.version))}paymentTypes(at){return(this.data.paymentTypes||[]).filter(pt=>pt.from.id===at.id)}save(){if(Object(helper.F)(this.form),!this.form.valid)return;const value=this.form.value,request=this.create?this.operatorGroupsService.createOperatorGroup({user:this.user,body:value}):this.operatorGroupsService.updateOperatorGroup({id:this.id,body:value});this.addSub(request.subscribe(id=>{this.notification.snackBar(this.create?this.i18n.operatorGroup.created:this.i18n.operatorGroup.saved),this.router.navigate([\"/users\",\"operator-groups\",id||this.id])}))}get restrictPaymentsToUsers(){return this.data.restrictPaymentsToUsers}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.OPERATOR_GROUPS)}}return OperatorGroupFormComponent.ɵfac=function(t){return new(t||OperatorGroupFormComponent)(core.Kb(core.r),core.Kb(user_helper_service.a),core.Kb(operator_groups_service.a))},OperatorGroupFormComponent.ɵcmp=core.Eb({type:OperatorGroupFormComponent,selectors:[[\"operator-group-form\"]],features:[core.ub],decls:7,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[\"accountDetails\",\"\"],[\"generalAccounts\",\"\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"formGroup\"],[\"mode\",\"fieldView\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"name\",\"required\",\"\",3,\"label\"],[\"formControlName\",\"description\",3,\"label\"],[1,\"mt-3\",\"mb-0\"],[\"formControlName\",\"editOwnProfile\",3,\"label\"],[\"formControlName\",\"notifications\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"viewAdvertisements\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"operations\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"brokering\",3,\"label\",4,\"ngIf\"],[1,\"btn-main\",3,\"disabled\",\"label\",\"action\"],[\"mode\",\"fieldView\",3,\"label\"],[3,\"user\"],[4,\"ngFor\",\"ngForOf\"],[4,\"ngTemplateOutlet\"],[\"class\",\"mt-3 mb-0\",4,\"ngIf\"],[\"formControlName\",\"access\",\"required\",\"\",3,\"label\",\"fieldOptions\"],[4,\"ngTemplateOutlet\",\"ngTemplateOutletContext\"],[\"formControlName\",\"notifications\",3,\"label\"],[\"formControlName\",\"viewAdvertisements\",3,\"label\"],[\"formControlName\",\"operations\",3,\"label\"],[3,\"value\",\"id\",\"internalName\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"id\",\"internalName\",\"text\"],[\"formControlName\",\"brokering\",3,\"label\"],[\"formControlName\",\"min\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"max\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[3,\"formGroup\",4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"perform\",3,\"label\"],[\"formControlName\",\"requiresAuthorization\",3,\"label\"],[\"formControlName\",\"maxAmountPerDay\",3,\"label\",\"scale\",\"prefix\",\"suffix\"],[\"formControlName\",\"authorize\",3,\"label\"],[1,\"inner-separator\"],[1,\"mt-3\",\"mb-2\"],[\"formControlName\",\"chargebackPayments\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"restrictPaymentsToUsers\",3,\"label\",\"preselectedUsers\"],[\"formControlName\",\"chargebackPayments\",3,\"label\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,OperatorGroupFormComponent_ng_container_2_Template,19,22,\"ng-container\",1),core.Pb(),core.Bc(3,OperatorGroupFormComponent_ng_template_3_Template,5,11,\"ng-template\",null,2,core.Cc),core.Bc(5,OperatorGroupFormComponent_ng_template_5_Template,3,4,\"ng-template\",null,3,core.Cc)),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,input_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,textarea_field_component.a,boolean_field_component.a,actions_component.a,action_button_component.a,label_value_component.a,user_link_component.a,common.s,common.A,single_selection_field_component.a,multi_selection_field_component.a,field_option_directive.a,decimal_field_component.a,multiple_users_field_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),OperatorGroupFormComponent})();var currency_pipe=__webpack_require__(\"I9hm\");function ViewOperatorGroupComponent_ng_container_2_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",9),core.Lb(1,\"user-link\",10),core.Pb()),2&rf){const ctx_r1=core.Zb(2);core.gc(\"label\",ctx_r1.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r1.group.user)}}function ViewOperatorGroupComponent_ng_container_2_label_value_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",11),2&rf){const ctx_r2=core.Zb(2);core.gc(\"label\",ctx_r2.i18n.general.description)(\"value\",ctx_r2.group.description)}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_h3_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"h3\",12),core.Dc(1),core.Pb()),2&rf){const account_r12=core.Zb().$implicit;core.xb(1),core.Fc(\" \",account_r12.accountType.name,\" \")}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Nb()),2&rf){const ctx_r21=core.Zb(6);core.xb(1),core.Ec(ctx_r21.i18n.operatorGroup.performPaymentsRequiresAuthorizationView)}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_ng_container_1_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.ac(2,\"currency\"),core.Nb()),2&rf){const pmt_r19=core.Zb().$implicit,ctx_r22=core.Zb(5);core.xb(1),core.Ec(ctx_r22.i18n.operatorGroup.performPaymentsMaxAmountPerDayView(core.cc(2,1,pmt_r19.maxAmountPerDay,pmt_r19.paymentType.currency)))}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_ng_container_1_br_4_Template(rf,ctx){1&rf&&core.Lb(0,\"br\")}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Bc(2,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_ng_container_1_ng_container_2_Template,2,1,\"ng-container\",1),core.Bc(3,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_ng_container_1_ng_container_3_Template,3,4,\"ng-container\",1),core.Bc(4,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_ng_container_1_br_4_Template,1,0,\"br\",1),core.Nb()),2&rf){const pmt_r19=ctx.$implicit,last_r20=ctx.last;core.xb(1),core.Fc(\" \",pmt_r19.paymentType.name,\"\"),core.xb(1),core.gc(\"ngIf\",pmt_r19.requiresAuthorization),core.xb(1),core.gc(\"ngIf\",pmt_r19.maxAmountPerDay),core.xb(1),core.gc(\"ngIf\",!last_r20)}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",14),core.Bc(1,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_ng_container_1_Template,5,4,\"ng-container\",13),core.Pb()),2&rf){const account_r12=core.Zb().$implicit,ctx_r14=core.Zb(3);core.gc(\"label\",ctx_r14.i18n.operatorGroup.performPayments),core.xb(1),core.gc(\"ngForOf\",ctx_r14.paymentsByAccount[account_r12.accountType.id])}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_4_ng_container_1_ng_container_2_Template(rf,ctx){1&rf&&(core.Ob(0),core.Dc(1,\", \"),core.Nb())}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_4_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Bc(2,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_4_ng_container_1_ng_container_2_Template,2,0,\"ng-container\",1),core.Nb()),2&rf){const pmt_r27=ctx.$implicit,last_r28=ctx.last;core.xb(1),core.Fc(\" \",pmt_r27.name,\"\"),core.xb(1),core.gc(\"ngIf\",!last_r28)}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",14),core.Bc(1,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_4_ng_container_1_Template,3,2,\"ng-container\",13),core.Pb()),2&rf){const account_r12=core.Zb().$implicit,ctx_r15=core.Zb(3);core.gc(\"label\",ctx_r15.i18n.operatorGroup.authorizePayments),core.xb(1),core.gc(\"ngForOf\",ctx_r15.authorizeByAccount[account_r12.accountType.id])}}const view_operator_group_component_c0=function(a0,a1){return{min:a0,max:a1}};function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_5_Template(rf,ctx){if(1&rf&&(core.Lb(0,\"label-value\",4),core.ac(1,\"currency\"),core.ac(2,\"currency\")),2&rf){const account_r12=core.Zb().$implicit,ctx_r16=core.Zb(3);core.gc(\"label\",ctx_r16.i18n.operatorGroup.paymentNotifications)(\"value\",ctx_r16.format.formatRange(core.kc(8,view_operator_group_component_c0,core.cc(1,2,account_r12.notificationAmount.min,account_r12.accountType.currency),core.cc(2,5,account_r12.notificationAmount.max,account_r12.accountType.currency))))}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_h3_1_Template,2,1,\"h3\",6),core.Lb(2,\"label-value\",4),core.Bc(3,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_3_Template,2,2,\"label-value\",8),core.Bc(4,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_4_Template,2,2,\"label-value\",8),core.Bc(5,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_label_value_5_Template,3,11,\"label-value\",7),core.Nb()),2&rf){const account_r12=ctx.$implicit,ctx_r10=core.Zb(3);core.xb(1),core.gc(\"ngIf\",!ctx_r10.singleAccount),core.xb(1),core.gc(\"label\",ctx_r10.i18n.operatorGroup.accountAccess)(\"value\",ctx_r10.userHelper.operatorGroupAccountAccess(account_r12.access)),core.xb(1),core.gc(\"ngIf\",(null==ctx_r10.paymentsByAccount[account_r12.accountType.id]?null:ctx_r10.paymentsByAccount[account_r12.accountType.id].length)>0),core.xb(1),core.gc(\"ngIf\",(null==ctx_r10.authorizeByAccount[account_r12.accountType.id]?null:ctx_r10.authorizeByAccount[account_r12.accountType.id].length)>0),core.xb(1),core.gc(\"ngIf\",(null==account_r12.notificationAmount?null:account_r12.notificationAmount.min)||(null==account_r12.notificationAmount?null:account_r12.notificationAmount.max))}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_h3_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"h3\",12),core.Dc(1),core.ac(2,\"async\"),core.Pb()),2&rf){const ctx_r32=core.Zb(4);core.xb(1),core.Fc(\" \",core.bc(2,1,ctx_r32.layout.ltsm$)?ctx_r32.i18n.operatorGroup.mobileTitle.generalAccount:ctx_r32.i18n.operatorGroup.title.generalAccount,\" \")}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_label_value_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",4),2&rf){const ctx_r33=core.Zb(4);core.gc(\"label\",ctx_r33.i18n.operatorGroup.chargebackPayments)(\"value\",ctx_r33.i18n.general.yes)}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_label_value_3_ng_container_1_ng_container_2_Template(rf,ctx){1&rf&&(core.Ob(0),core.Dc(1,\", \"),core.Nb())}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_label_value_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Bc(2,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_label_value_3_ng_container_1_ng_container_2_Template,2,0,\"ng-container\",1),core.Nb()),2&rf){const user_r36=ctx.$implicit,last_r37=ctx.last;core.xb(1),core.Fc(\" \",user_r36.display,\"\"),core.xb(1),core.gc(\"ngIf\",!last_r37)}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",14),core.Bc(1,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_label_value_3_ng_container_1_Template,3,2,\"ng-container\",13),core.Pb()),2&rf){const ctx_r34=core.Zb(4);core.gc(\"label\",ctx_r34.i18n.operatorGroup.restrictPaymentsToUsers),core.xb(1),core.gc(\"ngForOf\",ctx_r34.group.restrictPaymentsToUsers)}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_h3_1_Template,3,3,\"h3\",6),core.Bc(2,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_label_value_2_Template,1,2,\"label-value\",7),core.Bc(3,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_label_value_3_Template,2,2,\"label-value\",8),core.Nb()),2&rf){const ctx_r11=core.Zb(3);core.xb(1),core.gc(\"ngIf\",!ctx_r11.singleAccount),core.xb(1),core.gc(\"ngIf\",ctx_r11.group.chargebackPayments),core.xb(1),core.gc(\"ngIf\",(null==ctx_r11.group.restrictPaymentsToUsers?null:ctx_r11.group.restrictPaymentsToUsers.length)>0)}}function ViewOperatorGroupComponent_ng_container_2_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",12),core.Dc(2),core.ac(3,\"async\"),core.Pb(),core.Bc(4,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_4_Template,6,6,\"ng-container\",13),core.Bc(5,ViewOperatorGroupComponent_ng_container_2_ng_container_6_ng_container_5_Template,4,3,\"ng-container\",1),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.Fc(\"\",core.bc(3,3,ctx_r3.layout.ltsm$)?ctx_r3.i18n.operatorGroup.mobileTitle.accountAccess:ctx_r3.i18n.operatorGroup.title.accountAccess,\" \"),core.xb(2),core.gc(\"ngForOf\",ctx_r3.visibleAccounts),core.xb(1),core.gc(\"ngIf\",(null==ctx_r3.group.restrictPaymentsToUsers?null:ctx_r3.group.restrictPaymentsToUsers.length)>0||ctx_r3.group.chargebackPayments)}}function ViewOperatorGroupComponent_ng_container_2_h2_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"h2\",12),core.Dc(1),core.ac(2,\"async\"),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(1),core.Fc(\"\",core.bc(2,1,ctx_r4.layout.ltsm$)?ctx_r4.i18n.operatorGroup.mobileTitle.permissions:ctx_r4.i18n.operatorGroup.title.permissions,\" \")}}function ViewOperatorGroupComponent_ng_container_2_label_value_8_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",4),2&rf){const ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.operatorGroup.editOwnProfile)(\"value\",ctx_r5.i18n.general.yes)}}function ViewOperatorGroupComponent_ng_container_2_label_value_9_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",4),2&rf){const ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.operatorGroup.notifications)(\"value\",ctx_r6.i18n.general.yes)}}function ViewOperatorGroupComponent_ng_container_2_label_value_10_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",4),2&rf){const ctx_r7=core.Zb(2);core.gc(\"label\",ctx_r7.i18n.operatorGroup.viewAdvertisements)(\"value\",ctx_r7.i18n.general.yes)}}function ViewOperatorGroupComponent_ng_container_2_label_value_11_ng_container_1_ng_container_2_Template(rf,ctx){1&rf&&(core.Ob(0),core.Dc(1,\", \"),core.Nb())}function ViewOperatorGroupComponent_ng_container_2_label_value_11_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Dc(1),core.Bc(2,ViewOperatorGroupComponent_ng_container_2_label_value_11_ng_container_1_ng_container_2_Template,2,0,\"ng-container\",1),core.Nb()),2&rf){const op_r40=ctx.$implicit,last_r41=ctx.last;core.xb(1),core.Ec(op_r40.name),core.xb(1),core.gc(\"ngIf\",!last_r41)}}function ViewOperatorGroupComponent_ng_container_2_label_value_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",14),core.Bc(1,ViewOperatorGroupComponent_ng_container_2_label_value_11_ng_container_1_Template,3,2,\"ng-container\",13),core.Pb()),2&rf){const ctx_r8=core.Zb(2);core.gc(\"label\",ctx_r8.i18n.operatorGroup.runOperations),core.xb(1),core.gc(\"ngForOf\",ctx_r8.group.operations)}}function ViewOperatorGroupComponent_ng_container_2_label_value_12_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",4),2&rf){const ctx_r9=core.Zb(2);core.gc(\"label\",ctx_r9.i18n.operatorGroup.brokering)(\"value\",ctx_r9.i18n.general.yes)}}function ViewOperatorGroupComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Bc(3,ViewOperatorGroupComponent_ng_container_2_label_value_3_Template,2,2,\"label-value\",3),core.Lb(4,\"label-value\",4),core.Bc(5,ViewOperatorGroupComponent_ng_container_2_label_value_5_Template,1,2,\"label-value\",5),core.Bc(6,ViewOperatorGroupComponent_ng_container_2_ng_container_6_Template,6,5,\"ng-container\",1),core.Bc(7,ViewOperatorGroupComponent_ng_container_2_h2_7_Template,3,3,\"h2\",6),core.Bc(8,ViewOperatorGroupComponent_ng_container_2_label_value_8_Template,1,2,\"label-value\",7),core.Bc(9,ViewOperatorGroupComponent_ng_container_2_label_value_9_Template,1,2,\"label-value\",7),core.Bc(10,ViewOperatorGroupComponent_ng_container_2_label_value_10_Template,1,2,\"label-value\",7),core.Bc(11,ViewOperatorGroupComponent_ng_container_2_label_value_11_Template,2,2,\"label-value\",8),core.Bc(12,ViewOperatorGroupComponent_ng_container_2_label_value_12_Template,1,2,\"label-value\",7),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.i18n.operatorGroup.title.view)(\"mobileHeading\",ctx_r0.i18n.operatorGroup.mobileTitle.view)(\"headingActions\",core.bc(2,14,ctx_r0.headingActions$)),core.xb(2),core.gc(\"ngIf\",!ctx_r0.self),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.name)(\"value\",ctx_r0.group.name),core.xb(1),core.gc(\"ngIf\",ctx_r0.group.description),core.xb(1),core.gc(\"ngIf\",(null==ctx_r0.visibleAccounts?null:ctx_r0.visibleAccounts.length)>0),core.xb(1),core.gc(\"ngIf\",ctx_r0.group.editOwnProfile||ctx_r0.group.notifications||ctx_r0.group.viewAdvertisements||ctx_r0.group.brokering||(null==ctx_r0.group.operations?null:ctx_r0.group.operations.length)>0),core.xb(1),core.gc(\"ngIf\",ctx_r0.group.editOwnProfile),core.xb(1),core.gc(\"ngIf\",ctx_r0.group.notifications),core.xb(1),core.gc(\"ngIf\",ctx_r0.group.viewAdvertisements),core.xb(1),core.gc(\"ngIf\",(null==ctx_r0.group.operations?null:ctx_r0.group.operations.length)>0),core.xb(1),core.gc(\"ngIf\",ctx_r0.group.brokering)}}let view_operator_group_component_ViewOperatorGroupComponent=(()=>{class ViewOperatorGroupComponent extends base_view_page_component.a{constructor(injector,userHelper,operatorGroupsService){super(injector),this.userHelper=userHelper,this.operatorGroupsService=operatorGroupsService}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.operatorGroupsService.viewOperatorGroup({id:this.id}).subscribe(data=>{this.data=data}))}get group(){return this.data}onDataInitialized(group){this.self=this.authHelper.isSelf(group.user);const accounts=group.accounts||[];this.visibleAccounts=accounts.filter(a=>a.access!==models.P.NONE),this.singleAccount=1===accounts.length,this.paymentsByAccount={},this.authorizeByAccount={};const payments=group.payments||[];for(const a of this.visibleAccounts)this.paymentsByAccount[a.accountType.id]=payments.filter(p=>p.perform&&p.paymentType.from.id===a.accountType.id),this.authorizeByAccount[a.accountType.id]=payments.filter(p=>p.authorize&&p.paymentType.from.id===a.accountType.id).map(p=>p.paymentType);if(group.canEdit){const headingActions=[new action.c(\"edit\",this.i18n.general.edit,()=>{this.router.navigateByUrl(this.router.url+\"/edit\")},!0)];this.layout.ltsm&&headingActions.push(new action.c(\"clear\",this.i18n.general.remove,()=>this.remove())),this.headingActions=headingActions}}remove(){this.notification.confirm({message:this.i18n.general.removeConfirm(this.group.name),callback:()=>this.doRemove()})}doRemove(){this.addSub(this.operatorGroupsService.deleteOperatorGroup({id:this.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(this.group.name)),this.router.navigate([\"users\",this.authHelper.orSelf(this.group.user),\"operator-groups\"])}))}resolveMenu(group){return this.menu.userMenu(group.user,menu.b.OPERATOR_GROUPS)}}return ViewOperatorGroupComponent.ɵfac=function(t){return new(t||ViewOperatorGroupComponent)(core.Kb(core.r),core.Kb(user_helper_service.a),core.Kb(operator_groups_service.a))},ViewOperatorGroupComponent.ɵcmp=core.Eb({type:ViewOperatorGroupComponent,selectors:[[\"view-operator-group\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[\"mode\",\"viewForm\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[\"labelPosition\",\"side\",3,\"label\",4,\"ngIf\"],[3,\"label\",\"value\"],[\"valueFormat\",\"break\",3,\"label\",\"value\",4,\"ngIf\"],[\"class\",\"mt-3 mb-0\",4,\"ngIf\"],[3,\"label\",\"value\",4,\"ngIf\"],[3,\"label\",4,\"ngIf\"],[\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[\"valueFormat\",\"break\",3,\"label\",\"value\"],[1,\"mt-3\",\"mb-0\"],[4,\"ngFor\",\"ngForOf\"],[3,\"label\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewOperatorGroupComponent_ng_container_2_Template,13,16,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,label_value_component.a,user_link_component.a,common.s],pipes:[common.b,currency_pipe.a],encapsulation:2,changeDetection:0}),ViewOperatorGroupComponent})();var operators_service=__webpack_require__(\"yFKC\");function OperatorRegistrationComponent_page_content_2_form_1_label_value_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",15),core.Lb(1,\"user-link\",16),core.Pb()),2&rf){const ctx_r4=core.Zb(3);core.gc(\"label\",ctx_r4.i18n.user.operatorOwner),core.xb(1),core.gc(\"user\",ctx_r4.data.user)}}function OperatorRegistrationComponent_page_content_2_form_1_single_selection_field_2_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",19),2&rf){const group_r14=ctx.$implicit,ctx_r13=core.Zb(4);core.gc(\"value\",ctx_r13.ApiHelper.internalNameOrId(group_r14))(\"id\",group_r14.id)(\"internalName\",group_r14.internalName)(\"text\",group_r14.name)}}function OperatorRegistrationComponent_page_content_2_form_1_single_selection_field_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",17),core.Bc(1,OperatorRegistrationComponent_page_content_2_form_1_single_selection_field_2_field_option_1_Template,1,4,\"field-option\",18),core.Pb()),2&rf){const ctx_r5=core.Zb(3);core.gc(\"label\",ctx_r5.i18n.user.group)(\"emptyOption\",ctx_r5.i18n.user.operatorNoGroup),core.xb(1),core.gc(\"ngForOf\",ctx_r5.data.groups)}}function OperatorRegistrationComponent_page_content_2_form_1_input_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",20),2&rf){const ctx_r6=core.Zb(3);core.gc(\"label\",ctx_r6.i18n.user.name)}}function OperatorRegistrationComponent_page_content_2_form_1_input_field_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",21),2&rf){const ctx_r7=core.Zb(3);core.gc(\"label\",ctx_r7.i18n.user.username)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_5_input_field_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",24),2&rf){const ctx_r15=core.Zb(4);core.gc(\"label\",ctx_r15.i18n.user.email)(\"required\",ctx_r15.data.emailRequired)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_5_boolean_field_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",25),2&rf){const ctx_r16=core.Zb(4);core.gc(\"label\",ctx_r16.i18n.user.registration.skipActivationEmail)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,OperatorRegistrationComponent_page_content_2_form_1_ng_container_5_input_field_1_Template,1,2,\"input-field\",22),core.Bc(2,OperatorRegistrationComponent_page_content_2_form_1_ng_container_5_boolean_field_2_Template,1,1,\"boolean-field\",23),core.Nb()),2&rf){const ctx_r8=core.Zb(3);core.xb(1),core.gc(\"ngIf\",ctx_r8.canEdit(\"email\")),core.xb(1),core.gc(\"ngIf\",ctx_r8.data.allowSetSendActivationEmail)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_6_custom_field_input_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"custom-field-input\",28),2&rf){const cf_r17=core.Zb().$implicit;core.gc(\"field\",cf_r17)(\"formControlName\",cf_r17.internalName)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0,26),core.Bc(1,OperatorRegistrationComponent_page_content_2_form_1_ng_container_6_custom_field_input_1_Template,1,2,\"custom-field-input\",27),core.Nb()),2&rf){const cf_r17=ctx.$implicit,ctx_r9=core.Zb(3);core.gc(\"formGroup\",ctx_r9.form.get(\"customValues\")),core.xb(1),core.gc(\"ngIf\",ctx_r9.canEdit(cf_r17))}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0,26),core.Lb(1,\"input-field\",29),core.Nb()),2&rf){const ctx_r10=core.Zb(3);core.gc(\"formGroup\",ctx_r10.mobileForm),core.xb(1),core.gc(\"label\",ctx_r10.i18n.phone.mobile)(\"required\",\"required\"===ctx_r10.mobileAvailability)(\"placeholder\",ctx_r10.data.phoneConfiguration.mobileExample)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_8_input_field_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",31),2&rf){const ctx_r20=core.Zb(4);core.gc(\"label\",ctx_r20.i18n.phone.extension)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0,26),core.Lb(1,\"input-field\",29),core.Bc(2,OperatorRegistrationComponent_page_content_2_form_1_ng_container_8_input_field_2_Template,1,1,\"input-field\",30),core.Nb()),2&rf){const ctx_r11=core.Zb(3);core.gc(\"formGroup\",ctx_r11.landLineForm),core.xb(1),core.gc(\"label\",ctx_r11.i18n.phone.landLine)(\"required\",\"required\"===ctx_r11.data.phoneConfiguration.landLineAvailability)(\"placeholder\",ctx_r11.data.phoneConfiguration.landLineExample),core.xb(1),core.gc(\"ngIf\",ctx_r11.data.phoneConfiguration.extensionEnabled)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",34),core.Dc(1),core.Pb()),2&rf){const pt_r21=core.Zb().$implicit;core.xb(1),core.Ec(pt_r21.description)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_boolean_field_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",35),2&rf){const ctx_r24=core.Zb(4);core.gc(\"label\",ctx_r24.i18n.user.registration.passwordAssign)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_ng_container_6_boolean_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",39),2&rf){const ctx_r27=core.Zb(5);core.gc(\"label\",ctx_r27.i18n.user.registration.passwordForceChange)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"input-field\",36),core.Lb(2,\"input-field\",37),core.Bc(3,OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_ng_container_6_boolean_field_3_Template,1,1,\"boolean-field\",38),core.Nb()),2&rf){const pt_r21=core.Zb().$implicit,ctx_r25=core.Zb(3);core.xb(1),core.gc(\"label\",pt_r21.name),core.xb(1),core.gc(\"label\",ctx_r25.i18n.user.passwordConfirmation(pt_r21.name)),core.xb(1),core.gc(\"ngIf\",pt_r21.canForceChange)}}function OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\"),core.Dc(2),core.Pb(),core.Ob(3,26),core.Bc(4,OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_div_4_Template,2,1,\"div\",32),core.Bc(5,OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_boolean_field_5_Template,1,1,\"boolean-field\",33),core.Bc(6,OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_ng_container_6_Template,4,3,\"ng-container\",10),core.Nb(),core.Nb()),2&rf){const pt_r21=ctx.$implicit,i_r22=ctx.index,ctx_r12=core.Zb(3);core.xb(2),core.Ec(pt_r21.name),core.xb(1),core.gc(\"formGroup\",ctx_r12.passwordForms[i_r22]),core.xb(1),core.gc(\"ngIf\",pt_r21.description),core.xb(1),core.gc(\"ngIf\",ctx_r12.login.user),core.xb(1),core.gc(\"ngIf\",ctx_r12.passwordForms[i_r22].get(\"defined\").value)}}function OperatorRegistrationComponent_page_content_2_form_1_Template(rf,ctx){if(1&rf){const _r30=core.Rb();core.Qb(0,\"form\",5),core.Bc(1,OperatorRegistrationComponent_page_content_2_form_1_label_value_1_Template,2,2,\"label-value\",6),core.Bc(2,OperatorRegistrationComponent_page_content_2_form_1_single_selection_field_2_Template,2,3,\"single-selection-field\",7),core.Bc(3,OperatorRegistrationComponent_page_content_2_form_1_input_field_3_Template,1,1,\"input-field\",8),core.Bc(4,OperatorRegistrationComponent_page_content_2_form_1_input_field_4_Template,1,1,\"input-field\",9),core.Bc(5,OperatorRegistrationComponent_page_content_2_form_1_ng_container_5_Template,3,2,\"ng-container\",10),core.Bc(6,OperatorRegistrationComponent_page_content_2_form_1_ng_container_6_Template,2,2,\"ng-container\",11),core.Bc(7,OperatorRegistrationComponent_page_content_2_form_1_ng_container_7_Template,2,4,\"ng-container\",12),core.Bc(8,OperatorRegistrationComponent_page_content_2_form_1_ng_container_8_Template,3,5,\"ng-container\",12),core.Bc(9,OperatorRegistrationComponent_page_content_2_form_1_ng_container_9_Template,7,5,\"ng-container\",13),core.Qb(10,\"actions\"),core.Qb(11,\"action-button\",14),core.Xb(\"action\",(function(){return core.sc(_r30),core.Zb(2).register()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r3=core.Zb(2);core.gc(\"formGroup\",ctx_r3.form),core.xb(1),core.gc(\"ngIf\",!ctx_r3.self),core.xb(1),core.gc(\"ngIf\",ctx_r3.data.groups.length>0),core.xb(1),core.gc(\"ngIf\",ctx_r3.canEdit(\"name\")),core.xb(1),core.gc(\"ngIf\",ctx_r3.canEdit(\"username\")),core.xb(1),core.gc(\"ngIf\",ctx_r3.canEdit(\"email\")),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.customFields),core.xb(1),core.gc(\"ngIf\",\"disabled\"!==ctx_r3.mobileAvailability),core.xb(1),core.gc(\"ngIf\",\"disabled\"!==ctx_r3.landLineAvailability),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.passwordTypes),core.xb(2),core.gc(\"label\",ctx_r3.i18n.general.submit)}}function OperatorRegistrationComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.Bc(1,OperatorRegistrationComponent_page_content_2_form_1_Template,12,11,\"form\",4),core.ac(2,\"async\"),core.Pb()),2&rf){const ctx_r0=core.Zb(),_r1=core.qc(4);core.gc(\"heading\",ctx_r0.i18n.user.title.operatorRegistration)(\"mobileHeading\",ctx_r0.i18n.user.mobileTitle.operatorRegistration),core.xb(1),core.gc(\"ngIf\",null==core.bc(2,4,ctx_r0.result$))(\"ngIfElse\",_r1)}}function OperatorRegistrationComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r32=core.Rb();core.Lb(0,\"p\",40),core.ac(1,\"trust\"),core.Qb(2,\"actions\",41),core.Qb(3,\"action-button\",14),core.Xb(\"action\",(function(){return core.sc(_r32),core.Zb().reload()})),core.Pb(),core.Qb(4,\"action-button\",14),core.Xb(\"action\",(function(){return core.sc(_r32),core.Zb().viewProfile()})),core.Pb(),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"innerHTML\",core.bc(1,3,ctx_r2.doneMessageHtml),core.tc),core.xb(3),core.gc(\"label\",ctx_r2.i18n.user.operatorRegistrationAddAnother),core.xb(1),core.gc(\"label\",ctx_r2.i18n.user.registration.viewProfile)}}let operator_registration_component_OperatorRegistrationComponent=(()=>{class OperatorRegistrationComponent extends base_page_component.a{constructor(injector,userHelper,operatorsService){super(injector),this.userHelper=userHelper,this.operatorsService=operatorsService,this.result$=new BehaviorSubject.a(null)}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user||this.ApiHelper.SELF,this.self=this.authHelper.isSelf(this.user),this.addSub(this.operatorsService.getOperatorDataForNew({user:this.user}).subscribe(data=>this.data=data))}onDataInitialized(data){this.form=this.formBuilder.group({group:null}),[this.mobileForm,this.landLineForm]=this.userHelper.setupRegistrationForm(this.form,data,!1),this.passwordForms=this.userHelper.passwordRegistrationForms(data),this.editableFields=this.userHelper.fieldNamesByAction(data,\"edit\")}canEdit(field){return this.editableFields.has(this.fieldHelper.fieldName(field))}get mobileAvailability(){return this.data.phoneConfiguration.mobileAvailability}get landLineAvailability(){return this.data.phoneConfiguration.landLineAvailability}register(){const fullForm=Object(helper.d)(this.form);this.mobileForm&&fullForm.setControl(\"mobile\",this.mobileForm),this.landLineForm&&fullForm.setControl(\"landLine\",this.landLineForm),fullForm.setControl(\"passwords\",new fesm2015_forms.g(this.passwordForms)),Object(helper.F)(fullForm)&&this.addSub(this.operatorsService.registerOperator({user:this.user,body:fullForm.value}).subscribe(result=>this.result$.next(result)))}get doneMessageHtml(){const result=this.result$.value;if(!result)return null;const operator=result.user.display;switch(result.status){case models.Lb.ACTIVE:return this.i18n.user.operatorRegistrationActive(operator);case models.Lb.INACTIVE:return this.i18n.user.operatorRegistrationInactive(operator);case models.Lb.EMAIL_VALIDATION:return this.i18n.user.operatorRegistrationPending(operator)}}viewProfile(){const result=this.result$.value;result&&this.router.navigate([\"users\",result.user.id,\"profile\"])}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.MY_OPERATORS)}}return OperatorRegistrationComponent.ɵfac=function(t){return new(t||OperatorRegistrationComponent)(core.Kb(core.r),core.Kb(user_helper_service.a),core.Kb(operators_service.a))},OperatorRegistrationComponent.ɵcmp=core.Eb({type:OperatorRegistrationComponent,selectors:[[\"operator-registration\"]],features:[core.ub],decls:5,vars:4,consts:[[3,\"ready\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",4,\"ngIf\"],[\"done\",\"\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\"],[\"autocomplete\",\"off\",3,\"formGroup\",4,\"ngIf\",\"ngIfElse\"],[\"autocomplete\",\"off\",3,\"formGroup\"],[3,\"label\",4,\"ngIf\"],[\"formControlName\",\"group\",3,\"label\",\"emptyOption\",4,\"ngIf\"],[\"formControlName\",\"name\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"username\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"formGroup\",4,\"ngFor\",\"ngForOf\"],[3,\"formGroup\",4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[3,\"label\",\"action\"],[3,\"label\"],[3,\"user\"],[\"formControlName\",\"group\",3,\"label\",\"emptyOption\"],[3,\"value\",\"id\",\"internalName\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"id\",\"internalName\",\"text\"],[\"formControlName\",\"name\",\"required\",\"\",3,\"label\"],[\"formControlName\",\"username\",\"required\",\"\",3,\"label\"],[\"formControlName\",\"email\",3,\"label\",\"required\",4,\"ngIf\"],[\"formControlName\",\"skipActivationEmail\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"email\",3,\"label\",\"required\"],[\"formControlName\",\"skipActivationEmail\",3,\"label\"],[3,\"formGroup\"],[3,\"field\",\"formControlName\",4,\"ngIf\"],[3,\"field\",\"formControlName\"],[\"formControlName\",\"number\",3,\"label\",\"required\",\"placeholder\"],[\"formControlName\",\"extension\",\"fieldSize\",\"tiny\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"extension\",\"fieldSize\",\"tiny\",3,\"label\"],[\"class\",\"mb-2\",4,\"ngIf\"],[\"formControlName\",\"defined\",3,\"label\",4,\"ngIf\"],[1,\"mb-2\"],[\"formControlName\",\"defined\",3,\"label\"],[\"required\",\"\",\"formControlName\",\"value\",\"type\",\"password\",\"autocomplete\",\"new-password\",3,\"label\"],[\"required\",\"\",\"formControlName\",\"confirmationValue\",\"type\",\"password\",\"autocomplete\",\"new-password\",3,\"label\"],[\"formControlName\",\"forceChange\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"forceChange\",3,\"label\"],[3,\"innerHTML\"],[\"forceRow\",\"\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,OperatorRegistrationComponent_page_content_2_Template,3,6,\"page-content\",1),core.Bc(3,OperatorRegistrationComponent_ng_template_3_Template,5,5,\"ng-template\",null,2,core.Cc),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,common.s,actions_component.a,action_button_component.a,label_value_component.a,user_link_component.a,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,field_option_directive.a,input_field_component.a,fesm2015_forms.D,boolean_field_component.a,custom_field_input_component.a],pipes:[common.b,trust_pipe.a],encapsulation:2,changeDetection:0}),OperatorRegistrationComponent})();var result_type=__webpack_require__(\"TFmz\"),base_component=__webpack_require__(\"qCwG\"),result_tile_directive=(__webpack_require__(\"Ky6R\"),__webpack_require__(\"7nZW\")),result_info_window_directive=__webpack_require__(\"XvX2\"),format_field_value_component=__webpack_require__(\"5Wk5\"),tiled_result_component=__webpack_require__(\"oOvo\"),map_result_component=__webpack_require__(\"IJ5G\");const users_results_component_c0=function(a0,a1){return{\"cell-main\":a0,\"cell-text\":a1}};function UsersResultsComponent_mobile_result_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",8),core.Lb(2,\"format-field-value\",9),core.Pb(),core.Nb()),2&rf){const field_r7=ctx.$implicit,first_r8=ctx.first,row_r4=core.Zb().$implicit,ctx_r5=core.Zb();core.xb(1),core.gc(\"ngClass\",core.kc(6,users_results_component_c0,first_r8,!first_r8)),core.xb(1),core.gc(\"fields\",ctx_r5.data.customFields)(\"plainText\",!0)(\"fieldName\",field_r7)(\"object\",ctx_r5.user(row_r4))(\"customValues\",ctx_r5.customValues(row_r4))}}function UsersResultsComponent_mobile_result_1_div_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",10),core.Dc(1),core.Pb()),2&rf){const row_r4=core.Zb().$implicit,ctx_r6=core.Zb();core.xb(1),core.Fc(\" \",ctx_r6.operatorGroup(row_r4),\" \")}}function UsersResultsComponent_mobile_result_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",5),core.Bc(1,UsersResultsComponent_mobile_result_1_ng_container_1_Template,3,9,\"ng-container\",6),core.Bc(2,UsersResultsComponent_mobile_result_1_div_2_Template,2,1,\"div\",7),core.Pb()),2&rf){const row_r4=ctx.$implicit,ctx_r0=core.Zb();core.gc(\"avatarImage\",ctx_r0.user(row_r4).image)(\"avatarIcon\",\"operator\"===ctx_r0.resultKind?null:\"user\"),core.xb(1),core.gc(\"ngForOf\",ctx_r0.fieldsInTile),core.xb(1),core.gc(\"ngIf\",\"operator\"===ctx_r0.resultKind)}}function UsersResultsComponent_table_2_th_2_Template(rf,ctx){1&rf&&core.Lb(0,\"th\",15)}function UsersResultsComponent_table_2_th_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"th\"),core.Dc(1),core.Pb()),2&rf){const field_r15=ctx.$implicit,ctx_r12=core.Zb(2);core.xb(1),core.Ec(ctx_r12.fieldName(field_r15))}}function UsersResultsComponent_table_2_th_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"th\"),core.Dc(1),core.Pb()),2&rf){const ctx_r13=core.Zb(2);core.xb(1),core.Ec(ctx_r13.i18n.user.group)}}function UsersResultsComponent_table_2_tr_6_td_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\",15),core.Lb(1,\"avatar\",17),core.Pb()),2&rf){const row_r16=core.Zb().$implicit,ctx_r17=core.Zb(2);core.xb(1),core.gc(\"image\",ctx_r17.user(row_r16).image)}}function UsersResultsComponent_table_2_tr_6_td_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Lb(1,\"format-field-value\",9),core.Pb()),2&rf){const field_r21=ctx.$implicit,row_r16=core.Zb().$implicit,ctx_r18=core.Zb(2);core.xb(1),core.gc(\"fields\",ctx_r18.data.customFields)(\"plainText\",!0)(\"fieldName\",field_r21)(\"object\",ctx_r18.user(row_r16))(\"customValues\",ctx_r18.customValues(row_r16))}}function UsersResultsComponent_table_2_tr_6_td_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Dc(1),core.Pb()),2&rf){const row_r16=core.Zb().$implicit,ctx_r19=core.Zb(2);core.xb(1),core.Ec(ctx_r19.operatorGroup(row_r16))}}function UsersResultsComponent_table_2_tr_6_Template(rf,ctx){if(1&rf){const _r25=core.Rb();core.Qb(0,\"tr\",16),core.Xb(\"click\",(function(){core.sc(_r25);const row_r16=ctx.$implicit,ctx_r24=core.Zb(2);return ctx_r24.canViewProfile?ctx_r24.router.navigate(ctx_r24.path(row_r16)):null})),core.Bc(1,UsersResultsComponent_table_2_tr_6_td_1_Template,2,1,\"td\",12),core.Bc(2,UsersResultsComponent_table_2_tr_6_td_2_Template,2,5,\"td\",6),core.Bc(3,UsersResultsComponent_table_2_tr_6_td_3_Template,2,1,\"td\",13),core.Pb()}if(2&rf){const ctx_r14=core.Zb(2);core.xb(1),core.gc(\"ngIf\",\"operator\"!==ctx_r14.resultKind),core.xb(1),core.gc(\"ngForOf\",ctx_r14.fieldsInList),core.xb(1),core.gc(\"ngIf\",\"operator\"===ctx_r14.resultKind)}}const users_results_component_c1=function(a0){return{\"cursor-pointer\":a0}};function UsersResultsComponent_table_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",11),core.Qb(1,\"thead\"),core.Bc(2,UsersResultsComponent_table_2_th_2_Template,1,0,\"th\",12),core.Bc(3,UsersResultsComponent_table_2_th_3_Template,2,1,\"th\",6),core.Bc(4,UsersResultsComponent_table_2_th_4_Template,2,1,\"th\",13),core.Pb(),core.Qb(5,\"tbody\"),core.Bc(6,UsersResultsComponent_table_2_tr_6_Template,4,3,\"tr\",14),core.Pb(),core.Pb()),2&rf){const ctx_r1=core.Zb();core.gc(\"ngClass\",core.jc(5,users_results_component_c1,ctx_r1.canViewProfile)),core.xb(2),core.gc(\"ngIf\",\"operator\"!==ctx_r1.resultKind),core.xb(1),core.gc(\"ngForOf\",ctx_r1.fieldsInList),core.xb(1),core.gc(\"ngIf\",\"operator\"===ctx_r1.resultKind),core.xb(2),core.gc(\"ngForOf\",null==ctx_r1.results?null:ctx_r1.results.results)}}function UsersResultsComponent_tiled_result_3_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",8),core.Qb(1,\"format-field-value\",20),core.Dc(2,\"   \"),core.Pb(),core.Pb()),2&rf){const field_r28=ctx.$implicit,first_r29=ctx.first,row_r26=core.Zb().$implicit,ctx_r27=core.Zb();core.gc(\"ngClass\",first_r29?\"card-title\":\"card-text\"),core.xb(1),core.gc(\"fields\",ctx_r27.data.customFields)(\"fieldName\",field_r28)(\"object\",ctx_r27.user(row_r26))(\"customValues\",ctx_r27.customValues(row_r26))}}function UsersResultsComponent_tiled_result_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tiled-result\",18),core.Bc(1,UsersResultsComponent_tiled_result_3_div_1_Template,3,5,\"div\",19),core.Pb()),2&rf){const row_r26=ctx.$implicit,ctx_r2=core.Zb();core.gc(\"image\",ctx_r2.user(row_r26).image),core.xb(1),core.gc(\"ngForOf\",ctx_r2.fieldsInTile)}}const users_results_component_c2=function(a0,a1){return{\"font-weight-bold\":a0,\"mb-2\":a1}};function UsersResultsComponent_map_result_4_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",8),core.Lb(1,\"format-field-value\",9),core.Pb()),2&rf){const field_r34=ctx.$implicit,first_r35=ctx.first,last_r36=ctx.last,row_r31=core.Zb().$implicit,ctx_r33=core.Zb();core.gc(\"ngClass\",core.kc(6,users_results_component_c2,first_r35,last_r36)),core.xb(1),core.gc(\"fields\",ctx_r33.data.customFields)(\"plainText\",!0)(\"fieldName\",field_r34)(\"object\",ctx_r33.user(row_r31))(\"customValues\",ctx_r33.customValues(row_r31))}}function UsersResultsComponent_map_result_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"map-result\",21),core.Bc(1,UsersResultsComponent_map_result_4_div_1_Template,2,9,\"div\",19),core.Pb()),2&rf){const row_r31=ctx.$implicit,addr_r32=ctx.address,ctx_r3=core.Zb();core.gc(\"image\",ctx_r3.user(row_r31).image)(\"address\",addr_r32),core.xb(1),core.gc(\"ngForOf\",ctx_r3.fieldsInTile)}}let users_results_component_UsersResultsComponent=(()=>{class UsersResultsComponent extends base_component.a{constructor(injector){super(injector),this.clazz=\"flex-grow-1 d-flex\",this.resultKind=\"user\",this.update=new core.n}set data(data){this._data=data;const fieldsInList=(data||{}).fieldsInList||[];this.fieldsInList=fieldsInList.slice(0,Math.min(fieldsInList.length,7)),this.fieldsInTile=fieldsInList.slice(0,Math.min(fieldsInList.length,2)),this.showTableHeader=this.fieldsInList.length>1}get data(){return this._data}ngOnInit(){super.ngOnInit(),this.canViewProfile=!0===(((this.dataForUiHolder.dataForUi.auth||{}).permissions||{}).users||{}).viewProfile}user(row){return\"contact\"===this.resultKind?row.contact:row}operatorGroup(row){if(\"operator\"===this.resultKind){const group=row.group;return group?group.name:this.i18n.user.operatorNoGroup}return null}displayFunction(){return row=>{const user=this.user(row);if(user.display)return user.display;const res=user,field=this.fieldsInList[0];return res.hasOwnProperty(field)?res[field]:(res.customValues||{})[field]}}customValues(row){return null==row?null:row.customValues}address(row){return\"contact\"===this.resultKind?null:row.address}fieldName(field){return\"operator\"===this.resultKind&&\"display\"===field?this.i18n.general.operator:this.fieldHelper.fieldDisplay(field,this.data.customFields)}path(row){const user=this.user(row);return this.authHelper.isSelf(user)?[\"/users\",this.ApiHelper.SELF,\"profile\"]:\"operator\"===this.resultKind?[\"/users\",\"operators\",user.id]:this.canViewProfile?\"contact\"===this.resultKind?[\"/users\",\"contacts\",user.id]:[\"/users\",user.id,\"profile\"]:null}get toLink(){return row=>this.path(row)}}return UsersResultsComponent.ɵfac=function(t){return new(t||UsersResultsComponent)(core.Kb(core.r))},UsersResultsComponent.ɵcmp=core.Eb({type:UsersResultsComponent,selectors:[[\"users-results\"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&core.zb(ctx.clazz)},inputs:{resultType:\"resultType\",rendering$:\"rendering$\",referencePoint:\"referencePoint\",data:\"data\",results:\"results\",resultKind:\"resultKind\"},outputs:{update:\"update\"},features:[core.ub],decls:5,vars:7,consts:[[3,\"results\",\"rendering$\",\"resultType\",\"toAddress\",\"referencePoint\",\"toMarkerTitle\",\"toLink\",\"update\"],[3,\"avatarImage\",\"avatarIcon\",4,\"mobileResult\"],[\"class\",\"table table-hover\",3,\"ngClass\",4,\"resultTable\"],[\"icon\",\"user\",\"zoom\",\"\",3,\"image\",4,\"resultTile\"],[3,\"image\",\"address\",4,\"resultInfoWindow\"],[3,\"avatarImage\",\"avatarIcon\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"cell-text\",4,\"ngIf\"],[3,\"ngClass\"],[3,\"fields\",\"plainText\",\"fieldName\",\"object\",\"customValues\"],[1,\"cell-text\"],[1,\"table\",\"table-hover\",3,\"ngClass\"],[\"class\",\"avatar\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[1,\"avatar\"],[3,\"click\"],[3,\"image\"],[\"icon\",\"user\",\"zoom\",\"\",3,\"image\"],[3,\"ngClass\",4,\"ngFor\",\"ngForOf\"],[\"plainText\",\"\",1,\"d-block\",\"text-truncate\",3,\"fields\",\"fieldName\",\"object\",\"customValues\"],[3,\"image\",\"address\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"results-layout\",0),core.Xb(\"update\",(function($event){return ctx.update.emit($event)})),core.Bc(1,UsersResultsComponent_mobile_result_1_Template,3,4,\"mobile-result\",1),core.Bc(2,UsersResultsComponent_table_2_Template,7,7,\"table\",2),core.Bc(3,UsersResultsComponent_tiled_result_3_Template,2,2,\"tiled-result\",3),core.Bc(4,UsersResultsComponent_map_result_4_Template,2,3,\"map-result\",4),core.Pb()),2&rf&&core.gc(\"results\",ctx.results)(\"rendering$\",ctx.rendering$)(\"resultType\",ctx.resultType)(\"toAddress\",ctx.address)(\"referencePoint\",ctx.referencePoint)(\"toMarkerTitle\",ctx.displayFunction())(\"toLink\",ctx.canViewProfile?ctx.toLink:null)},directives:[results_layout_component.a,mobile_result_directive.a,result_table_directive.a,result_tile_directive.a,result_info_window_directive.a,mobile_result_component.a,common.s,common.t,common.q,format_field_value_component.a,avatar_component.a,tiled_result_component.a,map_result_component.a],encapsulation:2,changeDetection:0}),UsersResultsComponent})();function SearchUserOperatorsComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchUserOperatorsComponent_ng_template_3_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",9),core.Qb(1,\"label-value\",10),core.Lb(2,\"user-link\",11),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r3.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r3.data.user)}}function SearchUserOperatorsComponent_ng_template_3_div_5_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",14),2&rf){const group_r7=ctx.$implicit,ctx_r6=core.Zb(3);core.gc(\"value\",ctx_r6.ApiHelper.internalNameOrId(group_r7))(\"internalName\",group_r7.internalName)(\"id\",group_r7.id)(\"text\",group_r7.name)}}function SearchUserOperatorsComponent_ng_template_3_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",9),core.Qb(1,\"multi-selection-field\",12),core.Bc(2,SearchUserOperatorsComponent_ng_template_3_div_5_field_option_2_Template,1,4,\"field-option\",13),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r4.i18n.user.groupFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r4.data.groups)}}function SearchUserOperatorsComponent_ng_template_3_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",9),core.Lb(2,\"multi-selection-field\",15),core.Pb(),core.Qb(3,\"div\",9),core.Lb(4,\"date-field\",16),core.Pb(),core.Qb(5,\"div\",9),core.Lb(6,\"date-field\",17),core.Pb(),core.Nb()),2&rf){const ctx_r5=core.Zb(2);core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.status)(\"fieldOptions\",ctx_r5.statusOptions),core.xb(2),core.gc(\"label\",ctx_r5.i18n.user.creationBegin),core.xb(2),core.gc(\"label\",ctx_r5.i18n.user.creationEnd)}}function SearchUserOperatorsComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r9=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"form\",4),core.Qb(3,\"div\",5),core.Bc(4,SearchUserOperatorsComponent_ng_template_3_div_4_Template,3,2,\"div\",6),core.Bc(5,SearchUserOperatorsComponent_ng_template_3_div_5_Template,3,2,\"div\",6),core.Bc(6,SearchUserOperatorsComponent_ng_template_3_ng_container_6_Template,7,4,\"ng-container\",7),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Qb(8,\"users-results\",8),core.Xb(\"update\",(function($event){return core.sc(_r9),core.Zb().update($event)})),core.ac(9,\"async\"),core.ac(10,\"async\"),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.self?ctx_r2.i18n.user.title.myOperators:ctx_r2.i18n.user.title.userOperators)(\"mobileHeading\",ctx_r2.self?ctx_r2.i18n.user.mobileTitle.myOperators:ctx_r2.i18n.user.mobileTitle.userOperators)(\"headingActions\",core.bc(1,11,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",!ctx_r2.self),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.data.groups?null:ctx_r2.data.groups.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(7,13,ctx_r2.layout.gtxxs$)),core.xb(2),core.gc(\"results\",core.bc(9,15,ctx_r2.results$))(\"rendering$\",ctx_r2.rendering$)(\"data\",core.bc(10,17,ctx_r2.data$))(\"resultKind\",\"operator\")}}let search_user_operators_component_SearchUserOperatorsComponent=(()=>{class SearchUserOperatorsComponent extends base_search_page_component.a{constructor(injector,operatorsService,userHelper){super(injector),this.operatorsService=operatorsService,this.userHelper=userHelper,this.ResultType=result_type.a,this.empty=helper.h}getFormControlNames(){return[\"operatorGroups\",\"statuses\",\"creationBegin\",\"creationEnd\"]}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||api_helper.a.SELF,this.self=this.authHelper.isSelf(this.param),this.addSub(this.operatorsService.getUserOperatorsDataForSearch({user:this.param}).subscribe(data=>{this.statusOptions=this.userHelper.statusOptions(),!this.self&&data.canCreateNew&&(this.headingActions=[new action.c(\"registration\",this.i18n.general.addNew,()=>{this.router.navigate([\"/users\",this.param,\"operators\",\"registration\"])},!0)]),this.data=data}))}onDataInitialized(data){super.onDataInitialized(data),Object(helper.h)(data.fieldsInList)&&(data.fieldsInList=[\"display\"])}toSearchParams(value){const query=value;return query.user=this.param,query.creationPeriod=api_helper.a.rangeFilter(value.creationBegin,value.creationEnd),delete value.customValues,query}doSearch(query){return this.operatorsService.searchUserOperators$Response(query)}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.MY_OPERATORS)}}return SearchUserOperatorsComponent.ɵfac=function(t){return new(t||SearchUserOperatorsComponent)(core.Kb(core.r),core.Kb(operators_service.a),core.Kb(user_helper_service.a))},SearchUserOperatorsComponent.ɵcmp=core.Eb({type:SearchUserOperatorsComponent,selectors:[[\"search-user-operators\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[4,\"ngIf\"],[\"resultType\",\"list\",3,\"results\",\"rendering$\",\"data\",\"resultKind\",\"update\"],[1,\"col-12\",\"col-md-6\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[\"labelPosition\",\"side\",\"formControlName\",\"operatorGroups\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"statuses\",3,\"label\",\"fieldOptions\"],[\"labelPosition\",\"side\",\"formControlName\",\"creationBegin\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"creationEnd\",\"fieldSize\",\"full\",3,\"label\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchUserOperatorsComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchUserOperatorsComponent_ng_template_3_Template,11,19,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,users_results_component_UsersResultsComponent,label_value_component.a,user_link_component.a,multi_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,common.s,field_option_directive.a,date_field_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),SearchUserOperatorsComponent})();var passwords_service=__webpack_require__(\"FUMw\");function ChangePasswordDialogComponent_input_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",7),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.password.oldPassword)}}const PASSWORDS_MATCH_VAL=control=>{const currVal=control.value;if(control.touched&&null!=currVal&&\"\"!==currVal){const parent=control.parent;if((null==parent.get(\"newPassword\")?\"\":parent.get(\"newPassword\").value)!==currVal)return{passwordsMatch:!0}}return null};let change_password_dialog_component_ChangePasswordDialogComponent=(()=>{class ChangePasswordDialogComponent extends base_component.a{constructor(injector,modalRef,passwordsService){super(injector),this.modalRef=modalRef,this.passwordsService=passwordsService,this.done=new core.n}ngOnInit(){super.ngOnInit(),this.self=this.authHelper.isSelf(this.user),this.form=this.formBuilder.group({newPassword:[null,fesm2015_forms.G.required],newPasswordConfirmation:[null,fesm2015_forms.G.compose([fesm2015_forms.G.required,PASSWORDS_MATCH_VAL])]}),this.requireOld&&this.form.setControl(\"oldPassword\",this.formBuilder.control(null,fesm2015_forms.G.required))}submit(){if(!Object(helper.F)(this.form))return;const params=this.form.value;params.checkConfirmation=!0,this.addSub(this.passwordsService.changePassword({user:this.param,type:this.type.id,body:params}).subscribe(()=>{this.done.emit(),this.modalRef.hide()}))}}return ChangePasswordDialogComponent.ɵfac=function(t){return new(t||ChangePasswordDialogComponent)(core.Kb(core.r),core.Kb(ngx_bootstrap_modal.a),core.Kb(passwords_service.a))},ChangePasswordDialogComponent.ɵcmp=core.Eb({type:ChangePasswordDialogComponent,selectors:[[\"change-password-dialog\"]],inputs:{param:\"param\",user:\"user\",type:\"type\",requireOld:\"requireOld\"},outputs:{done:\"done\"},features:[core.ub],decls:10,vars:10,consts:[[3,\"formGroup\"],[\"required\",\"\",\"focused\",\"\",\"formControlName\",\"oldPassword\",\"type\",\"password\",3,\"label\",4,\"ngIf\"],[\"required\",\"\",\"formControlName\",\"newPassword\",\"type\",\"password\",3,\"label\"],[\"required\",\"\",\"formControlName\",\"newPasswordConfirmation\",\"type\",\"password\",3,\"label\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\"],[\"required\",\"\",\"focused\",\"\",\"formControlName\",\"oldPassword\",\"type\",\"password\",3,\"label\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"h1\"),core.Dc(1),core.Pb(),core.Qb(2,\"form\",0),core.Bc(3,ChangePasswordDialogComponent_input_field_3_Template,1,1,\"input-field\",1),core.Lb(4,\"input-field\",2),core.Lb(5,\"input-field\",3),core.Pb(),core.Qb(6,\"actions\",4),core.Qb(7,\"action-button\",5),core.Xb(\"action\",(function(){return ctx.submit()})),core.ac(8,\"async\"),core.Pb(),core.Qb(9,\"action-button\",6),core.Xb(\"action\",(function(){return ctx.modalRef.hide()})),core.Pb(),core.Pb()),2&rf&&(core.xb(1),core.Fc(\" \",ctx.self?ctx.i18n.password.title.changeSelf:ctx.i18n.password.title.changeUser,\"\\n\"),core.xb(1),core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngIf\",ctx.requireOld),core.xb(1),core.gc(\"label\",ctx.i18n.password.newPassword),core.xb(1),core.gc(\"label\",ctx.i18n.password.passwordConfirmation),core.xb(2),core.gc(\"disabled\",core.bc(8,8,ctx.requesting$))(\"label\",ctx.i18n.general.submit),core.xb(2),core.gc(\"label\",ctx.i18n.general.cancel))},directives:[fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,common.t,input_field_component.a,fesm2015_forms.D,fesm2015_forms.v,fesm2015_forms.l,actions_component.a,action_button_component.a,focused_directive.a],pipes:[common.b],encapsulation:2,changeDetection:0}),ChangePasswordDialogComponent})();var ngx_bootstrap_alert=__webpack_require__(\"CNMR\");function ManagePasswordsComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function ManagePasswordsComponent_ng_template_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"user-info\",7),core.Lb(2,\"hr\"),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"user\",ctx_r3.data.user)}}function ManagePasswordsComponent_ng_template_3_ng_container_2_hr_1_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\",17)}function ManagePasswordsComponent_ng_template_3_ng_container_2_avatar_4_Template(rf,ctx){1&rf&&core.Lb(0,\"avatar\",18),2&rf&&core.gc(\"size\",64)}const manage_passwords_component_c0=function(a0){return{\"mt-0\":a0}};function ManagePasswordsComponent_ng_template_3_ng_container_2_h2_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"h2\",19),core.Dc(1),core.Pb()),2&rf){const ctx_r13=core.Zb(),password_r6=ctx_r13.$implicit;core.gc(\"ngClass\",core.jc(2,manage_passwords_component_c0,ctx_r13.first)),core.xb(1),core.Fc(\" \",password_r6.type.name,\"\")}}function ManagePasswordsComponent_ng_template_3_ng_container_2_div_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",20),core.Dc(1),core.ac(2,\"dateTime\"),core.Pb()),2&rf){const password_r6=core.Zb().$implicit,ctx_r11=core.Zb(2);core.xb(1),core.Fc(\" \",ctx_r11.i18n.password.statusSince(core.bc(2,1,password_r6.date)),\" \")}}const manage_passwords_component_c1=function(a0){return{\"mb-3\":a0}};function ManagePasswordsComponent_ng_template_3_ng_container_2_action_button_12_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"action-button\",21),core.Xb(\"action\",(function(){return ctx.$implicit.onClick()})),core.Pb()),2&rf){const action_r15=ctx.$implicit;core.gc(\"ngClass\",core.jc(2,manage_passwords_component_c1,!ctx.last))(\"label\",action_r15.label)}}function ManagePasswordsComponent_ng_template_3_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,ManagePasswordsComponent_ng_template_3_ng_container_2_hr_1_Template,1,0,\"hr\",8),core.Qb(2,\"div\",9),core.Qb(3,\"div\",10),core.Bc(4,ManagePasswordsComponent_ng_template_3_ng_container_2_avatar_4_Template,1,1,\"avatar\",11),core.ac(5,\"async\"),core.Pb(),core.Qb(6,\"div\",12),core.Bc(7,ManagePasswordsComponent_ng_template_3_ng_container_2_h2_7_Template,2,4,\"h2\",13),core.Qb(8,\"div\"),core.Dc(9),core.Pb(),core.Bc(10,ManagePasswordsComponent_ng_template_3_ng_container_2_div_10_Template,3,3,\"div\",14),core.Pb(),core.Qb(11,\"div\",15),core.Bc(12,ManagePasswordsComponent_ng_template_3_ng_container_2_action_button_12_Template,1,4,\"action-button\",16),core.Pb(),core.Pb(),core.Nb()),2&rf){const password_r6=ctx.$implicit,first_r7=ctx.first,ctx_r4=core.Zb(2);core.xb(1),core.gc(\"ngIf\",!first_r7),core.xb(3),core.gc(\"ngIf\",core.bc(5,6,ctx_r4.layout.gtxxs$)),core.xb(3),core.gc(\"ngIf\",ctx_r4.multiple),core.xb(2),core.Ec(ctx_r4.status(password_r6)),core.xb(1),core.gc(\"ngIf\",password_r6.date),core.xb(2),core.gc(\"ngForOf\",ctx_r4.actions(password_r6))}}function ManagePasswordsComponent_ng_template_3_page_content_3_field_option_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",29),2&rf){const question_r19=ctx.$implicit;core.gc(\"value\",question_r19.internalName)(\"text\",question_r19.name)}}function ManagePasswordsComponent_ng_template_3_page_content_3_Template(rf,ctx){if(1&rf){const _r21=core.Rb();core.Qb(0,\"page-content\",22),core.Qb(1,\"alert\",23),core.Dc(2),core.Pb(),core.Qb(3,\"form\",24),core.Qb(4,\"single-selection-field\",25),core.Bc(5,ManagePasswordsComponent_ng_template_3_page_content_3_field_option_5_Template,1,2,\"field-option\",26),core.Pb(),core.Lb(6,\"input-field\",27),core.Pb(),core.Qb(7,\"actions\"),core.Qb(8,\"action-button\",28),core.Xb(\"action\",(function(){return core.sc(_r21),core.Zb(2).setSecurityAnswer()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r5=core.Zb(2);core.gc(\"heading\",ctx_r5.i18n.password.title.securityAnswer)(\"mobileHeading\",ctx_r5.i18n.password.mobileTitle.securityAnswer),core.xb(2),core.Ec(ctx_r5.i18n.securityQuestion.message),core.xb(1),core.gc(\"formGroup\",ctx_r5.securityAnswer),core.xb(1),core.gc(\"label\",ctx_r5.i18n.securityQuestion.question),core.xb(1),core.gc(\"ngForOf\",ctx_r5.data.dataForSetSecurityAnswer.securityQuestions),core.xb(1),core.gc(\"label\",ctx_r5.i18n.securityQuestion.answer),core.xb(2),core.gc(\"label\",ctx_r5.i18n.general.save)}}function ManagePasswordsComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.Bc(1,ManagePasswordsComponent_ng_template_3_ng_container_1_Template,3,1,\"ng-container\",4),core.Bc(2,ManagePasswordsComponent_ng_template_3_ng_container_2_Template,13,8,\"ng-container\",5),core.Pb(),core.Bc(3,ManagePasswordsComponent_ng_template_3_page_content_3_Template,9,8,\"page-content\",6)),2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.title)(\"mobileHeading\",ctx_r2.mobileTitle)(\"last\",!(null!=ctx_r2.data&&ctx_r2.data.dataForSetSecurityAnswer)),core.xb(1),core.gc(\"ngIf\",ctx_r2.data.user&&!ctx_r2.self),core.xb(1),core.gc(\"ngForOf\",ctx_r2.data.passwords),core.xb(1),core.gc(\"ngIf\",null==ctx_r2.data?null:ctx_r2.data.dataForSetSecurityAnswer)}}let manage_passwords_component_ManagePasswordsComponent=(()=>{class ManagePasswordsComponent extends base_page_component.a{constructor(injector,modal,passwordsService){super(injector),this.modal=modal,this.passwordsService=passwordsService}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.passwordsService.getUserPasswordsListData({user:this.param}).subscribe(data=>{this.data=data}))}onDataInitialized(data){this.self=this.authHelper.isSelf(data.user),this.multiple=data.passwords.length>1,this.self?(this.title=this.multiple?this.i18n.password.title.manageMultipleSelf:this.i18n.password.title.manageSingleSelf,this.mobileTitle=this.multiple?this.i18n.password.mobileTitle.manageMultipleSelf:this.i18n.password.mobileTitle.manageSingleSelf):(this.title=this.multiple?this.i18n.password.title.manageMultipleUser:this.i18n.password.title.manageSingleUser,this.mobileTitle=this.multiple?this.i18n.password.mobileTitle.manageMultipleUser:this.i18n.password.mobileTitle.manageSingleUser),data.dataForSetSecurityAnswer&&(this.securityAnswer=this.formBuilder.group({securityQuestion:[null,fesm2015_forms.G.required],securityAnswer:[null,fesm2015_forms.G.required]}))}actions(password){const actions=[],permissions=password.permissions||{};return permissions.change&&actions.push(new action.a(this.i18n.password.action.change,()=>{this.change(password)})),permissions.changeGenerated&&actions.push(new action.a(this.i18n.password.action.change,()=>{this.changeGenerated(password)})),permissions.unblock&&actions.push(new action.a(this.i18n.password.action.unblock,()=>{this.unblock(password)})),permissions.generate&&actions.push(new action.a(this.i18n.password.action.activate,()=>{this.generate(password)})),permissions.enable&&actions.push(new action.a(this.i18n.password.action.enable,()=>{this.enable(password)})),permissions.disable&&actions.push(new action.a(this.i18n.password.action.disable,()=>{this.disable(password)})),actions}setSecurityAnswer(){Object(helper.F)(this.securityAnswer),this.securityAnswer.valid&&this.addSub(this.passwordsService.setSecurityAnswer({body:this.securityAnswer.value}).subscribe(()=>{this.notification.snackBar(this.i18n.securityQuestion.set),this.reload()}))}status(password){switch(password.status){case models.T.ACTIVE:return this.i18n.password.status.active;case models.T.DISABLED:return this.i18n.password.status.disabled;case models.T.EXPIRED:return this.i18n.password.status.expired;case models.T.INDEFINITELY_BLOCKED:return this.i18n.password.status.indefinitelyBlocked;case models.T.NEVER_CREATED:return this.i18n.password.status.neverCreated;case models.T.PENDING:return this.i18n.password.status.pending;case models.T.RESET:return this.i18n.password.status.reset;case models.T.TEMPORARILY_BLOCKED:return this.i18n.password.status.temporarilyBlocked}}change(password){const ref=this.modal.show(change_password_dialog_component_ChangePasswordDialogComponent,{class:\"modal-form\",initialState:{param:this.param,type:password.type,user:this.data.user,requireOld:password.requireOldPasswordForChange}});this.addSub(ref.content.done.subscribe(()=>{this.notification.snackBar(this.i18n.password.action.changeDone(password.type.name)),this.reload()}))}generate(password){this.notification.confirm({title:this.i18n.password.action.activate,message:this.i18n.password.action.activateConfirm(password.type.name),callback:()=>this.doGenerate(password)})}doGenerate(password){this.addSub(this.passwordsService.generatePassword({type:password.type.id}).subscribe(newValue=>{this.notification.info(this.i18n.password.action.changeGeneratedDone({type:password.type.name,value:newValue})),this.reload()}))}createDeviceConfirmation(password){return()=>({type:models.s.GENERATE_PASSWORD,passwordType:password.type.id})}changeGenerated(password){this.notification.confirm({title:this.i18n.password.action.change,message:this.i18n.password.action.changeGeneratedConfirm(password.type.name),createDeviceConfirmation:this.createDeviceConfirmation(password),passwordInput:this.data.confirmationPasswordInput,callback:res=>this.doChangeGenerated(password,res.confirmationPassword)})}doChangeGenerated(password,confirmationPassword){this.addSub(this.passwordsService.changeGenerated({type:password.type.id,confirmationPassword:confirmationPassword}).subscribe(newValue=>{this.notification.info(this.i18n.password.action.changeGeneratedDone({type:password.type.name,value:newValue})),this.reload()}))}unblock(password){this.notification.confirm({title:this.i18n.password.action.unblock,message:this.i18n.password.action.unblockConfirm(password.type.name),callback:()=>this.doUnblock(password)})}doUnblock(password){this.addSub(this.passwordsService.unblockPassword({user:this.param,type:password.type.id}).subscribe(()=>{this.notification.snackBar(this.i18n.password.action.unblockDone(password.type.name)),this.reload()}))}enable(password){this.notification.confirm({title:this.i18n.password.action.enable,message:this.i18n.password.action.enableConfirm(password.type.name),callback:()=>this.doEnable(password)})}doEnable(password){this.addSub(this.passwordsService.enablePassword({user:this.param,type:password.type.id}).subscribe(()=>{this.notification.snackBar(this.i18n.password.action.enableDone(password.type.name)),this.reload()}))}disable(password){this.notification.confirm({title:this.i18n.password.action.disable,message:this.i18n.password.action.disableConfirm(password.type.name),callback:()=>this.doDisable(password)})}doDisable(password){this.addSub(this.passwordsService.disablePassword({user:this.param,type:password.type.id}).subscribe(()=>{this.notification.snackBar(this.i18n.password.action.disableDone(password.type.name)),this.reload()}))}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.PASSWORDS)}}return ManagePasswordsComponent.ɵfac=function(t){return new(t||ManagePasswordsComponent)(core.Kb(core.r),core.Kb(ngx_bootstrap_modal.b),core.Kb(passwords_service.a))},ManagePasswordsComponent.ɵcmp=core.Eb({type:ManagePasswordsComponent,selectors:[[\"manage-passwords\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[3,\"heading\",\"mobileHeading\",\"last\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\",4,\"ngIf\"],[\"labelCols\",\"2\",3,\"user\"],[\"class\",\"mt-4\",4,\"ngIf\"],[1,\"row\",\"no-gutters\"],[1,\"col-4\",\"col-md-2\"],[\"class\",\"ml-2 mr-5 management\",\"iconSize\",\"64px\",\"icon\",\"vpn_key\",3,\"size\",4,\"ngIf\"],[1,\"col-8\",\"col-md-7\"],[\"class\",\"border-0 mb-3\",3,\"ngClass\",4,\"ngIf\"],[\"class\",\"mt-2\",4,\"ngIf\"],[1,\"col-12\",\"col-md-3\",\"mt-3\",\"mt-md-0\"],[\"class\",\"d-block ml-auto\",3,\"ngClass\",\"label\",\"action\",4,\"ngFor\",\"ngForOf\"],[1,\"mt-4\"],[\"iconSize\",\"64px\",\"icon\",\"vpn_key\",1,\"ml-2\",\"mr-5\",\"management\",3,\"size\"],[1,\"border-0\",\"mb-3\",3,\"ngClass\"],[1,\"mt-2\"],[1,\"d-block\",\"ml-auto\",3,\"ngClass\",\"label\",\"action\"],[\"hideBack\",\"\",\"last\",\"\",3,\"heading\",\"mobileHeading\"],[\"type\",\"info\"],[3,\"formGroup\"],[\"formControlName\",\"securityQuestion\",\"required\",\"\",3,\"label\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"securityAnswer\",\"required\",\"\",3,\"label\"],[3,\"label\",\"action\"],[3,\"value\",\"text\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ManagePasswordsComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,ManagePasswordsComponent_ng_template_3_Template,4,6,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,common.s,user_info_component.a,avatar_component.a,common.q,action_button_component.a,ngx_bootstrap_alert.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,input_field_component.a,actions_component.a,field_option_directive.a],pipes:[common.b,date_time_pipe.a],encapsulation:2,changeDetection:0}),ManagePasswordsComponent})();var product_assignment_service=__webpack_require__(\"GJcY\");function ListProductAssignmentComponent_ng_container_2_ng_container_4_Template(rf,ctx){1&rf&&core.Mb(0)}function ListProductAssignmentComponent_ng_container_2_ng_container_5_Template(rf,ctx){1&rf&&core.Mb(0)}function ListProductAssignmentComponent_ng_container_2_ng_container_6_Template(rf,ctx){1&rf&&core.Mb(0)}const list_product_assignment_component_c0=function(a0,a1){return{$implicit:a0,title:a1}},list_product_assignment_component_c1=function(a0,a1){return{$implicit:a0,title:a1,readOnly:!0}};function ListProductAssignmentComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",3),core.ac(2,\"async\"),core.Lb(3,\"user-info\",4),core.Bc(4,ListProductAssignmentComponent_ng_container_2_ng_container_4_Template,1,0,\"ng-container\",5),core.Bc(5,ListProductAssignmentComponent_ng_container_2_ng_container_5_Template,1,0,\"ng-container\",5),core.Bc(6,ListProductAssignmentComponent_ng_container_2_ng_container_6_Template,1,0,\"ng-container\",5),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb(),_r1=core.qc(4);core.xb(1),core.gc(\"heading\",ctx_r0.i18n.product.title.list)(\"mobileHeading\",ctx_r0.i18n.product.mobileTitle.list)(\"headingActions\",core.bc(2,10,ctx_r0.headingActions$)),core.xb(2),core.gc(\"user\",ctx_r0.data.user),core.xb(1),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.kc(12,list_product_assignment_component_c0,ctx_r0.data.userProducts,ctx_r0.i18n.product.assigned.individual)),core.xb(1),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.kc(15,list_product_assignment_component_c1,ctx_r0.data.groupProducts,ctx_r0.i18n.product.assigned.group)),core.xb(1),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.kc(18,list_product_assignment_component_c1,ctx_r0.data.groupSetProducts,ctx_r0.i18n.product.assigned.groupSet))}}function ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_container_3_div_1_div_3_Template(rf,ctx){if(1&rf){const _r18=core.Rb();core.Qb(0,\"div\",13),core.Qb(1,\"button\",14),core.Xb(\"click\",(function($event){core.sc(_r18);const prod_r14=core.Zb().$implicit;return core.Zb(4).remove(prod_r14),$event.stopPropagation(),$event.preventDefault()})),core.Lb(2,\"icon\",15),core.Pb(),core.Pb()}if(2&rf){const ctx_r15=core.Zb(5);core.xb(1),core.gc(\"tooltip\",ctx_r15.i18n.general.remove)}}function ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_container_3_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",10),core.Qb(1,\"div\",11),core.Dc(2),core.Pb(),core.Bc(3,ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_container_3_div_1_div_3_Template,3,1,\"div\",12),core.Pb()),2&rf){const prod_r14=ctx.$implicit,readOnly_r8=core.Zb(3).readOnly,ctx_r13=core.Zb();core.xb(2),core.Ec(prod_r14.name),core.xb(1),core.gc(\"ngIf\",!readOnly_r8&&ctx_r13.canRemove(prod_r14))}}function ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_container_3_div_1_Template,4,2,\"div\",9),core.Nb()),2&rf){const products_r6=core.Zb(2).$implicit;core.xb(1),core.gc(\"ngForOf\",products_r6)}}function ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_template_5_ng_container_10_button_9_Template(rf,ctx){if(1&rf){const _r27=core.Rb();core.Qb(0,\"button\",14),core.Xb(\"click\",(function($event){core.sc(_r27);const prod_r22=core.Zb().$implicit;return core.Zb(4).remove(prod_r22),$event.stopPropagation()})),core.Lb(1,\"icon\",15),core.Pb()}if(2&rf){const ctx_r24=core.Zb(5);core.gc(\"tooltip\",ctx_r24.i18n.general.remove)}}const list_product_assignment_component_c2=function(a0){return{\"no-border\":a0}};function ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_template_5_ng_container_10_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"tr\"),core.Qb(2,\"td\",21),core.Dc(3),core.Pb(),core.Qb(4,\"td\",21),core.Dc(5),core.Pb(),core.Qb(6,\"td\",21),core.Dc(7),core.Pb(),core.Qb(8,\"td\",22),core.Bc(9,ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_template_5_ng_container_10_button_9_Template,2,1,\"button\",23),core.Pb(),core.Pb(),core.Nb()),2&rf){const prod_r22=ctx.$implicit,last_r23=ctx.last,readOnly_r8=core.Zb(3).readOnly,ctx_r21=core.Zb();core.xb(2),core.gc(\"ngClass\",core.jc(8,list_product_assignment_component_c2,last_r23)),core.xb(1),core.Fc(\" \",prod_r22.name,\" \"),core.xb(1),core.gc(\"ngClass\",core.jc(10,list_product_assignment_component_c2,last_r23)),core.xb(1),core.Fc(\" \",ctx_r21.resolveKindLabel(prod_r22.kind),\" \"),core.xb(1),core.gc(\"ngClass\",core.jc(12,list_product_assignment_component_c2,last_r23)),core.xb(1),core.Fc(\" \",null==prod_r22.userAccount?null:prod_r22.userAccount.name,\" \"),core.xb(1),core.gc(\"ngClass\",core.jc(14,list_product_assignment_component_c2,last_r23)),core.xb(1),core.gc(\"ngIf\",!readOnly_r8&&ctx_r21.canRemove(prod_r22))}}function ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_template_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",16),core.Qb(1,\"thead\"),core.Qb(2,\"th\",17),core.Dc(3),core.Pb(),core.Qb(4,\"th\",18),core.Dc(5),core.Pb(),core.Qb(6,\"th\",18),core.Dc(7),core.Pb(),core.Lb(8,\"th\",19),core.Pb(),core.Qb(9,\"tbody\"),core.Bc(10,ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_template_5_ng_container_10_Template,10,16,\"ng-container\",20),core.Pb(),core.Pb()),2&rf){const products_r6=core.Zb(2).$implicit,ctx_r12=core.Zb();core.xb(3),core.Ec(ctx_r12.i18n.general.name),core.xb(2),core.Ec(ctx_r12.i18n.general.type),core.xb(2),core.Fc(\"\",ctx_r12.i18n.product.userAccount,\" \"),core.xb(3),core.gc(\"ngForOf\",products_r6)}}function ListProductAssignmentComponent_ng_template_3_ng_container_0_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",6),core.Dc(2),core.Pb(),core.Bc(3,ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_container_3_Template,2,1,\"ng-container\",7),core.ac(4,\"async\"),core.Bc(5,ListProductAssignmentComponent_ng_template_3_ng_container_0_ng_template_5_Template,11,4,\"ng-template\",null,8,core.Cc),core.Nb()),2&rf){const _r11=core.qc(6),title_r7=core.Zb().title,ctx_r9=core.Zb();core.xb(2),core.Ec(title_r7),core.xb(1),core.gc(\"ngIf\",core.bc(4,3,ctx_r9.layout.ltsm$))(\"ngIfElse\",_r11)}}function ListProductAssignmentComponent_ng_template_3_Template(rf,ctx){if(1&rf&&core.Bc(0,ListProductAssignmentComponent_ng_template_3_ng_container_0_Template,7,5,\"ng-container\",1),2&rf){const products_r6=ctx.$implicit,ctx_r2=core.Zb();core.gc(\"ngIf\",!ctx_r2.empty(products_r6))}}let list_product_assignment_component_ListProductAssignmentComponent=(()=>{class ListProductAssignmentComponent extends base_page_component.a{constructor(injector,productAssignmentService){super(injector),this.productAssignmentService=productAssignmentService,this.empty=helper.h}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.productAssignmentService.getUserProductsData({user:this.user}).subscribe(data=>this.data=data))}onDataInitialized(data){const headingActions=[];data.assignable&&headingActions.push(new action.c(\"add\",this.i18n.product.assignIndividualProduct,()=>this.assign())),data.history&&headingActions.push(new action.c(\"history\",this.i18n.general.viewHistory,()=>this.router.navigate([\"/users\",this.user,\"product-assignment\",\"history\"]))),this.headingActions=headingActions}resolveKindLabel(kind){switch(kind){case models.cb.ADMINISTRATOR:return this.i18n.product.kind.administrator;case models.cb.BROKER:return this.i18n.product.kind.broker;case models.cb.MEMBER:return this.i18n.product.kind.member}}resolveMenu(){return this.menu.searchUsersMenu()}assign(){this.notification.confirm({title:this.i18n.product.assignIndividualProduct,labelPosition:\"above\",customFields:[{internalName:\"products\",name:this.i18n.product.product,type:models.p.SINGLE_SELECTION,control:models.n.SINGLE_SELECTION,hasValuesList:!0,defaultValue:this.data.assignable[0].id,possibleValues:this.data.assignable.map(type=>({id:type.id,value:type.name})),required:!0}],callback:res=>{this.addSub(this.productAssignmentService.assignIndividualProduct({product:res.customValues.products,user:this.user}).subscribe(()=>{this.notification.snackBar(this.i18n.product.productAssigned),this.reload()}))}})}canRemove(product){return this.data.unassignable.find(a=>product.id===a||product.internalName===a)}remove(product){this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>{this.addSub(this.productAssignmentService.unassignIndividualProduct({product:product.id,user:this.user}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.reload()}))}})}}return ListProductAssignmentComponent.ɵfac=function(t){return new(t||ListProductAssignmentComponent)(core.Kb(core.r),core.Kb(product_assignment_service.a))},ListProductAssignmentComponent.ɵcmp=core.Eb({type:ListProductAssignmentComponent,selectors:[[\"list-product-assignment\"]],features:[core.ub],decls:5,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[\"products\",\"\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"user\"],[4,\"ngTemplateOutlet\",\"ngTemplateOutletContext\"],[1,\"mt-3\",\"mb-2\"],[4,\"ngIf\",\"ngIfElse\"],[\"largeTable\",\"\"],[\"class\",\"d-flex mb-2\",4,\"ngFor\",\"ngForOf\"],[1,\"d-flex\",\"mb-2\"],[1,\"cell-main\"],[\"class\",\"ml-auto text-right\",4,\"ngIf\"],[1,\"ml-auto\",\"text-right\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"clear\"],[1,\"table\",\"table-hover\",\"small-height\",\"mb-0\"],[\"width\",\"40%\",1,\"no-border\"],[\"width\",\"25%\",1,\"no-border\"],[\"width\",\"10%\",1,\"no-border\"],[4,\"ngFor\",\"ngForOf\"],[3,\"ngClass\"],[1,\"actions\",3,\"ngClass\"],[\"class\",\"btn btn-icon\",3,\"tooltip\",\"click\",4,\"ngIf\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ListProductAssignmentComponent_ng_container_2_Template,7,21,\"ng-container\",1),core.Pb(),core.Bc(3,ListProductAssignmentComponent_ng_template_3_Template,1,1,\"ng-template\",null,2,core.Cc)),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,common.A,common.s,ngx_bootstrap_tooltip.b,icon_component.a,common.q],pipes:[common.b],encapsulation:2,changeDetection:0}),ListProductAssignmentComponent})();function ViewProductAssignmentHistoryComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function ViewProductAssignmentHistoryComponent_ng_template_3_mobile_result_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\"),core.Qb(1,\"div\",9),core.Dc(2),core.Pb(),core.Qb(3,\"div\",10),core.Dc(4),core.ac(5,\"dateTime\"),core.Pb(),core.Qb(6,\"div\",11),core.Dc(7),core.Pb(),core.Qb(8,\"div\",11),core.Dc(9),core.Pb(),core.Pb()),2&rf){const row_r5=ctx.$implicit,ctx_r3=core.Zb(2);core.xb(2),core.Fc(\" \",row_r5.product.name,\" \"),core.xb(2),core.Fc(\" \",core.bc(5,6,row_r5.date),\" \"),core.xb(3),core.Gc(\" \",ctx_r3.i18n.product.action,\" \",row_r5.action===ctx_r3.ProductAssignmentActionEnum.ASSIGN?ctx_r3.i18n.product.assign:ctx_r3.i18n.product.unassign,\" \"),core.xb(2),core.Gc(\" \",ctx_r3.i18n.general.performedBy,\" \",row_r5.by.display,\" \")}}function ViewProductAssignmentHistoryComponent_ng_template_3_table_5_tr_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\"),core.Qb(1,\"td\"),core.Dc(2),core.ac(3,\"dateTime\"),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.Pb(),core.Qb(8,\"td\"),core.Dc(9),core.Pb(),core.Pb()),2&rf){const row_r7=ctx.$implicit,ctx_r6=core.Zb(3);core.xb(2),core.Ec(core.bc(3,4,row_r7.date)),core.xb(3),core.Ec(row_r7.product.name),core.xb(2),core.Fc(\" \",row_r7.action===ctx_r6.ProductAssignmentActionEnum.ASSIGN?ctx_r6.i18n.product.assign:ctx_r6.i18n.product.unassign,\" \"),core.xb(2),core.Ec(row_r7.by.display)}}function ViewProductAssignmentHistoryComponent_ng_template_3_table_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",12),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Pb(),core.Qb(10,\"tbody\"),core.Bc(11,ViewProductAssignmentHistoryComponent_ng_template_3_table_5_tr_11_Template,10,6,\"tr\",13),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(3),core.Ec(ctx_r4.i18n.general.date),core.xb(2),core.Ec(ctx_r4.i18n.product.product),core.xb(2),core.Ec(ctx_r4.i18n.product.action),core.xb(2),core.Ec(ctx_r4.i18n.general.performedBy),core.xb(2),core.gc(\"ngForOf\",ctx_r4.data.history)}}function ViewProductAssignmentHistoryComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.Qb(1,\"label-value\",4),core.Lb(2,\"user-link\",5),core.Pb(),core.Pb(),core.Qb(3,\"results-layout\",6),core.Bc(4,ViewProductAssignmentHistoryComponent_ng_template_3_mobile_result_4_Template,10,8,\"mobile-result\",7),core.Bc(5,ViewProductAssignmentHistoryComponent_ng_template_3_table_5_Template,12,5,\"table\",8),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.product.title.history)(\"mobileHeading\",ctx_r2.i18n.product.mobileTitle.history),core.xb(1),core.gc(\"label\",ctx_r2.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r2.data.user),core.xb(1),core.gc(\"results\",ctx_r2.data.history)(\"onClick\",ctx_r2.onClick)}}let view_product_assignment_history_component_ViewProductAssignmentHistoryComponent=(()=>{class ViewProductAssignmentHistoryComponent extends base_view_page_component.a{constructor(injector,productAssignmentSerivce){super(injector),this.productAssignmentSerivce=productAssignmentSerivce,this.ProductAssignmentActionEnum=models.bb}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.productAssignmentSerivce.getUserProductsData({user:this.user,fields:[\"user\",\"history\"]}).subscribe(data=>this.data=data))}get onClick(){return row=>null!=row}resolveMenu(data){return this.menu.searchUsersMenu(data.user)}}return ViewProductAssignmentHistoryComponent.ɵfac=function(t){return new(t||ViewProductAssignmentHistoryComponent)(core.Kb(core.r),core.Kb(product_assignment_service.a))},ViewProductAssignmentHistoryComponent.ɵcmp=core.Eb({type:ViewProductAssignmentHistoryComponent,selectors:[[\"view-product-assignment-history\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[3,\"heading\",\"mobileHeading\"],[3,\"label\"],[3,\"user\"],[3,\"results\",\"onClick\"],[4,\"mobileResult\"],[\"class\",\"table table-hover\",4,\"resultTable\"],[1,\"cell-main\"],[1,\"cell-date\"],[1,\"cell-text\"],[1,\"table\",\"table-hover\"],[4,\"ngFor\",\"ngForOf\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewProductAssignmentHistoryComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,ViewProductAssignmentHistoryComponent_ng_template_3_Template,6,6,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,label_value_component.a,user_link_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a,common.s],pipes:[common.b,date_time_pipe.a],encapsulation:2,changeDetection:0}),ViewProductAssignmentHistoryComponent})();var images_service=__webpack_require__(\"zlpg\"),phones_service=__webpack_require__(\"mMSl\"),users_service=__webpack_require__(\"dt5f\"),confirmation_mode=__webpack_require__(\"9d5G\"),manage_images_component=__webpack_require__(\"bER3\"),address_helper_service=__webpack_require__(\"MYKl\"),maps_service=__webpack_require__(\"c/3O\");const verify_phone_component_c0=[\"codeField\"];let verify_phone_component_VerifyPhoneComponent=(()=>{class VerifyPhoneComponent extends base_component.a{constructor(injector,modalRef,phonesService){super(injector),this.modalRef=modalRef,this.phonesService=phonesService,this.verified=new core.n,this.message$=new BehaviorSubject.a(\"\"),this.disabled=!1,this.code=this.formBuilder.control(null,fesm2015_forms.G.required)}ngOnInit(){super.ngOnInit(),this.message=this.i18n.phone.verify.message}sendCode(){this.addSub(this.phonesService.sendPhoneVerificationCode({id:this.phone.id}).subscribe(phoneNumber=>{this.message=this.i18n.phone.verify.done(phoneNumber),this.code.setValue(null),this.codeField.focus()}))}set message(message){this.message$.next(message)}verify(){Object(helper.F)(this.code)&&this.addSub(this.phonesService.verifyPhone({id:this.phone.id,code:this.code.value}).subscribe(status=>{switch(status){case models.l.CODE_NOT_SENT:case models.l.EXPIRED:this.notification.error(this.i18n.phone.error.verify.expired);break;case models.l.FAILED:this.notification.error(this.i18n.phone.error.verify.invalid);break;case models.l.MAX_ATTEMPTS_REACHED:this.notification.error(this.i18n.phone.error.verify.maxAttempts);break;case models.l.SUCCESS:this.disabled=!0,this.verified.emit(!0)}}))}}return VerifyPhoneComponent.ɵfac=function(t){return new(t||VerifyPhoneComponent)(core.Kb(core.r),core.Kb(ngx_bootstrap_modal.a),core.Kb(phones_service.a))},VerifyPhoneComponent.ɵcmp=core.Eb({type:VerifyPhoneComponent,selectors:[[\"verify-phone\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.yc(verify_phone_component_c0,!0),2&rf&&core.pc(_t=core.Yb())&&(ctx.codeField=_t.first)},inputs:{phone:\"phone\"},outputs:{verified:\"verified\"},features:[core.ub],decls:18,vars:12,consts:[[1,\"row\"],[1,\"col-3\",\"col-form-label\"],[\"for\",\"smsCode\"],[1,\"col-6\"],[\"id\",\"smsCode\",\"fieldSize\",\"4\",\"type\",\"number\",\"focused\",\"\",3,\"formControl\"],[\"codeField\",\"\"],[1,\"col-3\"],[1,\"d-block\",\"w-100\",3,\"label\",\"action\"],[1,\"mt-3\",\"pb-1\"],[3,\"disabled\",\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"h1\"),core.Dc(1),core.Pb(),core.Qb(2,\"div\",0),core.Qb(3,\"div\",1),core.Qb(4,\"label\",2),core.Dc(5),core.Pb(),core.Pb(),core.Qb(6,\"div\",3),core.Lb(7,\"input-field\",4,5),core.Pb(),core.Qb(9,\"div\",6),core.Qb(10,\"action-button\",7),core.Xb(\"action\",(function(){return ctx.sendCode()})),core.Pb(),core.Pb(),core.Pb(),core.Qb(11,\"div\",8),core.Dc(12),core.ac(13,\"async\"),core.Pb(),core.Qb(14,\"actions\"),core.Qb(15,\"action-button\",9),core.Xb(\"action\",(function(){return ctx.verify()})),core.ac(16,\"async\"),core.Pb(),core.Qb(17,\"action-button\",10),core.Xb(\"action\",(function(){return ctx.modalRef.hide()})),core.Pb(),core.Pb()),2&rf&&(core.xb(1),core.Fc(\" \",ctx.i18n.phone.verify.title(ctx.phone.number),\"\\n\"),core.xb(4),core.Fc(\" \",ctx.i18n.phone.verify.code,\" \"),core.xb(2),core.gc(\"formControl\",ctx.code),core.xb(3),core.gc(\"label\",ctx.i18n.phone.verify.send),core.xb(2),core.Ec(core.bc(13,8,ctx.message$)),core.xb(3),core.gc(\"disabled\",core.bc(16,10,ctx.requesting$))(\"label\",ctx.i18n.general.confirm),core.xb(2),core.gc(\"label\",ctx.i18n.general.cancel))},directives:[input_field_component.a,focused_directive.a,fesm2015_forms.v,fesm2015_forms.k,action_button_component.a,actions_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),VerifyPhoneComponent})();var take=__webpack_require__(\"IzEk\"),first=__webpack_require__(\"SxV6\"),image_upload_component=__webpack_require__(\"pz1b\"),extra_cell_directive=__webpack_require__(\"pBnU\"),field_privacy_component=__webpack_require__(\"sGzL\"),address_form_component=__webpack_require__(\"N7zh\"),static_map_component=__webpack_require__(\"CyT4\"),ngx_bootstrap_dropdown=__webpack_require__(\"FE24\"),images_field_component=__webpack_require__(\"z332\"),spinner_component=__webpack_require__(\"oj/z\");function EditProfileComponent_page_content_2_ng_container_2_ng_container_1_avatar_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"avatar\",21),2&rf){const ctx_r18=core.Zb(4);core.gc(\"image\",ctx_r18.images[0])(\"roundBorders\",!1)}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_1_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",22),core.Dc(1),core.Pb()),2&rf){const ctx_r19=core.Zb(4);core.xb(1),core.Fc(\" \",ctx_r19.i18n.user.noImage,\" \")}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_1_actions_8_action_button_2_Template(rf,ctx){if(1&rf){const _r24=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){return core.sc(_r24),core.Zb(5).removeAllImages()})),core.Pb()}if(2&rf){const ctx_r22=core.Zb(5);core.gc(\"label\",ctx_r22.i18n.field.image.remove)}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_1_actions_8_Template(rf,ctx){if(1&rf){const _r26=core.Rb();core.Qb(0,\"actions\",23),core.Qb(1,\"action-button\",24),core.Xb(\"action\",(function(){return core.sc(_r26),core.Zb(),core.qc(7).perform()})),core.Pb(),core.Bc(2,EditProfileComponent_page_content_2_ng_container_2_ng_container_1_actions_8_action_button_2_Template,1,1,\"action-button\",25),core.Pb()}if(2&rf){const ctx_r21=core.Zb(4);core.xb(1),core.gc(\"label\",ctx_r21.i18n.field.image.upload),core.xb(1),core.gc(\"ngIf\",ctx_r21.images.length>0)}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf){const _r28=core.Rb();core.Ob(0),core.Qb(1,\"h2\",14),core.Dc(2),core.Pb(),core.Qb(3,\"div\",15),core.Bc(4,EditProfileComponent_page_content_2_ng_container_2_ng_container_1_avatar_4_Template,1,2,\"avatar\",16),core.Bc(5,EditProfileComponent_page_content_2_ng_container_2_ng_container_1_div_5_Template,2,1,\"div\",17),core.Pb(),core.Qb(6,\"image-upload\",18,19),core.Xb(\"uploadDone\",(function($event){return core.sc(_r28),core.Zb(3).onUploadDone($event)})),core.Pb(),core.Bc(8,EditProfileComponent_page_content_2_ng_container_2_ng_container_1_actions_8_Template,3,2,\"actions\",20),core.ac(9,\"async\"),core.Nb()}if(2&rf){const _r20=core.qc(7),ctx_r16=core.Zb(3);core.xb(2),core.Fc(\" \",ctx_r16.i18n.user.title.image,\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r16.images.length>0),core.xb(1),core.gc(\"ngIf\",0===ctx_r16.images.length),core.xb(1),core.gc(\"owner\",ctx_r16.param),core.xb(2),core.gc(\"ngIf\",ctx_r16.canEdit(\"image\")&&!1===core.bc(9,5,_r20.uploading$))}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_2_action_button_4_Template(rf,ctx){if(1&rf){const _r35=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){return core.sc(_r35),core.Zb(),core.qc(11).perform()})),core.Pb()}if(2&rf){const ctx_r29=core.Zb(4);core.gc(\"label\",ctx_r29.i18n.field.image.upload)}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_2_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",33),core.Lb(1,\"avatar\",34),core.Pb()),2&rf){const image_r36=ctx.$implicit,ctx_r30=core.Zb(4);core.xb(1),core.gc(\"image\",image_r36)(\"roundBorders\",!1)(\"additionalImages\",ctx_r30.images)}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_2_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",35),core.Dc(2),core.Pb(),core.Nb()),2&rf){const ctx_r31=core.Zb(4);core.xb(2),core.Fc(\" \",ctx_r31.i18n.user.noImages,\" \")}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_2_div_9_Template(rf,ctx){if(1&rf){const _r38=core.Rb();core.Qb(0,\"div\",36),core.Qb(1,\"action-button\",24),core.Xb(\"action\",(function(){return core.sc(_r38),core.Zb(4).manageImages()})),core.Pb(),core.Pb()}if(2&rf){const ctx_r32=core.Zb(4);core.xb(1),core.gc(\"label\",ctx_r32.i18n.field.image.manage)}}function EditProfileComponent_page_content_2_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf){const _r40=core.Rb();core.Ob(0),core.Qb(1,\"h2\",26),core.Qb(2,\"div\",27),core.Dc(3),core.Pb(),core.Bc(4,EditProfileComponent_page_content_2_ng_container_2_ng_container_2_action_button_4_Template,1,1,\"action-button\",25),core.ac(5,\"async\"),core.Pb(),core.Qb(6,\"div\",28),core.Bc(7,EditProfileComponent_page_content_2_ng_container_2_ng_container_2_div_7_Template,2,3,\"div\",29),core.Bc(8,EditProfileComponent_page_content_2_ng_container_2_ng_container_2_ng_container_8_Template,3,1,\"ng-container\",4),core.Pb(),core.Bc(9,EditProfileComponent_page_content_2_ng_container_2_ng_container_2_div_9_Template,2,1,\"div\",30),core.Qb(10,\"image-upload\",31,32),core.Xb(\"uploadDone\",(function($event){return core.sc(_r40),core.Zb(3).onUploadDone($event)})),core.Pb(),core.Nb()}if(2&rf){const _r33=core.qc(11),ctx_r17=core.Zb(3);core.xb(3),core.Fc(\" \",ctx_r17.i18n.user.title.images,\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r17.canUploadImages&&!1===core.bc(5,7,_r33.uploading$)),core.xb(3),core.gc(\"ngForOf\",ctx_r17.images),core.xb(1),core.gc(\"ngIf\",0===ctx_r17.images.length),core.xb(1),core.gc(\"ngIf\",ctx_r17.canEdit(\"image\")&&ctx_r17.images.length>0),core.xb(1),core.gc(\"owner\",ctx_r17.param)(\"max\",ctx_r17.data.imageConfiguration.maxImages)}}function EditProfileComponent_page_content_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,EditProfileComponent_page_content_2_ng_container_2_ng_container_1_Template,10,7,\"ng-container\",4),core.Bc(2,EditProfileComponent_page_content_2_ng_container_2_ng_container_2_Template,12,9,\"ng-container\",4),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"ngIf\",\"single\"===ctx_r3.imagesAvailability),core.xb(1),core.gc(\"ngIf\",\"multiple\"===ctx_r3.imagesAvailability)}}function EditProfileComponent_page_content_2_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",37),core.Lb(1,\"user-link\",38),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.gc(\"label\",ctx_r4.i18n.user.operatorOwner),core.xb(1),core.gc(\"user\",ctx_r4.data.userConfiguration.details.user)}}function EditProfileComponent_page_content_2_input_field_7_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",39),2&rf){const ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.user.name)(\"required\",ctx_r5.canEdit(\"name\"))}}function EditProfileComponent_page_content_2_input_field_8_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",40),2&rf){const ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.user.username)(\"required\",ctx_r6.canEdit(\"username\"))}}function EditProfileComponent_page_content_2_label_value_9_field_privacy_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-privacy\",44),2&rf){const ctx_r41=core.Zb(3);core.gc(\"control\",ctx_r41.user.get(\"hiddenFields\"))}}function EditProfileComponent_page_content_2_label_value_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",41),core.Lb(1,\"input-field\",42),core.Bc(2,EditProfileComponent_page_content_2_label_value_9_field_privacy_2_Template,1,1,\"field-privacy\",43),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.gc(\"label\",ctx_r7.i18n.user.email)(\"kind\",ctx_r7.canEdit(\"email\")?\"field\":\"fieldView\")(\"ignoreExtraCell\",!ctx_r7.canManagePrivacy(\"email\")),core.xb(1),core.gc(\"required\",ctx_r7.canEdit(\"email\"))}}function EditProfileComponent_page_content_2_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",37),core.Dc(1),core.Pb()),2&rf){const ctx_r8=core.Zb(2);core.gc(\"label\",ctx_r8.i18n.user.emailPending),core.xb(1),core.Fc(\" \",ctx_r8.data.userConfiguration.emailPendingValidation,\" \")}}function EditProfileComponent_page_content_2_ng_container_11_label_value_1_custom_field_input_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"custom-field-input\",50),2&rf){const cf_r42=core.Zb(2).$implicit,ctx_r44=core.Zb(2);core.gc(\"field\",cf_r42)(\"formControlName\",cf_r42.internalName)(\"binaryValues\",ctx_r44.data.userConfiguration.binaryValues)}}function EditProfileComponent_page_content_2_ng_container_11_label_value_1_ng_template_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"format-field-value\",51),2&rf){const cf_r42=core.Zb(2).$implicit,ctx_r46=core.Zb(2);core.gc(\"fieldValue\",ctx_r46.fieldValue(cf_r42))}}function EditProfileComponent_page_content_2_ng_container_11_label_value_1_field_privacy_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-privacy\",52),2&rf){const cf_r42=core.Zb(2).$implicit,ctx_r47=core.Zb(2);core.gc(\"field\",cf_r42.internalName)(\"control\",ctx_r47.user.get(\"hiddenFields\"))}}function EditProfileComponent_page_content_2_ng_container_11_label_value_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",46),core.Bc(1,EditProfileComponent_page_content_2_ng_container_11_label_value_1_custom_field_input_1_Template,1,3,\"custom-field-input\",47),core.Bc(2,EditProfileComponent_page_content_2_ng_container_11_label_value_1_ng_template_2_Template,1,1,\"ng-template\",null,48,core.Cc),core.Bc(4,EditProfileComponent_page_content_2_ng_container_11_label_value_1_field_privacy_4_Template,1,2,\"field-privacy\",49),core.Pb()),2&rf){const _r45=core.qc(3),cf_r42=core.Zb().$implicit,ctx_r43=core.Zb(2);core.gc(\"label\",cf_r42.name)(\"kind\",ctx_r43.canEdit(cf_r42)?\"field\":\"fieldView\")(\"labelPosition\",\"boolean\"===cf_r42.type?\"sideForced\":\"auto\")(\"ignoreExtraCell\",!ctx_r43.canManagePrivacy(cf_r42))(\"fieldSize\",ctx_r43.fieldSize(cf_r42))(\"required\",cf_r42.required),core.xb(1),core.gc(\"ngIf\",ctx_r43.canEdit(cf_r42))(\"ngIfElse\",_r45)}}function EditProfileComponent_page_content_2_ng_container_11_Template(rf,ctx){if(1&rf&&(core.Ob(0,6),core.Bc(1,EditProfileComponent_page_content_2_ng_container_11_label_value_1_Template,5,8,\"label-value\",45),core.Nb()),2&rf){const cf_r42=ctx.$implicit,ctx_r9=core.Zb(2);core.gc(\"formGroup\",ctx_r9.user.get(\"customValues\")),core.xb(1),core.gc(\"ngIf\",ctx_r9.canEdit(cf_r42)||!ctx_r9.isEmpty(cf_r42))}}function EditProfileComponent_page_content_2_ng_container_12_input_field_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",57),2&rf){const ctx_r52=core.Zb(3);core.gc(\"placeholder\",ctx_r52.data.phoneConfiguration.mobileExample)}}function EditProfileComponent_page_content_2_ng_container_12_ng_template_3_Template(rf,ctx){if(1&rf&&core.Dc(0),2&rf){const ctx_r54=core.Zb(3);core.Fc(\" \",ctx_r54.singleMobile.get(\"number\").value,\" \")}}function EditProfileComponent_page_content_2_ng_container_12_field_privacy_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-privacy\",58),2&rf){const ctx_r55=core.Zb(3);core.gc(\"control\",ctx_r55.singleMobile.get(\"hidden\"))}}function EditProfileComponent_page_content_2_ng_container_12_ng_container_6_boolean_field_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",61),2&rf){const ctx_r58=core.Zb(4);core.gc(\"label\",ctx_r58.i18n.phone.verified)(\"formControl\",ctx_r58.singleMobile.get(\"verified\"))}}function EditProfileComponent_page_content_2_ng_container_12_ng_container_6_ng_template_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",37),core.Dc(1),core.Pb()),2&rf){const ctx_r60=core.Zb(4);core.gc(\"label\",ctx_r60.i18n.phone.verified),core.xb(1),core.Fc(\" \",ctx_r60.format.formatBoolean(ctx_r60.singleMobile.get(\"verified\").value),\" \")}}function EditProfileComponent_page_content_2_ng_container_12_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,EditProfileComponent_page_content_2_ng_container_12_ng_container_6_boolean_field_1_Template,1,2,\"boolean-field\",59),core.Bc(2,EditProfileComponent_page_content_2_ng_container_12_ng_container_6_ng_template_2_Template,2,2,\"ng-template\",null,60,core.Cc),core.Nb()),2&rf){const _r59=core.qc(3),ctx_r56=core.Zb(3);core.xb(1),core.gc(\"ngIf\",ctx_r56.canEdit(\"phone\"))(\"ngIfElse\",_r59)}}function EditProfileComponent_page_content_2_ng_container_12_ng_container_7_boolean_field_1_Template(rf,ctx){if(1&rf){const _r65=core.Rb();core.Qb(0,\"boolean-field\",64),core.Xb(\"click\",(function($event){return core.sc(_r65),core.Zb(4).maybeVerify($event)})),core.Pb()}if(2&rf){const ctx_r61=core.Zb(4);core.gc(\"label\",ctx_r61.i18n.phone.enabledSms)(\"formControl\",ctx_r61.singleMobile.get(\"enabledForSms\"))}}function EditProfileComponent_page_content_2_ng_container_12_ng_container_7_ng_template_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",37),core.Dc(1),core.Pb()),2&rf){const ctx_r63=core.Zb(4);core.gc(\"label\",ctx_r63.i18n.phone.enabledSms),core.xb(1),core.Fc(\" \",ctx_r63.format.formatBoolean(ctx_r63.singleMobile.get(\"enabledForSms\").value),\" \")}}function EditProfileComponent_page_content_2_ng_container_12_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,EditProfileComponent_page_content_2_ng_container_12_ng_container_7_boolean_field_1_Template,1,2,\"boolean-field\",62),core.Bc(2,EditProfileComponent_page_content_2_ng_container_12_ng_container_7_ng_template_2_Template,2,2,\"ng-template\",null,63,core.Cc),core.Nb()),2&rf){const _r62=core.qc(3),ctx_r57=core.Zb(3);core.xb(1),core.gc(\"ngIf\",ctx_r57.canEdit(\"phone\"))(\"ngIfElse\",_r62)}}function EditProfileComponent_page_content_2_ng_container_12_Template(rf,ctx){if(1&rf&&(core.Ob(0,6),core.Qb(1,\"label-value\",53),core.Bc(2,EditProfileComponent_page_content_2_ng_container_12_input_field_2_Template,1,1,\"input-field\",54),core.Bc(3,EditProfileComponent_page_content_2_ng_container_12_ng_template_3_Template,1,1,\"ng-template\",null,55,core.Cc),core.Bc(5,EditProfileComponent_page_content_2_ng_container_12_field_privacy_5_Template,1,1,\"field-privacy\",56),core.Pb(),core.Bc(6,EditProfileComponent_page_content_2_ng_container_12_ng_container_6_Template,4,2,\"ng-container\",4),core.Bc(7,EditProfileComponent_page_content_2_ng_container_12_ng_container_7_Template,4,2,\"ng-container\",4),core.Nb()),2&rf){const _r53=core.qc(4),ctx_r10=core.Zb(2);core.gc(\"formGroup\",ctx_r10.singleMobile),core.xb(1),core.gc(\"label\",ctx_r10.i18n.phone.mobile)(\"required\",\"required\"===ctx_r10.data.phoneConfiguration.mobileAvailability)(\"ignoreExtraCell\",!ctx_r10.canManagePrivacy(\"phone\")),core.xb(1),core.gc(\"ngIf\",ctx_r10.canEdit(\"phone\"))(\"ngIfElse\",_r53),core.xb(4),core.gc(\"ngIf\",ctx_r10.phoneHasSms(ctx_r10.singleMobileManage)),core.xb(1),core.gc(\"ngIf\",ctx_r10.showEnableForSms(ctx_r10.singleMobile))}}function EditProfileComponent_page_content_2_ng_container_13_input_field_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",57),2&rf){const ctx_r66=core.Zb(3);core.gc(\"placeholder\",ctx_r66.data.phoneConfiguration.landLineExample)}}function EditProfileComponent_page_content_2_ng_container_13_ng_template_3_Template(rf,ctx){if(1&rf&&core.Dc(0),2&rf){const ctx_r68=core.Zb(3);core.Fc(\" \",ctx_r68.singleLandLine.get(\"number\").value,\" \")}}function EditProfileComponent_page_content_2_ng_container_13_field_privacy_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-privacy\",58),2&rf){const ctx_r69=core.Zb(3);core.gc(\"control\",ctx_r69.singleLandLine.get(\"hidden\"))}}function EditProfileComponent_page_content_2_ng_container_13_ng_container_6_input_field_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",66),2&rf){const ctx_r72=core.Zb(4);core.gc(\"label\",ctx_r72.i18n.phone.extension)}}function EditProfileComponent_page_content_2_ng_container_13_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,EditProfileComponent_page_content_2_ng_container_13_ng_container_6_input_field_1_Template,1,1,\"input-field\",65),core.Nb()),2&rf){const extensionControl_r71=ctx.ngIf;core.xb(1),core.gc(\"ngIf\",!extensionControl_r71.disabled||extensionControl_r71.value)}}function EditProfileComponent_page_content_2_ng_container_13_Template(rf,ctx){if(1&rf&&(core.Ob(0,6),core.Qb(1,\"label-value\",53),core.Bc(2,EditProfileComponent_page_content_2_ng_container_13_input_field_2_Template,1,1,\"input-field\",54),core.Bc(3,EditProfileComponent_page_content_2_ng_container_13_ng_template_3_Template,1,1,\"ng-template\",null,55,core.Cc),core.Bc(5,EditProfileComponent_page_content_2_ng_container_13_field_privacy_5_Template,1,1,\"field-privacy\",56),core.Pb(),core.Bc(6,EditProfileComponent_page_content_2_ng_container_13_ng_container_6_Template,2,1,\"ng-container\",4),core.Nb()),2&rf){const _r67=core.qc(4),ctx_r11=core.Zb(2);core.gc(\"formGroup\",ctx_r11.singleLandLine),core.xb(1),core.gc(\"label\",ctx_r11.i18n.phone.landLine)(\"required\",\"required\"===ctx_r11.data.phoneConfiguration.landLineAvailability)(\"ignoreExtraCell\",!ctx_r11.canManagePrivacy(\"address\")),core.xb(1),core.gc(\"ngIf\",ctx_r11.canEdit(\"phone\"))(\"ngIfElse\",_r67),core.xb(4),core.gc(\"ngIf\",ctx_r11.data.phoneConfiguration.extensionEnabled&&ctx_r11.singleLandLine.get(\"extension\"))}}function EditProfileComponent_page_content_2_ng_container_14_boolean_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",69),2&rf){const ctx_r73=core.Zb(3);core.gc(\"formControl\",ctx_r73.defineSingleAddress)(\"label\",ctx_r73.i18n.user.addressDefine)}}function EditProfileComponent_page_content_2_ng_container_14_ng_container_4_label_value_2_static_map_1_Template(rf,ctx){if(1&rf){const _r80=core.Rb();core.Qb(0,\"static-map\",75),core.Xb(\"imageLoaded\",(function(){core.sc(_r80);const ctx_r79=core.Zb(5);return ctx_r79.mapShown(ctx_r79.singleAddress)})),core.Pb()}if(2&rf){const ctx_r76=core.Zb(5);core.gc(\"address\",ctx_r76.singleAddress.value)}}function EditProfileComponent_page_content_2_ng_container_14_ng_container_4_label_value_2_ng_template_2_action_button_0_Template(rf,ctx){if(1&rf){const _r83=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){core.sc(_r83);const ctx_r82=core.Zb(6);return ctx_r82.locateAddress(ctx_r82.singleAddress)})),core.Pb()}if(2&rf){const ctx_r81=core.Zb(6);core.gc(\"label\",ctx_r81.i18n.general.mapView)}}function EditProfileComponent_page_content_2_ng_container_14_ng_container_4_label_value_2_ng_template_2_Template(rf,ctx){if(1&rf&&(core.Bc(0,EditProfileComponent_page_content_2_ng_container_14_ng_container_4_label_value_2_ng_template_2_action_button_0_Template,1,1,\"action-button\",76),core.ac(1,\"async\")),2&rf){const ctx_r78=core.Zb(5),_r1=core.qc(4);core.gc(\"ngIf\",!1===core.bc(1,2,ctx_r78.singleAddress.locating$))(\"ngIfElse\",_r1)}}function EditProfileComponent_page_content_2_ng_container_14_ng_container_4_label_value_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",72),core.Bc(1,EditProfileComponent_page_content_2_ng_container_14_ng_container_4_label_value_2_static_map_1_Template,1,1,\"static-map\",73),core.Bc(2,EditProfileComponent_page_content_2_ng_container_14_ng_container_4_label_value_2_ng_template_2_Template,2,4,\"ng-template\",null,74,core.Cc),core.Pb()),2&rf){const _r77=core.qc(3),ctx_r75=core.Zb(4);core.gc(\"label\",ctx_r75.i18n.general.map),core.xb(1),core.gc(\"ngIf\",null!=ctx_r75.singleAddress.get(\"location\").value.latitude)(\"ngIfElse\",_r77)}}function EditProfileComponent_page_content_2_ng_container_14_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"address-form\",70),core.Bc(2,EditProfileComponent_page_content_2_ng_container_14_ng_container_4_label_value_2_Template,4,3,\"label-value\",71),core.Nb()),2&rf){const ctx_r74=core.Zb(3);core.xb(1),core.gc(\"addressForm\",ctx_r74.singleAddress)(\"configuration\",ctx_r74.data.addressConfiguration)(\"managePrivacy\",ctx_r74.data.addressConfiguration.managePrivacy)(\"binaryValues\",ctx_r74.data.addressBinaryValues[null==ctx_r74.data.addresses[0]?null:ctx_r74.data.addresses[0].id]),core.xb(1),core.gc(\"ngIf\",ctx_r74.maps.enabled)}}function EditProfileComponent_page_content_2_ng_container_14_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",67),core.Dc(2),core.Pb(),core.Bc(3,EditProfileComponent_page_content_2_ng_container_14_boolean_field_3_Template,1,2,\"boolean-field\",68),core.Bc(4,EditProfileComponent_page_content_2_ng_container_14_ng_container_4_Template,3,5,\"ng-container\",4),core.Nb()),2&rf){const ctx_r12=core.Zb(2);core.xb(2),core.Ec(ctx_r12.i18n.address.address),core.xb(1),core.gc(\"ngIf\",ctx_r12.canEdit(\"address\")&&\"required\"!==ctx_r12.data.addressConfiguration.availability),core.xb(1),core.gc(\"ngIf\",ctx_r12.defineSingleAddress.value)}}function EditProfileComponent_page_content_2_ng_container_15_div_4_div_3_Template(rf,ctx){if(1&rf){const _r92=core.Rb();core.Qb(0,\"div\",83,84),core.Qb(2,\"button\",85),core.Xb(\"click\",(function(){return core.sc(_r92),core.Zb(4).addLandLine()})),core.Dc(3),core.Pb(),core.Qb(4,\"button\",85),core.Xb(\"click\",(function(){return core.sc(_r92),core.Zb(4).addMobile()})),core.Dc(5),core.Pb(),core.Pb()}if(2&rf){const ctx_r89=core.Zb(4);core.xb(3),core.Fc(\" \",ctx_r89.i18n.user.phoneAddLandLine,\" \"),core.xb(2),core.Fc(\" \",ctx_r89.i18n.user.phoneAddMobile,\" \")}}function EditProfileComponent_page_content_2_ng_container_15_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",80),core.Qb(1,\"button\",81),core.Dc(2),core.Pb(),core.Bc(3,EditProfileComponent_page_content_2_ng_container_15_div_4_div_3_Template,6,2,\"div\",82),core.Pb()),2&rf){const ctx_r84=core.Zb(3);core.xb(2),core.Fc(\" \",ctx_r84.i18n.user.phoneAdd,\" \")}}function EditProfileComponent_page_content_2_ng_container_15_div_5_Template(rf,ctx){if(1&rf){const _r95=core.Rb();core.Qb(0,\"div\",86),core.Qb(1,\"action-button\",24),core.Xb(\"action\",(function(){return core.sc(_r95),core.Zb(3).addLandLine()})),core.Pb(),core.Pb()}if(2&rf){const ctx_r85=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r85.i18n.user.phoneAddLandLine)}}function EditProfileComponent_page_content_2_ng_container_15_div_6_Template(rf,ctx){if(1&rf){const _r97=core.Rb();core.Qb(0,\"div\",86),core.Qb(1,\"action-button\",24),core.Xb(\"action\",(function(){return core.sc(_r97),core.Zb(3).addMobile()})),core.Pb(),core.Pb()}if(2&rf){const ctx_r86=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r86.i18n.user.phoneAddMobile)}}function EditProfileComponent_page_content_2_ng_container_15_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.Pb()),2&rf){const ctx_r87=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r87.i18n.user.phoneNone,\" \")}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_3_input_field_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",66),2&rf){const ctx_r107=core.Zb(5);core.gc(\"label\",ctx_r107.i18n.phone.extension)}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_3_input_field_1_Template,1,1,\"input-field\",65),core.Nb()),2&rf){const extensionControl_r106=ctx.ngIf;core.xb(1),core.gc(\"ngIf\",!extensionControl_r106.disabled||extensionControl_r106.value)}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_4_boolean_field_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",91),2&rf){const ctx_r108=core.Zb(5);core.gc(\"label\",ctx_r108.i18n.phone.verified)}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_4_ng_template_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",37),core.Dc(1),core.Pb()),2&rf){const phone_r98=core.Zb(2).$implicit,ctx_r110=core.Zb(3);core.gc(\"label\",ctx_r110.i18n.phone.verified),core.xb(1),core.Fc(\" \",ctx_r110.format.formatBoolean(phone_r98.verified),\" \")}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_4_boolean_field_1_Template,1,1,\"boolean-field\",90),core.Bc(2,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_4_ng_template_2_Template,2,2,\"ng-template\",null,60,core.Cc),core.Nb()),2&rf){const _r109=core.qc(3),ctx_r101=core.Zb(4);core.xb(1),core.gc(\"ngIf\",ctx_r101.canEdit(\"phone\"))(\"ngIfElse\",_r109)}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_5_boolean_field_1_Template(rf,ctx){if(1&rf){const _r116=core.Rb();core.Qb(0,\"boolean-field\",93),core.Xb(\"click\",(function($event){core.sc(_r116);const phone_r98=core.Zb(2).$implicit;return core.Zb(3).maybeVerify($event,phone_r98.id)})),core.Pb()}if(2&rf){const ctx_r112=core.Zb(5);core.gc(\"label\",ctx_r112.i18n.phone.enabledSms)}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_5_ng_template_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",37),core.Dc(1),core.Pb()),2&rf){const phone_r98=core.Zb(2).$implicit,ctx_r114=core.Zb(3);core.gc(\"label\",ctx_r114.i18n.phone.enabledSms),core.xb(1),core.Fc(\" \",ctx_r114.format.formatBoolean(phone_r98.enabledForSms),\" \")}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_5_boolean_field_1_Template,1,1,\"boolean-field\",92),core.Bc(2,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_5_ng_template_2_Template,2,2,\"ng-template\",null,63,core.Cc),core.Nb()),2&rf){const _r113=core.qc(3),ctx_r102=core.Zb(4);core.xb(1),core.gc(\"ngIf\",ctx_r102.canEdit(\"phone\"))(\"ngIfElse\",_r113)}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_label_value_6_action_button_3_Template(rf,ctx){if(1&rf){const _r122=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){core.sc(_r122);const phone_r98=core.Zb(2).$implicit;return core.Zb(3).removePhone(phone_r98)})),core.Pb()}if(2&rf){const ctx_r119=core.Zb(5);core.gc(\"label\",ctx_r119.i18n.user.phoneRemove)}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",72),core.Qb(1,\"div\",94),core.Lb(2,\"field-privacy\",95),core.Bc(3,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_label_value_6_action_button_3_Template,1,1,\"action-button\",25),core.ac(4,\"async\"),core.Pb(),core.Pb()),2&rf){const phone_r98=core.Zb().$implicit,ctx_r103=core.Zb(3);core.gc(\"label\",ctx_r103.i18n.field.privacy.name),core.xb(2),core.gc(\"control\",phone_r98.form.get(\"hidden\")),core.xb(1),core.gc(\"ngIf\",ctx_r103.editableFields.has(\"phone\")&&core.bc(4,3,ctx_r103.layout.gtxxs$))}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_div_7_action_button_1_Template(rf,ctx){if(1&rf){const _r127=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){core.sc(_r127);const phone_r98=core.Zb(2).$implicit;return core.Zb(3).removePhone(phone_r98)})),core.Pb()}if(2&rf){const ctx_r124=core.Zb(5);core.gc(\"label\",ctx_r124.i18n.user.phoneRemove)}}const edit_profile_component_c0=function(a0){return{\"mt-3\":a0}};function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",96),core.Bc(1,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_div_7_action_button_1_Template,1,1,\"action-button\",25),core.Pb()),2&rf){const ctx_r104=core.Zb(4);core.gc(\"ngClass\",core.jc(2,edit_profile_component_c0,!ctx_r104.data.phoneConfiguration.managePrivacy)),core.xb(1),core.gc(\"ngIf\",ctx_r104.editableFields.has(\"phone\"))}}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_hr_9_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function EditProfileComponent_page_content_2_ng_container_15_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0,6),core.Lb(1,\"input-field\",87),core.Lb(2,\"input-field\",88),core.Bc(3,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_3_Template,2,1,\"ng-container\",4),core.Bc(4,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_4_Template,4,2,\"ng-container\",4),core.Bc(5,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_ng_container_5_Template,4,2,\"ng-container\",4),core.Bc(6,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_label_value_6_Template,5,5,\"label-value\",71),core.Bc(7,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_div_7_Template,2,4,\"div\",89),core.ac(8,\"async\"),core.Bc(9,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_hr_9_Template,1,0,\"hr\",4),core.Nb()),2&rf){const phone_r98=ctx.$implicit,last_r99=ctx.last,ctx_r88=core.Zb(3);core.gc(\"formGroup\",phone_r98.form),core.xb(1),core.gc(\"id\",\"phone_name\"+phone_r98.idSuffix)(\"label\",ctx_r88.phoneNameLabel(phone_r98)),core.xb(1),core.gc(\"id\",\"phone_number\"+phone_r98.idSuffix)(\"label\",ctx_r88.phoneNumberLabel(phone_r98))(\"placeholder\",ctx_r88.phoneExample(phone_r98)),core.xb(1),core.gc(\"ngIf\",ctx_r88.hasExtension(phone_r98)&&phone_r98.form.get(\"extension\")),core.xb(1),core.gc(\"ngIf\",\"mobile\"===phone_r98.kind&&ctx_r88.phoneHasSms(phone_r98.form)),core.xb(1),core.gc(\"ngIf\",\"mobile\"===phone_r98.kind&&ctx_r88.showEnableForSms(phone_r98.form)),core.xb(1),core.gc(\"ngIf\",ctx_r88.canManagePrivacy(\"phone\")),core.xb(1),core.gc(\"ngIf\",core.bc(8,12,ctx_r88.layout.xxs$)||!ctx_r88.data.phoneConfiguration.managePrivacy),core.xb(2),core.gc(\"ngIf\",!last_r99)}}function EditProfileComponent_page_content_2_ng_container_15_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",77),core.Qb(2,\"div\",27),core.Dc(3),core.Pb(),core.Bc(4,EditProfileComponent_page_content_2_ng_container_15_div_4_Template,4,1,\"div\",78),core.Bc(5,EditProfileComponent_page_content_2_ng_container_15_div_5_Template,2,1,\"div\",79),core.Bc(6,EditProfileComponent_page_content_2_ng_container_15_div_6_Template,2,1,\"div\",79),core.Pb(),core.Bc(7,EditProfileComponent_page_content_2_ng_container_15_div_7_Template,2,1,\"div\",4),core.Bc(8,EditProfileComponent_page_content_2_ng_container_15_ng_container_8_Template,10,14,\"ng-container\",11),core.Nb()),2&rf){const ctx_r13=core.Zb(2);core.xb(3),core.Fc(\" \",ctx_r13.i18n.user.title.phones,\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r13.canCreateLandLine&&ctx_r13.canCreateMobile),core.xb(1),core.gc(\"ngIf\",ctx_r13.canCreateLandLine&&!ctx_r13.canCreateMobile),core.xb(1),core.gc(\"ngIf\",!ctx_r13.canCreateLandLine&&ctx_r13.canCreateMobile),core.xb(1),core.gc(\"ngIf\",0==ctx_r13.phones.length),core.xb(1),core.gc(\"ngForOf\",ctx_r13.phones)}}function EditProfileComponent_page_content_2_ng_container_16_action_button_5_Template(rf,ctx){if(1&rf){const _r132=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){return core.sc(_r132),core.Zb(3).addAddress()})),core.Pb()}if(2&rf){const ctx_r128=core.Zb(3);core.gc(\"label\",ctx_r128.i18n.user.addressAdd)}}function EditProfileComponent_page_content_2_ng_container_16_div_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.Pb()),2&rf){const ctx_r129=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r129.i18n.user.addressNone,\" \")}}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_label_value_3_action_button_3_Template(rf,ctx){if(1&rf){const _r142=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){core.sc(_r142);const address_r133=core.Zb(2).$implicit;return core.Zb(3).removeAddress(address_r133)})),core.Pb()}if(2&rf){const ctx_r139=core.Zb(5);core.gc(\"label\",ctx_r139.i18n.user.addressRemove)}}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",72),core.Qb(1,\"div\",94),core.Lb(2,\"field-privacy\",95),core.Bc(3,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_label_value_3_action_button_3_Template,1,1,\"action-button\",25),core.ac(4,\"async\"),core.Pb(),core.Pb()),2&rf){const address_r133=core.Zb().$implicit,ctx_r135=core.Zb(3);core.gc(\"label\",ctx_r135.i18n.field.privacy.name),core.xb(2),core.gc(\"control\",address_r133.form.get(\"hidden\")),core.xb(1),core.gc(\"ngIf\",ctx_r135.editableFields.has(\"address\")&&!ctx_r135.maps.enabled&&core.bc(4,3,ctx_r135.layout.gtxxs$))}}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_label_value_4_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_label_value_4_Template(rf,ctx){if(1&rf){const _r147=core.Rb();core.Qb(0,\"label-value\",100),core.Qb(1,\"static-map\",75),core.Xb(\"imageLoaded\",(function(){core.sc(_r147);const address_r133=core.Zb().$implicit;return core.Zb(3).mapShown(address_r133.form)})),core.Pb(),core.Bc(2,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_label_value_4_ng_container_2_Template,1,0,\"ng-container\",101),core.ac(3,\"async\"),core.Pb()}if(2&rf){const address_r133=core.Zb().$implicit,ctx_r136=core.Zb(3),_r1=core.qc(4);core.gc(\"label\",ctx_r136.i18n.general.map),core.xb(1),core.gc(\"address\",address_r133.form.value),core.xb(1),core.gc(\"ngIf\",core.bc(3,4,address_r133.form.locating$))(\"ngIfThen\",_r1)}}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_div_6_div_1_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",106)}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_div_6_action_button_5_Template(rf,ctx){if(1&rf){const _r154=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){core.sc(_r154);const address_r133=core.Zb(2).$implicit;return core.Zb(3).removeAddress(address_r133)})),core.Pb()}if(2&rf){const ctx_r150=core.Zb(5);core.gc(\"label\",ctx_r150.i18n.user.addressRemove)}}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_div_6_ng_container_6_Template(rf,ctx){if(1&rf){const _r157=core.Rb();core.Ob(0),core.Lb(1,\"div\",107),core.Qb(2,\"action-button\",24),core.Xb(\"action\",(function(){core.sc(_r157);const address_r133=core.Zb(2).$implicit;return core.Zb(3).locateAddress(address_r133.form)})),core.Pb(),core.Nb()}if(2&rf){const ctx_r151=core.Zb(5);core.xb(2),core.gc(\"label\",ctx_r151.i18n.general.mapView)}}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_div_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",102),core.Bc(1,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_div_6_div_1_Template,1,0,\"div\",103),core.ac(2,\"async\"),core.Qb(3,\"div\",104),core.Qb(4,\"actions\",105),core.Bc(5,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_div_6_action_button_5_Template,1,1,\"action-button\",25),core.Bc(6,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_div_6_ng_container_6_Template,3,1,\"ng-container\",4),core.ac(7,\"async\"),core.Pb(),core.Pb(),core.Pb()),2&rf){const address_r133=core.Zb().$implicit,ctx_r137=core.Zb(3);core.xb(1),core.gc(\"ngIf\",core.bc(2,3,ctx_r137.layout.gtxs$)),core.xb(4),core.gc(\"ngIf\",ctx_r137.editableFields.has(\"address\")),core.xb(1),core.gc(\"ngIf\",null==address_r133.form.get(\"location\").value.latitude&&!1===core.bc(7,5,address_r133.form.locating$))}}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_hr_8_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function EditProfileComponent_page_content_2_ng_container_16_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0,6),core.Lb(1,\"input-field\",87),core.Lb(2,\"address-form\",97),core.Bc(3,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_label_value_3_Template,5,5,\"label-value\",71),core.Bc(4,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_label_value_4_Template,4,6,\"label-value\",98),core.ac(5,\"async\"),core.Bc(6,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_div_6_Template,8,7,\"div\",99),core.ac(7,\"async\"),core.Bc(8,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_hr_8_Template,1,0,\"hr\",4),core.Nb()),2&rf){const address_r133=ctx.$implicit,last_r134=ctx.last,ctx_r130=core.Zb(3);core.gc(\"formGroup\",address_r133.form),core.xb(1),core.gc(\"id\",\"address_name\"+address_r133.idSuffix)(\"label\",ctx_r130.i18n.general.name),core.xb(1),core.gc(\"addressForm\",address_r133.form)(\"ignoreContactFields\",1===ctx_r130.addresses.length)(\"configuration\",ctx_r130.data.addressConfiguration)(\"idSuffix\",address_r133.idSuffix)(\"managePrivacy\",!1)(\"binaryValues\",ctx_r130.data.addressBinaryValues[address_r133.id]),core.xb(1),core.gc(\"ngIf\",ctx_r130.canManagePrivacy(\"address\")),core.xb(1),core.gc(\"ngIf\",ctx_r130.maps.enabled&&(null!=address_r133.form.get(\"location\").value.latitude||core.bc(5,13,address_r133.form.locating$))),core.xb(2),core.gc(\"ngIf\",ctx_r130.maps.enabled||core.bc(7,15,ctx_r130.layout.xxs$)||!ctx_r130.data.addressConfiguration.managePrivacy),core.xb(2),core.gc(\"ngIf\",!last_r134)}}function EditProfileComponent_page_content_2_ng_container_16_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",77),core.Qb(2,\"div\",27),core.Dc(3),core.Pb(),core.Qb(4,\"div\",86),core.Bc(5,EditProfileComponent_page_content_2_ng_container_16_action_button_5_Template,1,1,\"action-button\",25),core.Pb(),core.Pb(),core.Bc(6,EditProfileComponent_page_content_2_ng_container_16_div_6_Template,2,1,\"div\",4),core.Bc(7,EditProfileComponent_page_content_2_ng_container_16_ng_container_7_Template,9,17,\"ng-container\",11),core.Nb()),2&rf){const ctx_r14=core.Zb(2);core.xb(3),core.Fc(\" \",ctx_r14.i18n.user.title.addresses,\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r14.canCreateAddress),core.xb(1),core.gc(\"ngIf\",0==ctx_r14.data.addresses.length),core.xb(1),core.gc(\"ngForOf\",ctx_r14.addresses)}}function EditProfileComponent_page_content_2_ng_container_17_action_button_5_Template(rf,ctx){if(1&rf){const _r163=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){return core.sc(_r163),core.Zb(3).addContactInfo()})),core.Pb()}if(2&rf){const ctx_r159=core.Zb(3);core.gc(\"label\",ctx_r159.i18n.user.contactInfoAdd)}}function EditProfileComponent_page_content_2_ng_container_17_div_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Dc(1),core.Pb()),2&rf){const ctx_r160=core.Zb(3);core.xb(1),core.Fc(\" \",ctx_r160.i18n.user.contactInfoNone,\" \")}}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_input_field_6_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",116),2&rf){const contactInfo_r164=core.Zb().$implicit,ctx_r166=core.Zb(3);core.gc(\"id\",\"contact-info_landLineExtension\"+contactInfo_r164.idSuffix)(\"label\",ctx_r166.i18n.phone.extension)}}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_ng_container_8_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",118),2&rf){const address_r173=core.Zb().$implicit;core.gc(\"value\",address_r173.id)(\"text\",address_r173.name)}}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_ng_container_8_field_option_1_Template,1,2,\"field-option\",117),core.Nb()),2&rf){const address_r173=ctx.$implicit;core.xb(1),core.gc(\"ngIf\",address_r173.id)}}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_ng_container_9_Template(rf,ctx){if(1&rf&&(core.Ob(0,6),core.Lb(1,\"custom-field-input\",119),core.Nb()),2&rf){const cf_r176=ctx.$implicit,contactInfo_r164=core.Zb().$implicit,ctx_r168=core.Zb(3);core.gc(\"formGroup\",contactInfo_r164.form.get(\"customValues\")),core.xb(1),core.gc(\"field\",cf_r176)(\"formControlName\",cf_r176.internalName)(\"binaryValues\",ctx_r168.data.contactInfoBinaryValues[contactInfo_r164.id])}}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_label_value_10_action_button_3_Template(rf,ctx){if(1&rf){const _r181=core.Rb();core.Qb(0,\"action-button\",24),core.Xb(\"action\",(function(){core.sc(_r181);const contactInfo_r164=core.Zb(2).$implicit;return core.Zb(3).removeContactInfo(contactInfo_r164)})),core.Pb()}if(2&rf){const ctx_r178=core.Zb(5);core.gc(\"label\",ctx_r178.i18n.user.contactInfoRemove)}}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",72),core.Qb(1,\"div\",94),core.Lb(2,\"field-privacy\",95),core.Bc(3,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_label_value_10_action_button_3_Template,1,1,\"action-button\",25),core.ac(4,\"async\"),core.Pb(),core.Pb()),2&rf){const contactInfo_r164=core.Zb().$implicit,ctx_r169=core.Zb(3);core.gc(\"label\",ctx_r169.i18n.field.privacy.name),core.xb(2),core.gc(\"control\",contactInfo_r164.form.get(\"hidden\")),core.xb(1),core.gc(\"ngIf\",core.bc(4,3,ctx_r169.layout.gtxxs$))}}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_div_11_Template(rf,ctx){if(1&rf){const _r185=core.Rb();core.Qb(0,\"div\",36),core.Qb(1,\"action-button\",24),core.Xb(\"action\",(function(){core.sc(_r185);const contactInfo_r164=core.Zb().$implicit;return core.Zb(3).removeContactInfo(contactInfo_r164)})),core.Pb(),core.Pb()}if(2&rf){const ctx_r170=core.Zb(4);core.xb(1),core.gc(\"label\",ctx_r170.i18n.user.contactInfoRemove)}}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_hr_13_Template(rf,ctx){1&rf&&core.Lb(0,\"hr\")}function EditProfileComponent_page_content_2_ng_container_17_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0,6),core.Lb(1,\"images-field\",108),core.Lb(2,\"input-field\",109),core.Lb(3,\"input-field\",110),core.Lb(4,\"input-field\",111),core.Lb(5,\"input-field\",112),core.Bc(6,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_input_field_6_Template,1,2,\"input-field\",113),core.Qb(7,\"single-selection-field\",114),core.Bc(8,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_ng_container_8_Template,2,1,\"ng-container\",115),core.Pb(),core.Bc(9,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_ng_container_9_Template,2,4,\"ng-container\",11),core.Bc(10,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_label_value_10_Template,5,5,\"label-value\",71),core.Bc(11,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_div_11_Template,2,1,\"div\",30),core.ac(12,\"async\"),core.Bc(13,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_hr_13_Template,1,0,\"hr\",4),core.Nb()),2&rf){const contactInfo_r164=ctx.$implicit,last_r165=ctx.last,ctx_r161=core.Zb(3);core.gc(\"formGroup\",contactInfo_r164.form),core.xb(1),core.gc(\"label\",ctx_r161.i18n.general.image)(\"initialImages\",null==ctx_r161.data.contactInfoBinaryValues[contactInfo_r164.id]?null:ctx_r161.data.contactInfoBinaryValues[contactInfo_r164.id].image),core.xb(1),core.gc(\"id\",\"contact-info_name\"+contactInfo_r164.idSuffix)(\"label\",ctx_r161.i18n.general.name),core.xb(1),core.gc(\"id\",\"contact-info_email\"+contactInfo_r164.idSuffix)(\"label\",ctx_r161.i18n.user.email),core.xb(1),core.gc(\"id\",\"contact-info_mobilePhone\"+contactInfo_r164.idSuffix)(\"label\",ctx_r161.i18n.phone.mobile),core.xb(1),core.gc(\"id\",\"contact-info_landLinePhone\"+contactInfo_r164.idSuffix)(\"label\",ctx_r161.i18n.phone.landLine),core.xb(1),core.gc(\"ngIf\",ctx_r161.data.phoneConfiguration.extensionEnabled),core.xb(1),core.gc(\"id\",\"contact-info_address\"+contactInfo_r164.idSuffix)(\"label\",ctx_r161.i18n.address.address),core.xb(1),core.gc(\"ngForOf\",ctx_r161.data.addresses),core.xb(1),core.gc(\"ngForOf\",ctx_r161.data.contactInfoConfiguration.customFields),core.xb(1),core.gc(\"ngIf\",ctx_r161.canManagePrivacy(\"contactInfo\")),core.xb(1),core.gc(\"ngIf\",core.bc(12,19,ctx_r161.layout.xxs$)||!ctx_r161.data.contactInfoConfiguration.managePrivacy),core.xb(2),core.gc(\"ngIf\",!last_r165)}}function EditProfileComponent_page_content_2_ng_container_17_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",77),core.Qb(2,\"div\",27),core.Dc(3),core.Pb(),core.Qb(4,\"div\",86),core.Bc(5,EditProfileComponent_page_content_2_ng_container_17_action_button_5_Template,1,1,\"action-button\",25),core.Pb(),core.Pb(),core.Bc(6,EditProfileComponent_page_content_2_ng_container_17_div_6_Template,2,1,\"div\",4),core.Bc(7,EditProfileComponent_page_content_2_ng_container_17_ng_container_7_Template,14,21,\"ng-container\",11),core.Nb()),2&rf){const ctx_r15=core.Zb(2);core.xb(3),core.Fc(\" \",ctx_r15.i18n.user.title.contactInfos,\" \"),core.xb(2),core.gc(\"ngIf\",ctx_r15.canCreateContactInfo),core.xb(1),core.gc(\"ngIf\",0==ctx_r15.contactInfos.length),core.xb(1),core.gc(\"ngForOf\",ctx_r15.contactInfos)}}function EditProfileComponent_page_content_2_Template(rf,ctx){if(1&rf){const _r187=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Bc(2,EditProfileComponent_page_content_2_ng_container_2_Template,3,2,\"ng-container\",4),core.Qb(3,\"h2\",5),core.Dc(4),core.Pb(),core.Ob(5,6),core.Bc(6,EditProfileComponent_page_content_2_label_value_6_Template,2,2,\"label-value\",7),core.Bc(7,EditProfileComponent_page_content_2_input_field_7_Template,1,2,\"input-field\",8),core.Bc(8,EditProfileComponent_page_content_2_input_field_8_Template,1,2,\"input-field\",9),core.Bc(9,EditProfileComponent_page_content_2_label_value_9_Template,3,4,\"label-value\",10),core.Bc(10,EditProfileComponent_page_content_2_label_value_10_Template,2,2,\"label-value\",7),core.Nb(),core.Bc(11,EditProfileComponent_page_content_2_ng_container_11_Template,2,2,\"ng-container\",11),core.Bc(12,EditProfileComponent_page_content_2_ng_container_12_Template,8,8,\"ng-container\",12),core.Bc(13,EditProfileComponent_page_content_2_ng_container_13_Template,7,7,\"ng-container\",12),core.Bc(14,EditProfileComponent_page_content_2_ng_container_14_Template,5,3,\"ng-container\",4),core.Bc(15,EditProfileComponent_page_content_2_ng_container_15_Template,9,6,\"ng-container\",4),core.Bc(16,EditProfileComponent_page_content_2_ng_container_16_Template,8,4,\"ng-container\",4),core.Bc(17,EditProfileComponent_page_content_2_ng_container_17_Template,8,4,\"ng-container\",4),core.Qb(18,\"actions\"),core.Qb(19,\"action-button\",13),core.Xb(\"action\",(function(){return core.sc(_r187),core.Zb().saveOrConfirm()})),core.ac(20,\"async\"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.user.title.editProfile)(\"mobileHeading\",ctx_r0.i18n.user.mobileTitle.editProfile)(\"headingActions\",core.bc(1,21,ctx_r0.headingActions$)),core.xb(2),core.gc(\"ngIf\",\"disabled\"!==ctx_r0.imagesAvailability),core.xb(1),core.gc(\"ngClass\",\"disabled\"===ctx_r0.imagesAvailability?\"border-0 mt-2 mt-md-0\":null),core.xb(1),core.Fc(\" \",ctx_r0.i18n.user.title.fields,\" \"),core.xb(1),core.gc(\"formGroup\",ctx_r0.user),core.xb(1),core.gc(\"ngIf\",ctx_r0.operatorOfManagedUser),core.xb(1),core.gc(\"ngIf\",ctx_r0.hasField(\"name\")),core.xb(1),core.gc(\"ngIf\",ctx_r0.hasField(\"username\")),core.xb(1),core.gc(\"ngIf\",ctx_r0.hasField(\"email\")),core.xb(1),core.gc(\"ngIf\",ctx_r0.hasField(\"email\")&&ctx_r0.data.userConfiguration.emailPendingValidation),core.xb(1),core.gc(\"ngForOf\",null==ctx_r0.data.userConfiguration?null:ctx_r0.data.userConfiguration.customFields),core.xb(1),core.gc(\"ngIf\",ctx_r0.singleMobile),core.xb(1),core.gc(\"ngIf\",ctx_r0.singleLandLine),core.xb(1),core.gc(\"ngIf\",ctx_r0.singleAddress),core.xb(1),core.gc(\"ngIf\",\"multiple\"===ctx_r0.landLineAvailability||\"multiple\"===ctx_r0.mobileAvailability),core.xb(1),core.gc(\"ngIf\",\"multiple\"===ctx_r0.addressAvailability),core.xb(1),core.gc(\"ngIf\",\"disabled\"!==ctx_r0.contactInfoAvailability),core.xb(2),core.gc(\"disabled\",core.bc(20,23,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.save)}}function EditProfileComponent_ng_template_3_Template(rf,ctx){1&rf&&core.Lb(0,\"spinner\")}const BASIC_FIELDS=[\"name\",\"username\",\"email\"];let modelIndex=0,edit_profile_component_EditProfileComponent=(()=>{class EditProfileComponent extends base_page_component.a{constructor(injector,usersService,imagesService,phonesService,maps,addressHelper,modal,changeDetector){super(injector),this.usersService=usersService,this.imagesService=imagesService,this.phonesService=phonesService,this.maps=maps,this.addressHelper=addressHelper,this.modal=modal,this.changeDetector=changeDetector,this.ConfirmationMode=confirmation_mode.a,this.ready$=new BehaviorSubject.a(!1),this.confirmationMode$=new BehaviorSubject.a(null),this.createLandLinePhones=[],this.modifyLandLinePhones=[],this.createMobilePhones=[],this.modifyMobilePhones=[],this.createAddresses=[],this.modifyAddresses=[],this.createContactInfos=[],this.modifyContactInfos=[]}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||api_helper.a.SELF,this.createDeviceConfirmation=()=>({type:models.s.EDIT_PROFILE}),this.headingActions=[new action.c(\"search\",this.i18n.general.view,()=>this.router.navigate([\"users\",this.param,\"profile\"]),!0)],this.addSub(this.usersService.getDataForEditFullProfile({user:this.param}).subscribe(data=>{this.data=data;const role=data.userConfiguration.role,user=data.userConfiguration.details,self=this.authHelper.isSelf(user);this.byManager=!this.authHelper.isSelfOrOwner(user),this.operatorOfManagedUser=\"operator\"===role&&!this.authHelper.isSelf(user.user),self&&this.login.user$.next({id:this.login.user.id,display:data.userConfiguration.details.display,image:Object(helper.h)(data.images)?null:data.images[0]}),this.initialize(data),this.canConfirm=this.authHelper.canConfirm(data.confirmationPasswordInput),this.canConfirm||(this.notification.warning(this.authHelper.getConfirmationMessage(data.confirmationPasswordInput)),this.router.navigate([\"users\",\"profile\"])),this.ready$.next(!0)}))}locateControl(locator){return Object(helper.t)(this,locator)}hasField(name){return this.enabledFields.has(name)}isRequired(name){if(!this.canEdit(name))return!1;if(\"name\"===name||\"username\"===name)return!0;if(\"email\"===name)return this.data.userConfiguration.emailRequired;{const customField=this.userCustomFields.get(name);return customField&&customField.required}}fieldName(field){return\"string\"==typeof field?field:field.internalName}isEmpty(field){const name=this.fieldName(field);if(\"string\"==typeof field)return Object(helper.h)(this.user.get(name).value);{const customValues=this.user.get(\"customValues\");return!customValues||Object(helper.h)(customValues.get(name).value)}}canEdit(field){return this.editableFields.has(this.fieldName(field))}canManagePrivacy(field){if(!this.data.userConfiguration.enablePrivacy)return!1;switch(field){case\"phone\":return this.data.phoneConfiguration.managePrivacy;case\"address\":return this.data.addressConfiguration.managePrivacy;case\"contactInfo\":return this.data.contactInfoConfiguration.managePrivacy;default:return this.managePrivacyFields.has(this.fieldName(field))}}get landLineAvailability(){return this.getAvailability((this.data.phoneConfiguration||{}).maxLandLines)}get mobileAvailability(){return this.getAvailability((this.data.phoneConfiguration||{}).maxMobiles)}get addressAvailability(){return this.getAvailability((this.data.addressConfiguration||{}).maxAddresses)}get contactInfoAvailability(){return this.getAvailability((this.data.contactInfoConfiguration||{}).maxContactInfos)}get imagesAvailability(){return this.getAvailability((this.data.imageConfiguration||{}).maxImages)}getAvailability(max){return null==max||max<=0?\"disabled\":1===max?\"single\":\"multiple\"}saveOrConfirm(){this.data.confirmationPasswordInput?this.notification.confirm({title:this.i18n.user.title.confirmation,passwordInput:this.data.confirmationPasswordInput,createDeviceConfirmation:this.createDeviceConfirmation,callback:params=>{this.save(params.confirmationPassword)}}):this.save()}save(confirmationPassword){const fullForm=new fesm2015_forms.m({user:this.user,createLandLinePhones:new fesm2015_forms.g(this.createLandLinePhones),modifyLandLinePhones:new fesm2015_forms.g(this.modifyLandLinePhones),createMobilePhones:new fesm2015_forms.g(this.createMobilePhones),modifyMobilePhones:new fesm2015_forms.g(this.modifyMobilePhones),createAddresses:new fesm2015_forms.g(this.createAddresses),modifyAddresses:new fesm2015_forms.g(this.modifyAddresses),createContactInfos:new fesm2015_forms.g(this.createContactInfos),modifyContactInfos:new fesm2015_forms.g(this.modifyContactInfos)});!confirmationPassword&&this.confirmationPassword&&(fullForm.setControl(\"confirmationPassword\",this.confirmationPassword),confirmationPassword=this.confirmationPassword.value),Object(helper.F)(fullForm)&&this.addSub(this.usersService.saveUserFullProfile({user:this.param,confirmationPassword:confirmationPassword,body:this.editForSubmit()}).subscribe(()=>{this.notification.snackBar(this.i18n.user.profileSaved),this.reload(),Object(helper.y)()}))}editForSubmit(){const edit={user:Object(helper.s)(this.user)?this.user.value:null,createLandLinePhones:this.createLandLinePhones.map(f=>f.value),modifyLandLinePhones:this.modifyLandLinePhones.map(f=>f.value),createMobilePhones:this.createMobilePhones.map(f=>f.value),modifyMobilePhones:this.modifyMobilePhones.map(f=>f.value),removePhones:this.removedPhones,createAddresses:this.createAddresses.map(f=>f.value),modifyAddresses:this.modifyAddresses.map(f=>f.value),removeAddresses:this.removedAddresses,createContactInfos:this.createContactInfos.map(f=>f.value),modifyContactInfos:this.modifyContactInfos.map(f=>f.value),removeContactInfos:this.removedContactInfos};if(\"single\"===this.mobileAvailability){const phone=this.singleMobile.value,id=phone.id;id?Object(helper.h)(phone.number)?edit.removePhones.push(id):Object(helper.s)(this.singleMobile)&&(edit.modifyMobilePhones=[phone]):Object(helper.h)(phone.number)||(edit.createMobilePhones=[phone])}if(\"single\"===this.landLineAvailability){const phone=this.singleLandLine.value,id=phone.id;id?Object(helper.h)(phone.number)?edit.removePhones.push(id):Object(helper.s)(this.singleLandLine)&&(edit.modifyLandLinePhones=[phone]):Object(helper.h)(phone.number)||(edit.createLandLinePhones=[phone])}if(\"single\"===this.addressAvailability){const address=this.singleAddress.value,id=address.id,defined=this.defineSingleAddress.value;id?defined?Object(helper.s)(this.singleAddress)&&(edit.modifyAddresses=[address]):edit.removeAddresses.push(id):defined&&(edit.createAddresses=[address])}return edit}initialize(data){this.userCustomFields=new Map,this.enabledFields=new Set,this.editableFields=new Set,this.managePrivacyFields=new Set,this.removedPhones=[],this.removedAddresses=[],this.removedContactInfos=[],data.contactInfoConfiguration&&data.contactInfoConfiguration.availability!==models.i.DISABLED&&(data.addressConfiguration.contactInfoEnabled=!0,data.addressConfiguration.contactInfoFields=data.contactInfoConfiguration.customFields);const fieldActions=data.userConfiguration.profileFieldActions;for(const name in fieldActions){if(!fieldActions.hasOwnProperty(name))continue;this.enabledFields.add(name);const actions=fieldActions[name];actions.edit&&this.editableFields.add(name),actions.managePrivacy&&this.managePrivacyFields.add(name);const customField=this.data.userConfiguration.customFields.find(cf=>cf.internalName===name);customField&&this.userCustomFields.set(name,customField)}this.user=this.buildUserForm(),data.confirmationPasswordInput&&(this.confirmationPassword=this.formBuilder.control(\"\",fesm2015_forms.G.required)),this.images=this.data.images.slice(),this.phones=[],\"single\"===this.mobileAvailability?(this.singleMobileManage=Object(helper.h)(data.mobilePhones)?data.phoneConfiguration.mobilePhone:data.mobilePhones[0],this.singleMobile=this.buildMobileForm(this.singleMobileManage)):(data.mobilePhones||[]).forEach(p=>{const form=this.buildMobileForm(p);\"multiple\"===this.mobileAvailability&&(this.phones.push(p),this.addSub(form.valueChanges.subscribe(()=>{this.modifyMobilePhones.includes(form)||this.modifyMobilePhones.push(form)})))}),\"single\"===this.landLineAvailability?(this.singleLandLineManage=Object(helper.h)(data.landLinePhones)?data.phoneConfiguration.landLinePhone:data.landLinePhones[0],this.singleLandLine=this.buildLandLineForm(this.singleLandLineManage)):(data.landLinePhones||[]).forEach(p=>{const form=this.buildLandLineForm(p);\"multiple\"===this.landLineAvailability&&(this.phones.push(p),this.addSub(form.valueChanges.subscribe(()=>{this.modifyLandLinePhones.includes(form)||this.modifyLandLinePhones.push(form)})))}),\"single\"===this.addressAvailability?(this.defineSingleAddress=this.formBuilder.control(!Object(helper.h)(data.addresses)||\"required\"===data.addressConfiguration.availability),this.singleAddressManage=Object(helper.h)(data.addresses)?data.addressConfiguration.address:data.addresses[0],this.singleAddress=this.buildAddressForm(this.singleAddressManage)):((data.addresses||[]).forEach(p=>{const form=this.buildAddressForm(p);\"multiple\"===this.addressAvailability&&this.addSub(form.valueChanges.subscribe(()=>{this.modifyAddresses.includes(form)||this.modifyAddresses.push(form)}))}),this.addresses=(data.addresses||[]).slice()),(data.contactInfos||[]).forEach(p=>{const form=this.buildContactInfoForm(p);this.addSub(form.valueChanges.subscribe(()=>{this.modifyContactInfos.includes(form)||this.modifyContactInfos.push(form)}))}),this.contactInfos=(data.contactInfos||[]).slice()}buildUserForm(){const data=this.data.userConfiguration,user=this.data.user,form=this.formBuilder.group({version:user.version,hiddenFields:[user.hiddenFields||[]]});for(const field of BASIC_FIELDS)this.hasField(field)?form.setControl(field,this.formBuilder.control({value:user[field],disabled:!this.canEdit(field)},this.isRequired(field)?fesm2015_forms.G.required:null)):form.removeControl(field);return form.setControl(\"customValues\",this.fieldHelper.customValuesFormGroup(data.customFields,{currentValues:user.customValues,disabledProvider:cf=>!this.canEdit(cf.internalName)})),form}stampDataAndInitForm(model,form){model.idSuffix=\"_\"+(model.id||modelIndex++),model.form=form,form.locating$=new BehaviorSubject.a(!1),form.patchValue(model)}buildLandLineForm(phone){phone.kind=models.Z.LAND_LINE;const data=this.data.phoneConfiguration,form=this.buildPhoneForm(1===data.maxLandLines,data.landLineAvailability===models.i.REQUIRED);if(data.extensionEnabled){const extension=this.formBuilder.control(null);this.editableFields.has(\"phone\")||extension.disable(),form.setControl(\"extension\",extension)}return this.stampDataAndInitForm(phone,form),form}buildMobileForm(phone){phone.kind=models.Z.MOBILE;const data=this.data.phoneConfiguration,form=this.buildPhoneForm(1===data.maxMobiles,data.mobileAvailability===models.i.REQUIRED);return data.smsEnabled&&(form.setControl(\"verified\",this.formBuilder.control(phone.verified)),form.setControl(\"enabledForSms\",this.formBuilder.control(phone.enabledForSms))),this.stampDataAndInitForm(phone,form),form}buildPhoneForm(single,required){const form=this.formBuilder.group({id:null,version:null,hidden:null,name:[null,fesm2015_forms.G.required],number:[null,!single||required?fesm2015_forms.G.required:null]});return this.editableFields.has(\"phone\")||form.disable(),form}buildAddressForm(address){const data=this.data.addressConfiguration,form=this.addressHelper.addressFormGroup(data);this.stampDataAndInitForm(address,form);for(const field of data.enabledFields){let previous=address[field]||null;this.addSub(form.get(field).valueChanges.subscribe(newVal=>{previous!==newVal&&form.get(\"location\").patchValue({latitude:null,longitude:null}),previous=newVal}))}return this.editableFields.has(\"address\")||form.disable(),form}buildContactInfoForm(contactInfo){const data=this.data.contactInfoConfiguration,form=this.formBuilder.group({id:null,version:null,hidden:null,name:[null,fesm2015_forms.G.required],image:null,email:null,mobilePhone:null,landLinePhone:null,landLineExtension:null,address:null});return form.setControl(\"customValues\",this.fieldHelper.customValuesFormGroup(data.customFields)),this.stampDataAndInitForm(contactInfo,form),form}phoneNameLabel(phone){return phone.kind===models.Z.LAND_LINE?this.i18n.phone.nameLandLine:this.i18n.phone.nameMobile}phoneExample(phone){return phone.kind===models.Z.LAND_LINE?this.data.phoneConfiguration.landLineExample:this.data.phoneConfiguration.mobileExample}phoneNumberLabel(phone){return phone.kind===models.Z.LAND_LINE?this.i18n.phone.numberLandLine:this.i18n.phone.numberMobile}phoneHasSms(phone){return!!this.data.phoneConfiguration.smsEnabled&&phone.id&&phone.kind===models.Z.MOBILE&&phone.number===phone.form.value.number}hasExtension(phone){return this.data.phoneConfiguration.extensionEnabled&&phone.kind===models.Z.LAND_LINE}get canCreateLandLine(){if(\"multiple\"!==this.landLineAvailability||!this.editableFields.has(\"phone\"))return!1;const max=this.data.phoneConfiguration.maxLandLines;return this.phones.filter(p=>p.kind===models.Z.LAND_LINE).length<max}get canCreateMobile(){if(\"multiple\"!==this.mobileAvailability||!this.editableFields.has(\"phone\"))return!1;const max=this.data.phoneConfiguration.maxMobiles;return this.phones.filter(p=>p.kind===models.Z.MOBILE).length<max}get canCreateAddress(){return!(\"multiple\"!==this.addressAvailability||!this.editableFields.has(\"address\"))&&this.addresses.length<this.data.addressConfiguration.maxAddresses}get canCreateContactInfo(){return\"multiple\"===this.contactInfoAvailability&&this.contactInfos.length<this.data.contactInfoConfiguration.maxContactInfos}get canUploadImages(){return this.images.length<this.data.imageConfiguration.maxImages}addMobile(){const phone=Object(cloneDeep.a)(this.data.phoneConfiguration.mobilePhone);phone.name=\"\",this.createMobilePhones.push(this.buildMobileForm(phone)),this.phones=[phone,...this.phones],this.setFocus(\"phone_name\",phone)}addLandLine(){const phone=Object(cloneDeep.a)(this.data.phoneConfiguration.landLinePhone);phone.name=\"\",this.createLandLinePhones.push(this.buildLandLineForm(phone)),this.phones=[phone,...this.phones],this.setFocus(\"phone_name\",phone)}addAddress(){const address=Object(cloneDeep.a)(this.data.addressConfiguration.address);address.name=\"\",this.createAddresses.push(this.buildAddressForm(address)),this.addresses=[address,...this.addresses],this.setFocus(\"address_name\",address)}addContactInfo(){const contactInfo=Object(cloneDeep.a)(this.data.contactInfoConfiguration.contactInfo);this.createContactInfos.push(this.buildContactInfoForm(contactInfo)),this.contactInfos=[contactInfo,...this.contactInfos],this.setFocus(\"contact-info_name\",contactInfo)}removePhone(phone){this.phones=this.phones.filter(p=>p!==phone);const id=phone.id;if(id)this.removedPhones.push(id);else{const form=phone.form;this.createMobilePhones=this.createMobilePhones.filter(f=>f!==form),this.createLandLinePhones=this.createLandLinePhones.filter(f=>f!==form)}}removeAddress(address){this.addresses=this.addresses.filter(a=>a!==address);const id=address.id;if(id)this.removedAddresses.push(id);else{const form=address.form;this.createAddresses=this.createAddresses.filter(f=>f!==form)}}removeContactInfo(contactInfo){this.contactInfos=this.contactInfos.filter(ci=>ci!==contactInfo);const id=contactInfo.id;if(id)this.removedContactInfos.push(id);else{const form=contactInfo.form;this.createContactInfos=this.createContactInfos.filter(f=>f!==form)}}setFocus(prefix,model){const id=prefix+model.idSuffix;setTimeout(()=>document.getElementById(id).focus(),10)}showEnableForSms(phoneForm){return!!this.data.phoneConfiguration.smsEnabled&&(!this.byManager||phoneForm.value.verified)}maybeVerify(event,id){if(this.byManager)return;let phone;if(phone=this.singleMobile?this.singleMobileManage:this.phones.find(p=>p.id===id),null==phone)throw new Error(\"Mobile phone not found: \"+id);phone.verified||(this.verify(phone),event.preventDefault(),event.stopPropagation())}verify(phone){const ref=this.modal.show(verify_phone_component_VerifyPhoneComponent,{class:\"modal-form\",initialState:{phone:phone}});this.addSub(ref.content.verified.pipe(Object(take.a)(1)).subscribe(flag=>{flag&&this.phonesService.getPhoneDataForEdit({id:phone.id,fields:[\"phone\"]}).subscribe(data=>{const newPhone=data.phone;newPhone.id=phone.id,newPhone.enabledForSms=!0;const form=this.buildMobileForm(newPhone);form.markAsTouched();const index=(this.phones||[]).findIndex(p=>p.id===phone.id);if(index>=0){const phones=this.phones.slice();phones[index]=newPhone,this.phones=phones;const formIndex=this.modifyMobilePhones.findIndex(f=>f.value.id===phone.id),newForms=this.modifyMobilePhones.slice();formIndex>=0?newForms[formIndex]=form:newForms.push(form),this.modifyMobilePhones=newForms}this.singleMobile&&(this.singleMobile=form),ref.hide(),this.changeDetector.detectChanges()})}))}onUploadDone(images){this.images=[...this.images,...images],this.changeDetector.detectChanges()}manageImages(){const ref=this.modal.show(manage_images_component.a,{class:\"modal-form\",initialState:{images:this.images}});ref.content.result.pipe(Object(first.a)()).subscribe(result=>{if(!Object(helper.h)(result.removedImages)){for(const removed of result.removedImages)this.addSub(this.imagesService.deleteImage({idOrKey:removed}).subscribe());this.images=this.images.filter(i=>!result.removedImages.includes(i.id))}!Object(helper.h)(result.order)&&(this.images=result.order.map(id=>this.images.find(i=>i.id===id)),this.addSub(this.imagesService.reorderProfileImages({ids:result.order,user:this.param}).subscribe())),ref.hide()})}removeAllImages(){for(const image of this.images||[])this.addSub(this.imagesService.deleteImage({idOrKey:image.id}).subscribe());this.images=[],this.changeDetector.detectChanges()}fieldSize(cf){return this.fieldHelper.fieldSize(cf)}locateAddress(addressForm){const value=addressForm.value;addressForm.locating$.next(!0),this.addSub(this.maps.geocode(value).subscribe(coords=>{addressForm.patchValue({location:coords}),this.changeDetector.detectChanges()},()=>this.mapShown(addressForm)))}mapShown(addressForm){addressForm.locating$.next(!1),this.changeDetector.detectChanges()}resolveMenu(data){return this.menu.userMenu(data.userConfiguration.details,menu.b.EDIT_MY_PROFILE)}fieldValue(cf){const value=this.user.get(\"customValues\").get(cf.internalName).value;return this.fieldHelper.asFieldValue(cf,value,this.data.userConfiguration.binaryValues)}}return EditProfileComponent.ɵfac=function(t){return new(t||EditProfileComponent)(core.Kb(core.r),core.Kb(users_service.a),core.Kb(images_service.a),core.Kb(phones_service.a),core.Kb(maps_service.a),core.Kb(address_helper_service.a),core.Kb(ngx_bootstrap_modal.b),core.Kb(core.h))},EditProfileComponent.ɵcmp=core.Eb({type:EditProfileComponent,selectors:[[\"edit-profile\"]],features:[core.ub],decls:5,vars:4,consts:[[3,\"ready\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngIf\"],[\"locatingSpinner\",\"\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[4,\"ngIf\"],[1,\"mt-4\",\"mb-2\",3,\"ngClass\"],[3,\"formGroup\"],[\"kind\",\"fieldView\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"name\",3,\"label\",\"required\",4,\"ngIf\"],[\"formControlName\",\"username\",3,\"label\",\"required\",4,\"ngIf\"],[3,\"label\",\"kind\",\"ignoreExtraCell\",4,\"ngIf\"],[3,\"formGroup\",4,\"ngFor\",\"ngForOf\"],[3,\"formGroup\",4,\"ngIf\"],[1,\"btn-main\",3,\"disabled\",\"label\",\"action\"],[1,\"mb-3\",\"border-0\",\"mt-2\",\"mt-md-0\"],[1,\"d-flex\",\"justify-content-center\",\"justify-content-sm-start\"],[\"size\",\"huge\",\"useLightbox\",\"\",3,\"image\",\"roundBorders\",4,\"ngIf\"],[\"class\",\"my-3\",4,\"ngIf\"],[\"containerClass\",\"mt-3\",\"target\",\"profile\",3,\"owner\",\"uploadDone\"],[\"singleUpload\",\"\"],[\"class\",\"mt-3\",\"forceRow\",\"\",4,\"ngIf\"],[\"size\",\"huge\",\"useLightbox\",\"\",3,\"image\",\"roundBorders\"],[1,\"my-3\"],[\"forceRow\",\"\",1,\"mt-3\"],[\"outline\",\"\",3,\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\",4,\"ngIf\"],[1,\"border-0\",\"d-flex\",\"mb-3\",\"flex-column\",\"flex-xs-row\",\"justify-content-between\",\"mt-2\",\"mt-md-0\"],[1,\"mb-2\",\"mb-xs-0\"],[1,\"row\",\"no-gutters\"],[\"class\",\"col-12 col-xs-6 col-sm-4 col-md-3 d-flex justify-content-center justify-content-center\",4,\"ngFor\",\"ngForOf\"],[\"class\",\"d-flex justify-content-end\",4,\"ngIf\"],[\"target\",\"profile\",3,\"owner\",\"max\",\"uploadDone\"],[\"multiUpload\",\"\"],[1,\"col-12\",\"col-xs-6\",\"col-sm-4\",\"col-md-3\",\"d-flex\",\"justify-content-center\",\"justify-content-center\"],[\"size\",\"huge\",\"useLightbox\",\"\",1,\"mb-1\",\"mb-xs-3\",3,\"image\",\"roundBorders\",\"additionalImages\"],[1,\"col-12\"],[1,\"d-flex\",\"justify-content-end\"],[\"kind\",\"fieldView\",3,\"label\"],[3,\"user\"],[\"formControlName\",\"name\",3,\"label\",\"required\"],[\"formControlName\",\"username\",3,\"label\",\"required\"],[3,\"label\",\"kind\",\"ignoreExtraCell\"],[\"formControlName\",\"email\",3,\"required\"],[\"field\",\"email\",3,\"control\",4,\"extraCell\"],[\"field\",\"email\",3,\"control\"],[3,\"label\",\"kind\",\"labelPosition\",\"ignoreExtraCell\",\"fieldSize\",\"required\",4,\"ngIf\"],[3,\"label\",\"kind\",\"labelPosition\",\"ignoreExtraCell\",\"fieldSize\",\"required\"],[\"hideLabel\",\"\",3,\"field\",\"formControlName\",\"binaryValues\",4,\"ngIf\",\"ngIfElse\"],[\"plainFieldValue\",\"\"],[3,\"field\",\"control\",4,\"extraCell\"],[\"hideLabel\",\"\",3,\"field\",\"formControlName\",\"binaryValues\"],[3,\"fieldValue\"],[3,\"field\",\"control\"],[\"kind\",\"field\",\"fieldSize\",\"small\",3,\"label\",\"required\",\"ignoreExtraCell\"],[\"formControlName\",\"number\",3,\"placeholder\",4,\"ngIf\",\"ngIfElse\"],[\"plainPhoneNumber\",\"\"],[3,\"control\",4,\"extraCell\"],[\"formControlName\",\"number\",3,\"placeholder\"],[3,\"control\"],[3,\"label\",\"formControl\",4,\"ngIf\",\"ngIfElse\"],[\"plainVerified\",\"\"],[3,\"label\",\"formControl\"],[3,\"label\",\"formControl\",\"click\",4,\"ngIf\",\"ngIfElse\"],[\"plainSms\",\"\"],[3,\"label\",\"formControl\",\"click\"],[\"formControlName\",\"extension\",\"fieldSize\",\"tiny\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"extension\",\"fieldSize\",\"tiny\",3,\"label\"],[1,\"mb-2\"],[3,\"formControl\",\"label\",4,\"ngIf\"],[3,\"formControl\",\"label\"],[\"ignoreContactFields\",\"\",3,\"addressForm\",\"configuration\",\"managePrivacy\",\"binaryValues\"],[\"kind\",\"field\",3,\"label\",4,\"ngIf\"],[\"kind\",\"field\",3,\"label\"],[3,\"address\",\"imageLoaded\",4,\"ngIf\",\"ngIfElse\"],[\"viewMap\",\"\"],[3,\"address\",\"imageLoaded\"],[\"outline\",\"\",3,\"label\",\"action\",4,\"ngIf\",\"ngIfElse\"],[1,\"mt-4\",\"mb-2\",\"d-flex\",\"flex-column\",\"flex-xs-row\",\"justify-content-between\"],[\"class\",\"section-title-action\",\"dropdown\",\"\",4,\"ngIf\"],[\"class\",\"section-title-action\",4,\"ngIf\"],[\"dropdown\",\"\",1,\"section-title-action\"],[\"dropdownToggle\",\"\",\"type\",\"button\",\"type\",\"button\",\"aria-controls\",\"newPhoneDropDown\",1,\"btn\",\"btn-outline-primary\",\"dropdown-toggle\"],[\"class\",\"dropdown-menu dropdown-menu-right\",\"role\",\"listbox\",\"id\",\"newPhoneDropDown\",4,\"dropdownMenu\"],[\"role\",\"listbox\",\"id\",\"newPhoneDropDown\",1,\"dropdown-menu\",\"dropdown-menu-right\"],[\"dropDownMenu\",\"\"],[1,\"dropdown-item\",3,\"click\"],[1,\"section-title-action\"],[\"formControlName\",\"name\",\"required\",\"\",3,\"id\",\"label\"],[\"type\",\"tel\",\"formControlName\",\"number\",\"required\",\"\",3,\"id\",\"label\",\"placeholder\"],[\"class\",\"d-flex justify-content-end\",3,\"ngClass\",4,\"ngIf\"],[\"formControlName\",\"verified\",3,\"label\",4,\"ngIf\",\"ngIfElse\"],[\"formControlName\",\"verified\",3,\"label\"],[\"formControlName\",\"enabledForSms\",3,\"label\",\"click\",4,\"ngIf\",\"ngIfElse\"],[\"formControlName\",\"enabledForSms\",3,\"label\",\"click\"],[1,\"d-flex\",\"w-100\",\"justify-content-between\"],[\"justifyStart\",\"\",3,\"control\"],[1,\"d-flex\",\"justify-content-end\",3,\"ngClass\"],[\"idPrefix\",\"address_\",3,\"addressForm\",\"ignoreContactFields\",\"configuration\",\"idSuffix\",\"managePrivacy\",\"binaryValues\"],[\"kind\",\"field\",\"class\",\"pb-0\",3,\"label\",4,\"ngIf\"],[\"class\",\"row mt-3 no-gutters\",4,\"ngIf\"],[\"kind\",\"field\",1,\"pb-0\",3,\"label\"],[4,\"ngIf\",\"ngIfThen\"],[1,\"row\",\"mt-3\",\"no-gutters\"],[\"class\",\"col-4\",4,\"ngIf\"],[1,\"col-12\",\"col-sm-8\"],[\"forceRow\",\"\",1,\"mt-0\"],[1,\"col-4\"],[1,\"flex-grow-1\"],[\"formControlName\",\"image\",\"target\",\"contactInfo\",\"separator\",\"@\",\"avatarSize\",\"xlarge\",3,\"label\",\"initialImages\"],[\"formControlName\",\"name\",3,\"id\",\"label\"],[\"formControlName\",\"email\",3,\"id\",\"label\"],[\"formControlName\",\"mobilePhone\",3,\"id\",\"label\"],[\"formControlName\",\"landLinePhone\",3,\"id\",\"label\"],[\"formControlName\",\"landLineExtension\",3,\"id\",\"label\",4,\"ngIf\"],[\"formControlName\",\"address\",3,\"id\",\"label\"],[4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"landLineExtension\",3,\"id\",\"label\"],[3,\"value\",\"text\",4,\"ngIf\"],[3,\"value\",\"text\"],[3,\"field\",\"formControlName\",\"binaryValues\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,EditProfileComponent_page_content_2_Template,21,25,\"page-content\",1),core.Pb(),core.Bc(3,EditProfileComponent_ng_template_3_Template,1,0,\"ng-template\",null,2,core.Cc)),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,common.q,fesm2015_forms.w,fesm2015_forms.n,common.s,actions_component.a,action_button_component.a,image_upload_component.a,avatar_component.a,label_value_component.a,user_link_component.a,input_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,extra_cell_directive.a,field_privacy_component.a,custom_field_input_component.a,format_field_value_component.a,boolean_field_component.a,fesm2015_forms.k,address_form_component.a,static_map_component.a,ngx_bootstrap_dropdown.a,ngx_bootstrap_dropdown.d,ngx_bootstrap_dropdown.b,images_field_component.a,single_selection_field_component.a,field_option_directive.a,spinner_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),EditProfileComponent})();var validation_service=__webpack_require__(\"qEt1\"),notification_component=__webpack_require__(\"cvAk\");function ValidateEmailChangeComponent_page_content_2_actions_3_Template(rf,ctx){if(1&rf){const _r3=core.Rb();core.Qb(0,\"actions\",4),core.Qb(1,\"action-button\",5),core.Xb(\"action\",(function(){return core.sc(_r3),core.Zb(2).goToLogin()})),core.Pb(),core.Pb()}if(2&rf){const ctx_r1=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r1.i18n.menu.login)}}function ValidateEmailChangeComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\"),core.Qb(1,\"notification\",2),core.Dc(2),core.Pb(),core.Bc(3,ValidateEmailChangeComponent_page_content_2_actions_3_Template,2,1,\"actions\",3),core.ac(4,\"async\"),core.Pb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"allowClose\",!1),core.xb(1),core.Fc(\" \",ctx_r0.i18n.user.newEmailConfirmed,\" \"),core.xb(1),core.gc(\"ngIf\",null==core.bc(4,3,ctx_r0.login.user$))}}let validate_email_change_component_ValidateEmailChangeComponent=(()=>{class ValidateEmailChangeComponent extends base_page_component.a{constructor(injector,validationService){super(injector),this.validationService=validationService}get userId(){return this.data}ngOnInit(){this.addSub(this.validationService.validateEmailChange(this.route.snapshot.params.key).subscribe(()=>{this.login.user?(this.login.logout(),this.notification.info(this.i18n.user.newEmailConfirmed)):this.data=\"\"}))}goToLogin(){this.login.goToLoginPage(\"\")}resolveMenu(){return this.menu.homeMenu()}}return ValidateEmailChangeComponent.ɵfac=function(t){return new(t||ValidateEmailChangeComponent)(core.Kb(core.r),core.Kb(validation_service.a))},ValidateEmailChangeComponent.ɵcmp=core.Eb({type:ValidateEmailChangeComponent,selectors:[[\"validate-email-change\"]],features:[core.ub],decls:3,vars:4,consts:[[\"size\",\"medium\",\"hideMenu\",\"\",3,\"ready\"],[4,\"ngIf\"],[3,\"allowClose\"],[\"ngClass\",\"mt-3\",\"forceRow\",\"\",4,\"ngIf\"],[\"ngClass\",\"mt-3\",\"forceRow\",\"\"],[3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ValidateEmailChangeComponent_page_content_2_Template,5,5,\"page-content\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,notification_component.a,actions_component.a,common.q,action_button_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),ValidateEmailChangeComponent})();var view_profile_component=__webpack_require__(\"/QoZ\"),references_service=__webpack_require__(\"nUN0\"),format_service=__webpack_require__(\"ZvpF\"),reference_helper_service=__webpack_require__(\"naJM\"),radio_group_field_component=__webpack_require__(\"wR2l\"),rating_stats_component=__webpack_require__(\"vOpc\");function SearchReferencesComponent_ng_container_2_ng_container_5_div_4_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",6)}function SearchReferencesComponent_ng_container_2_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",6),core.Qb(2,\"label-value\",13),core.Lb(3,\"user-link\",14),core.Pb(),core.Pb(),core.Bc(4,SearchReferencesComponent_ng_container_2_ng_container_5_div_4_Template,1,0,\"div\",15),core.Nb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.gc(\"label\",ctx_r3.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r3.data.user),core.xb(1),core.gc(\"ngIf\",ctx_r3.layout.gtsm$)}}function SearchReferencesComponent_ng_container_2_page_content_10_tr_10_ng_container_4_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchReferencesComponent_ng_container_2_page_content_10_tr_10_ng_container_6_Template(rf,ctx){1&rf&&core.Mb(0)}const search_references_component_c0=function(a0,a1){return{count:a0,total:a1}};function SearchReferencesComponent_ng_container_2_page_content_10_tr_10_Template(rf,ctx){if(1&rf){const _r13=core.Rb();core.Qb(0,\"tr\"),core.Qb(1,\"td\"),core.Lb(2,\"rating-stats\",22),core.Pb(),core.Qb(3,\"td\",21),core.Xb(\"click\",(function(){core.sc(_r13);const entry_r9=ctx.$implicit;return core.Zb(3).filter(entry_r9.level,!0)})),core.Bc(4,SearchReferencesComponent_ng_container_2_page_content_10_tr_10_ng_container_4_Template,1,0,\"ng-container\",23),core.Pb(),core.Qb(5,\"td\",21),core.Xb(\"click\",(function(){core.sc(_r13);const entry_r9=ctx.$implicit;return core.Zb(3).filter(entry_r9.level)})),core.Bc(6,SearchReferencesComponent_ng_container_2_page_content_10_tr_10_ng_container_6_Template,1,0,\"ng-container\",23),core.Pb(),core.Pb()}if(2&rf){const entry_r9=ctx.$implicit,ctx_r8=core.Zb(3),_r1=core.qc(4);core.xb(2),core.gc(\"level\",entry_r9.level)(\"textLeft\",entry_r9.text),core.xb(2),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.kc(6,search_references_component_c0,null==ctx_r8.allTime?null:ctx_r8.allTime.counts[entry_r9.level],null==ctx_r8.allTime?null:ctx_r8.allTime.total)),core.xb(2),core.gc(\"ngTemplateOutlet\",_r1)(\"ngTemplateOutletContext\",core.kc(9,search_references_component_c0,null==ctx_r8.last30Days?null:ctx_r8.last30Days.counts[entry_r9.level],null==ctx_r8.last30Days?null:ctx_r8.last30Days.total))}}function SearchReferencesComponent_ng_container_2_page_content_10_Template(rf,ctx){if(1&rf){const _r16=core.Rb();core.Qb(0,\"page-content\",16),core.Qb(1,\"table\",17),core.Qb(2,\"thead\"),core.Qb(3,\"th\",18),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Pb(),core.Qb(9,\"tbody\"),core.Bc(10,SearchReferencesComponent_ng_container_2_page_content_10_tr_10_Template,7,12,\"tr\",19),core.Qb(11,\"tr\"),core.Qb(12,\"td\",20),core.Dc(13),core.Pb(),core.Qb(14,\"td\",21),core.Xb(\"click\",(function(){return core.sc(_r16),core.Zb(2).filter(null,!0)})),core.Dc(15),core.Pb(),core.Qb(16,\"td\",21),core.Xb(\"click\",(function(){return core.sc(_r16),core.Zb(2).filter()})),core.Dc(17),core.Pb(),core.Pb(),core.Qb(18,\"tr\"),core.Qb(19,\"td\",20),core.Dc(20),core.Pb(),core.Qb(21,\"td\"),core.Dc(22),core.ac(23,\"percent\"),core.Pb(),core.Qb(24,\"td\"),core.Dc(25),core.ac(26,\"percent\"),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r4=core.Zb(2);core.xb(4),core.Ec(ctx_r4.i18n.reference.value),core.xb(2),core.Ec(ctx_r4.i18n.reference.allTime),core.xb(2),core.Ec(ctx_r4.i18n.reference.last30Days),core.xb(2),core.gc(\"ngForOf\",ctx_r4.levels),core.xb(3),core.Ec(ctx_r4.i18n.reference.total),core.xb(2),core.Fc(\" \",null==ctx_r4.allTime?null:ctx_r4.allTime.total,\" \"),core.xb(2),core.Fc(\" \",null==ctx_r4.last30Days?null:ctx_r4.last30Days.total,\"\"),core.xb(3),core.Fc(\" \",ctx_r4.i18n.reference.percentagePositive,\"\"),core.xb(2),core.Fc(\" \",core.bc(23,10,(null==ctx_r4.allTime?null:ctx_r4.allTime.totalPositive)/(null==ctx_r4.allTime?null:ctx_r4.allTime.total)||0),\" \"),core.xb(3),core.Fc(\" \",core.bc(26,12,(null==ctx_r4.last30Days?null:ctx_r4.last30Days.totalPositive)/(null==ctx_r4.last30Days?null:ctx_r4.last30Days.total)||0),\" \")}}function SearchReferencesComponent_ng_container_2_mobile_result_15_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",24),core.Qb(1,\"div\",25),core.Qb(2,\"div\"),core.Qb(3,\"div\",26),core.Dc(4),core.Pb(),core.Qb(5,\"div\",27),core.Dc(6),core.ac(7,\"dateTime\"),core.Pb(),core.Qb(8,\"div\",28),core.Lb(9,\"rating-stats\",29),core.Pb(),core.Pb(),core.Pb(),core.Pb()),2&rf){const row_r18=ctx.$implicit;core.gc(\"avatarImage\",row_r18.relatedUser.image),core.xb(4),core.Fc(\" \",row_r18.relatedUser.display,\" \"),core.xb(2),core.Fc(\" \",core.bc(7,4,row_r18.date),\" \"),core.xb(3),core.gc(\"level\",row_r18.level)}}function SearchReferencesComponent_ng_container_2_table_16_ng_container_10_button_10_Template(rf,ctx){if(1&rf){const _r24=core.Rb();core.Qb(0,\"button\",35),core.Xb(\"click\",(function(){core.sc(_r24);const row_r20=core.Zb().$implicit;return core.Zb(3).remove(row_r20)})),core.Lb(1,\"icon\",36),core.Pb()}if(2&rf){const ctx_r21=core.Zb(4);core.gc(\"tooltip\",ctx_r21.i18n.general.remove)}}function SearchReferencesComponent_ng_container_2_table_16_ng_container_10_Template(rf,ctx){if(1&rf){const _r26=core.Rb();core.Ob(0),core.Qb(1,\"tr\",32),core.Xb(\"click\",(function(){core.sc(_r26);const row_r20=ctx.$implicit,ctx_r25=core.Zb(3);return ctx_r25.router.navigate(ctx_r25.path(row_r20))})),core.Qb(2,\"td\"),core.Dc(3),core.ac(4,\"dateTime\"),core.Pb(),core.Qb(5,\"td\"),core.Dc(6),core.Pb(),core.Qb(7,\"td\"),core.Lb(8,\"rating-stats\",29),core.Pb(),core.Qb(9,\"td\",33),core.Bc(10,SearchReferencesComponent_ng_container_2_table_16_ng_container_10_button_10_Template,2,1,\"button\",34),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const row_r20=ctx.$implicit,ctx_r19=core.Zb(3);core.xb(3),core.Ec(core.bc(4,4,row_r20.date)),core.xb(3),core.Ec(row_r20.relatedUser.shortDisplay),core.xb(2),core.gc(\"level\",row_r20.level),core.xb(2),core.gc(\"ngIf\",ctx_r19.data.manage)}}function SearchReferencesComponent_ng_container_2_table_16_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",30),core.Qb(1,\"thead\"),core.Qb(2,\"th\",18),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Lb(8,\"th\",31),core.Pb(),core.Qb(9,\"tbody\"),core.Bc(10,SearchReferencesComponent_ng_container_2_table_16_ng_container_10_Template,11,6,\"ng-container\",19),core.ac(11,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r6=core.Zb(2);var tmp_3_0;core.xb(3),core.Ec(ctx_r6.i18n.general.date),core.xb(2),core.Ec(ctx_r6.i18n.general.name),core.xb(2),core.Ec(ctx_r6.i18n.reference.level.level),core.xb(3),core.gc(\"ngForOf\",null==(tmp_3_0=core.bc(11,4,ctx_r6.results$))?null:tmp_3_0.results)}}function SearchReferencesComponent_ng_container_2_Template(rf,ctx){if(1&rf){const _r28=core.Rb();core.Ob(0),core.Qb(1,\"page-content\",3),core.ac(2,\"async\"),core.Qb(3,\"form\",4),core.Qb(4,\"div\",5),core.Bc(5,SearchReferencesComponent_ng_container_2_ng_container_5_Template,5,3,\"ng-container\",1),core.Qb(6,\"div\",6),core.Qb(7,\"radio-group-field\",7),core.Lb(8,\"field-option\",8),core.Lb(9,\"field-option\",8),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Bc(10,SearchReferencesComponent_ng_container_2_page_content_10_Template,27,14,\"page-content\",9),core.ac(11,\"async\"),core.ac(12,\"async\"),core.Qb(13,\"results-layout\",10),core.Xb(\"update\",(function($event){return core.sc(_r28),core.Zb().update($event)})),core.ac(14,\"async\"),core.Bc(15,SearchReferencesComponent_ng_container_2_mobile_result_15_Template,10,6,\"mobile-result\",11),core.Bc(16,SearchReferencesComponent_ng_container_2_table_16_Template,12,6,\"table\",12),core.Pb(),core.Nb()}if(2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.i18n.reference.title.search)(\"mobileHeading\",ctx_r0.i18n.reference.mobileTitle.search)(\"headingActions\",core.bc(2,14,ctx_r0.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r0.form),core.xb(2),core.gc(\"ngIf\",ctx_r0.data.user&&!ctx_r0.isOwner),core.xb(2),core.gc(\"label\",ctx_r0.i18n.reference.direction.direction),core.xb(1),core.gc(\"value\",ctx_r0.ReferenceDirectionEnum.GIVEN)(\"text\",ctx_r0.i18n.reference.direction.given),core.xb(1),core.gc(\"value\",ctx_r0.ReferenceDirectionEnum.RECEIVED)(\"text\",ctx_r0.i18n.reference.direction.received),core.xb(1),core.gc(\"ngIf\",core.bc(11,16,ctx_r0.layout.gtsm$)&&core.bc(12,18,ctx_r0.stats$)),core.xb(3),core.gc(\"results\",core.bc(14,20,ctx_r0.results$))(\"rendering$\",ctx_r0.rendering$)(\"toLink\",ctx_r0.toLink)}}const search_references_component_c1=function(a0){return{width:a0}};function SearchReferencesComponent_ng_template_3_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",40),core.Dc(1,\"  \"),core.Pb()),2&rf){const ctx_r32=core.Zb();core.gc(\"ngStyle\",core.jc(1,search_references_component_c1,ctx_r32.count/ctx_r32.total*190+\"px\"))}}const search_references_component_c2=function(a0){return{\"pl-2\":a0}};function SearchReferencesComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",37),core.Bc(1,SearchReferencesComponent_ng_template_3_div_1_Template,2,3,\"div\",38),core.Qb(2,\"span\",39),core.Dc(3),core.Pb(),core.Pb()),2&rf){const count_r29=ctx.count;core.xb(1),core.gc(\"ngIf\",count_r29>0),core.xb(1),core.gc(\"ngClass\",core.jc(3,search_references_component_c2,count_r29>0)),core.xb(1),core.Ec(count_r29)}}let search_references_component_SearchReferencesComponent=(()=>{class SearchReferencesComponent extends base_search_page_component.a{constructor(injector,referenceHelper,referencesService){super(injector),this.referenceHelper=referenceHelper,this.referencesService=referencesService,this.ReferenceDirectionEnum=models.ib,this.ReferenceLevelEnum=models.jb,this.stats$=new BehaviorSubject.a(null)}getFormControlNames(){return[\"direction\",\"levels\",\"period\"]}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.paramMap.get(\"user\")||this.ApiHelper.SELF,this.isOwner=this.authHelper.isSelf(this.param),this.addSub(this.referencesService.getUserReferencesDataForSearch({user:this.param}).subscribe(data=>this.data=data))}onDataInitialized(data){super.onDataInitialized(data),data.set&&!this.isOwner&&(this.headingActions=[new action.c(\"military_tech\",this.i18n.reference.set,()=>{this.router.navigate(data.current?[\"users\",\"references\",\"edit\",data.current.id]:[\"users\",\"references\",\"set\",\"self\",this.param])},!0)]),this.levels=[{level:models.jb.VERY_GOOD,text:this.i18n.reference.level.veryGood},{level:models.jb.GOOD,text:this.i18n.reference.level.good},{level:models.jb.NEUTRAL,text:this.i18n.reference.level.neutral},{level:models.jb.BAD,text:this.i18n.reference.level.bad},{level:models.jb.VERY_BAD,text:this.i18n.reference.level.veryBad}],this.searchStatistics(),this.addSub(this.form.controls.direction.valueChanges.subscribe(()=>this.searchStatistics()))}searchStatistics(){this.addSub(this.referencesService.getUserReferenceStatistics({user:this.param,direction:this.form.controls.direction.value}).subscribe(stats=>this.stats=stats))}toSearchParams(value){return value.user=this.param,value}doSearch(filters){return this.referencesService.searchUserReferences$Response(filters)}filter(level,allTime){this.form.patchValue({levels:level?[level]:null,period:allTime?null:[this.dataForUiHolder.now().clone().subtract(30,\"day\").startOf(\"day\").format(format_service.b),null]})}get toLink(){return row=>this.path(row)}get stats(){return this.stats$.value}set stats(value){this.stats$.next(value),this.allTime=value.periods.filter(p=>null==p.period)[0],this.last30Days=value.periods.filter(p=>null!=p.period)[0]}remove(row){this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>{this.addSub(this.referencesService.deleteReference({id:row.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.reload()}))}})}path(row){return[\"/users\",\"references\",\"view\",row.id]}resolveMenu(data){return this.isOwner?menu.b.REFERENCES:this.menu.searchUsersMenu(data.user)}}return SearchReferencesComponent.ɵfac=function(t){return new(t||SearchReferencesComponent)(core.Kb(core.r),core.Kb(reference_helper_service.a),core.Kb(references_service.a))},SearchReferencesComponent.ɵcmp=core.Eb({type:SearchReferencesComponent,selectors:[[\"search-references\"]],features:[core.ub],decls:5,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[\"columnData\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\"],[1,\"col-12\",\"col-md-6\"],[\"formControlName\",\"direction\",3,\"label\"],[3,\"value\",\"text\"],[\"mode\",\"table\",4,\"ngIf\"],[\"resultType\",\"list\",3,\"results\",\"rendering$\",\"toLink\",\"update\"],[\"avatarIcon\",\"user\",3,\"avatarImage\",4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"labelPosition\",\"side\",\"kind\",\"fieldView\",3,\"label\"],[3,\"user\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[\"mode\",\"table\"],[1,\"table\",\"table-hover\",\"small-height\"],[\"width\",\"33%\"],[4,\"ngFor\",\"ngForOf\"],[1,\"font-weight-bold\"],[1,\"link\",\"link-undecorated\",3,\"click\"],[3,\"level\",\"textLeft\"],[4,\"ngTemplateOutlet\",\"ngTemplateOutletContext\"],[\"avatarIcon\",\"user\",3,\"avatarImage\"],[1,\"d-flex\"],[1,\"cell-main\"],[1,\"cell-cell-date\"],[1,\"cell-text\"],[3,\"level\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[1,\"actions\"],[3,\"click\"],[1,\"actions\",\"actions-multiple\"],[\"class\",\"btn btn-icon\",3,\"tooltip\",\"click\",4,\"ngIf\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"clear\"],[1,\"stats\"],[\"class\",\"bar\",3,\"ngStyle\",4,\"ngIf\"],[1,\"count\",3,\"ngClass\"],[1,\"bar\",3,\"ngStyle\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchReferencesComponent_ng_container_2_Template,17,22,\"ng-container\",1),core.Pb(),core.Bc(3,SearchReferencesComponent_ng_template_3_Template,4,5,\"ng-template\",null,2,core.Cc)),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,radio_group_field_component.a,fesm2015_forms.v,fesm2015_forms.l,field_option_directive.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,label_value_component.a,user_link_component.a,common.s,rating_stats_component.a,common.A,mobile_result_component.a,ngx_bootstrap_tooltip.b,icon_component.a,common.q,common.w],pipes:[common.b,common.C,date_time_pipe.a],encapsulation:2,changeDetection:0}),SearchReferencesComponent})();function SetReferenceComponent_ng_container_2_label_value_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.ac(2,\"dateTime\"),core.Pb()),2&rf){const ctx_r1=core.Zb(2);core.gc(\"label\",ctx_r1.i18n.general.date),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r1.data.date),\" \")}}function SetReferenceComponent_ng_container_2_Template(rf,ctx){if(1&rf){const _r3=core.Rb();core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Qb(3,\"form\",3),core.Bc(4,SetReferenceComponent_ng_container_2_label_value_4_Template,3,4,\"label-value\",4),core.Qb(5,\"label-value\",5),core.Lb(6,\"user-link\",6),core.Pb(),core.Qb(7,\"label-value\",5),core.Lb(8,\"user-link\",6),core.Pb(),core.Qb(9,\"single-selection-field\",7),core.Lb(10,\"field-option\",8),core.Lb(11,\"field-option\",8),core.Lb(12,\"field-option\",8),core.Lb(13,\"field-option\",8),core.Lb(14,\"field-option\",8),core.Pb(),core.Lb(15,\"textarea-field\",9),core.Pb(),core.Qb(16,\"actions\",10),core.Qb(17,\"action-button\",11),core.Xb(\"action\",(function(){return core.sc(_r3),core.Zb().save()})),core.ac(18,\"async\"),core.Pb(),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.create?ctx_r0.i18n.reference.title.set:ctx_r0.i18n.reference.title.edit)(\"mobileHeading\",ctx_r0.create?ctx_r0.i18n.reference.mobileTitle.set:ctx_r0.i18n.reference.title.edit)(\"headingActions\",core.bc(2,23,ctx_r0.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r0.form),core.xb(1),core.gc(\"ngIf\",!ctx_r0.create),core.xb(1),core.gc(\"label\",ctx_r0.i18n.reference.from),core.xb(1),core.gc(\"user\",ctx_r0.data.from),core.xb(1),core.gc(\"label\",ctx_r0.i18n.reference.to),core.xb(1),core.gc(\"user\",ctx_r0.data.to),core.xb(1),core.gc(\"label\",ctx_r0.i18n.reference.level.level),core.xb(1),core.gc(\"value\",ctx_r0.ReferenceLevelEnum.VERY_BAD)(\"text\",ctx_r0.i18n.reference.level.veryBad),core.xb(1),core.gc(\"value\",ctx_r0.ReferenceLevelEnum.BAD)(\"text\",ctx_r0.i18n.reference.level.bad),core.xb(1),core.gc(\"value\",ctx_r0.ReferenceLevelEnum.NEUTRAL)(\"text\",ctx_r0.i18n.reference.level.neutral),core.xb(1),core.gc(\"value\",ctx_r0.ReferenceLevelEnum.GOOD)(\"text\",ctx_r0.i18n.reference.level.good),core.xb(1),core.gc(\"value\",ctx_r0.ReferenceLevelEnum.VERY_GOOD)(\"text\",ctx_r0.i18n.reference.level.veryGood),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.comments),core.xb(2),core.gc(\"disabled\",core.bc(18,25,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.submit)}}let set_reference_component_SetReferenceComponent=(()=>{class SetReferenceComponent extends base_page_component.a{constructor(injector,referencesService){super(injector),this.referencesService=referencesService,this.ReferenceLevelEnum=models.jb}ngOnInit(){super.ngOnInit(),this.from=this.route.snapshot.params.from,this.to=this.route.snapshot.params.to,this.id=this.route.snapshot.params.id,this.create=null==this.id;const request=this.create?this.referencesService.getReferenceDataForSet({from:this.from,to:this.to}):this.referencesService.getReferenceDataForEdit({id:this.id});this.addSub(request.subscribe(data=>{this.data=data}))}onDataInitialized(data){const ref=data.reference;this.form=this.formBuilder.group({level:[ref.level,fesm2015_forms.G.required],comments:[ref.comments,fesm2015_forms.G.required],version:ref.version})}save(){if(!Object(helper.F)(this.form))return;const value=this.form.value,request=this.create?this.referencesService.setReference({body:value,from:this.ApiHelper.SELF,to:this.data.to.id}):this.referencesService.updateReference({id:this.id,body:value});this.addSub(request.subscribe(()=>{this.notification.snackBar(this.i18n.reference.referenceSet),history.back()}))}resolveMenu(data){return this.menu.userMenu(data.from,menu.b.REFERENCES)}}return SetReferenceComponent.ɵfac=function(t){return new(t||SetReferenceComponent)(core.Kb(core.r),core.Kb(references_service.a))},SetReferenceComponent.ɵcmp=core.Eb({type:SetReferenceComponent,selectors:[[\"set-reference\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"formGroup\"],[3,\"label\",4,\"ngIf\"],[3,\"label\"],[3,\"user\"],[\"formControlName\",\"level\",\"required\",\"\",3,\"label\"],[3,\"value\",\"text\"],[\"formControlName\",\"comments\",\"required\",\"\",3,\"label\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SetReferenceComponent_ng_container_2_Template,19,27,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,label_value_component.a,user_link_component.a,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,field_option_directive.a,textarea_field_component.a,actions_component.a,action_button_component.a],pipes:[common.b,date_time_pipe.a],encapsulation:2,changeDetection:0}),SetReferenceComponent})();function ViewReferenceComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Qb(3,\"label-value\",3),core.Dc(4),core.ac(5,\"dateTime\"),core.Pb(),core.Qb(6,\"label-value\",3),core.Lb(7,\"user-link\",4),core.Pb(),core.Qb(8,\"label-value\",3),core.Lb(9,\"user-link\",4),core.Pb(),core.Qb(10,\"label-value\",3),core.Lb(11,\"rating-stats\",5),core.Pb(),core.Qb(12,\"label-value\",3),core.Dc(13),core.Pb(),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",ctx_r0.i18n.reference.title.view)(\"mobileHeading\",ctx_r0.i18n.reference.mobileTitle.view)(\"headingActions\",core.bc(2,13,ctx_r0.headingActions$)),core.xb(2),core.gc(\"label\",ctx_r0.i18n.general.date),core.xb(1),core.Fc(\" \",core.bc(5,15,ctx_r0.data.date),\" \"),core.xb(2),core.gc(\"label\",ctx_r0.i18n.reference.from),core.xb(1),core.gc(\"user\",ctx_r0.data.from),core.xb(1),core.gc(\"label\",ctx_r0.i18n.reference.to),core.xb(1),core.gc(\"user\",ctx_r0.data.to),core.xb(1),core.gc(\"label\",ctx_r0.i18n.reference.level.level),core.xb(1),core.gc(\"level\",ctx_r0.data.level),core.xb(1),core.gc(\"label\",ctx_r0.i18n.general.comments),core.xb(1),core.Fc(\" \",ctx_r0.data.comments,\" \")}}let view_reference_component_ViewReferenceComponent=(()=>{class ViewReferenceComponent extends base_view_page_component.a{constructor(injector,referencesService,referenceHelper){super(injector),this.referencesService=referencesService,this.referenceHelper=referenceHelper}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.referencesService.viewReference({id:this.id}).subscribe(data=>this.data=data))}onDataInitialized(data){this.self=this.authHelper.isSelfOrOwner(data.from)||this.authHelper.isSelfOrOwner(data.to);const actions=[];data.canEdit&&actions.push(new action.c(\"edit\",this.i18n.general.edit,()=>this.router.navigate([\"/users\",\"references\",\"edit\",this.id]),!0)),this.headingActions=actions}resolveMenu(){return this.self?menu.b.REFERENCES:this.menu.searchUsersMenu()}}return ViewReferenceComponent.ɵfac=function(t){return new(t||ViewReferenceComponent)(core.Kb(core.r),core.Kb(references_service.a),core.Kb(reference_helper_service.a))},ViewReferenceComponent.ɵcmp=core.Eb({type:ViewReferenceComponent,selectors:[[\"view-reference\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[\"mode\",\"viewForm\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"label\"],[3,\"user\"],[3,\"level\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewReferenceComponent_ng_container_2_Template,14,17,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,label_value_component.a,user_link_component.a,rating_stats_component.a],pipes:[common.b,date_time_pipe.a],encapsulation:2,changeDetection:0}),ViewReferenceComponent})();var next_request_state=__webpack_require__(\"mwYl\"),login_service=__webpack_require__(\"R8pA\");function RegistrationStepGroupComponent_ng_container_0_ng_container_3_div_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",6),core.Dc(1),core.Pb()),2&rf){const groupSet_r4=core.Zb().$implicit;core.xb(1),core.Fc(\" \",groupSet_r4.name,\"\")}}const registration_step_group_component_c0=function(a0){return{\"ml-3\":a0}};function RegistrationStepGroupComponent_ng_container_0_ng_container_3_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",7),core.Lb(1,\"input\",8),core.Qb(2,\"label\",9),core.Qb(3,\"div\",10),core.Dc(4),core.Pb(),core.Pb(),core.Pb()),2&rf){const group_r8=ctx.$implicit,groupSet_r4=core.Zb().$implicit,ctx_r6=core.Zb(2);core.gc(\"ngClass\",core.jc(6,registration_step_group_component_c0,groupSet_r4)),core.xb(1),core.gc(\"formControl\",ctx_r6.control)(\"id\",\"group_\"+group_r8.id)(\"value\",group_r8.id),core.xb(1),core.gc(\"for\",\"group_\"+group_r8.id),core.xb(2),core.Fc(\" \",group_r8.name,\" \")}}function RegistrationStepGroupComponent_ng_container_0_ng_container_3_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\"),core.Bc(2,RegistrationStepGroupComponent_ng_container_0_ng_container_3_div_2_Template,2,1,\"div\",4),core.Bc(3,RegistrationStepGroupComponent_ng_container_0_ng_container_3_div_3_Template,5,8,\"div\",5),core.Pb(),core.Nb()),2&rf){const groupSet_r4=ctx.$implicit,ctx_r3=core.Zb(2);core.xb(2),core.gc(\"ngIf\",groupSet_r4),core.xb(1),core.gc(\"ngForOf\",ctx_r3.groupsForSet(groupSet_r4))}}function RegistrationStepGroupComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",2),core.Dc(2),core.Pb(),core.Bc(3,RegistrationStepGroupComponent_ng_container_0_ng_container_3_Template,4,2,\"ng-container\",3),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(2),core.Ec(ctx_r0.i18n.user.registration.groupManager),core.xb(1),core.gc(\"ngForOf\",ctx_r0.groupSets)}}function RegistrationStepGroupComponent_ng_template_1_radio_group_field_2_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",15),2&rf){const group_r14=ctx.$implicit;core.gc(\"value\",group_r14.id)(\"text\",group_r14.name)}}function RegistrationStepGroupComponent_ng_template_1_radio_group_field_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"radio-group-field\",13),core.Bc(1,RegistrationStepGroupComponent_ng_template_1_radio_group_field_2_field_option_1_Template,1,2,\"field-option\",14),core.Pb()),2&rf){const ctx_r10=core.Zb(2);core.gc(\"formControl\",ctx_r10.control),core.xb(1),core.gc(\"ngForOf\",ctx_r10.groups)}}function RegistrationStepGroupComponent_ng_template_1_ng_template_3_div_0_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",21),core.Dc(1),core.Pb()),2&rf){const group_r16=core.Zb().$implicit;core.xb(1),core.Fc(\" \",group_r16.description,\" \")}}function RegistrationStepGroupComponent_ng_template_1_ng_template_3_div_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",17),core.Qb(1,\"div\",18),core.Qb(2,\"div\",19),core.Lb(3,\"input\",8),core.Qb(4,\"label\",9),core.Qb(5,\"div\",10),core.Dc(6),core.Bc(7,RegistrationStepGroupComponent_ng_template_1_ng_template_3_div_0_div_7_Template,2,1,\"div\",20),core.Pb(),core.Pb(),core.Pb(),core.Pb(),core.Pb()),2&rf){const group_r16=ctx.$implicit,ctx_r15=core.Zb(3);core.xb(3),core.gc(\"formControl\",ctx_r15.control)(\"id\",\"group_\"+group_r16.id)(\"value\",group_r16.id),core.xb(1),core.gc(\"for\",\"group_\"+group_r16.id),core.xb(2),core.Fc(\" \",group_r16.name,\" \"),core.xb(1),core.gc(\"ngIf\",group_r16.description)}}function RegistrationStepGroupComponent_ng_template_1_ng_template_3_Template(rf,ctx){if(1&rf&&core.Bc(0,RegistrationStepGroupComponent_ng_template_1_ng_template_3_div_0_Template,8,6,\"div\",16),2&rf){const ctx_r12=core.Zb(2);core.gc(\"ngForOf\",ctx_r12.groups)}}function RegistrationStepGroupComponent_ng_template_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",2),core.Dc(1),core.Pb(),core.Bc(2,RegistrationStepGroupComponent_ng_template_1_radio_group_field_2_Template,2,2,\"radio-group-field\",11),core.Bc(3,RegistrationStepGroupComponent_ng_template_1_ng_template_3_Template,1,1,\"ng-template\",null,12,core.Cc)),2&rf){const _r11=core.qc(4),ctx_r2=core.Zb();core.xb(1),core.Ec(ctx_r2.i18n.user.registration.groupPublic),core.xb(1),core.gc(\"ngIf\",ctx_r2.singleLine)(\"ngIfElse\",_r11)}}let registration_step_group_component_RegistrationStepGroupComponent=(()=>{class RegistrationStepGroupComponent extends base_component.a{constructor(injector,login){super(injector),this.login=login}ngOnInit(){super.ngOnInit(),this.singleLine=this.groups.length<=3&&0===this.groups.filter(g=>g.description).length}groupsForSet(groupSet){return this.groups.filter(null==groupSet?g=>null==g.groupSet:g=>g.groupSet===groupSet.id)}}return RegistrationStepGroupComponent.ɵfac=function(t){return new(t||RegistrationStepGroupComponent)(core.Kb(core.r),core.Kb(login_service.a))},RegistrationStepGroupComponent.ɵcmp=core.Eb({type:RegistrationStepGroupComponent,selectors:[[\"registration-step-group\"]],inputs:{groupSets:\"groupSets\",groups:\"groups\",control:\"control\"},features:[core.ub],decls:3,vars:2,consts:[[4,\"ngIf\",\"ngIfElse\"],[\"asGuest\",\"\"],[1,\"mb-3\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"mt-3 mb-2\",\"font-weight-bold\",\"\",4,\"ngIf\"],[\"class\",\"custom-control custom-radio mb-1\",3,\"ngClass\",4,\"ngFor\",\"ngForOf\"],[\"font-weight-bold\",\"\",1,\"mt-3\",\"mb-2\"],[1,\"custom-control\",\"custom-radio\",\"mb-1\",3,\"ngClass\"],[\"type\",\"radio\",1,\"custom-control-input\",3,\"formControl\",\"id\",\"value\"],[1,\"custom-control-label\",3,\"for\"],[1,\"ml-1\"],[3,\"formControl\",4,\"ngIf\",\"ngIfElse\"],[\"multiLine\",\"\"],[3,\"formControl\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"class\",\"row mb-2\",4,\"ngFor\",\"ngForOf\"],[1,\"row\",\"mb-2\"],[1,\"col-12\",\"col-6\",\"col-sm-8\"],[1,\"custom-control\",\"custom-radio\"],[\"class\",\"text-muted mt-1 mb-3\",4,\"ngIf\"],[1,\"text-muted\",\"mt-1\",\"mb-3\"]],template:function(rf,ctx){if(1&rf&&(core.Bc(0,RegistrationStepGroupComponent_ng_container_0_Template,4,2,\"ng-container\",0),core.Bc(1,RegistrationStepGroupComponent_ng_template_1_Template,5,3,\"ng-template\",null,1,core.Cc)),2&rf){const _r1=core.qc(2);core.gc(\"ngIf\",ctx.login.user)(\"ngIfElse\",_r1)}},directives:[common.t,common.s,common.q,fesm2015_forms.A,fesm2015_forms.e,fesm2015_forms.v,fesm2015_forms.k,radio_group_field_component.a,field_option_directive.a],encapsulation:2,changeDetection:0}),RegistrationStepGroupComponent})();var ui_layout_service=__webpack_require__(\"n7/T\");function RegistrationStepIdPComponent_button_2_img_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"img\",6),2&rf){const idp_r1=core.Zb().$implicit;core.gc(\"src\",idp_r1.image.url,core.uc)(\"alt\",idp_r1.name)}}const registration_step_idp_component_c0=function(a0,a1,a2){return{border:a0,background:a1,color:a2}};function RegistrationStepIdPComponent_button_2_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Qb(0,\"button\",3),core.Xb(\"click\",(function(){core.sc(_r5);const idp_r1=ctx.$implicit;return core.Zb().registerWith(idp_r1)})),core.Bc(1,RegistrationStepIdPComponent_button_2_img_1_Template,1,2,\"img\",4),core.Lb(2,\"span\",5),core.ac(3,\"trust\"),core.Pb()}if(2&rf){const idp_r1=ctx.$implicit,ctx_r0=core.Zb();core.gc(\"ngStyle\",core.lc(5,registration_step_idp_component_c0,\"1px solid \"+idp_r1.borderColor,idp_r1.backgroundColor,idp_r1.textColor)),core.xb(1),core.gc(\"ngIf\",idp_r1.image),core.xb(1),core.gc(\"innerHTML\",core.bc(3,3,ctx_r0.i18n.identityProvider.login(idp_r1.name)),core.tc)}}let registration_step_idp_component_RegistrationStepIdPComponent=(()=>{class RegistrationStepIdPComponent extends base_component.a{constructor(injector,uiLayout){super(injector),this.uiLayout=uiLayout,this.continue=new core.n}registerWith(idp){this.continue.emit(idp)}}return RegistrationStepIdPComponent.ɵfac=function(t){return new(t||RegistrationStepIdPComponent)(core.Kb(core.r),core.Kb(ui_layout_service.a))},RegistrationStepIdPComponent.ɵcmp=core.Eb({type:RegistrationStepIdPComponent,selectors:[[\"registration-step-idp\"]],inputs:{identityProviders:\"identityProviders\"},outputs:{continue:\"continue\"},features:[core.ub],decls:5,vars:5,consts:[[1,\"text-center\"],[\"type\",\"button\",\"class\",\"identity-provider\",3,\"ngStyle\",\"click\",4,\"ngFor\",\"ngForOf\"],[1,\"text-muted\",\"text-justify\",\"my-3\",3,\"innerHTML\"],[\"type\",\"button\",1,\"identity-provider\",3,\"ngStyle\",\"click\"],[\"class\",\"aria-hidden\",3,\"src\",\"alt\",4,\"ngIf\"],[3,\"innerHTML\"],[1,\"aria-hidden\",3,\"src\",\"alt\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"div\",0),core.Dc(1),core.Pb(),core.Bc(2,RegistrationStepIdPComponent_button_2_Template,4,9,\"button\",1),core.Lb(3,\"div\",2),core.ac(4,\"trust\")),2&rf&&(core.xb(1),core.Ec(ctx.i18n.identityProvider.registration),core.xb(1),core.gc(\"ngForOf\",ctx.identityProviders),core.xb(1),core.gc(\"innerHTML\",core.bc(4,3,ctx.i18n.identityProvider.registrationDisclaimer(ctx.uiLayout.appTitleSmall)),core.tc))},directives:[common.s,common.w,common.t],pipes:[trust_pipe.a],encapsulation:2,changeDetection:0}),RegistrationStepIdPComponent})();var Observable=__webpack_require__(\"HDdC\"),of=__webpack_require__(\"LRne\");function RegistrationStepFieldsComponent_ng_container_0_avatar_6_Template(rf,ctx){if(1&rf&&core.Lb(0,\"avatar\",17),2&rf){const ctx_r8=core.Zb(2);core.gc(\"image\",ctx_r8.image)}}function RegistrationStepFieldsComponent_ng_container_0_ng_template_8_Template(rf,ctx){if(1&rf&&core.Dc(0),2&rf){const ctx_r10=core.Zb(2);core.Fc(\" \",ctx_r10.i18n.user.noImage,\" \")}}function RegistrationStepFieldsComponent_ng_container_0_div_12_action_button_3_Template(rf,ctx){if(1&rf){const _r15=core.Rb();core.Qb(0,\"action-button\",21),core.Xb(\"action\",(function(){return core.sc(_r15),core.Zb(3).removeImage()})),core.ac(1,\"async\"),core.Pb()}if(2&rf){const ctx_r13=core.Zb(3);core.gc(\"disabled\",core.bc(1,2,ctx_r13.requesting$))(\"label\",ctx_r13.i18n.field.image.remove)}}function RegistrationStepFieldsComponent_ng_container_0_div_12_Template(rf,ctx){if(1&rf){const _r17=core.Rb();core.Qb(0,\"div\",18),core.Qb(1,\"action-button\",19),core.Xb(\"action\",(function(){return core.sc(_r17),core.Zb(),core.qc(11).perform()})),core.ac(2,\"async\"),core.Pb(),core.Bc(3,RegistrationStepFieldsComponent_ng_container_0_div_12_action_button_3_Template,2,4,\"action-button\",20),core.Pb()}if(2&rf){const ctx_r12=core.Zb(2);core.xb(1),core.gc(\"disabled\",core.bc(2,3,ctx_r12.requesting$))(\"label\",ctx_r12.i18n.field.image.upload),core.xb(2),core.gc(\"ngIf\",ctx_r12.image)}}function RegistrationStepFieldsComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r19=core.Rb();core.Ob(0),core.Qb(1,\"h2\",7),core.Dc(2),core.Pb(),core.Qb(3,\"div\",8),core.Qb(4,\"div\",9),core.Qb(5,\"div\",10),core.Bc(6,RegistrationStepFieldsComponent_ng_container_0_avatar_6_Template,1,1,\"avatar\",11),core.ac(7,\"async\"),core.Bc(8,RegistrationStepFieldsComponent_ng_container_0_ng_template_8_Template,1,1,\"ng-template\",null,12,core.Cc),core.Pb(),core.Qb(10,\"image-upload\",13,14),core.Xb(\"uploadDone\",(function($event){return core.sc(_r19),core.Zb().onUploadDone($event[0])})),core.Pb(),core.Pb(),core.Bc(12,RegistrationStepFieldsComponent_ng_container_0_div_12_Template,4,5,\"div\",15),core.ac(13,\"async\"),core.Pb(),core.Qb(14,\"h2\",16),core.Dc(15),core.Pb(),core.Nb()}if(2&rf){const _r9=core.qc(9),_r11=core.qc(11),ctx_r0=core.Zb();core.xb(2),core.Ec(ctx_r0.i18n.user.title.image),core.xb(4),core.gc(\"ngIf\",core.bc(7,5,ctx_r0.image$))(\"ngIfElse\",_r9),core.xb(6),core.gc(\"ngIf\",!1===core.bc(13,7,_r11.uploading$)),core.xb(3),core.Ec(ctx_r0.i18n.user.title.fields)}}function RegistrationStepFieldsComponent_input_field_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",22),2&rf){const ctx_r1=core.Zb();core.gc(\"label\",ctx_r1.i18n.user.name)}}function RegistrationStepFieldsComponent_input_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",23),2&rf){const ctx_r2=core.Zb();core.gc(\"label\",ctx_r2.i18n.user.username)}}function RegistrationStepFieldsComponent_ng_container_4_field_privacy_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-privacy\",28),2&rf){const ctx_r20=core.Zb(2);core.gc(\"control\",ctx_r20.form.get(\"hiddenFields\"))}}function RegistrationStepFieldsComponent_ng_container_4_boolean_field_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",29),2&rf){const ctx_r21=core.Zb(2);core.gc(\"label\",ctx_r21.i18n.user.registration.skipActivationEmail)}}function RegistrationStepFieldsComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"label-value\",24),core.Lb(2,\"input-field\",25),core.Bc(3,RegistrationStepFieldsComponent_ng_container_4_field_privacy_3_Template,1,1,\"field-privacy\",26),core.Pb(),core.Bc(4,RegistrationStepFieldsComponent_ng_container_4_boolean_field_4_Template,1,1,\"boolean-field\",27),core.Nb()),2&rf){const ctx_r3=core.Zb();core.xb(1),core.gc(\"label\",ctx_r3.i18n.user.email)(\"ignoreExtraCell\",!ctx_r3.canManagePrivacy(\"email\"))(\"required\",ctx_r3.data.emailRequired),core.xb(1),core.gc(\"required\",ctx_r3.data.emailRequired),core.xb(2),core.gc(\"ngIf\",ctx_r3.data.allowSetSendActivationEmail)}}function RegistrationStepFieldsComponent_ng_container_5_label_value_1_field_privacy_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-privacy\",34),2&rf){const cf_r22=core.Zb(2).$implicit,ctx_r24=core.Zb();core.gc(\"field\",cf_r22.internalName)(\"control\",ctx_r24.form.get(\"hiddenFields\"))}}function RegistrationStepFieldsComponent_ng_container_5_label_value_1_Template(rf,ctx){if(1&rf){const _r27=core.Rb();core.Qb(0,\"label-value\",31),core.Qb(1,\"custom-field-input\",32),core.Xb(\"imagesUploaded\",(function($event){return core.sc(_r27),core.Zb(2).customImagesUploaded.emit($event)}))(\"filesUploaded\",(function($event){return core.sc(_r27),core.Zb(2).customFilesUploaded.emit($event)})),core.Pb(),core.Bc(2,RegistrationStepFieldsComponent_ng_container_5_label_value_1_field_privacy_2_Template,1,2,\"field-privacy\",33),core.Pb()}if(2&rf){const cf_r22=core.Zb().$implicit,ctx_r23=core.Zb();core.gc(\"label\",cf_r22.name)(\"ignoreExtraCell\",!ctx_r23.canManagePrivacy(cf_r22))(\"fieldSize\",cf_r22.size)(\"required\",cf_r22.required),core.xb(1),core.gc(\"field\",cf_r22)(\"formControlName\",cf_r22.internalName)}}function RegistrationStepFieldsComponent_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ob(0,1),core.Bc(1,RegistrationStepFieldsComponent_ng_container_5_label_value_1_Template,3,6,\"label-value\",30),core.Nb()),2&rf){const cf_r22=ctx.$implicit,ctx_r4=core.Zb();core.gc(\"formGroup\",ctx_r4.form.get(\"customValues\")),core.xb(1),core.gc(\"ngIf\",ctx_r4.canEdit(cf_r22))}}function RegistrationStepFieldsComponent_label_value_6_field_privacy_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-privacy\",38),2&rf){const ctx_r30=core.Zb(2);core.gc(\"control\",ctx_r30.mobileForm.get(\"hidden\"))}}function RegistrationStepFieldsComponent_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",35),core.Lb(1,\"input-field\",36),core.Bc(2,RegistrationStepFieldsComponent_label_value_6_field_privacy_2_Template,1,1,\"field-privacy\",37),core.Pb()),2&rf){const ctx_r5=core.Zb();core.gc(\"label\",ctx_r5.i18n.phone.mobile)(\"required\",\"required\"===ctx_r5.mobileAvailability)(\"formGroup\",ctx_r5.mobileForm),core.xb(1),core.gc(\"placeholder\",ctx_r5.data.phoneConfiguration.mobileExample)}}function RegistrationStepFieldsComponent_ng_container_7_field_privacy_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-privacy\",38),2&rf){const ctx_r31=core.Zb(2);core.gc(\"control\",ctx_r31.landLineForm.get(\"hidden\"))}}function RegistrationStepFieldsComponent_ng_container_7_input_field_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",41),2&rf){const ctx_r32=core.Zb(2);core.gc(\"label\",ctx_r32.i18n.phone.extension)}}function RegistrationStepFieldsComponent_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Ob(0,1),core.Qb(1,\"label-value\",39),core.Lb(2,\"input-field\",36),core.Bc(3,RegistrationStepFieldsComponent_ng_container_7_field_privacy_3_Template,1,1,\"field-privacy\",37),core.Pb(),core.Bc(4,RegistrationStepFieldsComponent_ng_container_7_input_field_4_Template,1,1,\"input-field\",40),core.Nb()),2&rf){const ctx_r6=core.Zb();core.gc(\"formGroup\",ctx_r6.landLineForm),core.xb(1),core.gc(\"label\",ctx_r6.i18n.phone.landLine)(\"required\",\"required\"===ctx_r6.data.phoneConfiguration.landLineAvailability),core.xb(1),core.gc(\"placeholder\",ctx_r6.data.phoneConfiguration.landLineExample),core.xb(2),core.gc(\"ngIf\",ctx_r6.data.phoneConfiguration.extensionEnabled)}}function RegistrationStepFieldsComponent_ng_container_8_boolean_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",45),2&rf){const ctx_r33=core.Zb(2);core.gc(\"formControl\",ctx_r33.defineAddress)(\"label\",ctx_r33.i18n.user.addressDefine)}}function RegistrationStepFieldsComponent_ng_container_8_address_form_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"address-form\",46),2&rf){const ctx_r34=core.Zb(2);core.gc(\"addressForm\",ctx_r34.addressForm)(\"configuration\",ctx_r34.data.addressConfiguration)(\"managePrivacy\",ctx_r34.data.addressConfiguration.managePrivacy)}}function RegistrationStepFieldsComponent_ng_container_8_label_value_5_static_map_1_Template(rf,ctx){if(1&rf){const _r40=core.Rb();core.Qb(0,\"static-map\",50),core.Xb(\"imageLoaded\",(function(){return core.sc(_r40),core.Zb(3).mapShown()})),core.Pb()}if(2&rf){const ctx_r36=core.Zb(3);core.gc(\"address\",ctx_r36.addressForm.value)}}function RegistrationStepFieldsComponent_ng_container_8_label_value_5_ng_template_3_Template(rf,ctx){if(1&rf){const _r42=core.Rb();core.Qb(0,\"action-button\",19),core.Xb(\"action\",(function(){return core.sc(_r42),core.Zb(3).locateAddress()})),core.ac(1,\"async\"),core.Pb()}if(2&rf){const ctx_r38=core.Zb(3);core.gc(\"disabled\",core.bc(1,2,ctx_r38.locatingAddress$))(\"label\",ctx_r38.i18n.general.mapView)}}function RegistrationStepFieldsComponent_ng_container_8_label_value_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",47),core.Bc(1,RegistrationStepFieldsComponent_ng_container_8_label_value_5_static_map_1_Template,1,1,\"static-map\",48),core.ac(2,\"async\"),core.Bc(3,RegistrationStepFieldsComponent_ng_container_8_label_value_5_ng_template_3_Template,2,4,\"ng-template\",null,49,core.Cc),core.Pb()),2&rf){const _r37=core.qc(4),ctx_r35=core.Zb(2);var tmp_1_0;core.gc(\"label\",ctx_r35.i18n.general.map),core.xb(1),core.gc(\"ngIf\",null!=(null==(tmp_1_0=core.bc(2,3,ctx_r35.addressForm.get(\"location\").valueChanges))?null:tmp_1_0.latitude))(\"ngIfElse\",_r37)}}function RegistrationStepFieldsComponent_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\",16),core.Dc(2),core.Pb(),core.Bc(3,RegistrationStepFieldsComponent_ng_container_8_boolean_field_3_Template,1,2,\"boolean-field\",42),core.Bc(4,RegistrationStepFieldsComponent_ng_container_8_address_form_4_Template,1,3,\"address-form\",43),core.Bc(5,RegistrationStepFieldsComponent_ng_container_8_label_value_5_Template,5,5,\"label-value\",44),core.Nb()),2&rf){const ctx_r7=core.Zb();core.xb(2),core.Ec(ctx_r7.i18n.address.address),core.xb(1),core.gc(\"ngIf\",\"required\"!==ctx_r7.data.addressConfiguration.availability),core.xb(1),core.gc(\"ngIf\",ctx_r7.defineAddress.value),core.xb(1),core.gc(\"ngIf\",ctx_r7.defineAddress.value&&ctx_r7.maps.enabled)}}let registration_step_fields_component_RegistrationStepFieldsComponent=(()=>{class RegistrationStepFieldsComponent extends base_component.a{constructor(injector,userHelper,imagesService,maps,changeDetector){super(injector),this.userHelper=userHelper,this.imagesService=imagesService,this.maps=maps,this.changeDetector=changeDetector,this.imageUploaded=new core.n,this.imageRemoved=new core.n,this.customImagesUploaded=new core.n,this.customFilesUploaded=new core.n,this.image$=new BehaviorSubject.a(null),this.location$=new BehaviorSubject.a(null),this.locatingAddress$=new BehaviorSubject.a(!1)}get image(){return this.image$.value}set image(image){this.image$.next(image)}get location(){return this.location$.value}set location(location){this.location$.next(location)}ngOnInit(){super.ngOnInit(),this.editableFields=this.userHelper.fieldNamesByAction(this.data,\"edit\"),this.managePrivacyFields=this.userHelper.fieldNamesByAction(this.data,\"managePrivacy\")}get mobileAvailability(){return this.data.phoneConfiguration.mobileAvailability}get landLineAvailability(){return this.data.phoneConfiguration.landLineAvailability}get addressAvailability(){return this.data.addressConfiguration.availability}get imageAvailability(){return this.data.imageConfiguration.availability}onUploadDone(image){this.addSub(this.doRemoveImage().subscribe(()=>{this.image=image,this.imageUploaded.emit(this.image),this.changeDetector.detectChanges()}))}removeImage(){this.addSub(this.doRemoveImage().subscribe())}doRemoveImage(){if(this.image){const result=this.image;return this.errorHandler.requestWithCustomErrorHandler(()=>new Observable.a(obs=>{this.imagesService.deleteImage({idOrKey:this.image.id}).subscribe(()=>{this.imageRemoved.emit(this.image),this.image=null,this.changeDetector.detectChanges(),obs.next(result)})}))}return Object(of.a)(null)}canEdit(field){return this.editableFields.has(this.fieldHelper.fieldName(field))}canManagePrivacy(field){return this.managePrivacyFields.has(this.fieldHelper.fieldName(field))}locateAddress(){const value=this.addressForm.value;this.locatingAddress$.next(!0),this.addSub(this.maps.geocode(value).subscribe(coords=>{this.addressForm.patchValue({location:coords}),this.changeDetector.detectChanges()},()=>this.mapShown()))}mapShown(){this.locatingAddress$.next(!1),this.changeDetector.detectChanges()}}return RegistrationStepFieldsComponent.ɵfac=function(t){return new(t||RegistrationStepFieldsComponent)(core.Kb(core.r),core.Kb(user_helper_service.a),core.Kb(images_service.a),core.Kb(maps_service.a),core.Kb(core.h))},RegistrationStepFieldsComponent.ɵcmp=core.Eb({type:RegistrationStepFieldsComponent,selectors:[[\"registration-step-fields\"]],inputs:{data:\"data\",form:\"form\",mobileForm:\"mobileForm\",landLineForm:\"landLineForm\",addressForm:\"addressForm\",defineAddress:\"defineAddress\",image:\"image\"},outputs:{imageUploaded:\"imageUploaded\",imageRemoved:\"imageRemoved\",customImagesUploaded:\"customImagesUploaded\",customFilesUploaded:\"customFilesUploaded\"},features:[core.ub],decls:9,vars:9,consts:[[4,\"ngIf\"],[3,\"formGroup\"],[\"formControlName\",\"name\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"username\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[3,\"formGroup\",4,\"ngFor\",\"ngForOf\"],[\"kind\",\"field\",3,\"label\",\"required\",\"formGroup\",4,\"ngIf\"],[3,\"formGroup\",4,\"ngIf\"],[1,\"border-0\"],[1,\"row\"],[1,\"col-12\",\"col-sm-4\"],[1,\"d-flex\",\"justify-content-center\",\"justify-content-sm-start\"],[\"size\",\"huge\",\"useLightbox\",\"\",3,\"image\",4,\"ngIf\",\"ngIfElse\"],[\"noImage\",\"\"],[\"containerClass\",\"mt-3\",\"target\",\"userRegistration\",\"keepUrls\",\"\",3,\"uploadDone\"],[\"upload\",\"\"],[\"class\",\"col-12 col-sm-8 mt-3 mt-sm-0 d-flex justify-content-between justify-content-sm-end align-items-end\",4,\"ngIf\"],[1,\"mt-4\"],[\"size\",\"huge\",\"useLightbox\",\"\",3,\"image\"],[1,\"col-12\",\"col-sm-8\",\"mt-3\",\"mt-sm-0\",\"d-flex\",\"justify-content-between\",\"justify-content-sm-end\",\"align-items-end\"],[\"outline\",\"\",3,\"disabled\",\"label\",\"action\"],[\"class\",\"ml-3\",\"outline\",\"\",3,\"disabled\",\"label\",\"action\",4,\"ngIf\"],[\"outline\",\"\",1,\"ml-3\",3,\"disabled\",\"label\",\"action\"],[\"formControlName\",\"name\",\"required\",\"\",3,\"label\"],[\"formControlName\",\"username\",\"required\",\"\",3,\"label\"],[\"kind\",\"field\",3,\"label\",\"ignoreExtraCell\",\"required\"],[\"formControlName\",\"email\",3,\"required\"],[\"field\",\"email\",3,\"control\",4,\"extraCell\"],[\"formControlName\",\"skipActivationEmail\",3,\"label\",4,\"ngIf\"],[\"field\",\"email\",3,\"control\"],[\"formControlName\",\"skipActivationEmail\",3,\"label\"],[\"kind\",\"field\",3,\"label\",\"ignoreExtraCell\",\"fieldSize\",\"required\",4,\"ngIf\"],[\"kind\",\"field\",3,\"label\",\"ignoreExtraCell\",\"fieldSize\",\"required\"],[\"hideLabel\",\"\",3,\"field\",\"formControlName\",\"imagesUploaded\",\"filesUploaded\"],[3,\"field\",\"control\",4,\"extraCell\"],[3,\"field\",\"control\"],[\"kind\",\"field\",3,\"label\",\"required\",\"formGroup\"],[\"formControlName\",\"number\",3,\"placeholder\"],[3,\"control\",4,\"extraCell\"],[3,\"control\"],[\"kind\",\"field\",3,\"label\",\"required\"],[\"formControlName\",\"extension\",\"fieldSize\",\"tiny\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"extension\",\"fieldSize\",\"tiny\",3,\"label\"],[\"switch\",\"\",3,\"formControl\",\"label\",4,\"ngIf\"],[\"ignoreContactFields\",\"\",3,\"addressForm\",\"configuration\",\"managePrivacy\",4,\"ngIf\"],[\"kind\",\"field\",3,\"label\",4,\"ngIf\"],[\"switch\",\"\",3,\"formControl\",\"label\"],[\"ignoreContactFields\",\"\",3,\"addressForm\",\"configuration\",\"managePrivacy\"],[\"kind\",\"field\",3,\"label\"],[3,\"address\",\"imageLoaded\",4,\"ngIf\",\"ngIfElse\"],[\"viewMap\",\"\"],[3,\"address\",\"imageLoaded\"]],template:function(rf,ctx){1&rf&&(core.Bc(0,RegistrationStepFieldsComponent_ng_container_0_Template,16,9,\"ng-container\",0),core.Ob(1,1),core.Bc(2,RegistrationStepFieldsComponent_input_field_2_Template,1,1,\"input-field\",2),core.Bc(3,RegistrationStepFieldsComponent_input_field_3_Template,1,1,\"input-field\",3),core.Bc(4,RegistrationStepFieldsComponent_ng_container_4_Template,5,5,\"ng-container\",0),core.Nb(),core.Bc(5,RegistrationStepFieldsComponent_ng_container_5_Template,2,2,\"ng-container\",4),core.Bc(6,RegistrationStepFieldsComponent_label_value_6_Template,3,4,\"label-value\",5),core.Bc(7,RegistrationStepFieldsComponent_ng_container_7_Template,5,5,\"ng-container\",6),core.Bc(8,RegistrationStepFieldsComponent_ng_container_8_Template,6,4,\"ng-container\",0)),2&rf&&(core.gc(\"ngIf\",\"disabled\"!==ctx.imageAvailability),core.xb(1),core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngIf\",ctx.canEdit(\"name\")),core.xb(1),core.gc(\"ngIf\",ctx.canEdit(\"username\")),core.xb(1),core.gc(\"ngIf\",ctx.canEdit(\"email\")),core.xb(1),core.gc(\"ngForOf\",ctx.data.customFields),core.xb(1),core.gc(\"ngIf\",\"disabled\"!==ctx.mobileAvailability),core.xb(1),core.gc(\"ngIf\",\"disabled\"!==ctx.landLineAvailability),core.xb(1),core.gc(\"ngIf\",\"disabled\"!==ctx.addressAvailability))},directives:[common.t,fesm2015_forms.w,fesm2015_forms.n,common.s,image_upload_component.a,avatar_component.a,action_button_component.a,input_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,label_value_component.a,extra_cell_directive.a,field_privacy_component.a,boolean_field_component.a,custom_field_input_component.a,fesm2015_forms.k,address_form_component.a,static_map_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),RegistrationStepFieldsComponent})();var address_details_component=__webpack_require__(\"UnhA\"),captcha_component=__webpack_require__(\"g9Ug\");const registration_step_confirm_component_c0=[\"securityAnswer\"];function RegistrationStepConfirmComponent_div_0_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",10),core.Lb(1,\"avatar\",11),core.Pb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"image\",ctx_r0.image)}}function RegistrationStepConfirmComponent_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",12),core.Lb(1,\"avatar\",13),core.Pb()),2&rf){const ctx_r1=core.Zb();core.xb(1),core.gc(\"size\",ctx_r1.image?200:128)(\"image\",ctx_r1.image)}}function RegistrationStepConfirmComponent_label_value_6_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",14),2&rf){const ctx_r2=core.Zb();core.gc(\"label\",ctx_r2.i18n.user.group)(\"value\",ctx_r2.group.name)}}function RegistrationStepConfirmComponent_label_value_7_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",14),2&rf){const ctx_r3=core.Zb();core.gc(\"label\",ctx_r3.i18n.user.name)(\"value\",ctx_r3.name)}}function RegistrationStepConfirmComponent_label_value_8_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",14),2&rf){const ctx_r4=core.Zb();core.gc(\"label\",ctx_r4.i18n.user.username)(\"value\",ctx_r4.username)}}function RegistrationStepConfirmComponent_label_value_9_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",14),2&rf){const ctx_r5=core.Zb();core.gc(\"label\",ctx_r5.i18n.user.email)(\"value\",ctx_r5.email)}}function RegistrationStepConfirmComponent_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",15),core.Lb(1,\"format-field-value\",16),core.Pb()),2&rf){const cf_r12=ctx.$implicit,ctx_r6=core.Zb();core.gc(\"label\",cf_r12.name),core.xb(1),core.gc(\"fields\",ctx_r6.customFields)(\"fieldName\",cf_r12.internalName)(\"object\",ctx_r6.user)(\"images\",ctx_r6.customImages)(\"files\",ctx_r6.customFiles)}}function RegistrationStepConfirmComponent_label_value_11_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",14),2&rf){const ctx_r7=core.Zb();core.gc(\"label\",ctx_r7.i18n.phone.mobile)(\"value\",ctx_r7.mobile)}}function RegistrationStepConfirmComponent_label_value_12_Template(rf,ctx){if(1&rf&&core.Lb(0,\"label-value\",14),2&rf){const ctx_r8=core.Zb();core.gc(\"label\",ctx_r8.i18n.user.phoneAddLandLine)(\"value\",ctx_r8.landLine)}}function RegistrationStepConfirmComponent_label_value_13_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",15),core.Lb(1,\"address-details\",17),core.Pb()),2&rf){const ctx_r9=core.Zb();core.gc(\"label\",ctx_r9.i18n.address.address),core.xb(1),core.gc(\"address\",ctx_r9.address)}}function RegistrationStepConfirmComponent_ng_container_15_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",20),core.Dc(1),core.Pb()),2&rf){const pt_r13=core.Zb().$implicit;core.xb(1),core.Ec(pt_r13.description)}}function RegistrationStepConfirmComponent_ng_container_15_boolean_field_5_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",21),2&rf){const ctx_r16=core.Zb(2);core.gc(\"label\",ctx_r16.i18n.user.registration.passwordAssign)}}function RegistrationStepConfirmComponent_ng_container_15_ng_container_6_boolean_field_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",25),2&rf){const ctx_r19=core.Zb(3);core.gc(\"label\",ctx_r19.i18n.user.registration.passwordForceChange)}}function RegistrationStepConfirmComponent_ng_container_15_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"input-field\",22),core.Lb(2,\"input-field\",23),core.Bc(3,RegistrationStepConfirmComponent_ng_container_15_ng_container_6_boolean_field_3_Template,1,1,\"boolean-field\",24),core.Nb()),2&rf){const pt_r13=core.Zb().$implicit,ctx_r17=core.Zb();core.xb(1),core.gc(\"label\",pt_r13.name),core.xb(1),core.gc(\"label\",ctx_r17.i18n.user.passwordConfirmation(pt_r13.name)),core.xb(1),core.gc(\"ngIf\",pt_r13.canForceChange)}}function RegistrationStepConfirmComponent_ng_container_15_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\"),core.Dc(2),core.Pb(),core.Ob(3,7),core.Bc(4,RegistrationStepConfirmComponent_ng_container_15_div_4_Template,2,1,\"div\",18),core.Bc(5,RegistrationStepConfirmComponent_ng_container_15_boolean_field_5_Template,1,1,\"boolean-field\",19),core.Bc(6,RegistrationStepConfirmComponent_ng_container_15_ng_container_6_Template,4,3,\"ng-container\",9),core.Nb(),core.Nb()),2&rf){const pt_r13=ctx.$implicit,i_r14=ctx.index,ctx_r10=core.Zb();core.xb(2),core.Ec(pt_r13.name),core.xb(1),core.gc(\"formGroup\",ctx_r10.passwordForm(i_r14)),core.xb(1),core.gc(\"ngIf\",pt_r13.description),core.xb(1),core.gc(\"ngIf\",ctx_r10.login.user),core.xb(1),core.gc(\"ngIf\",ctx_r10.passwordForm(i_r14).get(\"defined\").value)}}function RegistrationStepConfirmComponent_ng_container_16_ng_container_1_field_option_6_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",29),2&rf){const q_r25=ctx.$implicit;core.gc(\"value\",q_r25.internalName)(\"text\",q_r25.name)}}function RegistrationStepConfirmComponent_ng_container_16_ng_container_1_input_field_7_Template(rf,ctx){if(1&rf&&core.Lb(0,\"input-field\",30,31),2&rf){const ctx_r24=core.Zb(3);core.gc(\"label\",ctx_r24.i18n.securityQuestion.answer)}}function RegistrationStepConfirmComponent_ng_container_16_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\"),core.Dc(2),core.Pb(),core.Qb(3,\"div\",20),core.Dc(4),core.Pb(),core.Qb(5,\"single-selection-field\",26),core.Bc(6,RegistrationStepConfirmComponent_ng_container_16_ng_container_1_field_option_6_Template,1,2,\"field-option\",27),core.Pb(),core.Bc(7,RegistrationStepConfirmComponent_ng_container_16_ng_container_1_input_field_7_Template,2,1,\"input-field\",28),core.ac(8,\"async\"),core.Nb()),2&rf){const ctx_r21=core.Zb(2);core.xb(2),core.Ec(ctx_r21.i18n.securityQuestion.question),core.xb(2),core.Fc(\" \",ctx_r21.i18n.user.securityQuestionMessage,\" \"),core.xb(1),core.gc(\"label\",ctx_r21.i18n.securityQuestion.question)(\"emptyOption\",ctx_r21.i18n.user.securityQuestionEmpty),core.xb(1),core.gc(\"ngForOf\",ctx_r21.data.securityQuestions),core.xb(1),core.gc(\"ngIf\",!ctx_r21.empty(core.bc(8,6,ctx_r21.form.get(\"securityQuestion\").valueChanges)))}}function RegistrationStepConfirmComponent_ng_container_16_ng_container_2_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",35),core.Qb(1,\"div\",36),core.Dc(2),core.Pb(),core.Lb(3,\"accept-agreements\",37),core.Pb()),2&rf){const ctx_r27=core.Zb(3);core.xb(2),core.Ec(ctx_r27.i18n.pendingAgreements.preface),core.xb(1),core.gc(\"agreements\",ctx_r27.data.agreements)}}function RegistrationStepConfirmComponent_ng_container_16_ng_container_2_div_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",38),core.Qb(1,\"div\",36),core.Dc(2),core.Pb(),core.Qb(3,\"div\",36),core.Lb(4,\"captcha\",39),core.Pb(),core.Pb()),2&rf){const ctx_r28=core.Zb(3);core.xb(2),core.Ec(ctx_r28.i18n.user.captcha),core.xb(2),core.gc(\"form\",ctx_r28.form.get(\"captcha\"))}}function RegistrationStepConfirmComponent_ng_container_16_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"h2\"),core.Dc(2),core.Pb(),core.Qb(3,\"div\",32),core.Bc(4,RegistrationStepConfirmComponent_ng_container_16_ng_container_2_div_4_Template,4,2,\"div\",33),core.Bc(5,RegistrationStepConfirmComponent_ng_container_16_ng_container_2_div_5_Template,5,2,\"div\",34),core.Pb(),core.Nb()),2&rf){const ctx_r22=core.Zb(2);core.xb(2),core.Fc(\" \",ctx_r22.i18n.user.title.registrationConfirmation,\" \"),core.xb(2),core.gc(\"ngIf\",(null==ctx_r22.data.agreements?null:ctx_r22.data.agreements.length)>0),core.xb(1),core.gc(\"ngIf\",null!=ctx_r22.data.captchaType)}}function RegistrationStepConfirmComponent_ng_container_16_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,RegistrationStepConfirmComponent_ng_container_16_ng_container_1_Template,9,8,\"ng-container\",9),core.Bc(2,RegistrationStepConfirmComponent_ng_container_16_ng_container_2_Template,6,3,\"ng-container\",9),core.Nb()),2&rf){const ctx_r11=core.Zb();core.xb(1),core.gc(\"ngIf\",(null==ctx_r11.data.securityQuestions?null:ctx_r11.data.securityQuestions.length)>0),core.xb(1),core.gc(\"ngIf\",(null==ctx_r11.data.agreements?null:ctx_r11.data.agreements.length)>0||null!=ctx_r11.data.captchaType)}}let registration_step_confirm_component_RegistrationStepConfirmComponent=(()=>{class RegistrationStepConfirmComponent extends base_component.a{constructor(injector,login){super(injector),this.login=login,this.empty=helper.h,this.focusSecurityAnswer=!1}ngOnInit(){if(super.ngOnInit(),Object(helper.h)(this.data.securityQuestions)||this.addSub(this.form.get(\"securityQuestion\").valueChanges.subscribe(question=>{this.focusSecurityAnswer=!Object(helper.a)(question)})),!Object(helper.h)(this.data.agreements)){const agreements=this.data.agreements.map(()=>!1);this.agreementsControl=this.formBuilder.array(agreements),this.addSub(this.agreementsControl.valueChanges.subscribe(flags=>{const all=flags.length===flags.filter(f=>f).length;this.form.patchValue({acceptAgreement:all})}))}}ngAfterViewChecked(){this.focusSecurityAnswer&&(this.securityAnswer.forEach(f=>Object(helper.j)(f)),this.focusSecurityAnswer=!1)}passwordForm(index){return this.form.get(\"passwords\").controls[index]}get group(){const groups=this.dataForUiHolder.dataForUi.publicRegistrationGroups||[];return 1===groups.length?null:groups.find(g=>g.id===this.user.group)}get name(){return(this.user.name||\"\").trim()}get username(){return(this.user.username||\"\").trim()}get email(){return(this.user.email||\"\").trim()}get mobile(){const phones=this.user.mobilePhones||[];return Object(helper.h)(phones)?null:(phones[0].number||\"\").trim()}get landLine(){const phones=this.user.landLinePhones||[],phoneNumber=Object(helper.h)(phones)?null:(phones[0].number||\"\").trim();if(Object(helper.h)(phoneNumber))return\"\";const extension=Object(helper.h)(phones)?null:(phones[0].extension||\"\").trim();return\"\"===extension?phoneNumber:this.i18n.phone.numberExtensionValue({number:phoneNumber,extension:extension})}get address(){const addresses=this.user.addresses||[];return Object(helper.h)(addresses)?null:addresses[0]}get customFields(){return this.data.customFields.filter(cf=>!Object(helper.a)(this.user.customValues[cf.internalName]))}get autocompletePasswords(){return(this.login.auth||{}).role?\"off\":\"on\"}}return RegistrationStepConfirmComponent.ɵfac=function(t){return new(t||RegistrationStepConfirmComponent)(core.Kb(core.r),core.Kb(login_service.a))},RegistrationStepConfirmComponent.ɵcmp=core.Eb({type:RegistrationStepConfirmComponent,selectors:[[\"registration-step-confirm\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Hc(registration_step_confirm_component_c0,!0),2&rf&&core.pc(_t=core.Yb())&&(ctx.securityAnswer=_t)},inputs:{data:\"data\",form:\"form\",user:\"user\",image:\"image\",customImages:\"customImages\",customFiles:\"customFiles\"},features:[core.ub],decls:17,vars:17,consts:[[\"class\",\"image d-flex justify-content-center mt-2 mb-4\",4,\"ngIf\"],[1,\"d-flex\",\"flex-row-reverse\"],[\"class\",\"image ml-4 mb-3\",4,\"ngIf\"],[1,\"flex-grow-1\",\"mb-ls\"],[3,\"label\",\"value\",4,\"ngIf\"],[\"valueFormat\",\"component\",3,\"label\",4,\"ngFor\",\"ngForOf\"],[\"valueFormat\",\"component\",3,\"label\",4,\"ngIf\"],[3,\"formGroup\"],[4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[1,\"image\",\"d-flex\",\"justify-content-center\",\"mt-2\",\"mb-4\"],[\"size\",\"160\",\"imageSize\",\"200\",\"useLightbox\",\"\",3,\"image\"],[1,\"image\",\"ml-4\",\"mb-3\"],[\"iconSize\",\"128px\",\"useLightbox\",\"\",3,\"size\",\"image\"],[3,\"label\",\"value\"],[\"valueFormat\",\"component\",3,\"label\"],[3,\"fields\",\"fieldName\",\"object\",\"images\",\"files\"],[3,\"address\"],[\"class\",\"mb-2\",4,\"ngIf\"],[\"formControlName\",\"defined\",3,\"label\",4,\"ngIf\"],[1,\"mb-2\"],[\"formControlName\",\"defined\",3,\"label\"],[\"required\",\"\",\"formControlName\",\"value\",\"type\",\"password\",\"autocomplete\",\"new-password\",3,\"label\"],[\"required\",\"\",\"formControlName\",\"confirmationValue\",\"type\",\"password\",\"autocomplete\",\"new-password\",3,\"label\"],[\"formControlName\",\"forceChange\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"forceChange\",3,\"label\"],[\"formControlName\",\"securityQuestion\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"securityAnswer\",\"required\",\"\",3,\"label\",4,\"ngIf\"],[3,\"value\",\"text\"],[\"formControlName\",\"securityAnswer\",\"required\",\"\",3,\"label\"],[\"securityAnswer\",\"\"],[1,\"row\",\"no-gutters\"],[\"class\",\"col-12 col-sm-6 col-md-7\",4,\"ngIf\"],[\"class\",\"col-12 col-sm-6 col-md-5\",4,\"ngIf\"],[1,\"col-12\",\"col-sm-6\",\"col-md-7\"],[1,\"mb-3\"],[\"formControlName\",\"acceptAgreements\",3,\"agreements\"],[1,\"col-12\",\"col-sm-6\",\"col-md-5\"],[3,\"form\"]],template:function(rf,ctx){1&rf&&(core.Bc(0,RegistrationStepConfirmComponent_div_0_Template,2,1,\"div\",0),core.ac(1,\"async\"),core.Qb(2,\"div\",1),core.Bc(3,RegistrationStepConfirmComponent_div_3_Template,2,2,\"div\",2),core.ac(4,\"async\"),core.Qb(5,\"div\",3),core.Bc(6,RegistrationStepConfirmComponent_label_value_6_Template,1,2,\"label-value\",4),core.Bc(7,RegistrationStepConfirmComponent_label_value_7_Template,1,2,\"label-value\",4),core.Bc(8,RegistrationStepConfirmComponent_label_value_8_Template,1,2,\"label-value\",4),core.Bc(9,RegistrationStepConfirmComponent_label_value_9_Template,1,2,\"label-value\",4),core.Bc(10,RegistrationStepConfirmComponent_label_value_10_Template,2,6,\"label-value\",5),core.Bc(11,RegistrationStepConfirmComponent_label_value_11_Template,1,2,\"label-value\",4),core.Bc(12,RegistrationStepConfirmComponent_label_value_12_Template,1,2,\"label-value\",4),core.Bc(13,RegistrationStepConfirmComponent_label_value_13_Template,2,2,\"label-value\",6),core.Pb(),core.Pb(),core.Qb(14,\"form\",7),core.Bc(15,RegistrationStepConfirmComponent_ng_container_15_Template,7,5,\"ng-container\",8),core.Bc(16,RegistrationStepConfirmComponent_ng_container_16_Template,3,2,\"ng-container\",9),core.Pb()),2&rf&&(core.gc(\"ngIf\",ctx.image&&core.bc(1,13,ctx.layout.ltsm$)),core.xb(3),core.gc(\"ngIf\",ctx.image&&core.bc(4,15,ctx.layout.gtxs$)),core.xb(3),core.gc(\"ngIf\",ctx.group),core.xb(1),core.gc(\"ngIf\",!ctx.empty(ctx.name)),core.xb(1),core.gc(\"ngIf\",!ctx.empty(ctx.username)),core.xb(1),core.gc(\"ngIf\",!ctx.empty(ctx.email)),core.xb(1),core.gc(\"ngForOf\",ctx.customFields),core.xb(1),core.gc(\"ngIf\",!ctx.empty(ctx.mobile)),core.xb(1),core.gc(\"ngIf\",!ctx.empty(ctx.landLine)),core.xb(1),core.gc(\"ngIf\",ctx.address),core.xb(1),core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngForOf\",ctx.data.passwordTypes),core.xb(1),core.gc(\"ngIf\",!ctx.login.user))},directives:[common.t,common.s,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,avatar_component.a,label_value_component.a,format_field_value_component.a,address_details_component.a,boolean_field_component.a,fesm2015_forms.v,fesm2015_forms.l,input_field_component.a,fesm2015_forms.D,single_selection_field_component.a,field_option_directive.a,accept_agreements_component.a,captcha_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),RegistrationStepConfirmComponent})();function RegistrationStepDoneComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Lb(1,\"p\",0),core.ac(2,\"trust\"),core.Qb(3,\"p\"),core.Dc(4),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"innerHTML\",core.bc(2,2,ctx_r0.principalsHtml),core.tc),core.xb(3),core.Ec(ctx_r0.passwordsMessage)}}let registration_step_done_component_RegistrationStepDoneComponent=(()=>{class RegistrationStepDoneComponent extends base_component.a{constructor(injector,login,userHelper){super(injector),this.login=login,this.userHelper=userHelper}ngOnInit(){super.ngOnInit(),this.messageHtml=this.userHelper.registrationMessageHtml(this.result,!!this.dataForUiHolder.user),this.principalsHtml=this.userHelper.registrationPrincipalsHtml(this.result),this.passwordsMessage=this.userHelper.registrationPasswordsMessage(this.result)}}return RegistrationStepDoneComponent.ɵfac=function(t){return new(t||RegistrationStepDoneComponent)(core.Kb(core.r),core.Kb(login_service.a),core.Kb(user_helper_service.a))},RegistrationStepDoneComponent.ɵcmp=core.Eb({type:RegistrationStepDoneComponent,selectors:[[\"registration-step-done\"]],inputs:{result:\"result\"},features:[core.ub],decls:3,vars:4,consts:[[3,\"innerHTML\"],[4,\"ngIf\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"p\",0),core.ac(1,\"trust\"),core.Bc(2,RegistrationStepDoneComponent_ng_container_2_Template,5,4,\"ng-container\",1)),2&rf&&(core.gc(\"innerHTML\",core.bc(1,2,ctx.messageHtml),core.tc),core.xb(2),core.gc(\"ngIf\",null==ctx.login.user&&\"active\"==ctx.result.status))},directives:[common.t],pipes:[trust_pipe.a],encapsulation:2,changeDetection:0}),RegistrationStepDoneComponent})();function UserRegistrationComponent_page_content_3_Template(rf,ctx){if(1&rf){const _r7=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"div\",4),core.Lb(3,\"registration-step-group\",5),core.Pb(),core.Qb(4,\"actions\",6),core.Qb(5,\"action-button\",7),core.Xb(\"action\",(function(){return core.sc(_r7),core.Zb().showIdentityProviders()})),core.ac(6,\"async\"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.i18n.user.title.registration)(\"mobileHeading\",ctx_r0.i18n.user.mobileTitle.registration)(\"mode\",core.bc(1,8,ctx_r0.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(3),core.gc(\"groupSets\",ctx_r0.groupSets)(\"groups\",ctx_r0.groups)(\"control\",ctx_r0.group),core.xb(2),core.gc(\"disabled\",core.bc(6,10,ctx_r0.requesting$))(\"label\",ctx_r0.i18n.general.next)}}function UserRegistrationComponent_page_content_4_action_button_7_Template(rf,ctx){if(1&rf){const _r10=core.Rb();core.Qb(0,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r10),core.Zb(2).backToGroup()})),core.Pb()}if(2&rf){const ctx_r8=core.Zb(2);core.gc(\"label\",ctx_r8.i18n.general.previous)}}function UserRegistrationComponent_page_content_4_Template(rf,ctx){if(1&rf){const _r12=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"div\",4),core.Qb(3,\"registration-step-idp\",8),core.Xb(\"continue\",(function($event){return core.sc(_r12),core.Zb().continueWithProvider($event)})),core.Pb(),core.Pb(),core.Qb(4,\"actions\",6),core.Qb(5,\"action-button\",7),core.Xb(\"action\",(function(){return core.sc(_r12),core.Zb().continueWithProvider(null)})),core.ac(6,\"async\"),core.Pb(),core.Bc(7,UserRegistrationComponent_page_content_4_action_button_7_Template,1,1,\"action-button\",9),core.Pb(),core.Pb()}if(2&rf){const ctx_r1=core.Zb();core.gc(\"heading\",ctx_r1.i18n.user.title.registration)(\"mobileHeading\",ctx_r1.i18n.user.mobileTitle.registration)(\"mode\",core.bc(1,7,ctx_r1.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(3),core.gc(\"identityProviders\",ctx_r1.data.identityProviders),core.xb(2),core.gc(\"disabled\",core.bc(6,9,ctx_r1.requesting$))(\"label\",ctx_r1.i18n.general.skip),core.xb(2),core.gc(\"ngIf\",ctx_r1.groups.length>1)}}function UserRegistrationComponent_page_content_5_action_button_7_Template(rf,ctx){if(1&rf){const _r16=core.Rb();core.Qb(0,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r16),core.Zb(2).backToIdentityProviders()})),core.Pb()}if(2&rf){const ctx_r14=core.Zb(2);core.gc(\"label\",ctx_r14.i18n.general.previous)}}function UserRegistrationComponent_page_content_5_Template(rf,ctx){if(1&rf){const _r18=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"div\",4),core.Qb(3,\"registration-step-fields\",11),core.Xb(\"imageUploaded\",(function($event){return core.sc(_r18),core.Zb().image=$event}))(\"imageRemoved\",(function(){return core.sc(_r18),core.Zb().image=null}))(\"customImagesUploaded\",(function($event){return core.sc(_r18),core.Zb().addCustomImages($event)}))(\"customFilesUploaded\",(function($event){return core.sc(_r18),core.Zb().addCustomFiles($event)})),core.Pb(),core.Pb(),core.Qb(4,\"actions\",6),core.Qb(5,\"action-button\",7),core.Xb(\"action\",(function(){return core.sc(_r18),core.Zb().showConfirm()})),core.ac(6,\"async\"),core.Pb(),core.Bc(7,UserRegistrationComponent_page_content_5_action_button_7_Template,1,1,\"action-button\",9),core.Pb(),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.i18n.user.title.registration)(\"mobileHeading\",ctx_r2.i18n.user.mobileTitle.registration)(\"mode\",core.bc(1,13,ctx_r2.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(3),core.gc(\"data\",ctx_r2.data)(\"form\",ctx_r2.form)(\"mobileForm\",ctx_r2.mobileForm)(\"landLineForm\",ctx_r2.landLineForm)(\"defineAddress\",ctx_r2.defineAddress)(\"addressForm\",ctx_r2.addressForm)(\"image\",ctx_r2.image),core.xb(2),core.gc(\"disabled\",core.bc(6,15,ctx_r2.requesting$))(\"label\",ctx_r2.i18n.general.next),core.xb(2),core.gc(\"ngIf\",ctx_r2.groups.length>1||(null==ctx_r2.data.identityProviders?null:ctx_r2.data.identityProviders.length)>0)}}function UserRegistrationComponent_page_content_6_Template(rf,ctx){if(1&rf){const _r24=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"div\",4),core.Lb(3,\"registration-step-confirm\",12),core.Pb(),core.Qb(4,\"actions\",6),core.Qb(5,\"action-button\",7),core.Xb(\"action\",(function(){return core.sc(_r24),core.Zb().register()})),core.ac(6,\"async\"),core.Pb(),core.Qb(7,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r24),core.Zb().backToFields()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r3=core.Zb();core.gc(\"heading\",ctx_r3.i18n.user.title.registrationConfirmation)(\"mobileHeading\",ctx_r3.i18n.user.mobileTitle.registrationConfirmation)(\"mode\",core.bc(1,12,ctx_r3.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(3),core.gc(\"data\",ctx_r3.data)(\"form\",ctx_r3.confirmForm)(\"user\",ctx_r3.userNew)(\"image\",ctx_r3.image)(\"customImages\",ctx_r3.customImages)(\"customFiles\",ctx_r3.customFiles),core.xb(2),core.gc(\"disabled\",core.bc(6,14,ctx_r3.requesting$))(\"label\",ctx_r3.i18n.general.submit),core.xb(2),core.gc(\"label\",ctx_r3.i18n.general.previous)}}function UserRegistrationComponent_page_content_7_action_button_6_Template(rf,ctx){if(1&rf){const _r30=core.Rb();core.Qb(0,\"action-button\",15),core.Xb(\"action\",(function(){return core.sc(_r30),core.Zb(2).reload()})),core.Pb()}if(2&rf){const ctx_r26=core.Zb(2);core.gc(\"label\",ctx_r26.i18n.user.registration.registerAnotherUser)}}function UserRegistrationComponent_page_content_7_action_button_7_Template(rf,ctx){if(1&rf){const _r32=core.Rb();core.Qb(0,\"action-button\",15),core.Xb(\"action\",(function(){return core.sc(_r32),core.Zb(2).viewProfile()})),core.Pb()}if(2&rf){const ctx_r27=core.Zb(2);core.gc(\"label\",ctx_r27.i18n.user.registration.viewProfile)}}function UserRegistrationComponent_page_content_7_action_button_8_Template(rf,ctx){if(1&rf){const _r34=core.Rb();core.Qb(0,\"action-button\",15),core.Xb(\"action\",(function(){return core.sc(_r34),core.Zb(2).goToLogin()})),core.Pb()}if(2&rf){const ctx_r28=core.Zb(2);core.gc(\"label\",ctx_r28.i18n.menu.login)}}function UserRegistrationComponent_page_content_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"div\",4),core.Lb(3,\"registration-step-done\",13),core.ac(4,\"async\"),core.Pb(),core.Qb(5,\"actions\",6),core.Bc(6,UserRegistrationComponent_page_content_7_action_button_6_Template,1,1,\"action-button\",14),core.Bc(7,UserRegistrationComponent_page_content_7_action_button_7_Template,1,1,\"action-button\",14),core.Bc(8,UserRegistrationComponent_page_content_7_action_button_8_Template,1,1,\"action-button\",14),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb();core.gc(\"heading\",ctx_r4.i18n.user.title.registrationDone)(\"mobileHeading\",ctx_r4.i18n.user.mobileTitle.registrationDone)(\"mode\",core.bc(1,7,ctx_r4.layout.ltsm$)?\"fullHeight\":\"normal\"),core.xb(3),core.gc(\"result\",core.bc(4,9,ctx_r4.result$)),core.xb(3),core.gc(\"ngIf\",ctx_r4.login.user),core.xb(1),core.gc(\"ngIf\",ctx_r4.login.user),core.xb(1),core.gc(\"ngIf\",!ctx_r4.login.user)}}function UserRegistrationComponent_page_content_8_Template(rf,ctx){1&rf&&(core.Qb(0,\"page-content\"),core.Lb(1,\"spinner\"),core.Pb())}let user_registration_component_UserRegistrationComponent=(()=>{class UserRegistrationComponent extends base_page_component.a{constructor(injector,usersService,userHelper,imagesService,nextRequestState){super(injector),this.usersService=usersService,this.userHelper=userHelper,this.imagesService=imagesService,this.nextRequestState=nextRequestState,this.steps=[\"group\",\"idp\",\"fields\",\"confirm\",\"done\"],this.customImages=[],this.customFiles=[],this.asyncValidatorsEnabled=!1,this.step$=new BehaviorSubject.a(null),this.result$=new BehaviorSubject.a(null)}get step(){return this.step$.value}set step(step){this.step$.next(step)}get result(){return this.result$.value}set result(result){this.result$.next(result)}ngOnInit(){super.ngOnInit();const role=(this.login.auth||{}).role;if(null==role){const dataForUi=this.dataForUiHolder.dataForUi;let wizard;if(wizard=this.layout.ltmd?dataForUi.smallScreenRegistrationWizard:this.layout.md?dataForUi.mediumScreenRegistrationWizard:dataForUi.largeScreenRegistrationWizard,wizard)return void this.router.navigate([\"wizards\",\"registration\",api_helper.a.internalNameOrId(wizard)],{replaceUrl:!0});this.initializeGroups(dataForUi.publicRegistrationGroups)}else this.addSub(this.usersService.getUserDataForSearch({broker:role===models.kb.BROKER?api_helper.a.SELF:null,fields:[\"groupsForRegistration\"]}).subscribe(data=>{this.groupSets=data.groupsForRegistration.filter(g=>g.kind===models.A.GROUP_SET),data.groupsForRegistration.find(g=>g.kind!==models.A.GROUP_SET&&null==g.groupSet)&&this.groupSets.unshift(null),this.initializeGroups(data.groupsForRegistration.filter(g=>g.kind!==models.A.GROUP_SET))}))}initializeGroups(groups){null==this.groups&&(this.groups=groups,Object(helper.h)(this.groups)?this.router.navigateByUrl(\"/\"):(this.group=new fesm2015_forms.j(groups[0].id,fesm2015_forms.G.required),1===groups.length?(this.steps=this.steps.filter(s=>\"group\"!==s),this.showIdentityProviders()):this.step=\"group\"))}ngOnDestroy(){super.ngOnDestroy(),this.image&&(URL.revokeObjectURL(this.image.url),this.errorHandler.requestWithCustomErrorHandler(()=>{this.addSub(this.imagesService.deleteImage({idOrKey:this.image.id}).subscribe())}))}showIdentityProviders(){this.addSub(this.usersService.getUserDataForNew({group:this.group.value,fields:[\"-agreements.content\"]}).subscribe(data=>{this.data=data,Object(helper.h)(data.identityProviders)?this.showFields():this.step=\"idp\"}))}continueWithProvider(idp){idp?this.authHelper.identityProviderPopup(idp,\"register\",this.group.value).pipe(Object(first.a)()).subscribe(callback=>{switch(callback.status){case models.B.REGISTRATION_DONE:this.nextRequestState.replaceSession(callback.sessionToken).pipe(Object(first.a)()).subscribe(()=>{Object(helper.B)(!0),this.dataForUiHolder.initialize().subscribe(auth=>{Object(helper.B)(!1),api_helper.a.isRestrictedAccess(auth)||this.router.navigateByUrl(\"\")})});break;case models.B.REGISTRATION_DATA:this.identityProviderRequestId=callback.requestId,this.data.captchaType=null;const user=this.data.user;if(callback.name&&(user.name=callback.name),callback.username&&(user.username=callback.username),callback.email&&(user.email=callback.email),callback.mobilePhone&&(user.mobilePhones=[{number:callback.mobilePhone}]),callback.landLinePhone&&(user.landLinePhones=[{number:callback.landLinePhone,extension:callback.landLineExtension}]),callback.customValues){user.customValues||(user.customValues={});for(const key of Object.keys(callback.customValues))user.customValues[key]=callback.customValues[key]}callback.image&&(user.images=[callback.image.id],this.image=callback.image),this.showFields();break;default:this.notification.error(callback.errorMessage||this.i18n.error.general)}}):this.showFields()}showFields(){this.prepareForms(this.data),Object(helper.k)()}backToGroup(){this.form=null,this.data=null,this.step=\"group\"}backToIdentityProviders(){this.data&&!Object(helper.h)(this.data.identityProviders)?this.step=\"idp\":this.backToGroup()}backToFields(){this.confirmForm=null,this.step=\"fields\"}prepareForms(data){let addressSubs;this.form=this.formBuilder.group({group:this.group.value,hiddenFields:[data.user.hiddenFields||[]]}),[this.mobileForm,this.landLineForm]=this.userHelper.setupRegistrationForm(this.form,data,!this.login.user),[this.addressForm,this.defineAddress,addressSubs]=this.userHelper.registrationAddressForm(data.addressConfiguration),addressSubs.forEach(s=>this.addSub(s)),this.data=data,this.step=\"fields\"}showConfirm(){const fullForm=new fesm2015_forms.m({user:this.form});this.mobileForm&&fullForm.setControl(\"mobile\",this.mobileForm),this.landLineForm&&fullForm.setControl(\"landLine\",this.landLineForm),this.addressForm&&this.defineAddress.value&&fullForm.setControl(\"address\",this.addressForm),this.asyncValidatorsEnabled=!0;const nonValid=Object(helper.F)(fullForm,!0);this.addSub(Object(helper.u)(nonValid).subscribe(isValid=>{this.asyncValidatorsEnabled=!1,isValid?this.doShowConfirm():Object(helper.l)()}))}doShowConfirm(){const data=this.data;this.confirmForm=this.formBuilder.group({});const passwordControls=this.userHelper.passwordRegistrationForms(data);this.confirmForm.setControl(\"passwords\",this.formBuilder.array(passwordControls)),Object(helper.h)(data.securityQuestions)||(this.confirmForm.setControl(\"securityQuestion\",this.formBuilder.control(\"\")),this.confirmForm.setControl(\"securityAnswer\",this.formBuilder.control(\"\",this.userHelper.securityAnswerValidation))),Object(helper.h)(data.agreements)||this.confirmForm.setControl(\"acceptAgreements\",this.formBuilder.control([])),null!=data.captchaType&&this.confirmForm.setControl(\"captcha\",this.authHelper.captchaFormGroup()),this.step=\"confirm\",Object(helper.y)()}register(){const nonValid=Object(helper.F)(this.confirmForm,!0);this.addSub(Object(helper.u)(nonValid).subscribe(isValid=>{isValid?this.addSub(this.usersService.createUser({body:this.userNew}).subscribe(result=>{this.result=result,this.image=null,this.step=\"done\"})):Object(helper.l)()}))}get userNew(){const user=this.form.value;user.identityProviderRequestId=this.identityProviderRequestId;const mobile=(this.mobileForm||{}).value,landLine=(this.landLineForm||{}).value,address=(this.addressForm||{}).value;return this.image&&(user.images=[this.image.id]),mobile&&!Object(helper.a)(mobile.number)&&(user.mobilePhones=[mobile]),landLine&&!Object(helper.a)(landLine.number)&&(user.landLinePhones=[landLine]),address&&this.defineAddress.value&&(user.addresses=[address]),Object(helper.e)(this.confirmForm.value,user),user}goToLogin(){this.login.goToLoginPage(\"\")}viewProfile(){const result=this.result;result&&this.router.navigate([\"users\",result.user.id,\"profile\"])}addCustomImages(images){this.customImages=[...this.customImages,...images]}addCustomFiles(files){this.customFiles=[...this.customFiles,...files]}resolveMenu(){switch(this.dataForUiHolder.role){case models.kb.ADMINISTRATOR:return menu.b.ADMIN_REGISTRATION;case models.kb.BROKER:return menu.b.BROKER_REGISTRATION;default:return menu.b.PUBLIC_REGISTRATION}}}return UserRegistrationComponent.ɵfac=function(t){return new(t||UserRegistrationComponent)(core.Kb(core.r),core.Kb(users_service.a),core.Kb(user_helper_service.a),core.Kb(images_service.a),core.Kb(next_request_state.a))},UserRegistrationComponent.ɵcmp=core.Eb({type:UserRegistrationComponent,selectors:[[\"user-registration\"]],features:[core.ub],decls:9,vars:11,consts:[[\"size\",\"large\",3,\"ready\",\"ngSwitch\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\",4,\"ngSwitchCase\"],[4,\"ngSwitchDefault\"],[\"last\",\"\",3,\"heading\",\"mobileHeading\",\"mode\"],[1,\"flex-grow-1\"],[3,\"groupSets\",\"groups\",\"control\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"],[3,\"identityProviders\",\"continue\"],[\"outline\",\"\",3,\"label\",\"action\",4,\"ngIf\"],[\"outline\",\"\",3,\"label\",\"action\"],[3,\"data\",\"form\",\"mobileForm\",\"landLineForm\",\"defineAddress\",\"addressForm\",\"image\",\"imageUploaded\",\"imageRemoved\",\"customImagesUploaded\",\"customFilesUploaded\"],[3,\"data\",\"form\",\"user\",\"image\",\"customImages\",\"customFiles\"],[3,\"result\"],[3,\"label\",\"action\",4,\"ngIf\"],[3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Bc(3,UserRegistrationComponent_page_content_3_Template,7,12,\"page-content\",1),core.Bc(4,UserRegistrationComponent_page_content_4_Template,8,11,\"page-content\",1),core.Bc(5,UserRegistrationComponent_page_content_5_Template,8,17,\"page-content\",1),core.Bc(6,UserRegistrationComponent_page_content_6_Template,8,16,\"page-content\",1),core.Bc(7,UserRegistrationComponent_page_content_7_Template,9,11,\"page-content\",1),core.Bc(8,UserRegistrationComponent_page_content_8_Template,2,0,\"page-content\",2),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,7,ctx.step$))(\"ngSwitch\",core.bc(2,9,ctx.step$)),core.xb(3),core.gc(\"ngSwitchCase\",\"group\"),core.xb(1),core.gc(\"ngSwitchCase\",\"idp\"),core.xb(1),core.gc(\"ngSwitchCase\",\"fields\"),core.xb(1),core.gc(\"ngSwitchCase\",\"confirm\"),core.xb(1),core.gc(\"ngSwitchCase\",\"done\"))},directives:[page_layout_component.a,common.x,common.y,common.z,page_content_component.a,registration_step_group_component_RegistrationStepGroupComponent,actions_component.a,action_button_component.a,registration_step_idp_component_RegistrationStepIdPComponent,common.t,registration_step_fields_component_RegistrationStepFieldsComponent,registration_step_confirm_component_RegistrationStepConfirmComponent,registration_step_done_component_RegistrationStepDoneComponent,spinner_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),UserRegistrationComponent})();function ValidateRegistrationComponent_page_content_2_Template(rf,ctx){if(1&rf){const _r2=core.Rb();core.Qb(0,\"page-content\"),core.Lb(1,\"registration-step-done\",2),core.Qb(2,\"actions\"),core.Qb(3,\"action-button\",3),core.Xb(\"action\",(function(){return core.sc(_r2),core.Zb().goToLogin()})),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"result\",ctx_r0.result),core.xb(2),core.gc(\"label\",ctx_r0.i18n.menu.login)}}let validate_registration_component_ValidateRegistrationComponent=(()=>{class ValidateRegistrationComponent extends base_page_component.a{constructor(injector,validationService){super(injector),this.validationService=validationService}get result(){return this.data}ngOnInit(){this.addSub(this.validationService.validateUserRegistration({key:this.route.snapshot.params.key}).subscribe(result=>{this.data=result}))}goToLogin(){this.login.goToLoginPage(\"\")}resolveMenu(){return this.menu.homeMenu()}}return ValidateRegistrationComponent.ɵfac=function(t){return new(t||ValidateRegistrationComponent)(core.Kb(core.r),core.Kb(validation_service.a))},ValidateRegistrationComponent.ɵcmp=core.Eb({type:ValidateRegistrationComponent,selectors:[[\"validate-registration\"]],features:[core.ub],decls:3,vars:4,consts:[[\"size\",\"medium\",\"hideMenu\",\"\",3,\"ready\"],[4,\"ngIf\"],[3,\"result\"],[3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ValidateRegistrationComponent_page_content_2_Template,4,2,\"page-content\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,registration_step_done_component_RegistrationStepDoneComponent,actions_component.a,action_button_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),ValidateRegistrationComponent})();var contacts_service=__webpack_require__(\"oWwz\");const add_contact_dialog_component_c0=[\"field\"],add_contact_dialog_component_c1=function(){return{excludeContacts:!0}};let add_contact_dialog_component_AddContactDialogComponent=(()=>{class AddContactDialogComponent extends base_component.a{constructor(injector,modalRef,contactsService){super(injector),this.modalRef=modalRef,this.contactsService=contactsService,this.done=new core.n,this.control=new fesm2015_forms.j(null,fesm2015_forms.G.required)}addContact(){if(Object(helper.F)(this.control),!this.control.valid)return;const user=this.field.selection;this.addSub(this.contactsService.createContact({user:api_helper.a.SELF,body:{contact:this.control.value}}).subscribe(()=>{this.done.emit(user),this.modalRef.hide()}))}}return AddContactDialogComponent.ɵfac=function(t){return new(t||AddContactDialogComponent)(core.Kb(core.r),core.Kb(ngx_bootstrap_modal.a),core.Kb(contacts_service.a))},AddContactDialogComponent.ɵcmp=core.Eb({type:AddContactDialogComponent,selectors:[[\"add-contact-dialog\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.yc(add_contact_dialog_component_c0,!0),2&rf&&core.pc(_t=core.Yb())&&(ctx.field=_t.first)},outputs:{done:\"done\"},features:[core.ub],decls:8,vars:12,consts:[[\"focused\",\"\",3,\"filters\",\"allowContacts\",\"allowPrincipal\",\"formControl\",\"label\"],[\"field\",\"\"],[\"forceRow\",\"\"],[3,\"disabled\",\"label\",\"action\"],[\"outline\",\"\",3,\"label\",\"action\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"h1\"),core.Dc(1),core.Pb(),core.Lb(2,\"user-field\",0,1),core.Qb(4,\"actions\",2),core.Qb(5,\"action-button\",3),core.Xb(\"action\",(function(){return ctx.addContact()})),core.ac(6,\"async\"),core.Pb(),core.Qb(7,\"action-button\",4),core.Xb(\"action\",(function(){return ctx.modalRef.hide()})),core.Pb(),core.Pb()),2&rf&&(core.xb(1),core.Ec(ctx.i18n.user.title.addContact),core.xb(1),core.gc(\"filters\",core.ic(11,add_contact_dialog_component_c1))(\"allowContacts\",!1)(\"allowPrincipal\",!1)(\"formControl\",ctx.control)(\"label\",ctx.i18n.user.contact),core.xb(3),core.gc(\"disabled\",core.bc(6,9,ctx.requesting$))(\"label\",ctx.i18n.general.submit),core.xb(2),core.gc(\"label\",ctx.i18n.general.cancel))},directives:[user_field_component.a,focused_directive.a,fesm2015_forms.v,fesm2015_forms.k,actions_component.a,action_button_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),AddContactDialogComponent})();var result_type_field_component=__webpack_require__(\"+HmS\");const contact_list_component_c0=[\"usersResults\"];function ContactListComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}const contact_list_component_c1=function(a0){return{\"d-none\":a0}};function ContactListComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.ac(2,\"async\"),core.Qb(3,\"div\",4),core.Lb(4,\"result-type-field\",5),core.ac(5,\"async\"),core.Pb(),core.Pb(),core.Qb(6,\"users-results\",6,7),core.Xb(\"update\",(function($event){return core.sc(_r5),core.Zb().update($event)})),core.ac(8,\"async\"),core.ac(9,\"async\"),core.ac(10,\"async\"),core.ac(11,\"async\"),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"ngClass\",core.jc(25,contact_list_component_c1,core.bc(1,11,ctx_r2.layout.xxs$)))(\"heading\",ctx_r2.i18n.user.title.contactList)(\"mobileHeading\",ctx_r2.i18n.user.mobileTitle.contactList)(\"headingActions\",core.bc(2,13,ctx_r2.headingActions$)),core.xb(4),core.gc(\"formControl\",ctx_r2.resultTypeControl)(\"allowedResultTypes\",core.bc(5,15,ctx_r2.allowedResultTypes$)),core.xb(2),core.gc(\"ngClass\",core.jc(27,contact_list_component_c1,core.bc(8,17,ctx_r2.rendering$)))(\"results\",core.bc(9,19,ctx_r2.results$))(\"rendering$\",ctx_r2.rendering$)(\"data\",core.bc(10,21,ctx_r2.data$))(\"resultType\",core.bc(11,23,ctx_r2.resultType$))}}let contact_list_component_ContactListComponent=(()=>{class ContactListComponent extends base_search_page_component.a{constructor(injector,modal,contactsService){super(injector),this.modal=modal,this.contactsService=contactsService,this.ResultType=result_type.a}getFormControlNames(){return[\"user\",\"keywords\"]}getInitialResultType(){return this.layout.xxs?result_type.a.LIST:result_type.a.TILES}ngOnInit(){super.ngOnInit(),this.allowedResultTypes=[result_type.a.TILES,result_type.a.LIST],this.stateManager.cache(\"data\",this.contactsService.getContactListDataForSearch({user:api_helper.a.SELF})).subscribe(data=>{this.data=data})}toSearchParams(value){return value.user=api_helper.a.SELF,value}doSearch(value){return this.contactsService.searchContactList$Response(value)}onDataInitialized(data){super.onDataInitialized(data);const fieldsInList=(data.fieldsInList||[]).slice();fieldsInList.includes(\"display\")||(fieldsInList.unshift(\"display\"),data.fieldsInList=fieldsInList),(((this.login.auth||{}).permissions||{}).users||{}).search&&(this.headingActions=[new action.c(\"add\",this.i18n.general.addNew,()=>this.addNew(),!0)])}addNew(){const ref=this.modal.show(add_contact_dialog_component_AddContactDialogComponent,{class:\"modal-form\"});this.addSub(ref.content.done.subscribe(user=>{this.notification.snackBar(this.i18n.user.profile.addContactDone(user.display)),this.reload()}))}resolveMenu(data){return this.menu.userMenu(data.user,menu.b.CONTACTS)}}return ContactListComponent.ɵfac=function(t){return new(t||ContactListComponent)(core.Kb(core.r),core.Kb(ngx_bootstrap_modal.b),core.Kb(contacts_service.a))},ContactListComponent.ɵcmp=core.Eb({type:ContactListComponent,selectors:[[\"contact-list\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Hc(contact_list_component_c0,!0),2&rf&&core.pc(_t=core.Yb())&&(ctx.usersResults=_t.first)},features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"ngClass\",\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-row\"],[3,\"formControl\",\"allowedResultTypes\"],[\"resultKind\",\"contact\",3,\"ngClass\",\"results\",\"rendering$\",\"data\",\"resultType\",\"update\"],[\"usersResults\",\"\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ContactListComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,ContactListComponent_ng_template_3_Template,12,29,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,common.q,result_type_field_component.a,fesm2015_forms.v,fesm2015_forms.k,users_results_component_UsersResultsComponent],pipes:[common.b],encapsulation:2,changeDetection:0}),ContactListComponent})();var max_distance_field_component=__webpack_require__(\"9AzD\"),basic_profile_field_filter_component=__webpack_require__(\"fe3a\"),custom_field_filter_component=__webpack_require__(\"uao2\");function SearchUsersComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchUsersComponent_ng_template_3_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Qb(1,\"label-value\",15),core.Lb(2,\"user-link\",16),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r3.i18n.general.user),core.xb(1),core.gc(\"user\",ctx_r3.broker)}}function SearchUsersComponent_ng_template_3_div_5_Template(rf,ctx){1&rf&&core.Lb(0,\"div\",17)}function SearchUsersComponent_ng_template_3_div_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Lb(1,\"input-field\",18),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r5.i18n.general.keywords)}}function SearchUsersComponent_ng_template_3_ng_container_8_div_1_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",21),2&rf){const group_r11=ctx.$implicit,ctx_r10=core.Zb(4);core.gc(\"value\",ctx_r10.ApiHelper.internalNameOrId(group_r11))(\"internalName\",group_r11.internalName)(\"id\",group_r11.id)(\"text\",group_r11.name)(\"parent\",group_r11.groupSet)}}function SearchUsersComponent_ng_template_3_ng_container_8_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Qb(1,\"multi-selection-field\",19),core.Bc(2,SearchUsersComponent_ng_template_3_ng_container_8_div_1_field_option_2_Template,1,5,\"field-option\",20),core.Pb(),core.Pb()),2&rf){const ctx_r8=core.Zb(3);core.xb(1),core.gc(\"label\",ctx_r8.i18n.user.groupFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r8.data.groups)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Lb(1,\"max-distance-field\",31),core.Pb()),2&rf){const ctx_r12=core.Zb(4);core.xb(1),core.gc(\"data\",ctx_r12.data.searchByDistanceData)(\"label\",ctx_r12.i18n.general.distanceFilter)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_2_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",34),2&rf){const prod_r20=ctx.$implicit,ctx_r19=core.Zb(5);core.gc(\"value\",ctx_r19.ApiHelper.internalNameOrId(prod_r20))(\"internalName\",prod_r20.internalName)(\"id\",prod_r20.id)(\"text\",prod_r20.name)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Qb(1,\"multi-selection-field\",32),core.Bc(2,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_2_field_option_2_Template,1,4,\"field-option\",33),core.Pb(),core.Pb()),2&rf){const ctx_r13=core.Zb(4);core.xb(1),core.gc(\"emptyLabel\",ctx_r13.i18n.general.notApplied)(\"label\",ctx_r13.i18n.user.assignedProducts),core.xb(1),core.gc(\"ngForOf\",ctx_r13.data.products)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_3_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",34),2&rf){const agr_r22=ctx.$implicit,ctx_r21=core.Zb(5);core.gc(\"value\",ctx_r21.ApiHelper.internalNameOrId(agr_r22))(\"internalName\",agr_r22.internalName)(\"id\",agr_r22.id)(\"text\",agr_r22.name)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Qb(1,\"multi-selection-field\",35),core.Bc(2,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_3_field_option_2_Template,1,4,\"field-option\",33),core.Pb(),core.Pb()),2&rf){const ctx_r14=core.Zb(4);core.xb(1),core.gc(\"emptyLabel\",ctx_r14.i18n.general.notApplied)(\"label\",ctx_r14.i18n.user.acceptedAgreements),core.xb(1),core.gc(\"ngForOf\",ctx_r14.data.agreements)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_4_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",34),2&rf){const agr_r24=ctx.$implicit,ctx_r23=core.Zb(5);core.gc(\"value\",ctx_r23.ApiHelper.internalNameOrId(agr_r24))(\"internalName\",agr_r24.internalName)(\"id\",agr_r24.id)(\"text\",agr_r24.name)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Qb(1,\"multi-selection-field\",36),core.Bc(2,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_4_field_option_2_Template,1,4,\"field-option\",33),core.Pb(),core.Pb()),2&rf){const ctx_r15=core.Zb(4);core.xb(1),core.gc(\"emptyLabel\",ctx_r15.i18n.general.notApplied)(\"label\",ctx_r15.i18n.user.notAcceptedAgreements),core.xb(1),core.gc(\"ngForOf\",ctx_r15.data.agreements)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_22_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Lb(1,\"user-field\",37),core.Pb()),2&rf){const ctx_r16=core.Zb(4);core.xb(1),core.gc(\"label\",ctx_r16.i18n.general.usersOfBroker)(\"filters\",ctx_r16.userSearchFilters())(\"allowContacts\",!1)}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_23_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Lb(1,\"basic-profile-field-filter\",38),core.Pb()),2&rf){const f_r25=ctx.$implicit,ctx_r17=core.Zb(4);core.xb(1),core.gc(\"field\",f_r25)(\"formControl\",ctx_r17.form.get(\"profileFields\").get(f_r25.field))}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_24_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",14),core.Lb(1,\"custom-field-filter\",38),core.Pb()),2&rf){const cf_r26=ctx.$implicit,ctx_r18=core.Zb(4);core.xb(1),core.gc(\"field\",cf_r26)(\"formControl\",ctx_r18.form.get(\"profileFields\").get(cf_r26.internalName))}}function SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_1_Template,2,2,\"div\",6),core.Bc(2,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_2_Template,3,3,\"div\",6),core.Bc(3,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_3_Template,3,3,\"div\",6),core.Bc(4,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_4_Template,3,3,\"div\",6),core.Qb(5,\"div\",14),core.Lb(6,\"multi-selection-field\",22),core.Pb(),core.Qb(7,\"div\",23),core.Qb(8,\"div\",14),core.Lb(9,\"date-field\",24),core.Pb(),core.Qb(10,\"div\",14),core.Lb(11,\"date-field\",25),core.Pb(),core.Pb(),core.Qb(12,\"div\",23),core.Qb(13,\"div\",14),core.Lb(14,\"date-field\",26),core.Pb(),core.Qb(15,\"div\",14),core.Lb(16,\"date-field\",27),core.Pb(),core.Pb(),core.Qb(17,\"div\",23),core.Qb(18,\"div\",14),core.Lb(19,\"date-field\",28),core.Pb(),core.Qb(20,\"div\",14),core.Lb(21,\"date-field\",29),core.Pb(),core.Pb(),core.Bc(22,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_22_Template,2,3,\"div\",6),core.Bc(23,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_23_Template,2,2,\"div\",30),core.Bc(24,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_div_24_Template,2,2,\"div\",30),core.Nb()),2&rf){const ctx_r9=core.Zb(3);core.xb(1),core.gc(\"ngIf\",ctx_r9.data.searchByDistanceData),core.xb(1),core.gc(\"ngIf\",(null==ctx_r9.data.products?null:ctx_r9.data.products.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r9.data.agreements?null:ctx_r9.data.agreements.length)>1),core.xb(1),core.gc(\"ngIf\",(null==ctx_r9.data.agreements?null:ctx_r9.data.agreements.length)>1),core.xb(2),core.gc(\"label\",ctx_r9.i18n.general.status)(\"fieldOptions\",ctx_r9.statusOptions)(\"emptyLabel\",ctx_r9.i18n.general.notApplied),core.xb(3),core.gc(\"label\",ctx_r9.i18n.user.creationBegin),core.xb(2),core.gc(\"label\",ctx_r9.i18n.user.creationEnd),core.xb(3),core.gc(\"label\",ctx_r9.i18n.user.beginUserActivationDate),core.xb(2),core.gc(\"label\",ctx_r9.i18n.user.endUserActivationDate),core.xb(3),core.gc(\"label\",ctx_r9.i18n.user.beginLastLoginDate),core.xb(2),core.gc(\"label\",ctx_r9.i18n.user.endLastLoginDate),core.xb(1),core.gc(\"ngIf\",!ctx_r9.isBrokeringSearch),core.xb(1),core.gc(\"ngForOf\",ctx_r9.data.basicFields),core.xb(1),core.gc(\"ngForOf\",ctx_r9.customFieldsInSearch)}}function SearchUsersComponent_ng_template_3_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Bc(1,SearchUsersComponent_ng_template_3_ng_container_8_div_1_Template,3,2,\"div\",6),core.Bc(2,SearchUsersComponent_ng_template_3_ng_container_8_ng_container_2_Template,25,16,\"ng-container\",8),core.ac(3,\"async\"),core.Nb()),2&rf){const ctx_r6=core.Zb(2);core.xb(1),core.gc(\"ngIf\",(null==ctx_r6.data.groups?null:ctx_r6.data.groups.length)>1),core.xb(1),core.gc(\"ngIf\",core.bc(3,2,ctx_r6.moreFilters$))}}function SearchUsersComponent_ng_template_3_div_14_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",39),core.Qb(1,\"single-selection-field\",40),core.Lb(2,\"field-option\",41),core.Lb(3,\"field-option\",42),core.Pb(),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.xb(1),core.gc(\"formControl\",ctx_r7.form.get(\"orderBy\"))(\"display\",ctx_r7.i18n.general.orderBy)(\"emptyOption\",ctx_r7.i18n.general.orderByRelevance),core.xb(1),core.gc(\"text\",ctx_r7.i18n.user.orderBy.alphabeticallyAsc),core.xb(1),core.gc(\"text\",ctx_r7.i18n.user.orderBy.alphabeticallyDesc)}}function SearchUsersComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r28=core.Rb();core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"form\",4),core.Qb(3,\"div\",5),core.Bc(4,SearchUsersComponent_ng_template_3_div_4_Template,3,2,\"div\",6),core.Bc(5,SearchUsersComponent_ng_template_3_div_5_Template,1,0,\"div\",7),core.ac(6,\"async\"),core.Bc(7,SearchUsersComponent_ng_template_3_div_7_Template,2,1,\"div\",6),core.Bc(8,SearchUsersComponent_ng_template_3_ng_container_8_Template,4,4,\"ng-container\",8),core.ac(9,\"async\"),core.Pb(),core.Pb(),core.Qb(10,\"div\",9),core.Qb(11,\"div\",10),core.Lb(12,\"result-type-field\",11),core.ac(13,\"async\"),core.Pb(),core.Bc(14,SearchUsersComponent_ng_template_3_div_14_Template,4,5,\"div\",12),core.ac(15,\"async\"),core.ac(16,\"async\"),core.Pb(),core.Pb(),core.Qb(17,\"users-results\",13),core.Xb(\"update\",(function($event){return core.sc(_r28),core.Zb().update($event)})),core.ac(18,\"async\"),core.ac(19,\"async\"),core.ac(20,\"async\"),core.ac(21,\"async\"),core.Pb()}if(2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.heading)(\"mobileHeading\",ctx_r2.mobileHeading)(\"headingActions\",core.bc(1,16,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(2),core.gc(\"ngIf\",!ctx_r2.self&&ctx_r2.broker),core.xb(1),core.gc(\"ngIf\",core.bc(6,18,ctx_r2.layout.gtsm$)&&!ctx_r2.self&&ctx_r2.broker),core.xb(2),core.gc(\"ngIf\",ctx_r2.data.allowKeywords),core.xb(1),core.gc(\"ngIf\",core.bc(9,20,ctx_r2.layout.gtxxs$)),core.xb(4),core.gc(\"allowedResultTypes\",core.bc(13,22,ctx_r2.allowedResultTypes$))(\"formControl\",ctx_r2.resultTypeControl),core.xb(2),core.gc(\"ngIf\",core.bc(15,24,ctx_r2.layout.gtxxs$)&&\"map\"!==core.bc(16,26,ctx_r2.resultType$)),core.xb(3),core.gc(\"results\",core.bc(18,28,ctx_r2.results$))(\"rendering$\",ctx_r2.rendering$)(\"data\",core.bc(19,30,ctx_r2.data$))(\"resultType\",core.bc(20,32,ctx_r2.resultType$))(\"referencePoint\",(core.bc(21,34,ctx_r2.form.valueChanges)||ctx_r2.form.value).distanceFilter)}}var UserSearchKind=function(UserSearchKind){return UserSearchKind[UserSearchKind.Public=0]=\"Public\",UserSearchKind[UserSearchKind.Member=1]=\"Member\",UserSearchKind[UserSearchKind.Admin=2]=\"Admin\",UserSearchKind[UserSearchKind.Broker=3]=\"Broker\",UserSearchKind}({});let search_users_component_SearchUsersComponent=(()=>{class SearchUsersComponent extends base_search_page_component.a{constructor(injector,usersService,userHelper,countriesResolve){super(injector),this.usersService=usersService,this.userHelper=userHelper,this.countriesResolve=countriesResolve,this.ResultType=result_type.a,this.UserSearchKind=UserSearchKind,this.empty=helper.h}getFormControlNames(){return[\"keywords\",\"groups\",\"customValues\",\"distanceFilter\",\"orderBy\",\"statuses\",\"beginActivationPeriod\",\"endActivationPeriod\",\"beginCreationPeriod\",\"endCreationPeriod\",\"beginLastLoginPeriod\",\"endLastLoginPeriod\",\"notAcceptedAgreements\",\"acceptedAgreements\",\"products\",\"brokers\"]}getInitialResultType(){const fromConfig=this.uiLayout.getBreakpointConfiguration(\"defaultUsersResultType\");return fromConfig&&this.allowedResultTypes.includes(fromConfig)?fromConfig:this.layout.xxs?result_type.a.LIST:result_type.a.TILES}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||api_helper.a.SELF,this.self=this.authHelper.isSelf(this.param);const auth=this.login.auth,role=null==auth?null:auth.role,url=this.router.url;url.includes(\"search\")?this.kind=null==role?UserSearchKind.Public:role===models.kb.ADMINISTRATOR?UserSearchKind.Admin:UserSearchKind.Member:url.includes(\"brokerings\")&&(this.kind=UserSearchKind.Broker),this.manager=[UserSearchKind.Admin,UserSearchKind.Broker].includes(this.kind);const publicOrMember=[UserSearchKind.Public,UserSearchKind.Member].includes(this.kind);publicOrMember?(this.heading=this.i18n.user.title.directory,this.mobileHeading=this.i18n.user.mobileTitle.directory):this.kind===UserSearchKind.Broker?this.self?(this.heading=this.i18n.user.title.myBrokerings,this.mobileHeading=this.i18n.user.mobileTitle.myBrokerings):(this.heading=this.i18n.user.title.userBrokerings,this.mobileHeading=this.i18n.user.mobileTitle.userBrokerings):this.kind===UserSearchKind.Admin&&(this.heading=this.i18n.user.title.search,this.mobileHeading=this.i18n.user.mobileTitle.search);const users=((auth||{}).permissions||{}).users||{};if(this.canSearch=this.kind===UserSearchKind.Broker||!!users.search,this.canViewMap=publicOrMember&&users.map,!this.canSearch&&!this.canViewMap)return void this.errorHandler.handleForbiddenError({});const allowedResultTypes=[];this.canSearch&&(allowedResultTypes.push(result_type.a.TILES),allowedResultTypes.push(result_type.a.LIST)),(this.canViewMap||this.manager)&&allowedResultTypes.push(result_type.a.MAP),this.allowedResultTypes=allowedResultTypes,this.countries$=this.countriesResolve.data,this.resultType=this.getInitialResultType(),this.onResultTypeChanged(this.resultType,null)}get statusOptions(){return Object.values(models.Nb).map(st=>({value:st,text:this.userHelper.userStatus(st)}))}shouldUpdateOnResultTypeChange(){return!1}onResultTypeChanged(resultType,previousResultType){const isMap=resultType===result_type.a.MAP;(isMap!==(previousResultType===result_type.a.MAP)||null==previousResultType)&&(this.data=null,this.resetPage());const setData=data=>{Object(helper.h)(data.fieldsInList)&&(data.fieldsInList=[\"display\"]),this.doIgnoringUpdate(()=>{this.customFieldsInSearch=data.customFields.filter(cf=>data.fieldsInSearch.includes(cf.internalName)),this.form.setControl(\"profileFields\",this.fieldHelper.profileFieldsForSearchFormGroup(data.basicFields,this.customFieldsInSearch)),!this.broker&&data.broker&&(this.broker=data.broker),this.data=data,this.headingActions=[...Object(helper.h)(data.fieldsInSearch)?[]:[this.moreFiltersAction],...this.exportHelper.headingActions(this.data.exportFormats,f=>this.usersService.exportUsers$Response(Object.assign({format:f.internalName},this.toSearchParams(this.form.value))))]})};null==this.data&&(this.rendering=!0,isMap&&!this.manager?this.stateManager.cache(\"dataForMap\",this.usersService.getDataForMapDirectory()).subscribe(setData):this.stateManager.cache(\"dataForSearch\",this.usersService.getUserDataForSearch({fromMenu:!0,broker:this.kind===UserSearchKind.Broker?this.param:null})).subscribe(setData))}get isBrokeringSearch(){return this.kind===UserSearchKind.Broker}toSearchParams(value){const filters=Object.assign({},value);this.kind===UserSearchKind.Broker&&(filters.brokers=[this.param]),filters.activationPeriod=api_helper.a.dateRangeFilter(value.beginActivationPeriod,value.endActivationPeriod),filters.creationPeriod=api_helper.a.dateRangeFilter(value.beginCreationPeriod,value.endCreationPeriod),filters.lastLoginPeriod=api_helper.a.dateRangeFilter(value.beginLastLoginPeriod,value.endLastLoginPeriod),filters.profileFields=this.fieldHelper.toProfileFieldsFilter(value.profileFields);const distanceFilter=value.distanceFilter;distanceFilter&&(filters.maxDistance=distanceFilter.maxDistance,filters.latitude=distanceFilter.latitude,filters.longitude=distanceFilter.longitude);const isMap=this.resultType===result_type.a.MAP;return filters.fromMenu=this.kind!==UserSearchKind.Broker,isMap&&(filters.pageSize=99999,filters.addressResult=models.Eb.ALL),filters}userSearchFilters(){return{roles:[models.kb.BROKER]}}doSearch(query){return this.resultType!==result_type.a.MAP||this.manager?this.usersService.searchUsers$Response(query):this.usersService.searchMapDirectory$Response(query)}resolveMenu(){switch(this.kind){case UserSearchKind.Broker:return menu.b.MY_BROKERED_USERS;case UserSearchKind.Public:return menu.b.PUBLIC_DIRECTORY;default:return menu.b.SEARCH_USERS}}}return SearchUsersComponent.ɵfac=function(t){return new(t||SearchUsersComponent)(core.Kb(core.r),core.Kb(users_service.a),core.Kb(user_helper_service.a),core.Kb(countries_resolve.a))},SearchUsersComponent.ɵcmp=core.Eb({type:SearchUsersComponent,selectors:[[\"search-users\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",\"border-bottom\",3,\"formGroup\"],[1,\"row\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[\"class\",\"col-md-6\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"row\",\"filters-row\"],[1,\"col-12\",\"col-xs-7\",\"col-md-9\"],[3,\"allowedResultTypes\",\"formControl\"],[\"class\",\"col-12 col-xs-5 col-md-3\",4,\"ngIf\"],[3,\"results\",\"rendering$\",\"data\",\"resultType\",\"referencePoint\",\"update\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[1,\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"keywords\",3,\"label\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"groups\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\"],[\"labelPosition\",\"side\",\"formControlName\",\"statuses\",3,\"label\",\"fieldOptions\",\"emptyLabel\"],[1,\"row\",\"no-gutters\",\"col-12\"],[\"labelPosition\",\"side\",\"formControlName\",\"beginCreationPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"endCreationPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"beginActivationPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"endActivationPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"beginLastLoginPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",1,\"\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"endLastLoginPeriod\",\"minDate\",\"past100\",\"maxDate\",\"todayEnd\",\"fieldSize\",\"full\",3,\"label\"],[\"class\",\"col-12 col-md-6\",4,\"ngFor\",\"ngForOf\"],[\"labelPosition\",\"side\",\"formControlName\",\"distanceFilter\",3,\"data\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"products\",3,\"emptyLabel\",\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\"],[\"labelPosition\",\"side\",\"formControlName\",\"acceptedAgreements\",3,\"emptyLabel\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"notAcceptedAgreements\",3,\"emptyLabel\",\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"brokers\",3,\"label\",\"filters\",\"allowContacts\"],[\"labelPosition\",\"side\",3,\"field\",\"formControl\"],[1,\"col-12\",\"col-xs-5\",\"col-md-3\"],[3,\"formControl\",\"display\",\"emptyOption\"],[\"value\",\"alphabeticallyAsc\",3,\"text\"],[\"value\",\"alphabeticallyDesc\",3,\"text\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchUsersComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchUsersComponent_ng_template_3_Template,22,36,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,result_type_field_component.a,fesm2015_forms.v,fesm2015_forms.k,users_results_component_UsersResultsComponent,label_value_component.a,user_link_component.a,input_field_component.a,fesm2015_forms.l,multi_selection_field_component.a,common.s,field_option_directive.a,date_field_component.a,max_distance_field_component.a,user_field_component.a,basic_profile_field_filter_component.a,custom_field_filter_component.a,single_selection_field_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),SearchUsersComponent})();var user_status_service=__webpack_require__(\"XS/k\");function ViewUserStatusHistoryComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function ViewUserStatusHistoryComponent_ng_template_3_mobile_result_3_div_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",11),core.Dc(1),core.Pb()),2&rf){const row_r5=core.Zb().$implicit,ctx_r6=core.Zb(2);core.xb(1),core.Gc(\" \",ctx_r6.i18n.general.performedBy,\": \",row_r5.by.display,\" \")}}function ViewUserStatusHistoryComponent_ng_template_3_mobile_result_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"mobile-result\",8),core.Qb(1,\"div\",9),core.Dc(2),core.Pb(),core.Bc(3,ViewUserStatusHistoryComponent_ng_template_3_mobile_result_3_div_3_Template,2,2,\"div\",10),core.Pb()),2&rf){const row_r5=ctx.$implicit,ctx_r3=core.Zb(2);core.gc(\"date\",null==row_r5.period?null:row_r5.period.date),core.xb(2),core.Gc(\" \",ctx_r3.i18n.general.status,\": \",ctx_r3.userHelper.userStatus(row_r5.status),\" \"),core.xb(1),core.gc(\"ngIf\",row_r5.by)}}function ViewUserStatusHistoryComponent_ng_template_3_table_4_tr_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"tr\"),core.Qb(1,\"td\"),core.Dc(2),core.ac(3,\"date\"),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.Pb(),core.Qb(6,\"td\"),core.Dc(7),core.Pb(),core.Pb()),2&rf){const row_r9=ctx.$implicit,ctx_r8=core.Zb(3);core.xb(2),core.Ec(core.bc(3,3,null==row_r9.period?null:row_r9.period.begin)),core.xb(3),core.Ec(ctx_r8.userHelper.userStatus(row_r9.status)),core.xb(2),core.Ec(null==row_r9.by?null:row_r9.by.display)}}function ViewUserStatusHistoryComponent_ng_template_3_table_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",12),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Pb(),core.Qb(8,\"tbody\"),core.Bc(9,ViewUserStatusHistoryComponent_ng_template_3_table_4_tr_9_Template,8,5,\"tr\",13),core.Pb(),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.xb(3),core.Ec(ctx_r4.i18n.general.date),core.xb(2),core.Ec(ctx_r4.i18n.general.status),core.xb(2),core.Ec(ctx_r4.i18n.general.performedBy),core.xb(2),core.gc(\"ngForOf\",ctx_r4.data.history)}}function ViewUserStatusHistoryComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.Lb(1,\"user-info\",4),core.Pb(),core.Qb(2,\"results-layout\",5),core.Bc(3,ViewUserStatusHistoryComponent_ng_template_3_mobile_result_3_Template,4,4,\"mobile-result\",6),core.Bc(4,ViewUserStatusHistoryComponent_ng_template_3_table_4_Template,10,4,\"table\",7),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",ctx_r2.operator?ctx_r2.i18n.userStatus.title.historyOperator:ctx_r2.i18n.userStatus.title.historyUser)(\"mobileHeading\",ctx_r2.operator?ctx_r2.i18n.userStatus.mobileTitle.historyOperator:ctx_r2.i18n.userStatus.mobileTitle.historyUser),core.xb(1),core.gc(\"user\",ctx_r2.data.user),core.xb(1),core.gc(\"results\",ctx_r2.data.history)}}let view_user_status_history_component_ViewUserStatusHistoryComponent=(()=>{class ViewUserStatusHistoryComponent extends base_view_page_component.a{constructor(injector,userStatusService,userHelper){super(injector),this.userStatusService=userStatusService,this.userHelper=userHelper}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.userStatusService.getUserStatus({user:this.param,fields:[\"user\",\"history\"]}).subscribe(status=>{this.data=status}))}get operator(){return this.userHelper.isOperator(this.data.user)}resolveMenu(data){return this.menu.searchUsersMenu(data.user)}}return ViewUserStatusHistoryComponent.ɵfac=function(t){return new(t||ViewUserStatusHistoryComponent)(core.Kb(core.r),core.Kb(user_status_service.a),core.Kb(user_helper_service.a))},ViewUserStatusHistoryComponent.ɵcmp=core.Eb({type:ViewUserStatusHistoryComponent,selectors:[[\"view-user-status-history\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[3,\"heading\",\"mobileHeading\"],[3,\"user\"],[3,\"results\"],[3,\"date\",4,\"mobileResult\"],[\"class\",\"table table-hover\",4,\"resultTable\"],[3,\"date\"],[1,\"cell-main\"],[\"class\",\"cell-text\",4,\"ngIf\"],[1,\"cell-text\"],[1,\"table\",\"table-hover\"],[4,\"ngFor\",\"ngForOf\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewUserStatusHistoryComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,ViewUserStatusHistoryComponent_ng_template_3_Template,5,4,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,mobile_result_component.a,common.s],pipes:[common.b,date_pipe.a],encapsulation:2,changeDetection:0}),ViewUserStatusHistoryComponent})();function ViewUserStatusComponent_page_content_2_ng_container_5_field_option_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",11),2&rf){const status_r3=ctx.$implicit,ctx_r2=core.Zb(3);core.gc(\"value\",status_r3)(\"text\",ctx_r2.userHelper.userStatus(status_r3))}}function ViewUserStatusComponent_page_content_2_ng_container_5_Template(rf,ctx){if(1&rf){const _r5=core.Rb();core.Ob(0),core.Lb(1,\"hr\"),core.Qb(2,\"form\",6),core.Qb(3,\"single-selection-field\",7),core.Bc(4,ViewUserStatusComponent_page_content_2_ng_container_5_field_option_4_Template,1,2,\"field-option\",8),core.Pb(),core.Lb(5,\"textarea-field\",9),core.Pb(),core.Qb(6,\"actions\"),core.Qb(7,\"action-button\",10),core.Xb(\"action\",(function(){return core.sc(_r5),core.Zb(2).save()})),core.Pb(),core.Pb(),core.Nb()}if(2&rf){const ctx_r1=core.Zb(2);core.xb(2),core.gc(\"formGroup\",ctx_r1.form),core.xb(1),core.gc(\"label\",ctx_r1.i18n.userStatus.new),core.xb(1),core.gc(\"ngForOf\",ctx_r1.data.possibleNewStatuses),core.xb(1),core.gc(\"label\",ctx_r1.i18n.general.comments),core.xb(2),core.gc(\"label\",ctx_r1.i18n.general.submit)}}function ViewUserStatusComponent_page_content_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",2),core.ac(1,\"async\"),core.Lb(2,\"user-info\",3),core.Qb(3,\"label-value\",4),core.Dc(4),core.Pb(),core.Bc(5,ViewUserStatusComponent_page_content_2_ng_container_5_Template,8,5,\"ng-container\",5),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"heading\",ctx_r0.operator?ctx_r0.i18n.userStatus.title.statusOperator:ctx_r0.i18n.userStatus.title.statusUser)(\"mobileHeading\",ctx_r0.operator?ctx_r0.i18n.userStatus.mobileTitle.statusOperator:ctx_r0.i18n.userStatus.mobileTitle.statusUser)(\"headingActions\",core.bc(1,7,ctx_r0.headingActions$)),core.xb(2),core.gc(\"user\",ctx_r0.data.user),core.xb(1),core.gc(\"label\",ctx_r0.i18n.userStatus.current),core.xb(1),core.Fc(\" \",ctx_r0.userHelper.userStatus(ctx_r0.data.status),\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r0.editable)}}let view_user_status_component_ViewUserStatusComponent=(()=>{class ViewUserStatusComponent extends base_view_page_component.a{constructor(injector,userStatusService,userHelper){super(injector),this.userStatusService=userStatusService,this.userHelper=userHelper}get editable(){return!Object(helper.h)(this.data.possibleNewStatuses)}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.userStatusService.getUserStatus({user:this.param,fields:[\"-history\"]}).subscribe(status=>{this.data=status})),this.form=this.formBuilder.group({status:[null,fesm2015_forms.G.required],comment:null}),this.headingActions=[new action.c(\"history\",this.i18n.general.viewHistory,()=>this.router.navigate([\"users\",this.param,\"status\",\"history\"]),!0)]}save(){if(Object(helper.F)(this.form),!this.form.valid)return;const status=this.form.value.status;let message;const user=this.data.user,operator=this.userHelper.isOperator(user);switch(status){case models.Nb.ACTIVE:message=this.i18n.userStatus.confirm.active(user.display);break;case models.Nb.BLOCKED:message=this.i18n.userStatus.confirm.blocked(user.display);break;case models.Nb.DISABLED:message=this.i18n.userStatus.confirm.disabled(user.display);break;case models.Nb.REMOVED:message=this.i18n.userStatus.confirm.removed(user.display);break;case models.Nb.PURGED:message=this.i18n.userStatus.confirm.purged(user.display)}let title;title=operator?this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeOperator:this.i18n.userStatus.title.changeOperator:this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeUser:this.i18n.userStatus.title.changeUser,this.notification.confirm({title:title,message:message,callback:()=>this.submit(status)})}submit(status){const user=this.data.user.display;this.addSub(this.userStatusService.changeUserStatus({user:this.param,body:this.form.value}).subscribe(()=>{let message;switch(status){case models.Nb.ACTIVE:message=this.i18n.userStatus.done.active(user);break;case models.Nb.BLOCKED:message=this.i18n.userStatus.done.blocked(user);break;case models.Nb.DISABLED:message=this.i18n.userStatus.done.disabled(user);break;case models.Nb.REMOVED:message=this.i18n.userStatus.done.removed(user);break;case models.Nb.PURGED:message=this.i18n.userStatus.done.purged(user)}this.notification.snackBar(message),this.reload()}))}get operator(){return this.userHelper.isOperator(this.data.user)}resolveMenu(data){return this.menu.searchUsersMenu(data.user)}}return ViewUserStatusComponent.ɵfac=function(t){return new(t||ViewUserStatusComponent)(core.Kb(core.r),core.Kb(user_status_service.a),core.Kb(user_helper_service.a))},ViewUserStatusComponent.ɵcmp=core.Eb({type:ViewUserStatusComponent,selectors:[[\"view-user-status\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[3,\"heading\",\"mobileHeading\",\"headingActions\",4,\"ngIf\"],[3,\"heading\",\"mobileHeading\",\"headingActions\"],[3,\"user\"],[3,\"label\"],[4,\"ngIf\"],[3,\"formGroup\"],[\"formControlName\",\"status\",\"required\",\"\",3,\"label\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[\"formControlName\",\"comment\",3,\"label\"],[3,\"label\",\"action\"],[3,\"value\",\"text\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ViewUserStatusComponent_page_content_2_Template,6,9,\"page-content\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,user_info_component.a,label_value_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,single_selection_field_component.a,fesm2015_forms.v,fesm2015_forms.l,fesm2015_forms.D,common.s,textarea_field_component.a,actions_component.a,action_button_component.a,field_option_directive.a],pipes:[common.b],encapsulation:2,changeDetection:0}),ViewUserStatusComponent})();var tokens_service=__webpack_require__(\"piyO\"),mask_directive=__webpack_require__(\"Aw04\");function CreateTokenComponent_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Dc(1),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.general.user),core.xb(1),core.Fc(\" \",ctx_r0.user.display,\" \")}}function CreateTokenComponent_user_field_4_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-field\",11),2&rf){const ctx_r1=core.Zb();core.gc(\"label\",ctx_r1.i18n.general.user)}}function CreateTokenComponent_single_selection_field_5_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",14),2&rf){const operator_r7=ctx.$implicit;core.gc(\"value\",operator_r7.id)(\"text\",operator_r7.name)}}function CreateTokenComponent_single_selection_field_5_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",12),core.Bc(1,CreateTokenComponent_single_selection_field_5_field_option_1_Template,1,2,\"field-option\",13),core.ac(2,\"async\"),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"label\",ctx_r2.i18n.general.operator)(\"emptyOption\",ctx_r2.i18n.general.notSet),core.xb(1),core.gc(\"ngForOf\",core.bc(2,3,ctx_r2.operators$))}}function CreateTokenComponent_boolean_field_8_Template(rf,ctx){if(1&rf&&core.Lb(0,\"boolean-field\",15),2&rf){const ctx_r3=core.Zb();core.gc(\"label\",ctx_r3.i18n.token.action.activate)}}function CreateTokenComponent_ng_template_13_Template(rf,ctx){1&rf&&core.Dc(0,\" \")}let create_token_component_CreateTokenComponent=(()=>{class CreateTokenComponent extends base_component.a{constructor(injector,modalRef,tokensService,operatorsService){super(injector),this.modalRef=modalRef,this.tokensService=tokensService,this.operatorsService=operatorsService,this.operators$=new BehaviorSubject.a(null),this.canActivate$=new BehaviorSubject.a(null)}ngOnInit(){this.canActivate$.next(!!this.user),this.form=this.formBuilder.group({user:this.user?this.user.id:null,operator:null,value:[null,fesm2015_forms.G.required],activateNow:!1}),this.user||this.form.get(\"user\").valueChanges.subscribe(()=>this.fillOperatorsField())}fillOperatorsField(){const id=this.form.get(\"user\").value;id?(this.canActivate$.next(!0),this.operatorsService.searchUserOperators$Response({user:id,skipTotalCount:!0,pageSize:9999999}).subscribe(response=>{var _a;response.ok&&(null===(_a=response.body)||void 0===_a?void 0:_a.length)>0?this.operators$.next(response.body):this.operators$.next(null)})):(this.canActivate$.next(!1),this.operators$.next(null))}submit(){if(Object(helper.F)(this.form),!this.form.valid)return;const value=Object(cloneDeep.a)(this.form.value);value.operator&&(value.user=value.operator,delete value.operator),this.tokensService.createToken({type:this.type.id,body:value}).subscribe(()=>{this.notification.snackBar(this.i18n.token.action.done.created),this.updateAction()}),this.modalRef.hide()}}return CreateTokenComponent.ɵfac=function(t){return new(t||CreateTokenComponent)(core.Kb(core.r),core.Kb(ngx_bootstrap_modal.a),core.Kb(tokens_service.a),core.Kb(operators_service.a))},CreateTokenComponent.ɵcmp=core.Eb({type:CreateTokenComponent,selectors:[[\"create-token\"]],inputs:{type:\"type\",user:\"user\",required:\"required\",updateAction:\"updateAction\"},features:[core.ub],decls:16,vars:18,consts:[[1,\"d-flex\",\"flex-grow-1\",\"flex-column\",3,\"formGroup\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"user\",3,\"label\",4,\"ngIf\"],[\"formControlName\",\"operator\",3,\"label\",\"emptyOption\",4,\"ngIf\"],[\"required\",\"\",\"formControlName\",\"value\",3,\"mask\",\"label\",\"placeholder\"],[\"formControlName\",\"activateNow\",3,\"label\",4,\"ngIf\"],[\"forceRow\",\"\"],[3,\"label\",\"disabled\",\"action\"],[\"blank\",\"\"],[\"outline\",\"\",3,\"label\",\"action\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[\"formControlName\",\"user\",3,\"label\"],[\"formControlName\",\"operator\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"],[\"formControlName\",\"activateNow\",3,\"label\"]],template:function(rf,ctx){var tmp_4_0;1&rf&&(core.Qb(0,\"h1\"),core.Dc(1),core.Pb(),core.Qb(2,\"form\",0),core.Bc(3,CreateTokenComponent_label_value_3_Template,2,2,\"label-value\",1),core.Bc(4,CreateTokenComponent_user_field_4_Template,1,1,\"user-field\",2),core.Bc(5,CreateTokenComponent_single_selection_field_5_Template,3,5,\"single-selection-field\",3),core.ac(6,\"async\"),core.Lb(7,\"input-field\",4),core.Bc(8,CreateTokenComponent_boolean_field_8_Template,1,1,\"boolean-field\",5),core.ac(9,\"async\"),core.Qb(10,\"actions\",6),core.Qb(11,\"action-button\",7),core.Xb(\"action\",(function(){return ctx.submit()})),core.ac(12,\"async\"),core.Pb(),core.Bc(13,CreateTokenComponent_ng_template_13_Template,1,0,\"ng-template\",null,8,core.Cc),core.Qb(15,\"action-button\",9),core.Xb(\"action\",(function(){return ctx.modalRef.hide()})),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.xb(1),core.Ec(ctx.i18n.token.title.new(ctx.type.name)),core.xb(1),core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"ngIf\",ctx.user),core.xb(1),core.gc(\"ngIf\",!ctx.user),core.xb(1),core.gc(\"ngIf\",(null==(tmp_4_0=core.bc(6,12,ctx.operators$))?null:tmp_4_0.length)>0),core.xb(2),core.gc(\"mask\",ctx.type.mask)(\"label\",ctx.i18n.token.value)(\"placeholder\",ctx.type.mask?ctx.type.mask:\"\"),core.xb(1),core.gc(\"ngIf\",core.bc(9,14,ctx.canActivate$)),core.xb(3),core.gc(\"label\",ctx.i18n.general.submit)(\"disabled\",core.bc(12,16,ctx.requesting$)),core.xb(4),core.gc(\"label\",ctx.i18n.general.cancel))},directives:[fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,common.t,input_field_component.a,fesm2015_forms.D,fesm2015_forms.v,fesm2015_forms.l,mask_directive.a,actions_component.a,action_button_component.a,label_value_component.a,user_field_component.a,single_selection_field_component.a,common.s,field_option_directive.a,boolean_field_component.a],pipes:[common.b],encapsulation:2,changeDetection:0}),CreateTokenComponent})();function ListTokenComponent_ng_container_2_user_info_3_Template(rf,ctx){if(1&rf&&core.Lb(0,\"user-info\",7),2&rf){const ctx_r1=core.Zb(2);core.gc(\"user\",ctx_r1.data.user)}}function ListTokenComponent_ng_container_2_mobile_result_5_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",10),core.Dc(1),core.Pb()),2&rf){const row_r4=core.Zb().$implicit,ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.general.operator),core.xb(1),core.Fc(\" \",null!=row_r4.user&&row_r4.user.user?row_r4.user.display:\"\",\" \")}}function ListTokenComponent_ng_container_2_mobile_result_5_Template(rf,ctx){if(1&rf){const _r8=core.Rb();core.Qb(0,\"mobile-result\"),core.Qb(1,\"div\",8),core.Qb(2,\"div\"),core.Bc(3,ListTokenComponent_ng_container_2_mobile_result_5_label_value_3_Template,2,2,\"label-value\",9),core.Qb(4,\"label-value\",10),core.Dc(5),core.Pb(),core.Qb(6,\"label-value\",10),core.Dc(7),core.ac(8,\"date\"),core.Pb(),core.Qb(9,\"label-value\",10),core.Dc(10),core.ac(11,\"date\"),core.Pb(),core.Qb(12,\"label-value\",10),core.Dc(13),core.ac(14,\"date\"),core.Pb(),core.Qb(15,\"label-value\",10),core.Dc(16),core.Pb(),core.Pb(),core.Qb(17,\"div\",11),core.Qb(18,\"button\",12),core.Xb(\"click\",(function($event){core.sc(_r8);const row_r4=ctx.$implicit,ctx_r7=core.Zb(2);return ctx_r7.router.navigate(ctx_r7.view(row_r4)),$event.stopPropagation(),$event.preventDefault()})),core.Lb(19,\"icon\",13),core.Pb(),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const row_r4=ctx.$implicit,ctx_r2=core.Zb(2);core.xb(3),core.gc(\"ngIf\",!ctx_r2.self),core.xb(1),core.gc(\"label\",ctx_r2.isNfc()?ctx_r2.i18n.token.label:ctx_r2.i18n.token.value),core.xb(1),core.Fc(\" \",row_r4.value,\" \"),core.xb(1),core.gc(\"label\",ctx_r2.i18n.token.creationDate),core.xb(1),core.Fc(\" \",core.bc(8,12,row_r4.creationDate),\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.token.activationDate),core.xb(1),core.Fc(\" \",core.bc(11,14,row_r4.activationDate),\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.token.expiryDate),core.xb(1),core.Fc(\" \",core.bc(14,16,row_r4.expiryDate),\" \"),core.xb(2),core.gc(\"label\",ctx_r2.i18n.general.status),core.xb(1),core.Fc(\" \",ctx_r2.statusDisplay(row_r4.status),\" \"),core.xb(2),core.gc(\"tooltip\",ctx_r2.i18n.general.view)}}function ListTokenComponent_ng_container_2_table_6_th_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"th\"),core.Dc(1),core.Pb()),2&rf){const ctx_r9=core.Zb(3);core.xb(1),core.Ec(ctx_r9.i18n.general.operator)}}function ListTokenComponent_ng_container_2_table_6_tr_14_td_1_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"td\"),core.Dc(1),core.Pb()),2&rf){const row_r11=core.Zb().$implicit;core.xb(1),core.Fc(\"\",null!=row_r11.user&&row_r11.user.user?row_r11.user.display:\"\",\" \")}}function ListTokenComponent_ng_container_2_table_6_tr_14_Template(rf,ctx){if(1&rf){const _r15=core.Rb();core.Qb(0,\"tr\",16),core.Xb(\"click\",(function($event){core.sc(_r15);const row_r11=ctx.$implicit,ctx_r14=core.Zb(3);return ctx_r14.router.navigate(ctx_r14.view(row_r11)),$event.stopPropagation(),$event.preventDefault()})),core.Bc(1,ListTokenComponent_ng_container_2_table_6_tr_14_td_1_Template,2,1,\"td\",1),core.Qb(2,\"td\"),core.Dc(3),core.Pb(),core.Qb(4,\"td\"),core.Dc(5),core.ac(6,\"date\"),core.Pb(),core.Qb(7,\"td\"),core.Dc(8),core.ac(9,\"date\"),core.Pb(),core.Qb(10,\"td\"),core.Dc(11),core.ac(12,\"date\"),core.Pb(),core.Qb(13,\"td\"),core.Dc(14),core.Pb(),core.Pb()}if(2&rf){const row_r11=ctx.$implicit,ctx_r10=core.Zb(3);core.xb(1),core.gc(\"ngIf\",!ctx_r10.self),core.xb(2),core.Ec(row_r11.value),core.xb(2),core.Ec(core.bc(6,6,row_r11.creationDate)),core.xb(3),core.Ec(core.bc(9,8,row_r11.activationDate)),core.xb(3),core.Ec(core.bc(12,10,row_r11.expiryDate)),core.xb(3),core.Ec(ctx_r10.statusDisplay(row_r11.status))}}function ListTokenComponent_ng_container_2_table_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",14),core.Qb(1,\"thead\"),core.Bc(2,ListTokenComponent_ng_container_2_table_6_th_2_Template,2,1,\"th\",1),core.Qb(3,\"th\"),core.Dc(4),core.Pb(),core.Qb(5,\"th\"),core.Dc(6),core.Pb(),core.Qb(7,\"th\"),core.Dc(8),core.Pb(),core.Qb(9,\"th\"),core.Dc(10),core.Pb(),core.Qb(11,\"th\"),core.Dc(12),core.Pb(),core.Pb(),core.Qb(13,\"tbody\"),core.Bc(14,ListTokenComponent_ng_container_2_table_6_tr_14_Template,15,12,\"tr\",15),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(2),core.gc(\"ngIf\",!ctx_r3.self),core.xb(2),core.Ec(ctx_r3.isNfc()?ctx_r3.i18n.token.label:ctx_r3.i18n.token.value),core.xb(2),core.Ec(ctx_r3.i18n.token.creationDate),core.xb(2),core.Ec(ctx_r3.i18n.token.activationDate),core.xb(2),core.Ec(ctx_r3.i18n.token.expiryDate),core.xb(2),core.Ec(ctx_r3.i18n.general.status),core.xb(2),core.gc(\"ngForOf\",ctx_r3.data.tokens)}}function ListTokenComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"page-content\",2),core.ac(2,\"async\"),core.Bc(3,ListTokenComponent_ng_container_2_user_info_3_Template,1,1,\"user-info\",3),core.Pb(),core.Qb(4,\"results-layout\",4),core.Bc(5,ListTokenComponent_ng_container_2_mobile_result_5_Template,20,18,\"mobile-result\",5),core.Bc(6,ListTokenComponent_ng_container_2_table_6_Template,15,7,\"table\",6),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(1),core.gc(\"heading\",null==ctx_r0.data?null:ctx_r0.data.type.pluralName)(\"mobileHeading\",null==ctx_r0.data?null:ctx_r0.data.type.pluralName)(\"headingActions\",core.bc(2,6,ctx_r0.headingActions$))(\"mode\",ctx_r0.self?\"empty\":\"normal\"),core.xb(2),core.gc(\"ngIf\",!ctx_r0.self),core.xb(1),core.gc(\"results\",ctx_r0.data.tokens)}}let list_token_component_ListTokenComponent=(()=>{class ListTokenComponent extends base_page_component.a{constructor(injector,modal,userHelper,tokenService){super(injector),this.modal=modal,this.userHelper=userHelper,this.tokenService=tokenService}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.type=this.route.snapshot.params.type,this.addSub(this.tokenService.getUserTokens({user:this.user,type:this.type}).subscribe(data=>this.data=data))}onDataInitialized(data){super.onDataInitialized(data),this.self=this.authHelper.isSelf(data.user),this.canCreate()&&data.type.physicalType!==models.ab.NFC_TAG&&(this.headingActions=[new action.c(\"add\",this.i18n.general.add,()=>{this.modal.show(create_token_component_CreateTokenComponent,{class:\"modal-form\",initialState:{type:data.type,user:data.user,required:!0,updateAction:()=>this.reload()}})},!0)]),this.canActivate()&&(this.headingActions=[new action.c(\"how_to_reg\",this.i18n.token.action.activate,()=>{this.notification.confirm({title:this.i18n.token.action.activate,customFields:[{internalName:\"value\",name:this.i18n.token.value,type:models.p.STRING,pattern:data.type.mask,required:!0}],callback:params=>this.tokenService.activateToken({user:this.user,type:this.type,body:params.customValues.value}).subscribe(()=>{this.notification.snackBar(this.i18n.token.action.done.expiryChanged),this.reload()})})},!0)])}isNfc(){return this.data.type.physicalType===models.ab.NFC_TAG}canCreate(){var _a;return!this.self&&(null===(_a=this.dataForUiHolder.auth.permissions.tokens.user.find(p=>p.type.id===this.type))||void 0===_a?void 0:_a.create)}canActivate(){var _a;return!!this.self&&(null===(_a=this.dataForUiHolder.auth.permissions.tokens.my.find(p=>p.type.id===this.type))||void 0===_a?void 0:_a.activate)}statusDisplay(status){return this.userHelper.tokenStatus(status)}view(token){return[\"/users\",\"tokens\",\"view\",token.id]}resolveMenu(data){return this.authHelper.isSelf(data.user)?new menu.a(menu.b.MY_TOKENS,{tokenType:data.type}):data.user.user&&this.authHelper.isSelf(data.user.user)?menu.b.MY_OPERATORS:this.dataForUiHolder.role===models.kb.BROKER?menu.b.MY_BROKERED_USERS:menu.b.SEARCH_USERS}}return ListTokenComponent.ɵfac=function(t){return new(t||ListTokenComponent)(core.Kb(core.r),core.Kb(ngx_bootstrap_modal.b),core.Kb(user_helper_service.a),core.Kb(tokens_service.a))},ListTokenComponent.ɵcmp=core.Eb({type:ListTokenComponent,selectors:[[\"list-token\"]],features:[core.ub],decls:3,vars:4,consts:[[3,\"ready\"],[4,\"ngIf\"],[3,\"heading\",\"mobileHeading\",\"headingActions\",\"mode\"],[3,\"user\",4,\"ngIf\"],[3,\"results\"],[4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[3,\"user\"],[1,\"d-flex\"],[\"labelPosition\",\"above\",3,\"label\",4,\"ngIf\"],[\"labelPosition\",\"above\",3,\"label\"],[1,\"ml-auto\",\"text-right\",\"d-flex\",\"flex-column\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"search\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,ListTokenComponent_ng_container_2_Template,7,8,\"ng-container\",1),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,2,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,common.t,page_content_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,user_info_component.a,mobile_result_component.a,label_value_component.a,ngx_bootstrap_tooltip.b,icon_component.a,common.s],pipes:[common.b,date_pipe.a],encapsulation:2,changeDetection:0}),ListTokenComponent})();function SearchTokenComponent_ng_container_2_Template(rf,ctx){1&rf&&core.Mb(0)}function SearchTokenComponent_ng_template_3_div_18_field_option_2_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",20),2&rf){const group_r7=ctx.$implicit,ctx_r6=core.Zb(3);core.gc(\"value\",ctx_r6.ApiHelper.internalNameOrId(group_r7))(\"internalName\",group_r7.internalName)(\"id\",group_r7.id)(\"text\",group_r7.name)(\"parent\",group_r7.groupSet)}}function SearchTokenComponent_ng_template_3_div_18_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\",6),core.Qb(1,\"multi-selection-field\",18),core.Bc(2,SearchTokenComponent_ng_template_3_div_18_field_option_2_Template,1,5,\"field-option\",19),core.Pb(),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.xb(1),core.gc(\"label\",ctx_r3.i18n.user.groupFilter),core.xb(1),core.gc(\"ngForOf\",ctx_r3.data.groups)}}function SearchTokenComponent_ng_template_3_mobile_result_21_Template(rf,ctx){if(1&rf){const _r10=core.Rb();core.Qb(0,\"mobile-result\"),core.Qb(1,\"div\",21),core.Qb(2,\"div\"),core.Qb(3,\"label-value\",22),core.Dc(4),core.Pb(),core.Qb(5,\"label-value\",22),core.Dc(6),core.Pb(),core.Qb(7,\"label-value\",22),core.Dc(8),core.ac(9,\"date\"),core.Pb(),core.Qb(10,\"label-value\",22),core.Dc(11),core.ac(12,\"date\"),core.Pb(),core.Qb(13,\"label-value\",22),core.Dc(14),core.ac(15,\"date\"),core.Pb(),core.Qb(16,\"label-value\",22),core.Dc(17),core.Pb(),core.Pb(),core.Qb(18,\"div\",23),core.Qb(19,\"button\",24),core.Xb(\"click\",(function($event){core.sc(_r10);const row_r8=ctx.$implicit,ctx_r9=core.Zb(2);return ctx_r9.router.navigate(ctx_r9.view(row_r8)),$event.stopPropagation(),$event.preventDefault()})),core.Lb(20,\"icon\",25),core.Pb(),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const row_r8=ctx.$implicit,ctx_r4=core.Zb(2);core.xb(3),core.gc(\"label\",ctx_r4.i18n.general.user),core.xb(1),core.Fc(\" \",row_r8.user?row_r8.user.display:ctx_r4.i18n.token.unassigned,\" \"),core.xb(1),core.gc(\"label\",ctx_r4.isNfc()?ctx_r4.i18n.token.label:ctx_r4.i18n.token.value),core.xb(1),core.Fc(\" \",row_r8.value,\" \"),core.xb(1),core.gc(\"label\",ctx_r4.i18n.token.creationDate),core.xb(1),core.Fc(\" \",core.bc(9,13,row_r8.creationDate),\" \"),core.xb(2),core.gc(\"label\",ctx_r4.i18n.token.activationDate),core.xb(1),core.Fc(\" \",core.bc(12,15,row_r8.activationDate),\" \"),core.xb(2),core.gc(\"label\",ctx_r4.i18n.token.expiryDate),core.xb(1),core.Fc(\" \",core.bc(15,17,row_r8.expiryDate),\" \"),core.xb(2),core.gc(\"label\",ctx_r4.i18n.general.status),core.xb(1),core.Fc(\" \",ctx_r4.statusDisplay(row_r8.status),\" \"),core.xb(2),core.gc(\"tooltip\",ctx_r4.i18n.general.view)}}function SearchTokenComponent_ng_template_3_table_22_tr_15_Template(rf,ctx){if(1&rf){const _r14=core.Rb();core.Qb(0,\"tr\",28),core.Xb(\"click\",(function($event){core.sc(_r14);const row_r12=ctx.$implicit,ctx_r13=core.Zb(3);return ctx_r13.router.navigate(ctx_r13.view(row_r12)),$event.stopPropagation(),$event.preventDefault()})),core.Qb(1,\"td\"),core.Dc(2),core.Pb(),core.Qb(3,\"td\"),core.Dc(4),core.Pb(),core.Qb(5,\"td\"),core.Dc(6),core.ac(7,\"date\"),core.Pb(),core.Qb(8,\"td\"),core.Dc(9),core.ac(10,\"date\"),core.Pb(),core.Qb(11,\"td\"),core.Dc(12),core.ac(13,\"date\"),core.Pb(),core.Qb(14,\"td\"),core.Dc(15),core.Pb(),core.Pb()}if(2&rf){const row_r12=ctx.$implicit,ctx_r11=core.Zb(3);core.xb(2),core.Ec(row_r12.user?row_r12.user.display:ctx_r11.i18n.token.unassigned),core.xb(2),core.Ec(row_r12.value),core.xb(2),core.Ec(core.bc(7,6,row_r12.creationDate)),core.xb(3),core.Ec(core.bc(10,8,row_r12.activationDate)),core.xb(3),core.Ec(core.bc(13,10,row_r12.expiryDate)),core.xb(3),core.Ec(ctx_r11.statusDisplay(row_r12.status))}}function SearchTokenComponent_ng_template_3_table_22_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"table\",26),core.Qb(1,\"thead\"),core.Qb(2,\"th\"),core.Dc(3),core.Pb(),core.Qb(4,\"th\"),core.Dc(5),core.Pb(),core.Qb(6,\"th\"),core.Dc(7),core.Pb(),core.Qb(8,\"th\"),core.Dc(9),core.Pb(),core.Qb(10,\"th\"),core.Dc(11),core.Pb(),core.Qb(12,\"th\"),core.Dc(13),core.Pb(),core.Pb(),core.Qb(14,\"tbody\"),core.Bc(15,SearchTokenComponent_ng_template_3_table_22_tr_15_Template,16,12,\"tr\",27),core.ac(16,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r5=core.Zb(2);var tmp_6_0;core.xb(3),core.Ec(ctx_r5.i18n.general.user),core.xb(2),core.Ec(ctx_r5.isNfc()?ctx_r5.i18n.token.label:ctx_r5.i18n.token.value),core.xb(2),core.Ec(ctx_r5.i18n.token.creationDate),core.xb(2),core.Ec(ctx_r5.i18n.token.activationDate),core.xb(2),core.Ec(ctx_r5.i18n.token.expiryDate),core.xb(2),core.Ec(ctx_r5.i18n.general.status),core.xb(2),core.gc(\"ngForOf\",null==(tmp_6_0=core.bc(16,7,ctx_r5.results$))?null:tmp_6_0.results)}}function SearchTokenComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"page-content\",3),core.ac(1,\"async\"),core.Qb(2,\"form\",4),core.Qb(3,\"div\",5),core.Qb(4,\"div\",6),core.Lb(5,\"user-field\",7),core.Pb(),core.Lb(6,\"div\",8),core.Qb(7,\"div\",6),core.Lb(8,\"date-field\",9),core.Pb(),core.Qb(9,\"div\",6),core.Lb(10,\"date-field\",10),core.Pb(),core.Lb(11,\"div\",8),core.Qb(12,\"div\",6),core.Lb(13,\"date-field\",11),core.Pb(),core.Qb(14,\"div\",6),core.Lb(15,\"date-field\",12),core.Pb(),core.Pb(),core.Qb(16,\"div\",6),core.Lb(17,\"multi-selection-field\",13),core.Pb(),core.Bc(18,SearchTokenComponent_ng_template_3_div_18_Template,3,2,\"div\",14),core.Pb(),core.Pb(),core.Qb(19,\"results-layout\",15),core.ac(20,\"async\"),core.Bc(21,SearchTokenComponent_ng_template_3_mobile_result_21_Template,21,19,\"mobile-result\",16),core.Bc(22,SearchTokenComponent_ng_template_3_table_22_Template,17,9,\"table\",17),core.Pb()),2&rf){const ctx_r2=core.Zb();core.gc(\"heading\",null==ctx_r2.data?null:ctx_r2.data.type.pluralName)(\"mobileHeading\",null==ctx_r2.data?null:ctx_r2.data.type.pluralName)(\"headingActions\",core.bc(1,15,ctx_r2.headingActions$)),core.xb(2),core.gc(\"formGroup\",ctx_r2.form),core.xb(3),core.gc(\"label\",ctx_r2.i18n.general.user),core.xb(3),core.gc(\"label\",ctx_r2.i18n.token.activationBeginDate),core.xb(2),core.gc(\"label\",ctx_r2.i18n.token.activationEndDate),core.xb(3),core.gc(\"label\",ctx_r2.i18n.token.expiryBeginDate),core.xb(2),core.gc(\"label\",ctx_r2.i18n.token.expiryEndDate),core.xb(2),core.gc(\"emptyLabel\",ctx_r2.i18n.general.notApplied)(\"label\",ctx_r2.i18n.general.status)(\"fieldOptions\",ctx_r2.statusOptions),core.xb(1),core.gc(\"ngIf\",(null==ctx_r2.data.groups?null:ctx_r2.data.groups.length)>1),core.xb(1),core.gc(\"results\",core.bc(20,17,ctx_r2.results$))(\"rendering$\",ctx_r2.rendering$)}}let search_token_component_SearchTokenComponent=(()=>{class SearchTokenComponent extends base_search_page_component.a{constructor(injector,userHelper,modal,tokenService){super(injector),this.userHelper=userHelper,this.modal=modal,this.tokenService=tokenService}getFormControlNames(){return[\"user\",\"statuses\",\"groups\",\"activationBeginDate\",\"activationEndDate\",\"expiryBeginDate\",\"expiryEndDate\"]}ngOnInit(){super.ngOnInit(),this.type=this.route.snapshot.params.type,this.addSub(this.tokenService.getGeneralTokensDataForSearch({type:this.type}).subscribe(data=>this.data=data))}onDataInitialized(data){super.onDataInitialized(data),data.type.physicalType!==models.ab.NFC_TAG&&(this.headingActions=[new action.c(\"add\",this.i18n.general.add,()=>{this.modal.show(create_token_component_CreateTokenComponent,{class:\"modal-form\",initialState:{type:data.type,updateAction:()=>this.reload()}})},!0)])}doSearch(value){return this.tokenService.searchGeneralTokens$Response(value)}toSearchParams(value){const params=value;return params.type=this.type,params.activationPeriod=api_helper.a.dateRangeFilter(value.activationBeginDate,value.activationEndDate),params.expiryPeriod=api_helper.a.dateRangeFilter(value.expiryBeginDate,value.expiryEndDate),params}get statusOptions(){return Object.values(models.vb).map(st=>({value:st,text:this.statusDisplay(st)}))}statusDisplay(status){return this.userHelper.tokenStatus(status)}isNfc(){return this.data.type.physicalType===models.ab.NFC_TAG}view(token){return[\"/users\",\"tokens\",\"view\",token.id]}resolveMenu(dataForSearch){return new menu.a(menu.b.USER_TOKENS,{tokenType:dataForSearch.type})}}return SearchTokenComponent.ɵfac=function(t){return new(t||SearchTokenComponent)(core.Kb(core.r),core.Kb(user_helper_service.a),core.Kb(ngx_bootstrap_modal.b),core.Kb(tokens_service.a))},SearchTokenComponent.ɵcmp=core.Eb({type:SearchTokenComponent,selectors:[[\"search-token\"]],features:[core.ub],decls:5,vars:5,consts:[[3,\"ready\"],[4,\"ngIf\",\"ngIfThen\"],[\"content\",\"\"],[\"mode\",\"filters\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[1,\"filters-form\",\"filters-form-separator\",3,\"formGroup\"],[1,\"row\",\"no-gutters\"],[1,\"col-12\",\"col-md-6\"],[\"labelPosition\",\"side\",\"formControlName\",\"user\",3,\"label\"],[1,\"w-100\"],[\"labelPosition\",\"side\",\"formControlName\",\"activationBeginDate\",\"minDate\",\"past100\",\"maxDate\",\"today\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"activationEndDate\",\"minDate\",\"past100\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"expiryBeginDate\",\"minDate\",\"past100\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"expiryEndDate\",\"minDate\",\"past100\",\"fieldSize\",\"full\",3,\"label\"],[\"labelPosition\",\"side\",\"formControlName\",\"statuses\",3,\"emptyLabel\",\"label\",\"fieldOptions\"],[\"class\",\"col-12 col-md-6\",4,\"ngIf\"],[3,\"results\",\"rendering$\"],[4,\"mobileResult\"],[\"class\",\"table table-hover cursor-pointer\",4,\"resultTable\"],[\"labelPosition\",\"side\",\"hierarchyProperty\",\"groupSet\",\"formControlName\",\"groups\",3,\"label\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"internalName\",\"id\",\"text\",\"parent\"],[1,\"d-flex\"],[\"labelPosition\",\"above\",3,\"label\"],[1,\"ml-auto\",\"text-right\",\"d-flex\",\"flex-column\"],[1,\"btn\",\"btn-icon\",3,\"tooltip\",\"click\"],[\"icon\",\"search\"],[1,\"table\",\"table-hover\",\"cursor-pointer\"],[3,\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"click\"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Bc(2,SearchTokenComponent_ng_container_2_Template,1,0,\"ng-container\",1),core.Pb(),core.Bc(3,SearchTokenComponent_ng_template_3_Template,23,19,\"ng-template\",null,2,core.Cc)),2&rf){const _r1=core.qc(4);core.gc(\"ready\",core.bc(1,3,ctx.data$)),core.xb(2),core.gc(\"ngIf\",ctx.data)(\"ngIfThen\",_r1)}},directives:[page_layout_component.a,common.t,page_content_component.a,fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,user_field_component.a,fesm2015_forms.v,fesm2015_forms.l,date_field_component.a,multi_selection_field_component.a,results_layout_component.a,mobile_result_directive.a,result_table_directive.a,common.s,field_option_directive.a,mobile_result_component.a,label_value_component.a,ngx_bootstrap_tooltip.b,icon_component.a],pipes:[common.b,date_pipe.a],encapsulation:2,changeDetection:0}),SearchTokenComponent})();function AssignTokenComponent_single_selection_field_4_field_option_1_Template(rf,ctx){if(1&rf&&core.Lb(0,\"field-option\",9),2&rf){const operator_r4=ctx.$implicit;core.gc(\"value\",operator_r4.id)(\"text\",operator_r4.display)}}function AssignTokenComponent_single_selection_field_4_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"single-selection-field\",7),core.Bc(1,AssignTokenComponent_single_selection_field_4_field_option_1_Template,1,2,\"field-option\",8),core.ac(2,\"async\"),core.Pb()),2&rf){const ctx_r0=core.Zb();core.gc(\"label\",ctx_r0.i18n.general.operator)(\"emptyOption\",ctx_r0.i18n.general.notSet),core.xb(1),core.gc(\"ngForOf\",core.bc(2,3,ctx_r0.operators$))}}function AssignTokenComponent_ng_template_9_Template(rf,ctx){1&rf&&core.Dc(0,\" \")}let assign_token_component_AssignTokenComponent=(()=>{class AssignTokenComponent extends base_component.a{constructor(injector,modalRef,tokensService,operatorsService){super(injector),this.modalRef=modalRef,this.tokensService=tokensService,this.operatorsService=operatorsService,this.operators$=new BehaviorSubject.a(null)}ngOnInit(){this.form=this.formBuilder.group({user:[null,fesm2015_forms.G.required],operator:null}),this.form.get(\"user\").valueChanges.subscribe(user=>this.fillOperatorsField(user))}fillOperatorsField(user){this.operatorsService.searchUserOperators$Response({user:user.id,skipTotalCount:!0,pageSize:999999}).subscribe(response=>{this.operators$.next(response.ok?response.body:null)})}submit(){if(Object(helper.F)(this.form),!this.form.valid)return;const values=Object(cloneDeep.a)(this.form.value);this.tokensService.assignToken({id:this.token,user:values.operator?values.operator:values.user}).subscribe(()=>{this.notification.snackBar(this.i18n.token.action.done.assigned),this.updateAction()}),this.modalRef.hide()}}return AssignTokenComponent.ɵfac=function(t){return new(t||AssignTokenComponent)(core.Kb(core.r),core.Kb(ngx_bootstrap_modal.a),core.Kb(tokens_service.a),core.Kb(operators_service.a))},AssignTokenComponent.ɵcmp=core.Eb({type:AssignTokenComponent,selectors:[[\"assign-token\"]],inputs:{token:\"token\",updateAction:\"updateAction\"},features:[core.ub],decls:12,vars:11,consts:[[1,\"d-flex\",\"flex-grow-1\",\"flex-column\",3,\"formGroup\"],[\"required\",\"\",\"formControlName\",\"user\",3,\"label\"],[\"formControlName\",\"operator\",3,\"label\",\"emptyOption\",4,\"ngIf\"],[\"forceRow\",\"\"],[3,\"label\",\"disabled\",\"action\"],[\"blank\",\"\"],[\"outline\",\"\",3,\"label\",\"action\"],[\"formControlName\",\"operator\",3,\"label\",\"emptyOption\"],[3,\"value\",\"text\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"text\"]],template:function(rf,ctx){var tmp_3_0;1&rf&&(core.Qb(0,\"h1\"),core.Dc(1),core.Pb(),core.Qb(2,\"form\",0),core.Lb(3,\"user-field\",1),core.Bc(4,AssignTokenComponent_single_selection_field_4_Template,3,5,\"single-selection-field\",2),core.ac(5,\"async\"),core.Qb(6,\"actions\",3),core.Qb(7,\"action-button\",4),core.Xb(\"action\",(function(){return ctx.submit()})),core.ac(8,\"async\"),core.Pb(),core.Bc(9,AssignTokenComponent_ng_template_9_Template,1,0,\"ng-template\",null,5,core.Cc),core.Qb(11,\"action-button\",6),core.Xb(\"action\",(function(){return ctx.modalRef.hide()})),core.Pb(),core.Pb(),core.Pb()),2&rf&&(core.xb(1),core.Ec(ctx.i18n.token.title.assign),core.xb(1),core.gc(\"formGroup\",ctx.form),core.xb(1),core.gc(\"label\",ctx.i18n.general.user),core.xb(1),core.gc(\"ngIf\",(null==(tmp_3_0=core.bc(5,7,ctx.operators$))?null:tmp_3_0.length)>0),core.xb(3),core.gc(\"label\",ctx.i18n.general.submit)(\"disabled\",core.bc(8,9,ctx.requesting$)),core.xb(4),core.gc(\"label\",ctx.i18n.general.cancel))},directives:[fesm2015_forms.I,fesm2015_forms.w,fesm2015_forms.n,user_field_component.a,fesm2015_forms.D,fesm2015_forms.v,fesm2015_forms.l,common.t,actions_component.a,action_button_component.a,single_selection_field_component.a,common.s,field_option_directive.a],pipes:[common.b],encapsulation:2,changeDetection:0}),AssignTokenComponent})();function ViewTokenComponent_ng_container_4_label_value_2_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Lb(1,\"user-link\",8),core.Pb()),2&rf){const ctx_r1=core.Zb(2);core.gc(\"label\",ctx_r1.i18n.general.user),core.xb(1),core.gc(\"user\",null!=ctx_r1.data.user&&ctx_r1.data.user.user?ctx_r1.data.user.user:ctx_r1.data.user)}}function ViewTokenComponent_ng_container_4_label_value_3_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",7),core.Dc(1),core.Pb()),2&rf){const ctx_r2=core.Zb(2);core.gc(\"label\",ctx_r2.i18n.general.operator),core.xb(1),core.Fc(\" \",ctx_r2.data.user.display,\" \")}}function ViewTokenComponent_ng_container_4_label_value_6_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.ac(2,\"date\"),core.Pb()),2&rf){const ctx_r3=core.Zb(2);core.gc(\"label\",ctx_r3.i18n.general.creationDate),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r3.data.creationDate),\" \")}}function ViewTokenComponent_ng_container_4_label_value_7_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.ac(2,\"date\"),core.Pb()),2&rf){const ctx_r4=core.Zb(2);core.gc(\"label\",ctx_r4.i18n.document.category),core.xb(1),core.Fc(\" \",core.bc(2,2,ctx_r4.data.activationDate),\" \")}}function ViewTokenComponent_ng_container_4_label_value_8_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.Pb()),2&rf){const ctx_r5=core.Zb(2);core.gc(\"label\",ctx_r5.i18n.general.status),core.xb(1),core.Fc(\" \",ctx_r5.statusDisplay(ctx_r5.data.status),\" \")}}function ViewTokenComponent_ng_container_4_label_value_9_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.ac(2,\"date\"),core.Pb()),2&rf){const ctx_r6=core.Zb(2);core.gc(\"label\",ctx_r6.i18n.token.activationDeadline),core.xb(1),core.Fc(\" \",ctx_r6.data.activationDeadline?core.bc(2,2,ctx_r6.data.activationDeadline):ctx_r6.i18n.token.noDeadline,\" \")}}function ViewTokenComponent_ng_container_4_label_value_10_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"label-value\",5),core.Dc(1),core.ac(2,\"date\"),core.Pb()),2&rf){const ctx_r7=core.Zb(2);core.gc(\"label\",ctx_r7.i18n.token.expiryDate),core.xb(1),core.Fc(\" \",ctx_r7.data.expiryDate?core.bc(2,2,ctx_r7.data.expiryDate):ctx_r7.i18n.token.noExpiryDate,\" \")}}function ViewTokenComponent_ng_container_4_div_11_img_3_Template(rf,ctx){1&rf&&(core.Lb(0,\"img\",12),core.ac(1,\"trust\")),2&rf&&core.gc(\"src\",core.cc(1,1,ctx.ngIf,\"url\"),core.uc)}function ViewTokenComponent_ng_container_4_div_11_Template(rf,ctx){if(1&rf&&(core.Qb(0,\"div\"),core.Lb(1,\"hr\",9),core.Qb(2,\"div\",10),core.Bc(3,ViewTokenComponent_ng_container_4_div_11_img_3_Template,2,4,\"img\",11),core.ac(4,\"async\"),core.Pb(),core.Pb()),2&rf){const ctx_r8=core.Zb(2);core.xb(3),core.gc(\"ngIf\",core.bc(4,1,ctx_r8.qrCodeUrl$))}}function ViewTokenComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Ob(0),core.Qb(1,\"div\",3),core.Bc(2,ViewTokenComponent_ng_container_4_label_value_2_Template,2,2,\"label-value\",4),core.Bc(3,ViewTokenComponent_ng_container_4_label_value_3_Template,2,2,\"label-value\",4),core.Qb(4,\"label-value\",5),core.Dc(5),core.Pb(),core.Bc(6,ViewTokenComponent_ng_container_4_label_value_6_Template,3,4,\"label-value\",6),core.Bc(7,ViewTokenComponent_ng_container_4_label_value_7_Template,3,4,\"label-value\",6),core.Bc(8,ViewTokenComponent_ng_container_4_label_value_8_Template,2,2,\"label-value\",6),core.Bc(9,ViewTokenComponent_ng_container_4_label_value_9_Template,3,4,\"label-value\",6),core.Bc(10,ViewTokenComponent_ng_container_4_label_value_10_Template,3,4,\"label-value\",6),core.Bc(11,ViewTokenComponent_ng_container_4_div_11_Template,5,3,\"div\",2),core.Pb(),core.Nb()),2&rf){const ctx_r0=core.Zb();core.xb(2),core.gc(\"ngIf\",ctx_r0.showUser()),core.xb(1),core.gc(\"ngIf\",null==ctx_r0.data.user?null:ctx_r0.data.user.user),core.xb(1),core.gc(\"label\",ctx_r0.valueLabel()),core.xb(1),core.Fc(\" \",ctx_r0.data.value,\" \"),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.creationDate),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.activationDate),core.xb(1),core.gc(\"ngIf\",ctx_r0.data.status),core.xb(1),core.gc(\"ngIf\",ctx_r0.showDeadLine()),core.xb(1),core.gc(\"ngIf\",ctx_r0.showExpiryDate()),core.xb(1),core.gc(\"ngIf\",ctx_r0.isQrCode(ctx_r0.data))}}const usersRoutes=[{path:\"\",children:[{path:\"search\",component:search_users_component_SearchUsersComponent},{path:\"brokerings\",component:search_users_component_SearchUsersComponent,canActivate:[logged_user_guard.a]},{path:\":user/brokerings\",component:search_users_component_SearchUsersComponent,canActivate:[logged_user_guard.a]},{path:\":user/brokers\",component:list_user_brokers_component_ListUserBrokersComponent,canActivate:[logged_user_guard.a]},{path:\":user/brokers/history\",component:view_broker_history_component_ViewBrokerHistoryComponent,canActivate:[logged_user_guard.a]},{path:\":user/brokers/new\",component:broker_form_component_BrokerFormComponent,canActivate:[logged_user_guard.a]},{path:\":user/profile\",component:view_profile_component.b,resolve:{countries:countries_resolve.a}},{path:\":user/profile/edit\",component:edit_profile_component_EditProfileComponent,canActivate:[logged_user_guard.a],resolve:{countries:countries_resolve.a}},{path:\"operators\",component:search_user_operators_component_SearchUserOperatorsComponent,canActivate:[logged_user_guard.a]},{path:\":user/operators\",component:search_user_operators_component_SearchUserOperatorsComponent,canActivate:[logged_user_guard.a]},{path:\":user/operators/registration\",component:operator_registration_component_OperatorRegistrationComponent,canActivate:[logged_user_guard.a]},{path:\"operators/:user\",component:view_profile_component.b,canActivate:[logged_user_guard.a]},{path:\"operators/:user/edit\",component:edit_profile_component_EditProfileComponent,canActivate:[logged_user_guard.a]},{path:\":user/status\",component:view_user_status_component_ViewUserStatusComponent,canActivate:[logged_user_guard.a]},{path:\":user/status/history\",component:view_user_status_history_component_ViewUserStatusHistoryComponent,canActivate:[logged_user_guard.a]},{path:\":user/group\",component:view_user_group_component_ViewUserGroupComponent,canActivate:[logged_user_guard.a]},{path:\":user/group/history\",component:view_user_group_history_component_ViewUserGroupHistoryComponent,canActivate:[logged_user_guard.a]},{path:\":user/agreements\",component:view_user_agreements_component_ViewUserAgreementsComponent,canActivate:[logged_user_guard.a]},{path:\":user/agreements/history\",component:view_agreements_history_component_ViewAgreementsHistoryComponent,canActivate:[logged_user_guard.a]},{path:\"operator-groups\",component:list_operator_groups_component_ListOperatorGroupsComponent,canActivate:[logged_user_guard.a]},{path:\":user/operator-groups\",component:list_operator_groups_component_ListOperatorGroupsComponent,canActivate:[logged_user_guard.a]},{path:\":user/operator-groups/new\",component:operator_group_form_component_OperatorGroupFormComponent,canActivate:[logged_user_guard.a]},{path:\"operator-groups/:id\",component:view_operator_group_component_ViewOperatorGroupComponent,canActivate:[logged_user_guard.a]},{path:\"operator-groups/:id/edit\",component:operator_group_form_component_OperatorGroupFormComponent,canActivate:[logged_user_guard.a]},{path:\"contacts\",component:contact_list_component_ContactListComponent,canActivate:[logged_user_guard.a]},{path:\"contacts/:user\",component:view_profile_component.b,canActivate:[logged_user_guard.a],resolve:{countries:countries_resolve.a}},{path:\":user/passwords\",component:manage_passwords_component_ManagePasswordsComponent,canActivate:[logged_user_guard.a]},{path:\":user/identity-providers\",component:user_identity_providers_component_UserIdentityProvidersComponent,canActivate:[logged_user_guard.a]},{path:\"registration\",component:user_registration_component_UserRegistrationComponent,resolve:{countries:countries_resolve.a}},{path:\"validate-registration/:key\",component:validate_registration_component_ValidateRegistrationComponent},{path:\"connected\",component:search_connected_component_SearchConnectedComponent},{path:\"alerts\",component:search_user_alerts_component_SearchUserAlertsComponent},{path:\"validate-email-change/:key\",component:validate_email_change_component_ValidateEmailChangeComponent},{path:\":user/notification-settings\",component:notification_settings_form_component_NotificationSettingsFormComponent,canActivate:[logged_user_guard.a]},{path:\"documents\",component:list_documents_component_ListDocumentsComponent,canActivate:[logged_user_guard.a]},{path:\":user/documents/search\",component:search_documents_component_SearchDocumentsComponent,canActivate:[logged_user_guard.a]},{path:\"documents/edit/:id\",component:edit_document_component_EditDocumentComponent,canActivate:[logged_user_guard.a]},{path:\"documents/view/:id\",component:view_document_component_ViewDocumentComponent,canActivate:[logged_user_guard.a]},{path:\":user/documents/new\",component:edit_document_component_EditDocumentComponent,canActivate:[logged_user_guard.a]},{path:\"documents/process-dynamic/:id\",component:process_dynamic_document_component_ProcessDynamicDocumentComponent,canActivate:[logged_user_guard.a]},{path:\":user/tokens/:type\",component:list_token_component_ListTokenComponent,canActivate:[logged_user_guard.a]},{path:\"tokens/search/:type\",component:search_token_component_SearchTokenComponent,canActivate:[logged_user_guard.a]},{path:\"tokens/view/:id\",component:(()=>{class ViewTokenComponent extends base_view_page_component.a{constructor(injector,userHelper,modal,tokenService){super(injector),this.userHelper=userHelper,this.modal=modal,this.tokenService=tokenService,this.qrCodeUrl$=new BehaviorSubject.a(null)}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.paramMap.get(\"id\"),this.addSub(this.tokenService.viewToken({id:this.id}).subscribe(data=>this.data=data))}isQrCode(token){return token.type.physicalType===models.ab.QR_CODE}onDataInitialized(token){this.isQrCode(token)&&this.getTokenQrCodeUrl();const headingActions=[];token.assign&&headingActions.push(new action.c(\"account_box\",this.i18n.token.action.assign,()=>{token.status===models.vb.UNASSIGNED&&this.modal.show(assign_token_component_AssignTokenComponent,{class:\"modal-form\",initialState:{token:this.id,updateAction:()=>this.reload()}})})),token.setActivationDeadline&&headingActions.push(new action.c(\"calendar_today\",this.i18n.token.action.changeDeadline,()=>{this.notification.confirm({title:this.i18n.token.action.changeDeadline,customFields:[{internalName:\"deadline\",name:this.i18n.token.activationDeadline,type:models.p.DATE,required:!0}],callback:params=>this.tokenService.setTokenActivationDeadline({id:this.id,date:params.customValues.deadline}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.deadlineChanged))})})),token.setExpiryDate&&headingActions.push(new action.c(\"calendar_today\",this.i18n.token.action.changeExpiry,()=>{this.notification.confirm({title:this.i18n.token.action.changeExpiry,customFields:[{internalName:\"expiry\",name:this.i18n.token.expiryDate,type:models.p.DATE,required:!0}],callback:params=>this.tokenService.setTokenExpiryDate({id:this.id,date:params.customValues.expiry}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.expiryChanged))})})),token.block&&headingActions.push(new action.c(\"lock\",this.i18n.token.action.block,()=>{this.tokenService.blockToken({id:this.id}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.blocked))})),token.unblock&&headingActions.push(new action.c(\"lock_open\",this.i18n.token.action.unblock,()=>{this.tokenService.unblockToken({id:this.id}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.unblocked))})),token.activate&&headingActions.push(new action.c(\"how_to_reg\",this.i18n.token.action.activate,()=>{this.tokenService.activatePendingToken({id:this.id}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.activated))})),token.cancel&&headingActions.push(new action.c(\"cancel\",this.i18n.token.action.cancel,()=>{this.notification.confirm({title:this.i18n.token.action.cancel,message:this.i18n.token.action.message.cancel,callback:()=>this.tokenService.cancelToken({id:this.id}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.canceled))})})),this.headingActions=headingActions}notifyDoneAndReload(notification){this.notification.snackBar(notification),this.reload()}getTokenQrCodeUrl(){this.addSub(this.tokenService.getTokenQrCode({id:this.id,size:models.D.MEDIUM}).subscribe(qrCode=>this.qrCodeUrl$.next(URL.createObjectURL(qrCode))))}statusDisplay(status){return this.userHelper.tokenStatus(status)}showUser(){var _a;return!(this.authHelper.isSelf(this.data.user)||(null===(_a=this.data.user)||void 0===_a?void 0:_a.user)&&this.authHelper.isSelf(this.data.user.user))}valueLabel(){return this.data.type.physicalType===models.ab.NFC_TAG?this.i18n.token.label:this.i18n.token.value}showDeadLine(){return this.data.status===models.vb.ACTIVATION_EXPIRED||this.data.status===models.vb.PENDING}showExpiryDate(){return[models.vb.ACTIVE,models.vb.BLOCKED,models.vb.CANCELED,models.vb.EXPIRED].includes(this.data.status)}resolveMenu(view){return this.dataForUiHolder.role===models.kb.ADMINISTRATOR?new menu.a(menu.b.USER_TOKENS,{tokenType:view.type}):this.authHelper.isSelf(view.user)?new menu.a(menu.b.MY_TOKENS,{tokenType:view.type}):view.user.user&&this.authHelper.isSelf(view.user.user)?menu.b.MY_OPERATORS:this.dataForUiHolder.role===models.kb.BROKER?menu.b.MY_BROKERED_USERS:menu.b.SEARCH_USERS}}return ViewTokenComponent.ɵfac=function(t){return new(t||ViewTokenComponent)(core.Kb(core.r),core.Kb(user_helper_service.a),core.Kb(ngx_bootstrap_modal.b),core.Kb(tokens_service.a))},ViewTokenComponent.ɵcmp=core.Eb({type:ViewTokenComponent,selectors:[[\"view-token\"]],features:[core.ub],decls:5,vars:9,consts:[[3,\"ready\"],[\"last\",\"\",\"mode\",\"viewForm\",3,\"heading\",\"mobileHeading\",\"headingActions\"],[4,\"ngIf\"],[1,\"d-flex\",\"flex-grow-1\",\"flex-column\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\",4,\"ngIf\"],[3,\"label\"],[3,\"label\",4,\"ngIf\"],[\"kind\",\"fieldView\",\"labelPosition\",\"side\",3,\"label\"],[3,\"user\"],[1,\"mt-3\"],[1,\"qr-container\",\"image\",\"d-flex\",\"justify-content-center\",\"mb-4\",\"align-self-center\"],[\"alt\",\"QR-code\",\"class\",\"mw-100\",3,\"src\",4,\"ngIf\"],[\"alt\",\"QR-code\",1,\"mw-100\",3,\"src\"]],template:function(rf,ctx){1&rf&&(core.Qb(0,\"page-layout\",0),core.ac(1,\"async\"),core.Qb(2,\"page-content\",1),core.ac(3,\"async\"),core.Bc(4,ViewTokenComponent_ng_container_4_Template,12,10,\"ng-container\",2),core.Pb(),core.Pb()),2&rf&&(core.gc(\"ready\",core.bc(1,5,ctx.data$)),core.xb(2),core.gc(\"heading\",ctx.i18n.token.title.view(null==ctx.data?null:ctx.data.type.name))(\"mobileHeading\",ctx.i18n.token.mobileTitle.view(null==ctx.data?null:ctx.data.type.name))(\"headingActions\",core.bc(3,7,ctx.headingActions$)),core.xb(2),core.gc(\"ngIf\",ctx.data))},directives:[page_layout_component.a,page_content_component.a,common.t,label_value_component.a,user_link_component.a],pipes:[common.b,date_pipe.a,trust_pipe.a],encapsulation:2,changeDetection:0}),ViewTokenComponent})(),canActivate:[logged_user_guard.a]},{path:\":user/product-assignment\",component:list_product_assignment_component_ListProductAssignmentComponent,canActivate:[logged_user_guard.a]},{path:\":user/product-assignment/history\",component:view_product_assignment_history_component_ViewProductAssignmentHistoryComponent,canActivate:[logged_user_guard.a]},{path:\":user/privacy-settings\",component:view_privacy_settings_component_ViewPrivacySettingsComponent,canActivate:[logged_user_guard.a]},{path:\":user/privacy-settings/edit\",component:edit_privacy_settings_component_EditPrivacySettingsComponent,canActivate:[logged_user_guard.a]},{path:\":user/references/search\",component:search_references_component_SearchReferencesComponent,canActivate:[logged_user_guard.a]},{path:\"references/view/:id\",component:view_reference_component_ViewReferenceComponent,canActivate:[logged_user_guard.a]},{path:\"references/set/:from/:to\",component:set_reference_component_SetReferenceComponent,canActivate:[logged_user_guard.a]},{path:\"references/edit/:id\",component:set_reference_component_SetReferenceComponent,canActivate:[logged_user_guard.a]}]}];let users_routing_module_UsersRoutingModule=(()=>{class UsersRoutingModule{}return UsersRoutingModule.ɵmod=core.Ib({type:UsersRoutingModule}),UsersRoutingModule.ɵinj=core.Hb({factory:function(t){return new(t||UsersRoutingModule)},imports:[[router.i.forChild(usersRoutes)],router.i]}),UsersRoutingModule})(),users_module_UsersModule=(()=>{class UsersModule{}return UsersModule.ɵmod=core.Ib({type:UsersModule}),UsersModule.ɵinj=core.Hb({factory:function(t){return new(t||UsersModule)},imports:[[users_routing_module_UsersRoutingModule,ui_shared_module.a]]}),UsersModule})()}}]);","extractedComments":[]}